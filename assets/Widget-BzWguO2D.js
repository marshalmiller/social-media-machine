import{j as c,c as D,r as h}from"./index-ChHXuf40.js";import{E as z}from"./Edit-adgr_VB6.js";import{s as A}from"./createSimplePaletteValueFilter-CLdyqM5U.js";import{I}from"./IconButton-BXLcq7Mr.js";import{T as N}from"./TextField-MaMPnnBO.js";function R(l,n){var t;const i=n||new Map;for(let d=0;d<l.children.length;++d){const r=l.children[d],e=r.getAttribute("data-widget");if(e==="container")R(r,i);else if(e){i.has(e)||i.set(e,[]);const s=r.offsetWidth,f=r.offsetHeight;s>0&&f>0&&((t=i.get(e))==null||t.push({x:r.offsetLeft,y:r.offsetTop,width:s,height:f,id:r.id||"noid"}))}}return i}function Z(l,n){const i=[];for(const t of n){const d=l.get(t.start)||[],r=l.get(t.end)||[];for(const e of d)for(const s of r)i.push({id1:e.id,id2:s.id,x1:t.startPoint==="left"?e.x:t.startPoint==="right"?e.x+e.width:e.x+e.width/2,x2:t.endPoint==="left"?s.x:t.endPoint==="right"?s.x+s.width:s.x+s.width/2,y1:t.startPoint==="top"?e.y:t.startPoint==="bottom"?e.y+e.height:e.y+e.height/2,y2:t.endPoint==="top"?s.y:t.endPoint==="bottom"?s.y+s.height:s.y+s.height/2,direction:t.startPoint==="top"||t.startPoint==="bottom"?"vertical":"horizontal"})}return i}const S="_svglayer_1mavj_3",L="_workspace_1mavj_10",W="_container_1mavj_19",F={svglayer:S,workspace:L,container:W},v=20;function tt({lines:l}){return c.jsx("svg",{className:F.svglayer,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%","aria-hidden":!0,children:l.map((n,i)=>{const t=n.direction==="horizontal"?v:0,d=n.direction==="vertical"?v:0;return c.jsx("path",{d:`M ${n.x1} ${n.y1} C ${n.x1+t} ${n.y1+d}, ${n.x2-t} ${n.y2-d}, ${n.x2} ${n.y2}`,fill:"none",stroke:"rgb(174, 37, 174)",strokeWidth:"2",strokeDasharray:void 0},i)})})}const M="_widget_1yvgb_3",T="_widgetDisabled_1yvgb_32 _widget_1yvgb_3",V="_widgetActive_1yvgb_38 _widget_1yvgb_3",B="_widget_title_1yvgb_43",K="_widget_header_1yvgb_49",U="_widget_menu_1yvgb_76",H="_widget_content_1yvgb_81",u={widget:M,widgetDisabled:T,widgetActive:V,widget_title:B,widget_header:K,widget_menu:U,widget_content:H},q=A(N)({"& input":{fontSize:"14pt",fontWeight:"bold"}});function et({disabled:l,focus:n,title:i,setTitle:t,children:d,menu:r,className:e,hidden:s,dataWidget:f,id:b,noPadding:x,active:p,contentStyle:E,...w}){const{t:_}=D(),y=h.useRef(!0),m=h.useRef(null),a=h.useRef(null),C=l?u.widgetDisabled:p?u.widgetActive:u.widget,j=h.useCallback(()=>{var o;a.current&&((o=a.current.firstElementChild)==null?void 0:o.firstElementChild).blur()},[a]),$=h.useCallback(()=>{var o;a.current&&((o=a.current.firstElementChild)==null?void 0:o.firstElementChild).select()},[a]),k=h.useCallback(o=>{t&&t(o.target.value)},[t]),P=h.useCallback(o=>{var g;o.key==="Enter"&&(o.preventDefault(),a.current&&((g=a.current.firstElementChild)==null?void 0:g.firstElementChild).blur())},[a]);return h.useEffect(()=>{var o;n&&((o=m.current)!=null&&o.scrollIntoView)&&m.current.scrollIntoView({block:"center",inline:"center",behavior:y.current?"auto":"smooth"}),y.current=!1},[n]),h.useEffect(()=>{var o;if(t&&a.current){const g=(o=a.current.firstElementChild)==null?void 0:o.firstElementChild;g==null||g.setAttribute("size",`${Math.max(5,g.value.length)}`)}},[i,t]),c.jsxs("section",{...w,"data-testid":`widget-${i}`,ref:m,"data-widget":f,id:`widget-${b||f||"none"}`,style:{display:s?"none":"initial",...w.style},"aria-hidden":!!s,className:C+(e?` ${e}`:""),"aria-label":w["aria-label"]||i,children:[i!==void 0&&c.jsxs("header",{className:u.widget_header,children:[c.jsxs("h1",{className:u.widget_title,children:[!t&&i,t&&c.jsx(q,{ref:a,hiddenLabel:!0,name:_("widget.aria.editTitleInput",{value:i}),placeholder:_("widget.labels.titlePlaceholder"),size:"small",variant:"outlined",onBlur:j,value:i,onKeyDown:P,onChange:k})]}),t&&c.jsx(I,{"aria-label":_("widget.aria.editTitle"),size:"small",onClick:$,children:c.jsx(z,{fontSize:"small"})}),r&&c.jsx("div",{className:u.widget_menu,children:r})]}),c.jsx("div",{className:u.widget_content,style:{...E,padding:x?0:void 0},children:d})]})}export{tt as S,et as W,R as e,Z as g,F as s};
