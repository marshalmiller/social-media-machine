import{m as c,r as d,j as r}from"./index-02b2945e.js";import{s as g,T as h}from"./TableToolbar-006034e4.js";import{D as u}from"./DataGrid-d15b9d8f.js";import{a as f}from"./events-63b5f19e.js";import"./createSimplePaletteValueFilter-b2e05aa4.js";import"./EventManager-36c7dc68.js";import"./TextField-43fc95d4.js";import"./useSlot-050d423d.js";import"./IconButton-02bc1303.js";import"./Portal-a2b43acb.js";import"./useFormControl-e419a457.js";import"./Popover-f0f4a007.js";import"./Modal-2fc077e7.js";import"./debounce-517eeb3c.js";import"./Grow-605dc19c.js";import"./useSlotProps-2393cf25.js";import"./index-720786c4.js";import"./MenuItem-97c66a8d.js";import"./Typography-0738e1b3.js";import"./Close-223ffcde.js";import"./Popper-912b4204.js";import"./Chip-3c6505fa.js";import"./FormControlLabel-5a6070f0.js";import"./SwitchBase-b2e27e4d.js";import"./Button-c681e6d6.js";import"./InputAdornment-0277bb49.js";import"./Tooltip-875b66b4.js";import"./LinearProgress-51654afb.js";import"./useThemeProps-e50455dd.js";function x(){const{profiler:t}=c(),a=t.graph.getNodesByType("user"),s=t.graph.getNodesByType("content"),l=d.useMemo(()=>{const o=[...a];return o.sort((e,n)=>{var i,m;return(((i=t.getUserData(n))==null?void 0:i.engagement)||0)-(((m=t.getUserData(e))==null?void 0:m.engagement)||0)}),[{field:"image",headerName:"Picture",width:80,renderCell:e=>e.value?r.jsx("img",{src:e.value,width:48,height:48}):null},{field:"contentId",headerName:"ID",width:200},{field:"engagement",headerName:"Engagement",width:80,renderCell:e=>e.value.toFixed(1)},...o.map(e=>({field:e,headerName:t.getUserName(e),width:80,renderCell:n=>r.jsx("span",{style:{padding:"0.3rem",backgroundColor:`hsl(240, 80%, ${20-Math.min(20,Math.floor(n.value/n.row.maxEngagement*20))+80}%)`},children:n.value.toFixed(1)})}))]},[t,a]),p=s.map(o=>{const e=t.content.getContentStats(o),n={id:o,contentId:o,image:t.content.getContentData(o),engagement:(e==null?void 0:e.engagement)||0,maxEngagement:0};return a.forEach(i=>{const m=t.graph.getEdgeWeights("engaged",i,o)[0]||0;n[i]=m,n.maxEngagement=Math.max(n.maxEngagement,m)}),n});return r.jsx("div",{className:g.container,children:r.jsx("div",{className:g.tableContainer,"data-testid":"content-engagements",children:r.jsx(u,{slots:{toolbar:h},rows:p,columns:l,initialState:{columns:{columnVisibilityModel:{contentId:!1}},sorting:{sortModel:[{field:"engagement",sort:"desc"}]}}})})})}function J(){const[t,a]=d.useReducer(s=>++s,0);return f(()=>{a()},[],"refresh_graph"),r.jsx(x,{},`k-${t}`)}export{J as Component};
