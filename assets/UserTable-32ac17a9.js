import{m as c,j as r,r as h}from"./index-02b2945e.js";import{s as n,T as f}from"./TableToolbar-006034e4.js";import{D as g}from"./DataGrid-d15b9d8f.js";import{a as w}from"./events-63b5f19e.js";import"./createSimplePaletteValueFilter-b2e05aa4.js";import"./EventManager-36c7dc68.js";import"./TextField-43fc95d4.js";import"./useSlot-050d423d.js";import"./IconButton-02bc1303.js";import"./Portal-a2b43acb.js";import"./useFormControl-e419a457.js";import"./Popover-f0f4a007.js";import"./Modal-2fc077e7.js";import"./debounce-517eeb3c.js";import"./Grow-605dc19c.js";import"./useSlotProps-2393cf25.js";import"./index-720786c4.js";import"./MenuItem-97c66a8d.js";import"./Typography-0738e1b3.js";import"./Close-223ffcde.js";import"./Popper-912b4204.js";import"./Chip-3c6505fa.js";import"./FormControlLabel-5a6070f0.js";import"./SwitchBase-b2e27e4d.js";import"./Button-c681e6d6.js";import"./InputAdornment-0277bb49.js";import"./Tooltip-875b66b4.js";import"./LinearProgress-51654afb.js";import"./useThemeProps-e50455dd.js";const u=[{field:"image",headerName:"Picture",width:80,renderCell:i=>i.value?r.jsx("img",{src:i.value,width:48,height:48}):null},{field:"name",headerName:"User",width:200},{field:"userId",headerName:"ID",width:200},{field:"engagement",headerName:"Engagement",width:80,renderCell:i=>i.value.toFixed(1)},{field:"topic",headerName:"Main Topic",width:150},{field:"follows",headerName:"Followers",width:80},{field:"followed",headerName:"Followed",width:80},{field:"liked",headerName:"Liked",width:80},{field:"viewedImages",headerName:"Viewed",width:80},{field:"comments",headerName:"Comments",width:80},{field:"shares",headerName:"Shares",width:80},{field:"dwellTime",headerName:"View Time",width:80,renderCell:i=>`${(i.value/1e3).toFixed(1)}s`}];function v(){const{profiler:i,actionLog:m}=c(),s=i.graph.getNodesByType("user").map(l=>{var a;const e=i.getUserData(l),o=m.getActionLog(l);return{id:l,userId:l,image:e!=null&&e.image?i.content.getContentData(e.image):void 0,name:(e==null?void 0:e.name)||"No name",follows:(e==null?void 0:e.followerCount)||0,followed:(e==null?void 0:e.followsCount)||0,engagement:(e==null?void 0:e.engagement)||0,dwellTime:o.filter(t=>t.activity==="dwell").reduce((t,p)=>t+(p.value||0),0),topic:((a=e==null?void 0:e.affinities.topics.topics[0])==null?void 0:a.label)||"None",viewedImages:o.filter(t=>t.activity==="seen").length,liked:o.filter(t=>t.activity==="like").length,comments:o.filter(t=>t.activity==="comment").length,shares:o.filter(t=>t.activity==="share_public").length}});return r.jsx("div",{className:n.container,children:r.jsx("div",{className:n.tableContainer,"data-testid":"user-table",children:r.jsx(g,{slots:{toolbar:f},rows:s,columns:u,initialState:{columns:{columnVisibilityModel:{userId:!1,follows:!1}},sorting:{sortModel:[{field:"engagement",sort:"desc"}]}}})})})}function Q(){const[i,m]=h.useReducer(d=>++d,0);return w(()=>{m()},[],"refresh_graph"),r.jsx(v,{},`k-${i}`)}export{Q as Component};
