import{r as l,j as R}from"./index-ChHXuf40.js";import{a as Po,g as go,u as vo,c as X,s as _,e as yo,b as wo}from"./createSimplePaletteValueFilter-CLdyqM5U.js";import{u as Y}from"./useSlot-BVU38s2u.js";import{G as Eo}from"./Grow-B-eHZ5Kq.js";import{o as q,a as J}from"./Portal-BpkAKKpt.js";import{d as bo}from"./debounce-Be36O1Ab.js";import{P as xo,M as Ro}from"./Modal-DQ9h7Q_m.js";function To(o){return typeof o=="string"}function Co(o){return Po("MuiPopover",o)}go("MuiPopover",["root","paper"]);function K(o,t){let s=0;return typeof t=="number"?s=t:t==="center"?s=o.height/2:t==="bottom"&&(s=o.height),s}function Q(o,t){let s=0;return typeof t=="number"?s=t:t==="center"?s=o.width/2:t==="right"&&(s=o.width),s}function Z(o){return[o.horizontal,o.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function T(o){return typeof o=="function"?o():o}const Oo=o=>{const{classes:t}=o;return wo({root:["root"],paper:["paper"]},Co,t)},zo=_(Ro,{name:"MuiPopover",slot:"Root",overridesResolver:(o,t)=>t.root})({}),Mo=_(xo,{name:"MuiPopover",slot:"Paper",overridesResolver:(o,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ao=l.forwardRef(function(t,s){const C=vo({props:t,name:"MuiPopover"}),{action:oo,anchorEl:c,anchorOrigin:m={vertical:"top",horizontal:"left"},anchorPosition:O,anchorReference:P="anchorEl",children:to,className:eo,container:ro,elevation:z=8,marginThreshold:i=16,open:f,PaperProps:no={},slots:so={},slotProps:v={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:y=Eo,transitionDuration:w="auto",TransitionProps:{onEntering:M,...S}={},disableScrollLock:E=!1,...io}=C,u=(v==null?void 0:v.paper)??no,b=l.useRef(),x={...C,anchorOrigin:m,anchorReference:P,elevation:z,marginThreshold:i,externalPaperSlotProps:u,transformOrigin:g,TransitionComponent:y,transitionDuration:w,TransitionProps:S},k=Oo(x),W=l.useCallback(()=>{if(P==="anchorPosition")return O;const e=T(c),n=(e&&e.nodeType===1?e:q(b.current).body).getBoundingClientRect();return{top:n.top+K(n,m.vertical),left:n.left+Q(n,m.horizontal)}},[c,m.horizontal,m.vertical,O,P]),j=l.useCallback(e=>({vertical:K(e,g.vertical),horizontal:Q(e,g.horizontal)}),[g.horizontal,g.vertical]),D=l.useCallback(e=>{const r={width:e.offsetWidth,height:e.offsetHeight},n=j(r);if(P==="none")return{top:null,left:null,transformOrigin:Z(n)};const $=W();let d=$.top-n.vertical,h=$.left-n.horizontal;const F=d+r.height,G=h+r.width,I=J(T(c)),B=I.innerHeight-i,V=I.innerWidth-i;if(i!==null&&d<i){const a=d-i;d-=a,n.vertical+=a}else if(i!==null&&F>B){const a=F-B;d-=a,n.vertical+=a}if(i!==null&&h<i){const a=h-i;h-=a,n.horizontal+=a}else if(G>V){const a=G-V;h-=a,n.horizontal+=a}return{top:`${Math.round(d)}px`,left:`${Math.round(h)}px`,transformOrigin:Z(n)}},[c,P,W,j,i]),[ao,H]=l.useState(f),p=l.useCallback(()=>{const e=b.current;if(!e)return;const r=D(e);r.top!==null&&e.style.setProperty("top",r.top),r.left!==null&&(e.style.left=r.left),e.style.transformOrigin=r.transformOrigin,H(!0)},[D]);l.useEffect(()=>(E&&window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)),[c,E,p]);const lo=(e,r)=>{M&&M(e,r),p()},co=()=>{H(!1)};l.useEffect(()=>{f&&p()}),l.useImperativeHandle(oo,()=>f?{updatePosition:()=>{p()}}:null,[f,p]),l.useEffect(()=>{if(!f)return;const e=bo(()=>{p()}),r=J(c);return r.addEventListener("resize",e),()=>{e.clear(),r.removeEventListener("resize",e)}},[c,f,p]);let L=w;w==="auto"&&!y.muiSupportAuto&&(L=void 0);const po=ro||(c?q(T(c)).body:void 0),A={slots:so,slotProps:{...v,paper:u}},[fo,N]=Y("paper",{elementType:Mo,externalForwardedProps:A,additionalProps:{elevation:z,className:X(k.paper,u==null?void 0:u.className),style:ao?u.style:{...u.style,opacity:0}},ownerState:x}),[U,{slotProps:uo,...ho}]=Y("root",{elementType:zo,externalForwardedProps:A,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:po,open:f},ownerState:x,className:X(k.root,eo)}),mo=yo(b,N.ref);return R.jsx(U,{...ho,...!To(U)&&{slotProps:uo,disableScrollLock:E},...io,ref:s,children:R.jsx(y,{appear:!0,in:f,onEntering:lo,onExited:co,timeout:L,...S,children:R.jsx(fo,{...N,ref:mo,children:to})})})});export{Ao as P,Mo as a,To as i};
