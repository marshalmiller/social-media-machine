import{j as s,x as k,r as a,y as z,z as E,c as J,R as Q,v as X,i as Y,A as B}from"./index-02b2945e.js";import{u as ee}from"./logger-fbaa4ff5.js";import{b as te}from"./sessionState-6915fb12.js";import{c as h,I as F}from"./IconButton-02bc1303.js";import{v as re}from"./v4-eb618527.js";import{g as se,a as oe,s as M,m as ne,u as ae,c as le,b as ie,d as R}from"./createSimplePaletteValueFilter-b2e05aa4.js";import{u as v}from"./useSlot-050d423d.js";import{C as ce}from"./Close-223ffcde.js";import{P as ue}from"./Modal-2fc077e7.js";import{T as $,S as de}from"./TextField-43fc95d4.js";import{M as pe}from"./MenuItem-97c66a8d.js";function fe(e){return se("MuiAlert",e)}const me=oe("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),L=me,ge=h(s.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ve=h(s.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),xe=h(s.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Ce=h(s.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),he=e=>{const{variant:r,color:o,severity:t,classes:i}=e,c={root:["root",`color${k(o||t)}`,`${r}${k(o||t)}`,`${r}`],icon:["icon"],message:["message"],action:["action"]};return ie(c,fe,i)},Se=M(ue,{name:"MuiAlert",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.root,r[o.variant],r[`${o.variant}${k(o.color||o.severity)}`]]}})(ne(({theme:e})=>{const r=e.palette.mode==="light"?z:E,o=e.palette.mode==="light"?E:z;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(R(["light"])).map(([t])=>({props:{colorSeverity:t,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${t}Color`]:r(e.palette[t].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${t}StandardBg`]:o(e.palette[t].light,.9),[`& .${L.icon}`]:e.vars?{color:e.vars.palette.Alert[`${t}IconColor`]}:{color:e.palette[t].main}}})),...Object.entries(e.palette).filter(R(["light"])).map(([t])=>({props:{colorSeverity:t,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${t}Color`]:r(e.palette[t].light,.6),border:`1px solid ${(e.vars||e).palette[t].light}`,[`& .${L.icon}`]:e.vars?{color:e.vars.palette.Alert[`${t}IconColor`]}:{color:e.palette[t].main}}})),...Object.entries(e.palette).filter(R(["dark"])).map(([t])=>({props:{colorSeverity:t,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${t}FilledColor`],backgroundColor:e.vars.palette.Alert[`${t}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[t].dark:e.palette[t].main,color:e.palette.getContrastText(e.palette[t].main)}}}))]}})),ye=M("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,r)=>r.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Ae=M("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,r)=>r.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),be=M("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,r)=>r.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),O={success:s.jsx(ge,{fontSize:"inherit"}),warning:s.jsx(ve,{fontSize:"inherit"}),error:s.jsx(xe,{fontSize:"inherit"}),info:s.jsx(Ce,{fontSize:"inherit"})},Me=a.forwardRef(function(r,o){const t=ae({props:r,name:"MuiAlert"}),{action:i,children:c,className:l,closeText:u="Close",color:f,components:x={},componentsProps:j={},icon:S,iconMapping:y=O,onClose:C,role:I="alert",severity:m="success",slotProps:w={},slots:n={},variant:p="standard",...A}=t,d={...t,color:f,severity:m,variant:p,colorSeverity:f||m},b=he(d),g={slots:{closeButton:x.CloseButton,closeIcon:x.CloseIcon,...n},slotProps:{...j,...w}},[H,N]=v("root",{ref:o,shouldForwardComponentProp:!0,className:le(b.root,l),elementType:Se,externalForwardedProps:{...g,...A},ownerState:d,additionalProps:{role:I,elevation:0}}),[W,D]=v("icon",{className:b.icon,elementType:ye,externalForwardedProps:g,ownerState:d}),[U,V]=v("message",{className:b.message,elementType:Ae,externalForwardedProps:g,ownerState:d}),[P,T]=v("action",{className:b.action,elementType:be,externalForwardedProps:g,ownerState:d}),[K,q]=v("closeButton",{elementType:F,externalForwardedProps:g,ownerState:d}),[Z,G]=v("closeIcon",{elementType:ce,externalForwardedProps:g,ownerState:d});return s.jsxs(H,{...N,children:[S!==!1?s.jsx(W,{...D,children:S||y[m]||O[m]}):null,s.jsx(U,{...V,children:c}),i!=null?s.jsx(P,{...T,children:i}):null,i==null&&C?s.jsx(P,{...T,children:s.jsx(K,{size:"small","aria-label":u,title:u,color:"inherit",onClick:C,...q,children:s.jsx(Z,{fontSize:"small",...G})})}):null]})}),je=Me,Ie="_userContainer_yurap_1",we={userContainer:Ie},Re=h(s.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore"),_=re();function We(){return a.useEffect(()=>{if(!window.BroadcastChannel)return;const e=new window.BroadcastChannel("genai-tab-check");return e.onmessage=r=>{r.data==="check_tab"&&e.postMessage(_)},()=>{e.close()}},[]),null}function $e(){const[e,r]=a.useState(!1);return a.useEffect(()=>{if(!window.BroadcastChannel)return;const o=new window.BroadcastChannel("genai-tab-check");return o.onmessage=t=>{t.data!==_&&r(!0)},o.postMessage("check_tab"),()=>{o.close()}},[]),e}function ke(){const e=Math.floor(Math.random()*20);for(let r=0;r<e;++r)B();return B()}function De({onUsername:e,autoUsername:r}){const{t:o}=J(),t=a.useRef(null),i=a.useRef(null),c=ee(),[l,u]=a.useState({}),f=Q(te),[x,j]=a.useState(!1),S=$e(),y=X(),C=a.useMemo(()=>r?`${ke()}${Math.floor(Math.random()*100)}`:"",[r]),I=a.useCallback(n=>{if(u(p=>({...p,username:void 0})),!c&&n.key==="Enter"){const p=n.target.value;e(p)}},[e,c]),m=a.useCallback(()=>{u(n=>({...n,fullname:void 0}))},[]),w=a.useCallback(n=>{const p=n.target.value;y.setUser(p);const A=f.find(d=>d.id===p);A&&e(A.name)},[e,f,y]);return s.jsxs("div",{className:we.userContainer,children:[S&&s.jsx(je,{severity:"warning",children:o("feed.messages.alreadyOpen")}),r?s.jsx($,{label:o("feed.labels.enterUsername"),required:!0,value:C,disabled:!0,error:!!l.username,helperText:l.username?o(`feed.messages.usernameError.${l.username}`):void 0}):s.jsx($,{inputRef:t,label:o("feed.labels.enterUsername"),onKeyDown:I,required:!0,error:!!l.username,helperText:l.username?o(`feed.messages.usernameError.${l.username}`):void 0}),c&&s.jsx($,{inputRef:i,required:!0,label:o("feed.labels.enterFullname"),error:!!l.fullname,onKeyDown:m,helperText:l.fullname?o(`feed.messages.fullnameError.${l.fullname}`):void 0}),s.jsx(Y,{onClick:()=>{if(r)e(C);else if(t.current){if(!t.current.value){u({username:"missing"});return}if(t.current.value.length>30){u({username:"long"});return}if(t.current.value.length<3){u({username:"short"});return}if(c&&i.current){if(!i.current.value){u({fullname:"missing"});return}c("enter_username",{username:t.current.value,fullname:i.current.value})}e(t.current.value)}},variant:"contained",children:o("feed.actions.enterUser")}),!x&&s.jsx("div",{children:s.jsx(F,{onClick:()=>j(!0),"aria-label":o("feed.aria.restoreUser"),children:s.jsx(Re,{})})}),x&&s.jsx(de,{value:"",onChange:w,children:f.map(n=>s.jsx(pe,{value:n.id,children:n.name},n.id))})]})}export{De as E,We as T};
