import{l as c,r as l,j as r}from"./index-ChHXuf40.js";import{s as g,T as h}from"./TableToolbar-iL5UqPm0.js";import{D as u}from"./DataGrid-CeymwZOP.js";import{a as f}from"./events-DLU3_18Y.js";import"./createSimplePaletteValueFilter-CLdyqM5U.js";import"./EventManager-bMdfXZ0t.js";import"./TextField-MaMPnnBO.js";import"./useSlot-BVU38s2u.js";import"./IconButton-BXLcq7Mr.js";import"./Portal-BpkAKKpt.js";import"./useFormControl-BOywDUuq.js";import"./Popover-3SaqCWbK.js";import"./Grow-B-eHZ5Kq.js";import"./debounce-Be36O1Ab.js";import"./Modal-DQ9h7Q_m.js";import"./index-BfNLg11A.js";import"./useSlotProps-BP5ya9qr.js";import"./MenuItem-C3-73DVz.js";import"./Typography-8VlALfQ4.js";import"./Close-CI_IAYQS.js";import"./Popper-JH9MxI6g.js";import"./Chip-BlC7IdM3.js";import"./Tooltip-cL7nY1NY.js";import"./InputAdornment-CUBj53no.js";import"./Button-CbhWiO3H.js";import"./FormControlLabel-BtHiVqzu.js";import"./SwitchBase-CuDlXbI3.js";import"./LinearProgress-li3lTmA_.js";import"./useThemeProps-Rdar5cgY.js";function x(){const{profiler:t}=c(),a=t.graph.getNodesByType("user"),s=t.graph.getNodesByType("content"),d=l.useMemo(()=>{const o=[...a];return o.sort((e,n)=>{var i,m;return(((i=t.getUserData(n))==null?void 0:i.engagement)||0)-(((m=t.getUserData(e))==null?void 0:m.engagement)||0)}),[{field:"image",headerName:"Picture",width:80,renderCell:e=>e.value?r.jsx("img",{src:e.value,width:48,height:48}):null},{field:"contentId",headerName:"ID",width:200},{field:"engagement",headerName:"Engagement",width:80,renderCell:e=>e.value.toFixed(1)},...o.map(e=>({field:e,headerName:t.getUserName(e),width:80,renderCell:n=>r.jsx("span",{style:{padding:"0.3rem",backgroundColor:`hsl(240, 80%, ${20-Math.min(20,Math.floor(n.value/n.row.maxEngagement*20))+80}%)`},children:n.value.toFixed(1)})}))]},[t,a]),p=s.map(o=>{const e=t.content.getContentStats(o),n={id:o,contentId:o,image:t.content.getContentData(o),engagement:(e==null?void 0:e.engagement)||0,maxEngagement:0};return a.forEach(i=>{const m=t.graph.getEdgeWeights("engaged",i,o)[0]||0;n[i]=m,n.maxEngagement=Math.max(n.maxEngagement,m)}),n});return r.jsx("div",{className:g.container,children:r.jsx("div",{className:g.tableContainer,"data-testid":"content-engagements",children:r.jsx(u,{slots:{toolbar:h},rows:p,columns:d,initialState:{columns:{columnVisibilityModel:{contentId:!1}},sorting:{sortModel:[{field:"engagement",sort:"desc"}]}}})})})}function J(){const[t,a]=l.useReducer(s=>++s,0);return f(()=>{a()},[],"refresh_graph"),r.jsx(x,{},`k-${t}`)}export{J as Component};
