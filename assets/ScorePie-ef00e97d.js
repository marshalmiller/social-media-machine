import{j as I,_ as H,r as re,G as _e}from"./index-02b2945e.js";import{c as ke}from"./colours.module-29b309d0.js";import{a as me,s as xe,_ as G,b as Re,g as Ae}from"./createSimplePaletteValueFilter-b2e05aa4.js";import{w as Ie,h as le,e as T,t as ve,c as E,s as F,m as te,a as ce,b as ue,p as ge,d as je,f as W,g as S,i as U,j as we,k as be,u as Me,l as Q,n as ye,o as Pe,q as he,r as He,D as Se,v as Te,R as Fe,x as Ne,C as $e,y as Be,z as De,A as Ue,B as Ee}from"./ChartsOverlay-21326cdb.js";import{u as Oe}from"./useThemeProps-e50455dd.js";function Ve(e){return e.innerRadius}function We(e){return e.outerRadius}function Ge(e){return e.startAngle}function Xe(e){return e.endAngle}function qe(e){return e&&e.padAngle}function Ke(e,i,n,a,r,d,g,t){var R=n-e,u=a-i,s=g-r,b=t-d,l=b*R-s*u;if(!(l*l<T))return l=(s*(i-d)-b*(e-r))/l,[e+l*R,i+l*u]}function J(e,i,n,a,r,d,g){var t=e-n,R=i-a,u=(g?d:-d)/W(t*t+R*R),s=u*R,b=-u*t,l=e+s,o=i+b,m=n+s,p=a+b,_=(l+m)/2,h=(o+p)/2,f=m-l,A=p-o,y=f*f+A*A,P=r-d,L=l*p-m*o,v=(A<0?-1:1)*W(we(0,P*P*y-L*L)),j=(L*A-f*v)/y,w=(-L*f-A*v)/y,C=(L*A+f*v)/y,k=(-L*f+A*v)/y,M=j-_,c=w-h,x=C-_,N=k-h;return M*M+c*c>x*x+N*N&&(j=C,w=k),{cx:j,cy:w,x01:-s,y01:-b,x11:j*(r/P-1),y11:w*(r/P-1)}}function Le(){var e=Ve,i=We,n=U(0),a=null,r=Ge,d=Xe,g=qe,t=null,R=Ie(u);function u(){var s,b,l=+e.apply(this,arguments),o=+i.apply(this,arguments),m=r.apply(this,arguments)-le,p=d.apply(this,arguments)-le,_=ce(p-m),h=p>m;if(t||(t=s=R()),o<l&&(b=o,o=l,l=b),!(o>T))t.moveTo(0,0);else if(_>ve-T)t.moveTo(o*E(m),o*F(m)),t.arc(0,0,o,m,p,!h),l>T&&(t.moveTo(l*E(p),l*F(p)),t.arc(0,0,l,p,m,h));else{var f=m,A=p,y=m,P=p,L=_,v=_,j=g.apply(this,arguments)/2,w=j>T&&(a?+a.apply(this,arguments):W(l*l+o*o)),C=te(ce(o-l)/2,+n.apply(this,arguments)),k=C,M=C,c,x;if(w>T){var N=ue(w/l*F(j)),$=ue(w/o*F(j));(L-=N*2)>T?(N*=h?1:-1,y+=N,P-=N):(L=0,y=P=(m+p)/2),(v-=$*2)>T?($*=h?1:-1,f+=$,A-=$):(v=0,f=A=(m+p)/2)}var D=o*E(f),V=o*F(f),X=l*E(P),q=l*F(P);if(C>T){var K=o*E(A),Y=o*F(A),Z=l*E(y),z=l*F(y),B;if(_<ge)if(B=Ke(D,V,Z,z,K,Y,X,q)){var ee=D-B[0],ne=V-B[1],ie=K-B[0],se=Y-B[1],oe=1/F(je((ee*ie+ne*se)/(W(ee*ee+ne*ne)*W(ie*ie+se*se)))/2),de=W(B[0]*B[0]+B[1]*B[1]);k=te(C,(l-de)/(oe-1)),M=te(C,(o-de)/(oe+1))}else k=M=0}v>T?M>T?(c=J(Z,z,D,V,o,M,h),x=J(K,Y,X,q,o,M,h),t.moveTo(c.cx+c.x01,c.cy+c.y01),M<C?t.arc(c.cx,c.cy,M,S(c.y01,c.x01),S(x.y01,x.x01),!h):(t.arc(c.cx,c.cy,M,S(c.y01,c.x01),S(c.y11,c.x11),!h),t.arc(0,0,o,S(c.cy+c.y11,c.cx+c.x11),S(x.cy+x.y11,x.cx+x.x11),!h),t.arc(x.cx,x.cy,M,S(x.y11,x.x11),S(x.y01,x.x01),!h))):(t.moveTo(D,V),t.arc(0,0,o,f,A,!h)):t.moveTo(D,V),!(l>T)||!(L>T)?t.lineTo(X,q):k>T?(c=J(X,q,K,Y,l,-k,h),x=J(D,V,Z,z,l,-k,h),t.lineTo(c.cx+c.x01,c.cy+c.y01),k<C?t.arc(c.cx,c.cy,k,S(c.y01,c.x01),S(x.y01,x.x01),!h):(t.arc(c.cx,c.cy,k,S(c.y01,c.x01),S(c.y11,c.x11),!h),t.arc(0,0,l,S(c.cy+c.y11,c.cx+c.x11),S(x.cy+x.y11,x.cx+x.x11),h),t.arc(x.cx,x.cy,k,S(x.y11,x.x11),S(x.y01,x.x01),!h))):t.arc(0,0,l,P,y,h)}if(t.closePath(),s)return t=null,s+""||null}return u.centroid=function(){var s=(+e.apply(this,arguments)+ +i.apply(this,arguments))/2,b=(+r.apply(this,arguments)+ +d.apply(this,arguments))/2-ge/2;return[E(b)*s,F(b)*s]},u.innerRadius=function(s){return arguments.length?(e=typeof s=="function"?s:U(+s),u):e},u.outerRadius=function(s){return arguments.length?(i=typeof s=="function"?s:U(+s),u):i},u.cornerRadius=function(s){return arguments.length?(n=typeof s=="function"?s:U(+s),u):n},u.padRadius=function(s){return arguments.length?(a=s==null?null:typeof s=="function"?s:U(+s),u):a},u.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:U(+s),u):r},u.endAngle=function(s){return arguments.length?(d=typeof s=="function"?s:U(+s),u):d},u.padAngle=function(s){return arguments.length?(g=typeof s=="function"?s:U(+s),u):g},u.context=function(s){return arguments.length?(t=s??null,u):t},u}function O(e,i){if(typeof e=="number")return e;if(e==="100%")return i;if(e.endsWith("%")){const n=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(n))return n*i/100}if(e.endsWith("px")){const n=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}const Ye=["classes","color","cornerRadius","dataIndex","endAngle","id","innerRadius","isFaded","isHighlighted","onClick","outerRadius","paddingAngle","startAngle","highlightScope"];function Je(e){return Ae("MuiPieArc",e)}me("MuiPieArc",["root","highlighted","faded"]);const Qe=e=>{const{classes:i,id:n,isFaded:a,isHighlighted:r,dataIndex:d}=e,g={root:["root",`series-${n}`,`data-index-${d}`,r&&"highlighted",a&&"faded"]};return Re(g,Je,i)},Ze=xe(be.path,{name:"MuiPieArc",slot:"Root",overridesResolver:(e,i)=>i.arc})(({theme:e})=>({stroke:(e.vars||e).palette.background.paper,transition:"opacity 0.2s ease-in, fill 0.2s ease-in, filter 0.2s ease-in"}));function ze(e){const{classes:i,color:n,cornerRadius:a,dataIndex:r,endAngle:d,id:g,innerRadius:t,isFaded:R,isHighlighted:u,onClick:s,outerRadius:b,paddingAngle:l,startAngle:o}=e,m=G(e,Ye),p={id:g,dataIndex:r,classes:i,color:n,isFaded:R,isHighlighted:u},_=Qe(p),h=Me();return I.jsx(Ze,H({d:Q([o,d,l,t,b,a],(f,A,y,P,L,v)=>Le().cornerRadius(v)({padAngle:y,startAngle:f,endAngle:A,innerRadius:P,outerRadius:L})),visibility:Q([o,d],(f,A)=>f===A?"hidden":"visible"),onClick:s,cursor:s?"pointer":"unset",ownerState:p,className:_.root,fill:p.color,opacity:p.isFaded?.3:1,filter:p.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round"},m,h({type:"pie",seriesId:g,dataIndex:r})))}const en={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,color:g,isFaded:t})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:n,startAngle:(a+r)/2,endAngle:(a+r)/2,paddingAngle:d,fill:g,opacity:t?.3:1}),leave:({innerRadius:e,startAngle:i,endAngle:n})=>({innerRadius:e,outerRadius:e,startAngle:(i+n)/2,endAngle:(i+n)/2}),enter:({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a})=>({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a}),update:({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,color:g,isFaded:t})=>({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,fill:g,opacity:t?.3:1}),config:{tension:120,friction:14,clamp:!0}},nn={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,arcLabelRadius:n,cornerRadius:a,startAngle:r,endAngle:d,paddingAngle:g})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:a,arcLabelRadius:n,startAngle:(r+d)/2,endAngle:(r+d)/2,paddingAngle:g,opacity:0}),leave:({innerRadius:e,startAngle:i,endAngle:n})=>({innerRadius:e,outerRadius:e,arcLabelRadius:e,startAngle:(i+n)/2,endAngle:(i+n)/2,opacity:0}),enter:({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a,arcLabelRadius:r})=>({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a,arcLabelRadius:r,opacity:1}),update:({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,arcLabelRadius:g})=>({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,arcLabelRadius:g,opacity:1}),config:{tension:120,friction:14,clamp:!0}};function Ce(e){const{id:i,data:n,faded:a,highlighted:r,paddingAngle:d=0,innerRadius:g=0,arcLabelRadius:t,outerRadius:R,cornerRadius:u=0}=e,{isFaded:s,isHighlighted:b}=ye();return re.useMemo(()=>n.map((o,m)=>{const p={seriesId:i,dataIndex:m},_=b(p),h=!_&&s(p),f=H({additionalRadius:0},h&&a||_&&r||{}),A=Math.max(0,Math.PI*(f.paddingAngle??d)/180),y=Math.max(0,f.innerRadius??g),P=Math.max(0,f.outerRadius??R+f.additionalRadius),L=f.cornerRadius??u,v=f.arcLabelRadius??t??(y+P)/2;return H({},o,f,{isFaded:h,isHighlighted:_,paddingAngle:A,innerRadius:y,outerRadius:P,cornerRadius:L,arcLabelRadius:v})}),[u,g,R,d,t,n,a,r,s,b,i])}const sn=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function tn(e){const{slots:i,slotProps:n,innerRadius:a=0,outerRadius:r,cornerRadius:d=0,paddingAngle:g=0,id:t,highlighted:R,faded:u={additionalRadius:-5},data:s,onItemClick:b,skipAnimation:l}=e,o=G(e,sn),m=Ce({innerRadius:a,outerRadius:r,cornerRadius:d,paddingAngle:g,id:t,highlighted:R,faded:u,data:s}),p=Pe(m,H({},en,{immediate:l})),{highlightScope:_}=ye();if(s.length===0)return null;const h=(i==null?void 0:i.pieArc)??ze;return I.jsx("g",H({},o,{children:p(({startAngle:f,endAngle:A,paddingAngle:y,innerRadius:P,outerRadius:L,cornerRadius:v},j,w,C)=>I.jsx(h,H({startAngle:f,endAngle:A,paddingAngle:y,innerRadius:P,outerRadius:L,cornerRadius:v,id:t,color:j.color,dataIndex:C,highlightScope:_,isFaded:j.isFaded,isHighlighted:j.isHighlighted,onClick:b&&(k=>{b(k,{type:"pie",seriesId:t,dataIndex:C},j)})},n==null?void 0:n.pieArc)))}))}const an=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style"];function rn(e){return Ae("MuiPieArcLabel",e)}me("MuiPieArcLabel",["root","highlighted","faded"]);const on=e=>{const{classes:i,id:n,isFaded:a,isHighlighted:r}=e,d={root:["root",`series-${n}`,r&&"highlighted",a&&"faded"]};return Re(d,rn,i)},dn=xe(be.text,{name:"MuiPieArcLabel",slot:"Root",overridesResolver:(e,i)=>i.root})(({theme:e})=>({fill:(e.vars||e).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none"})),pe=(e,i)=>(n,a,r,d,g)=>{if(!e)return 0;const[t,R]=Le().cornerRadius(g).centroid({padAngle:r,startAngle:n,endAngle:a,innerRadius:d,outerRadius:d});return i==="x"?t:R};function ln(e){const{id:i,classes:n,color:a,startAngle:r,endAngle:d,paddingAngle:g,arcLabelRadius:t,cornerRadius:R,formattedArcLabel:u,isHighlighted:s,isFaded:b,style:l}=e,o=G(e,an),p=on({id:i,classes:n,color:a,isFaded:b,isHighlighted:s});return I.jsx(dn,H({className:p.root},o,{style:H({x:Q([r,d,g,t,R],pe(u,"x")),y:Q([r,d,g,t,R],pe(u,"y"))},l),children:u}))}const cn=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],un=["startAngle","endAngle","paddingAngle","innerRadius","outerRadius","arcLabelRadius","cornerRadius"],gn=180/Math.PI;function hn(e,i,n){var r;if(!e||(n.endAngle-n.startAngle)*gn<i)return null;switch(e){case"label":return he(n.label,"arc");case"value":return(r=n.value)==null?void 0:r.toString();case"formattedValue":return n.formattedValue;default:return e(H({},n,{label:he(n.label,"arc")}))}}function pn(e){const{arcLabel:i,arcLabelMinAngle:n=0,arcLabelRadius:a,cornerRadius:r=0,data:d,faded:g={additionalRadius:-5},highlighted:t,id:R,innerRadius:u,outerRadius:s,paddingAngle:b=0,skipAnimation:l,slotProps:o,slots:m}=e,p=G(e,cn),_=Ce({innerRadius:u,outerRadius:s,arcLabelRadius:a,cornerRadius:r,paddingAngle:b,id:R,highlighted:t,faded:g,data:d}),h=Pe(_,H({},nn,{immediate:l}));if(d.length===0)return null;const f=(m==null?void 0:m.pieArcLabel)??ln;return I.jsx("g",H({},p,{children:h((A,y)=>{let{startAngle:P,endAngle:L,paddingAngle:v,innerRadius:j,outerRadius:w,arcLabelRadius:C,cornerRadius:k}=A,M=G(A,un);return I.jsx(f,H({startAngle:P,endAngle:L,paddingAngle:v,innerRadius:j,outerRadius:w,arcLabelRadius:C,cornerRadius:k,style:M,id:R,color:y.color,isFaded:y.isFaded,isHighlighted:y.isHighlighted,formattedArcLabel:hn(i,n,y)},o==null?void 0:o.pieArcLabel))})}))}function fe(e,i){const{height:n,width:a}=i,{cx:r,cy:d}=e,g=Math.min(a,n)/2,t=O(r??"50%",a),R=O(d??"50%",n);return{cx:t,cy:R,availableRadius:g}}function fn(e){const{skipAnimation:i,slots:n,slotProps:a,onItemClick:r}=e,d=He(),{left:g,top:t,width:R,height:u}=re.useContext(Se),s=Te(i);if(d===void 0)return null;const{series:b,seriesOrder:l}=d;return I.jsxs("g",{children:[l.map(o=>{const{innerRadius:m,outerRadius:p,cornerRadius:_,paddingAngle:h,data:f,cx:A,cy:y,highlighted:P,faded:L}=b[o],{cx:v,cy:j,availableRadius:w}=fe({cx:A,cy:y},{width:R,height:u}),C=O(p??w,w),k=O(m??0,w);return I.jsx("g",{transform:`translate(${g+v}, ${t+j})`,children:I.jsx(tn,{innerRadius:k,outerRadius:C,cornerRadius:_,paddingAngle:h,id:o,data:f,skipAnimation:s,highlighted:P,faded:L,onItemClick:r,slots:n,slotProps:a})},o)}),l.map(o=>{const{innerRadius:m,outerRadius:p,arcLabelRadius:_,cornerRadius:h,paddingAngle:f,arcLabel:A,arcLabelMinAngle:y,data:P,cx:L,cy:v}=b[o],{cx:j,cy:w,availableRadius:C}=fe({cx:L,cy:v},{width:R,height:u}),k=O(p??C,C),M=O(m??0,C),c=_===void 0?(k+M)/2:O(_,C);return I.jsx("g",{transform:`translate(${g+j}, ${t+w})`,children:I.jsx(pn,{innerRadius:M,outerRadius:k??C,arcLabelRadius:c,cornerRadius:h,paddingAngle:f,id:o,data:P,skipAnimation:s,arcLabel:A,arcLabelMinAngle:y,slots:n,slotProps:a})},o)})]})}const mn=["xAxis","yAxis","series","width","height","margin","colors","sx","tooltip","axisHighlight","skipAnimation","legend","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className"],xn={top:5,bottom:5,left:5,right:100},Rn={top:5,bottom:5,left:100,right:5},An=re.forwardRef(function(i,n){const a=Oe({props:i,name:"MuiPieChart"}),{xAxis:r,yAxis:d,series:g,width:t,height:R,margin:u,colors:s,sx:b,tooltip:l={trigger:"item"},axisHighlight:o={x:"none",y:"none"},skipAnimation:m,legend:p,topAxis:_=null,leftAxis:h=null,rightAxis:f=null,bottomAxis:A=null,children:y,slots:P,slotProps:L,onItemClick:v,loading:j,highlightedItem:w,onHighlightChange:C,className:k}=a,M=G(a,mn),c=_e(),x=H({},c?Rn:xn,u),N=H({direction:"column",position:{vertical:"middle",horizontal:c?"left":"right"}},p);return I.jsxs(Fe,H({},M,{ref:n,series:g.map($=>H({type:"pie"},$)),width:t,height:R,margin:x,xAxis:r??[{id:Ne,scaleType:"point",data:[...new Array(Math.max(...g.map($=>$.data.length)))].map(($,D)=>D)}],yAxis:d,colors:s,sx:b,disableAxisListener:(l==null?void 0:l.trigger)!=="axis"&&(o==null?void 0:o.x)==="none"&&(o==null?void 0:o.y)==="none",highlightedItem:w,onHighlightChange:C,className:k,skipAnimation:m,children:[I.jsx($e,{topAxis:_,leftAxis:h,rightAxis:f,bottomAxis:A,slots:P,slotProps:L}),I.jsx(fn,{slots:P,slotProps:L,onItemClick:v}),I.jsx(Be,{loading:j,slots:P,slotProps:L}),I.jsx(De,H({},N,{slots:P,slotProps:L})),I.jsx(Ue,H({},o)),!j&&I.jsx(Ee,H({},l,{slots:P,slotProps:L})),y]}))}),bn="#dfe5e8",yn="#e8f0fe",Pn="#444",Ln="#008297",Cn="_content_1bbdb_3",_n="_contentColoured_1bbdb_20 _content_1bbdb_3",kn="_message_1bbdb_25",In="_chart_1bbdb_29",vn="_tableList_1bbdb_41",jn="_scoreBox_1bbdb_60",wn="_scoreValue_1bbdb_76",Mn="_scoreList_1bbdb_88",Hn="_scoreRow_1bbdb_97",Sn="_listIcon_1bbdb_104",Tn="_listColumn_1bbdb_121",Fn="_units_1bbdb_131",Nn="_miniGraphBox_1bbdb_136",ae={workspaceBg:bn,bgSubdued1:yn,textDark:Pn,primary:Ln,content:Cn,contentColoured:_n,message:kn,chart:In,tableList:vn,scoreBox:jn,scoreValue:wn,scoreList:Mn,scoreRow:Hn,listIcon:Sn,listColumn:Tn,units:Fn,miniGraphBox:Nn};function On({label:e,value:i,maxValue:n,size:a=80,showValue:r,color:d="#444444",bgColor:g=ke.bgSubdued1,valueFormat:t="percent"}){return I.jsxs("div",{className:ae.scoreBox,children:[I.jsx(An,{width:a,height:a,series:[{outerRadius:a/2-5,innerRadius:Math.floor((a/2-5)*.8),paddingAngle:4,startAngle:-180,endAngle:180,cx:a/2-5,cy:a/2-5,data:[{value:i,color:d},{value:n-i,color:g}]}]}),r&&I.jsxs("div",{className:ae.scoreValue,style:{height:`${a}px`,fontSize:`${Math.floor(a*.25)}px`},children:[t==="percent"?`${(i*100).toFixed(0)}`:i.toFixed(1),t==="percent"&&I.jsx("span",{className:ae.units,children:"%"})]}),e&&I.jsx("label",{children:e})]})}export{An as P,On as S,ae as s};
