var kW=Object.defineProperty;var CW=(t,e,n)=>e in t?kW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fi=(t,e,n)=>(CW(t,typeof e!="symbol"?e+"":e,n),n);function Xy(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ed(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $W(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var CO={exports:{}},Yy={},$O={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=Symbol.for("react.element"),IW=Symbol.for("react.portal"),EW=Symbol.for("react.fragment"),TW=Symbol.for("react.strict_mode"),_W=Symbol.for("react.profiler"),NW=Symbol.for("react.provider"),RW=Symbol.for("react.context"),AW=Symbol.for("react.forward_ref"),DW=Symbol.for("react.suspense"),OW=Symbol.for("react.memo"),PW=Symbol.for("react.lazy"),mT=Symbol.iterator;function LW(t){return t===null||typeof t!="object"?null:(t=mT&&t[mT]||t["@@iterator"],typeof t=="function"?t:null)}var IO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EO=Object.assign,TO={};function Td(t,e,n){this.props=t,this.context=e,this.refs=TO,this.updater=n||IO}Td.prototype.isReactComponent={};Td.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Td.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _O(){}_O.prototype=Td.prototype;function uC(t,e,n){this.props=t,this.context=e,this.refs=TO,this.updater=n||IO}var cC=uC.prototype=new _O;cC.constructor=uC;EO(cC,Td.prototype);cC.isPureReactComponent=!0;var gT=Array.isArray,NO=Object.prototype.hasOwnProperty,dC={current:null},RO={key:!0,ref:!0,__self:!0,__source:!0};function AO(t,e,n){var r,s={},o=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)NO.call(e,r)&&!RO.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:lp,type:t,key:o,ref:i,props:s,_owner:dC.current}}function FW(t,e){return{$$typeof:lp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hC(t){return typeof t=="object"&&t!==null&&t.$$typeof===lp}function MW(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yT=/\/+/g;function nb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MW(""+t.key):e.toString(36)}function n0(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case lp:case IW:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+nb(i,0):r,gT(s)?(n="",t!=null&&(n=t.replace(yT,"$&/")+"/"),n0(s,e,n,"",function(l){return l})):s!=null&&(hC(s)&&(s=FW(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(yT,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",gT(t))for(var a=0;a<t.length;a++){o=t[a];var u=r+nb(o,a);i+=n0(o,e,n,u,s)}else if(u=LW(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=r+nb(o,a++),i+=n0(o,e,n,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ng(t,e,n){if(t==null)return t;var r=[],s=0;return n0(t,r,"","",function(o){return e.call(n,o,s++)}),r}function zW(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var os={current:null},r0={transition:null},BW={ReactCurrentDispatcher:os,ReactCurrentBatchConfig:r0,ReactCurrentOwner:dC};function DO(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:ng,forEach:function(t,e,n){ng(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ng(t,function(){e++}),e},toArray:function(t){return ng(t,function(e){return e})||[]},only:function(t){if(!hC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};It.Component=Td;It.Fragment=EW;It.Profiler=_W;It.PureComponent=uC;It.StrictMode=TW;It.Suspense=DW;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BW;It.act=DO;It.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=EO({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=dC.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)NO.call(e,u)&&!RO.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:lp,type:t.type,key:s,ref:o,props:r,_owner:i}};It.createContext=function(t){return t={$$typeof:RW,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NW,_context:t},t.Consumer=t};It.createElement=AO;It.createFactory=function(t){var e=AO.bind(null,t);return e.type=t,e};It.createRef=function(){return{current:null}};It.forwardRef=function(t){return{$$typeof:AW,render:t}};It.isValidElement=hC;It.lazy=function(t){return{$$typeof:PW,_payload:{_status:-1,_result:t},_init:zW}};It.memo=function(t,e){return{$$typeof:OW,type:t,compare:e===void 0?null:e}};It.startTransition=function(t){var e=r0.transition;r0.transition={};try{t()}finally{r0.transition=e}};It.unstable_act=DO;It.useCallback=function(t,e){return os.current.useCallback(t,e)};It.useContext=function(t){return os.current.useContext(t)};It.useDebugValue=function(){};It.useDeferredValue=function(t){return os.current.useDeferredValue(t)};It.useEffect=function(t,e){return os.current.useEffect(t,e)};It.useId=function(){return os.current.useId()};It.useImperativeHandle=function(t,e,n){return os.current.useImperativeHandle(t,e,n)};It.useInsertionEffect=function(t,e){return os.current.useInsertionEffect(t,e)};It.useLayoutEffect=function(t,e){return os.current.useLayoutEffect(t,e)};It.useMemo=function(t,e){return os.current.useMemo(t,e)};It.useReducer=function(t,e,n){return os.current.useReducer(t,e,n)};It.useRef=function(t){return os.current.useRef(t)};It.useState=function(t){return os.current.useState(t)};It.useSyncExternalStore=function(t,e,n){return os.current.useSyncExternalStore(t,e,n)};It.useTransition=function(){return os.current.useTransition()};It.version="18.3.1";$O.exports=It;var K=$O.exports;const Lt=Ed(K),T0=Xy({__proto__:null,default:Lt},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VW=K,UW=Symbol.for("react.element"),WW=Symbol.for("react.fragment"),jW=Object.prototype.hasOwnProperty,GW=VW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HW={key:!0,ref:!0,__self:!0,__source:!0};function OO(t,e,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)jW.call(e,r)&&!HW.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:UW,type:t,key:o,ref:i,props:s,_owner:GW.current}}Yy.Fragment=WW;Yy.jsx=OO;Yy.jsxs=OO;CO.exports=Yy;var be=CO.exports,Fw={},PO={exports:{}},qs={},LO={exports:{}},FO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,M){var _=z.length;z.push(M);e:for(;0<_;){var F=_-1>>>1,O=z[F];if(0<s(O,M))z[F]=M,z[_]=O,_=F;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var M=z[0],_=z.pop();if(_!==M){z[0]=_;e:for(var F=0,O=z.length,D=O>>>1;F<D;){var j=2*(F+1)-1,G=z[j],J=j+1,me=z[J];if(0>s(G,_))J<O&&0>s(me,G)?(z[F]=me,z[J]=_,F=J):(z[F]=G,z[j]=_,F=j);else if(J<O&&0>s(me,_))z[F]=me,z[J]=_,F=J;else break e}}return M}function s(z,M){var _=z.sortIndex-M.sortIndex;return _!==0?_:z.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var u=[],l=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=z)r(l),M.sortIndex=M.expirationTime,e(u,M);else break;M=n(l)}}function b(z){if(m=!1,x(z),!p)if(n(u)!==null)p=!0,L(w);else{var M=n(l);M!==null&&V(b,M.startTime-z)}}function w(z,M){p=!1,m&&(m=!1,g($),$=-1),f=!0;var _=h;try{for(x(M),d=n(u);d!==null&&(!(d.expirationTime>M)||z&&!R());){var F=d.callback;if(typeof F=="function"){d.callback=null,h=d.priorityLevel;var O=F(d.expirationTime<=M);M=t.unstable_now(),typeof O=="function"?d.callback=O:d===n(u)&&r(u),x(M)}else r(u);d=n(u)}if(d!==null)var D=!0;else{var j=n(l);j!==null&&V(b,j.startTime-M),D=!1}return D}finally{d=null,h=_,f=!1}}var k=!1,C=null,$=-1,E=5,S=-1;function R(){return!(t.unstable_now()-S<E)}function T(){if(C!==null){var z=t.unstable_now();S=z;var M=!0;try{M=C(!0,z)}finally{M?P():(k=!1,C=null)}}else k=!1}var P;if(typeof v=="function")P=function(){v(T)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,A=I.port2;I.port1.onmessage=T,P=function(){A.postMessage(null)}}else P=function(){y(T,0)};function L(z){C=z,k||(k=!0,P())}function V(z,M){$=y(function(){z(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,L(w))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var _=h;h=M;try{return z()}finally{h=_}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,M){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var _=h;h=z;try{return M()}finally{h=_}},t.unstable_scheduleCallback=function(z,M,_){var F=t.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?F+_:F):_=F,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=_+O,z={id:c++,callback:M,priorityLevel:z,startTime:_,expirationTime:O,sortIndex:-1},_>F?(z.sortIndex=_,e(l,z),n(u)===null&&z===n(l)&&(m?(g($),$=-1):m=!0,V(b,_-F))):(z.sortIndex=O,e(u,z),p||f||(p=!0,L(w))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var M=h;return function(){var _=h;h=M;try{return z.apply(this,arguments)}finally{h=_}}}})(FO);LO.exports=FO;var KW=LO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qW=K,Hs=KW;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MO=new Set,bf={};function Ru(t,e){Qc(t,e),Qc(t+"Capture",e)}function Qc(t,e){for(bf[t]=e,t=0;t<e.length;t++)MO.add(e[t])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mw=Object.prototype.hasOwnProperty,XW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vT={},xT={};function YW(t){return Mw.call(xT,t)?!0:Mw.call(vT,t)?!1:XW.test(t)?xT[t]=!0:(vT[t]=!0,!1)}function ZW(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QW(t,e,n,r){if(e===null||typeof e>"u"||ZW(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function is(t,e,n,r,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var Tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tr[t]=new is(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tr[e]=new is(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tr[t]=new is(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tr[t]=new is(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tr[t]=new is(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tr[t]=new is(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tr[t]=new is(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tr[t]=new is(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tr[t]=new is(t,5,!1,t.toLowerCase(),null,!1,!1)});var fC=/[\-:]([a-z])/g;function pC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fC,pC);Tr[e]=new is(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fC,pC);Tr[e]=new is(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fC,pC);Tr[e]=new is(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tr[t]=new is(t,1,!1,t.toLowerCase(),null,!1,!1)});Tr.xlinkHref=new is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tr[t]=new is(t,1,!1,t.toLowerCase(),null,!0,!0)});function mC(t,e,n,r){var s=Tr.hasOwnProperty(e)?Tr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QW(e,n,s,r)&&(n=null),r||s===null?YW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ua=qW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rg=Symbol.for("react.element"),wc=Symbol.for("react.portal"),Sc=Symbol.for("react.fragment"),gC=Symbol.for("react.strict_mode"),zw=Symbol.for("react.profiler"),zO=Symbol.for("react.provider"),BO=Symbol.for("react.context"),yC=Symbol.for("react.forward_ref"),Bw=Symbol.for("react.suspense"),Vw=Symbol.for("react.suspense_list"),vC=Symbol.for("react.memo"),$a=Symbol.for("react.lazy"),VO=Symbol.for("react.offscreen"),bT=Symbol.iterator;function nh(t){return t===null||typeof t!="object"?null:(t=bT&&t[bT]||t["@@iterator"],typeof t=="function"?t:null)}var _n=Object.assign,rb;function Oh(t){if(rb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);rb=e&&e[1]||""}return`
`+rb+t}var sb=!1;function ob(t,e){if(!t||sb)return"";sb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var u=`
`+s[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=a);break}}}finally{sb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oh(t):""}function JW(t){switch(t.tag){case 5:return Oh(t.type);case 16:return Oh("Lazy");case 13:return Oh("Suspense");case 19:return Oh("SuspenseList");case 0:case 2:case 15:return t=ob(t.type,!1),t;case 11:return t=ob(t.type.render,!1),t;case 1:return t=ob(t.type,!0),t;default:return""}}function Uw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sc:return"Fragment";case wc:return"Portal";case zw:return"Profiler";case gC:return"StrictMode";case Bw:return"Suspense";case Vw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BO:return(t.displayName||"Context")+".Consumer";case zO:return(t._context.displayName||"Context")+".Provider";case yC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vC:return e=t.displayName||null,e!==null?e:Uw(t.type)||"Memo";case $a:e=t._payload,t=t._init;try{return Uw(t(e))}catch{}}return null}function ej(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uw(e);case 8:return e===gC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Za(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tj(t){var e=UO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sg(t){t._valueTracker||(t._valueTracker=tj(t))}function WO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=UO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ww(t,e){var n=e.checked;return _n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Za(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jO(t,e){e=e.checked,e!=null&&mC(t,"checked",e,!1)}function jw(t,e){jO(t,e);var n=Za(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gw(t,e.type,Za(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ST(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gw(t,e,n){(e!=="number"||_0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ph=Array.isArray;function Pc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Za(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return _n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(Ph(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Za(n)}}function GO(t,e){var n=Za(e.value),r=Za(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function CT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var og,KO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(og=og||document.createElement("div"),og.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=og.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nj=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(t){nj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zh[e]=Zh[t]})});function qO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zh.hasOwnProperty(t)&&Zh[t]?(""+e).trim():e+"px"}function XO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var rj=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qw(t,e){if(e){if(rj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function Xw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yw=null;function xC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zw=null,Lc=null,Fc=null;function $T(t){if(t=dp(t)){if(typeof Zw!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=t1(e),Zw(t.stateNode,t.type,e))}}function YO(t){Lc?Fc?Fc.push(t):Fc=[t]:Lc=t}function ZO(){if(Lc){var t=Lc,e=Fc;if(Fc=Lc=null,$T(t),e)for(t=0;t<e.length;t++)$T(e[t])}}function QO(t,e){return t(e)}function JO(){}var ib=!1;function e3(t,e,n){if(ib)return t(e,n);ib=!0;try{return QO(t,e,n)}finally{ib=!1,(Lc!==null||Fc!==null)&&(JO(),ZO())}}function Sf(t,e){var n=t.stateNode;if(n===null)return null;var r=t1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var Qw=!1;if(Qi)try{var rh={};Object.defineProperty(rh,"passive",{get:function(){Qw=!0}}),window.addEventListener("test",rh,rh),window.removeEventListener("test",rh,rh)}catch{Qw=!1}function sj(t,e,n,r,s,o,i,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Qh=!1,N0=null,R0=!1,Jw=null,oj={onError:function(t){Qh=!0,N0=t}};function ij(t,e,n,r,s,o,i,a,u){Qh=!1,N0=null,sj.apply(oj,arguments)}function aj(t,e,n,r,s,o,i,a,u){if(ij.apply(this,arguments),Qh){if(Qh){var l=N0;Qh=!1,N0=null}else throw Error(Ae(198));R0||(R0=!0,Jw=l)}}function Au(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function IT(t){if(Au(t)!==t)throw Error(Ae(188))}function lj(t){var e=t.alternate;if(!e){if(e=Au(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return IT(s),t;if(o===r)return IT(s),e;o=o.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function n3(t){return t=lj(t),t!==null?r3(t):null}function r3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r3(t);if(e!==null)return e;t=t.sibling}return null}var s3=Hs.unstable_scheduleCallback,ET=Hs.unstable_cancelCallback,uj=Hs.unstable_shouldYield,cj=Hs.unstable_requestPaint,Hn=Hs.unstable_now,dj=Hs.unstable_getCurrentPriorityLevel,bC=Hs.unstable_ImmediatePriority,o3=Hs.unstable_UserBlockingPriority,A0=Hs.unstable_NormalPriority,hj=Hs.unstable_LowPriority,i3=Hs.unstable_IdlePriority,Zy=null,mi=null;function fj(t){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(Zy,t,void 0,(t.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:gj,pj=Math.log,mj=Math.LN2;function gj(t){return t>>>=0,t===0?32:31-(pj(t)/mj|0)|0}var ig=64,ag=4194304;function Lh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function D0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Lh(a):(o&=i,o!==0&&(r=Lh(o)))}else i=n&~s,i!==0?r=Lh(i):o!==0&&(r=Lh(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vo(e),s=1<<n,r|=t[n],e&=~s;return r}function yj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-Vo(o),a=1<<i,u=s[i];u===-1?(!(a&n)||a&r)&&(s[i]=yj(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function eS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a3(){var t=ig;return ig<<=1,!(ig&4194240)&&(ig=64),t}function ab(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function up(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vo(e),t[e]=n}function xj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vo(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function wC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vo(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ht=0;function l3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u3,SC,c3,d3,h3,tS=!1,lg=[],za=null,Ba=null,Va=null,kf=new Map,Cf=new Map,_a=[],bj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TT(t,e){switch(t){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":kf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cf.delete(e.pointerId)}}function sh(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=dp(e),e!==null&&SC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function wj(t,e,n,r,s){switch(e){case"focusin":return za=sh(za,t,e,n,r,s),!0;case"dragenter":return Ba=sh(Ba,t,e,n,r,s),!0;case"mouseover":return Va=sh(Va,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return kf.set(o,sh(kf.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Cf.set(o,sh(Cf.get(o)||null,t,e,n,r,s)),!0}return!1}function f3(t){var e=jl(t.target);if(e!==null){var n=Au(e);if(n!==null){if(e=n.tag,e===13){if(e=t3(n),e!==null){t.blockedOn=e,h3(t.priority,function(){c3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function s0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yw=r,n.target.dispatchEvent(r),Yw=null}else return e=dp(n),e!==null&&SC(e),t.blockedOn=n,!1;e.shift()}return!0}function _T(t,e,n){s0(t)&&n.delete(e)}function Sj(){tS=!1,za!==null&&s0(za)&&(za=null),Ba!==null&&s0(Ba)&&(Ba=null),Va!==null&&s0(Va)&&(Va=null),kf.forEach(_T),Cf.forEach(_T)}function oh(t,e){t.blockedOn===e&&(t.blockedOn=null,tS||(tS=!0,Hs.unstable_scheduleCallback(Hs.unstable_NormalPriority,Sj)))}function $f(t){function e(s){return oh(s,t)}if(0<lg.length){oh(lg[0],t);for(var n=1;n<lg.length;n++){var r=lg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(za!==null&&oh(za,t),Ba!==null&&oh(Ba,t),Va!==null&&oh(Va,t),kf.forEach(e),Cf.forEach(e),n=0;n<_a.length;n++)r=_a[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_a.length&&(n=_a[0],n.blockedOn===null);)f3(n),n.blockedOn===null&&_a.shift()}var Mc=ua.ReactCurrentBatchConfig,O0=!0;function kj(t,e,n,r){var s=Ht,o=Mc.transition;Mc.transition=null;try{Ht=1,kC(t,e,n,r)}finally{Ht=s,Mc.transition=o}}function Cj(t,e,n,r){var s=Ht,o=Mc.transition;Mc.transition=null;try{Ht=4,kC(t,e,n,r)}finally{Ht=s,Mc.transition=o}}function kC(t,e,n,r){if(O0){var s=nS(t,e,n,r);if(s===null)yb(t,e,r,P0,n),TT(t,r);else if(wj(s,t,e,n,r))r.stopPropagation();else if(TT(t,r),e&4&&-1<bj.indexOf(t)){for(;s!==null;){var o=dp(s);if(o!==null&&u3(o),o=nS(t,e,n,r),o===null&&yb(t,e,r,P0,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else yb(t,e,r,null,n)}}var P0=null;function nS(t,e,n,r){if(P0=null,t=xC(r),t=jl(t),t!==null)if(e=Au(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return P0=t,null}function p3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dj()){case bC:return 1;case o3:return 4;case A0:case hj:return 16;case i3:return 536870912;default:return 16}default:return 16}}var Aa=null,CC=null,o0=null;function m3(){if(o0)return o0;var t,e=CC,n=e.length,r,s="value"in Aa?Aa.value:Aa.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[o-r];r++);return o0=s.slice(t,1<r?1-r:void 0)}function i0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ug(){return!0}function NT(){return!1}function Xs(t){function e(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ug:NT,this.isPropagationStopped=NT,this}return _n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ug)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ug)},persist:function(){},isPersistent:ug}),e}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$C=Xs(_d),cp=_n({},_d,{view:0,detail:0}),$j=Xs(cp),lb,ub,ih,Qy=_n({},cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ih&&(ih&&t.type==="mousemove"?(lb=t.screenX-ih.screenX,ub=t.screenY-ih.screenY):ub=lb=0,ih=t),lb)},movementY:function(t){return"movementY"in t?t.movementY:ub}}),RT=Xs(Qy),Ij=_n({},Qy,{dataTransfer:0}),Ej=Xs(Ij),Tj=_n({},cp,{relatedTarget:0}),cb=Xs(Tj),_j=_n({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),Nj=Xs(_j),Rj=_n({},_d,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Aj=Xs(Rj),Dj=_n({},_d,{data:0}),AT=Xs(Dj),Oj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lj[t])?!!e[t]:!1}function IC(){return Fj}var Mj=_n({},cp,{key:function(t){if(t.key){var e=Oj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=i0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IC,charCode:function(t){return t.type==="keypress"?i0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?i0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zj=Xs(Mj),Bj=_n({},Qy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DT=Xs(Bj),Vj=_n({},cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IC}),Uj=Xs(Vj),Wj=_n({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),jj=Xs(Wj),Gj=_n({},Qy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hj=Xs(Gj),Kj=[9,13,27,32],EC=Qi&&"CompositionEvent"in window,Jh=null;Qi&&"documentMode"in document&&(Jh=document.documentMode);var qj=Qi&&"TextEvent"in window&&!Jh,g3=Qi&&(!EC||Jh&&8<Jh&&11>=Jh),OT=String.fromCharCode(32),PT=!1;function y3(t,e){switch(t){case"keyup":return Kj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kc=!1;function Xj(t,e){switch(t){case"compositionend":return v3(e);case"keypress":return e.which!==32?null:(PT=!0,OT);case"textInput":return t=e.data,t===OT&&PT?null:t;default:return null}}function Yj(t,e){if(kc)return t==="compositionend"||!EC&&y3(t,e)?(t=m3(),o0=CC=Aa=null,kc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g3&&e.locale!=="ko"?null:e.data;default:return null}}var Zj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zj[t.type]:e==="textarea"}function x3(t,e,n,r){YO(r),e=L0(e,"onChange"),0<e.length&&(n=new $C("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ef=null,If=null;function Qj(t){N3(t,0)}function Jy(t){var e=Ic(t);if(WO(e))return t}function Jj(t,e){if(t==="change")return e}var b3=!1;if(Qi){var db;if(Qi){var hb="oninput"in document;if(!hb){var FT=document.createElement("div");FT.setAttribute("oninput","return;"),hb=typeof FT.oninput=="function"}db=hb}else db=!1;b3=db&&(!document.documentMode||9<document.documentMode)}function MT(){ef&&(ef.detachEvent("onpropertychange",w3),If=ef=null)}function w3(t){if(t.propertyName==="value"&&Jy(If)){var e=[];x3(e,If,t,xC(t)),e3(Qj,e)}}function e8(t,e,n){t==="focusin"?(MT(),ef=e,If=n,ef.attachEvent("onpropertychange",w3)):t==="focusout"&&MT()}function t8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jy(If)}function n8(t,e){if(t==="click")return Jy(e)}function r8(t,e){if(t==="input"||t==="change")return Jy(e)}function s8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ho=typeof Object.is=="function"?Object.is:s8;function Ef(t,e){if(Ho(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Mw.call(e,s)||!Ho(t[s],e[s]))return!1}return!0}function zT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function BT(t,e){var n=zT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zT(n)}}function S3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k3(){for(var t=window,e=_0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_0(t.document)}return e}function TC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o8(t){var e=k3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S3(n.ownerDocument.documentElement,n)){if(r!==null&&TC(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=BT(n,o);var i=BT(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i8=Qi&&"documentMode"in document&&11>=document.documentMode,Cc=null,rS=null,tf=null,sS=!1;function VT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sS||Cc==null||Cc!==_0(r)||(r=Cc,"selectionStart"in r&&TC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tf&&Ef(tf,r)||(tf=r,r=L0(rS,"onSelect"),0<r.length&&(e=new $C("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cc)))}function cg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $c={animationend:cg("Animation","AnimationEnd"),animationiteration:cg("Animation","AnimationIteration"),animationstart:cg("Animation","AnimationStart"),transitionend:cg("Transition","TransitionEnd")},fb={},C3={};Qi&&(C3=document.createElement("div").style,"AnimationEvent"in window||(delete $c.animationend.animation,delete $c.animationiteration.animation,delete $c.animationstart.animation),"TransitionEvent"in window||delete $c.transitionend.transition);function e1(t){if(fb[t])return fb[t];if(!$c[t])return t;var e=$c[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C3)return fb[t]=e[n];return t}var $3=e1("animationend"),I3=e1("animationiteration"),E3=e1("animationstart"),T3=e1("transitionend"),_3=new Map,UT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function al(t,e){_3.set(t,e),Ru(e,[t])}for(var pb=0;pb<UT.length;pb++){var mb=UT[pb],a8=mb.toLowerCase(),l8=mb[0].toUpperCase()+mb.slice(1);al(a8,"on"+l8)}al($3,"onAnimationEnd");al(I3,"onAnimationIteration");al(E3,"onAnimationStart");al("dblclick","onDoubleClick");al("focusin","onFocus");al("focusout","onBlur");al(T3,"onTransitionEnd");Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);Ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fh));function WT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aj(r,e,void 0,t),t.currentTarget=null}function N3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&s.isPropagationStopped())break e;WT(s,a,l),o=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&s.isPropagationStopped())break e;WT(s,a,l),o=u}}}if(R0)throw t=Jw,R0=!1,Jw=null,t}function mn(t,e){var n=e[uS];n===void 0&&(n=e[uS]=new Set);var r=t+"__bubble";n.has(r)||(R3(e,t,2,!1),n.add(r))}function gb(t,e,n){var r=0;e&&(r|=4),R3(n,t,r,e)}var dg="_reactListening"+Math.random().toString(36).slice(2);function Tf(t){if(!t[dg]){t[dg]=!0,MO.forEach(function(n){n!=="selectionchange"&&(u8.has(n)||gb(n,!1,t),gb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dg]||(e[dg]=!0,gb("selectionchange",!1,e))}}function R3(t,e,n,r){switch(p3(e)){case 1:var s=kj;break;case 4:s=Cj;break;default:s=kC}n=s.bind(null,e,n,t),s=void 0,!Qw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yb(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;a!==null;){if(i=jl(a),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}a=a.parentNode}}r=r.return}e3(function(){var l=o,c=xC(n),d=[];e:{var h=_3.get(t);if(h!==void 0){var f=$C,p=t;switch(t){case"keypress":if(i0(n)===0)break e;case"keydown":case"keyup":f=zj;break;case"focusin":p="focus",f=cb;break;case"focusout":p="blur",f=cb;break;case"beforeblur":case"afterblur":f=cb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=RT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Ej;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Uj;break;case $3:case I3:case E3:f=Nj;break;case T3:f=jj;break;case"scroll":f=$j;break;case"wheel":f=Hj;break;case"copy":case"cut":case"paste":f=Aj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=DT}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var v=l,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=Sf(v,g),b!=null&&m.push(_f(v,b,x)))),y)break;v=v.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Yw&&(p=n.relatedTarget||n.fromElement)&&(jl(p)||p[Ji]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?jl(p):null,p!==null&&(y=Au(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(m=RT,b="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=DT,b="onPointerLeave",g="onPointerEnter",v="pointer"),y=f==null?h:Ic(f),x=p==null?h:Ic(p),h=new m(b,v+"leave",f,n,c),h.target=y,h.relatedTarget=x,b=null,jl(c)===l&&(m=new m(g,v+"enter",p,n,c),m.target=x,m.relatedTarget=y,b=m),y=b,f&&p)t:{for(m=f,g=p,v=0,x=m;x;x=Zu(x))v++;for(x=0,b=g;b;b=Zu(b))x++;for(;0<v-x;)m=Zu(m),v--;for(;0<x-v;)g=Zu(g),x--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=Zu(m),g=Zu(g)}m=null}else m=null;f!==null&&jT(d,h,f,m,!1),p!==null&&y!==null&&jT(d,y,p,m,!0)}}e:{if(h=l?Ic(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=Jj;else if(LT(h))if(b3)w=r8;else{w=t8;var k=e8}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=n8);if(w&&(w=w(t,l))){x3(d,w,n,c);break e}k&&k(t,h,l),t==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&Gw(h,"number",h.value)}switch(k=l?Ic(l):window,t){case"focusin":(LT(k)||k.contentEditable==="true")&&(Cc=k,rS=l,tf=null);break;case"focusout":tf=rS=Cc=null;break;case"mousedown":sS=!0;break;case"contextmenu":case"mouseup":case"dragend":sS=!1,VT(d,n,c);break;case"selectionchange":if(i8)break;case"keydown":case"keyup":VT(d,n,c)}var C;if(EC)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else kc?y3(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(g3&&n.locale!=="ko"&&(kc||$!=="onCompositionStart"?$==="onCompositionEnd"&&kc&&(C=m3()):(Aa=c,CC="value"in Aa?Aa.value:Aa.textContent,kc=!0)),k=L0(l,$),0<k.length&&($=new AT($,t,null,n,c),d.push({event:$,listeners:k}),C?$.data=C:(C=v3(n),C!==null&&($.data=C)))),(C=qj?Xj(t,n):Yj(t,n))&&(l=L0(l,"onBeforeInput"),0<l.length&&(c=new AT("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=C))}N3(d,e)})}function _f(t,e,n){return{instance:t,listener:e,currentTarget:n}}function L0(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Sf(t,n),o!=null&&r.unshift(_f(t,o,s)),o=Sf(t,e),o!=null&&r.push(_f(t,o,s))),t=t.return}return r}function Zu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jT(t,e,n,r,s){for(var o=e._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,s?(u=Sf(n,o),u!=null&&i.unshift(_f(n,u,a))):s||(u=Sf(n,o),u!=null&&i.push(_f(n,u,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var c8=/\r\n?/g,d8=/\u0000|\uFFFD/g;function GT(t){return(typeof t=="string"?t:""+t).replace(c8,`
`).replace(d8,"")}function hg(t,e,n){if(e=GT(e),GT(t)!==e&&n)throw Error(Ae(425))}function F0(){}var oS=null,iS=null;function aS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lS=typeof setTimeout=="function"?setTimeout:void 0,h8=typeof clearTimeout=="function"?clearTimeout:void 0,HT=typeof Promise=="function"?Promise:void 0,f8=typeof queueMicrotask=="function"?queueMicrotask:typeof HT<"u"?function(t){return HT.resolve(null).then(t).catch(p8)}:lS;function p8(t){setTimeout(function(){throw t})}function vb(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),$f(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$f(e)}function Ua(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function KT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nd=Math.random().toString(36).slice(2),di="__reactFiber$"+Nd,Nf="__reactProps$"+Nd,Ji="__reactContainer$"+Nd,uS="__reactEvents$"+Nd,m8="__reactListeners$"+Nd,g8="__reactHandles$"+Nd;function jl(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ji]||n[di]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=KT(t);t!==null;){if(n=t[di])return n;t=KT(t)}return e}t=n,n=t.parentNode}return null}function dp(t){return t=t[di]||t[Ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ic(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function t1(t){return t[Nf]||null}var cS=[],Ec=-1;function ll(t){return{current:t}}function yn(t){0>Ec||(t.current=cS[Ec],cS[Ec]=null,Ec--)}function un(t,e){Ec++,cS[Ec]=t.current,t.current=e}var Qa={},Kr=ll(Qa),xs=ll(!1),ou=Qa;function Jc(t,e){var n=t.type.contextTypes;if(!n)return Qa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bs(t){return t=t.childContextTypes,t!=null}function M0(){yn(xs),yn(Kr)}function qT(t,e,n){if(Kr.current!==Qa)throw Error(Ae(168));un(Kr,e),un(xs,n)}function A3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ae(108,ej(t)||"Unknown",s));return _n({},n,r)}function z0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qa,ou=Kr.current,un(Kr,t),un(xs,xs.current),!0}function XT(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=A3(t,e,ou),r.__reactInternalMemoizedMergedChildContext=t,yn(xs),yn(Kr),un(Kr,t)):yn(xs),un(xs,n)}var Ui=null,n1=!1,xb=!1;function D3(t){Ui===null?Ui=[t]:Ui.push(t)}function y8(t){n1=!0,D3(t)}function ul(){if(!xb&&Ui!==null){xb=!0;var t=0,e=Ht;try{var n=Ui;for(Ht=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ui=null,n1=!1}catch(s){throw Ui!==null&&(Ui=Ui.slice(t+1)),s3(bC,ul),s}finally{Ht=e,xb=!1}}return null}var Tc=[],_c=0,B0=null,V0=0,so=[],oo=0,iu=null,Hi=1,Ki="";function Ol(t,e){Tc[_c++]=V0,Tc[_c++]=B0,B0=t,V0=e}function O3(t,e,n){so[oo++]=Hi,so[oo++]=Ki,so[oo++]=iu,iu=t;var r=Hi;t=Ki;var s=32-Vo(r)-1;r&=~(1<<s),n+=1;var o=32-Vo(e)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Hi=1<<32-Vo(e)+s|n<<s|r,Ki=o+t}else Hi=1<<o|n<<s|r,Ki=t}function _C(t){t.return!==null&&(Ol(t,1),O3(t,1,0))}function NC(t){for(;t===B0;)B0=Tc[--_c],Tc[_c]=null,V0=Tc[--_c],Tc[_c]=null;for(;t===iu;)iu=so[--oo],so[oo]=null,Ki=so[--oo],so[oo]=null,Hi=so[--oo],so[oo]=null}var Vs=null,Ms=null,kn=!1,Lo=null;function P3(t,e){var n=co(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vs=t,Ms=Ua(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vs=t,Ms=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=iu!==null?{id:Hi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=co(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vs=t,Ms=null,!0):!1;default:return!1}}function dS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hS(t){if(kn){var e=Ms;if(e){var n=e;if(!YT(t,e)){if(dS(t))throw Error(Ae(418));e=Ua(n.nextSibling);var r=Vs;e&&YT(t,e)?P3(r,n):(t.flags=t.flags&-4097|2,kn=!1,Vs=t)}}else{if(dS(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,kn=!1,Vs=t}}}function ZT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vs=t}function fg(t){if(t!==Vs)return!1;if(!kn)return ZT(t),kn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!aS(t.type,t.memoizedProps)),e&&(e=Ms)){if(dS(t))throw L3(),Error(Ae(418));for(;e;)P3(t,e),e=Ua(e.nextSibling)}if(ZT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ms=Ua(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ms=null}}else Ms=Vs?Ua(t.stateNode.nextSibling):null;return!0}function L3(){for(var t=Ms;t;)t=Ua(t.nextSibling)}function ed(){Ms=Vs=null,kn=!1}function RC(t){Lo===null?Lo=[t]:Lo.push(t)}var v8=ua.ReactCurrentBatchConfig;function ah(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function pg(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function QT(t){var e=t._init;return e(t._payload)}function F3(t){function e(g,v){if(t){var x=g.deletions;x===null?(g.deletions=[v],g.flags|=16):x.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=Ha(g,v),g.index=0,g.sibling=null,g}function o(g,v,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<v?(g.flags|=2,v):x):(g.flags|=2,v)):(g.flags|=1048576,v)}function i(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,x,b){return v===null||v.tag!==6?(v=Ib(x,g.mode,b),v.return=g,v):(v=s(v,x),v.return=g,v)}function u(g,v,x,b){var w=x.type;return w===Sc?c(g,v,x.props.children,b,x.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$a&&QT(w)===v.type)?(b=s(v,x.props),b.ref=ah(g,v,x),b.return=g,b):(b=f0(x.type,x.key,x.props,null,g.mode,b),b.ref=ah(g,v,x),b.return=g,b)}function l(g,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Eb(x,g.mode,b),v.return=g,v):(v=s(v,x.children||[]),v.return=g,v)}function c(g,v,x,b,w){return v===null||v.tag!==7?(v=Jl(x,g.mode,b,w),v.return=g,v):(v=s(v,x),v.return=g,v)}function d(g,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ib(""+v,g.mode,x),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case rg:return x=f0(v.type,v.key,v.props,null,g.mode,x),x.ref=ah(g,null,v),x.return=g,x;case wc:return v=Eb(v,g.mode,x),v.return=g,v;case $a:var b=v._init;return d(g,b(v._payload),x)}if(Ph(v)||nh(v))return v=Jl(v,g.mode,x,null),v.return=g,v;pg(g,v)}return null}function h(g,v,x,b){var w=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(g,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rg:return x.key===w?u(g,v,x,b):null;case wc:return x.key===w?l(g,v,x,b):null;case $a:return w=x._init,h(g,v,w(x._payload),b)}if(Ph(x)||nh(x))return w!==null?null:c(g,v,x,b,null);pg(g,x)}return null}function f(g,v,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(x)||null,a(v,g,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rg:return g=g.get(b.key===null?x:b.key)||null,u(v,g,b,w);case wc:return g=g.get(b.key===null?x:b.key)||null,l(v,g,b,w);case $a:var k=b._init;return f(g,v,x,k(b._payload),w)}if(Ph(b)||nh(b))return g=g.get(x)||null,c(v,g,b,w,null);pg(v,b)}return null}function p(g,v,x,b){for(var w=null,k=null,C=v,$=v=0,E=null;C!==null&&$<x.length;$++){C.index>$?(E=C,C=null):E=C.sibling;var S=h(g,C,x[$],b);if(S===null){C===null&&(C=E);break}t&&C&&S.alternate===null&&e(g,C),v=o(S,v,$),k===null?w=S:k.sibling=S,k=S,C=E}if($===x.length)return n(g,C),kn&&Ol(g,$),w;if(C===null){for(;$<x.length;$++)C=d(g,x[$],b),C!==null&&(v=o(C,v,$),k===null?w=C:k.sibling=C,k=C);return kn&&Ol(g,$),w}for(C=r(g,C);$<x.length;$++)E=f(C,g,$,x[$],b),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?$:E.key),v=o(E,v,$),k===null?w=E:k.sibling=E,k=E);return t&&C.forEach(function(R){return e(g,R)}),kn&&Ol(g,$),w}function m(g,v,x,b){var w=nh(x);if(typeof w!="function")throw Error(Ae(150));if(x=w.call(x),x==null)throw Error(Ae(151));for(var k=w=null,C=v,$=v=0,E=null,S=x.next();C!==null&&!S.done;$++,S=x.next()){C.index>$?(E=C,C=null):E=C.sibling;var R=h(g,C,S.value,b);if(R===null){C===null&&(C=E);break}t&&C&&R.alternate===null&&e(g,C),v=o(R,v,$),k===null?w=R:k.sibling=R,k=R,C=E}if(S.done)return n(g,C),kn&&Ol(g,$),w;if(C===null){for(;!S.done;$++,S=x.next())S=d(g,S.value,b),S!==null&&(v=o(S,v,$),k===null?w=S:k.sibling=S,k=S);return kn&&Ol(g,$),w}for(C=r(g,C);!S.done;$++,S=x.next())S=f(C,g,$,S.value,b),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?$:S.key),v=o(S,v,$),k===null?w=S:k.sibling=S,k=S);return t&&C.forEach(function(T){return e(g,T)}),kn&&Ol(g,$),w}function y(g,v,x,b){if(typeof x=="object"&&x!==null&&x.type===Sc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case rg:e:{for(var w=x.key,k=v;k!==null;){if(k.key===w){if(w=x.type,w===Sc){if(k.tag===7){n(g,k.sibling),v=s(k,x.props.children),v.return=g,g=v;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$a&&QT(w)===k.type){n(g,k.sibling),v=s(k,x.props),v.ref=ah(g,k,x),v.return=g,g=v;break e}n(g,k);break}else e(g,k);k=k.sibling}x.type===Sc?(v=Jl(x.props.children,g.mode,b,x.key),v.return=g,g=v):(b=f0(x.type,x.key,x.props,null,g.mode,b),b.ref=ah(g,v,x),b.return=g,g=b)}return i(g);case wc:e:{for(k=x.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(g,v.sibling),v=s(v,x.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=Eb(x,g.mode,b),v.return=g,g=v}return i(g);case $a:return k=x._init,y(g,v,k(x._payload),b)}if(Ph(x))return p(g,v,x,b);if(nh(x))return m(g,v,x,b);pg(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,x),v.return=g,g=v):(n(g,v),v=Ib(x,g.mode,b),v.return=g,g=v),i(g)):n(g,v)}return y}var td=F3(!0),M3=F3(!1),U0=ll(null),W0=null,Nc=null,AC=null;function DC(){AC=Nc=W0=null}function OC(t){var e=U0.current;yn(U0),t._currentValue=e}function fS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zc(t,e){W0=t,AC=Nc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ms=!0),t.firstContext=null)}function vo(t){var e=t._currentValue;if(AC!==t)if(t={context:t,memoizedValue:e,next:null},Nc===null){if(W0===null)throw Error(Ae(308));Nc=t,W0.dependencies={lanes:0,firstContext:t}}else Nc=Nc.next=t;return e}var Gl=null;function PC(t){Gl===null?Gl=[t]:Gl.push(t)}function z3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,PC(e)):(n.next=s.next,s.next=n),e.interleaved=n,ea(t,r)}function ea(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ia=!1;function LC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Dt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ea(t,n)}return s=r.interleaved,s===null?(e.next=e,PC(r)):(e.next=s.next,s.next=e),r.interleaved=e,ea(t,n)}function a0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wC(t,n)}}function JT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function j0(t,e,n,r){var s=t.updateQueue;Ia=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,l=u.next;u.next=null,i===null?o=l:i.next=l,i=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==i&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var d=s.baseState;i=0,c=l=u=null,a=o;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=_n({},d,h);break e;case 2:Ia=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=f,u=d):c=c.next=f,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(c===null&&(u=d),s.baseState=u,s.firstBaseUpdate=l,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);lu|=i,t.lanes=i,t.memoizedState=d}}function e_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ae(191,s));s.call(r)}}}var hp={},gi=ll(hp),Rf=ll(hp),Af=ll(hp);function Hl(t){if(t===hp)throw Error(Ae(174));return t}function FC(t,e){switch(un(Af,e),un(Rf,t),un(gi,hp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kw(e,t)}yn(gi),un(gi,e)}function nd(){yn(gi),yn(Rf),yn(Af)}function V3(t){Hl(Af.current);var e=Hl(gi.current),n=Kw(e,t.type);e!==n&&(un(Rf,t),un(gi,n))}function MC(t){Rf.current===t&&(yn(gi),yn(Rf))}var En=ll(0);function G0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bb=[];function zC(){for(var t=0;t<bb.length;t++)bb[t]._workInProgressVersionPrimary=null;bb.length=0}var l0=ua.ReactCurrentDispatcher,wb=ua.ReactCurrentBatchConfig,au=0,Tn=null,ur=null,gr=null,H0=!1,nf=!1,Df=0,x8=0;function Mr(){throw Error(Ae(321))}function BC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ho(t[n],e[n]))return!1;return!0}function VC(t,e,n,r,s,o){if(au=o,Tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,l0.current=t===null||t.memoizedState===null?k8:C8,t=n(r,s),nf){o=0;do{if(nf=!1,Df=0,25<=o)throw Error(Ae(301));o+=1,gr=ur=null,e.updateQueue=null,l0.current=$8,t=n(r,s)}while(nf)}if(l0.current=K0,e=ur!==null&&ur.next!==null,au=0,gr=ur=Tn=null,H0=!1,e)throw Error(Ae(300));return t}function UC(){var t=Df!==0;return Df=0,t}function ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?Tn.memoizedState=gr=t:gr=gr.next=t,gr}function xo(){if(ur===null){var t=Tn.alternate;t=t!==null?t.memoizedState:null}else t=ur.next;var e=gr===null?Tn.memoizedState:gr.next;if(e!==null)gr=e,ur=t;else{if(t===null)throw Error(Ae(310));ur=t,t={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},gr===null?Tn.memoizedState=gr=t:gr=gr.next=t}return gr}function Of(t,e){return typeof e=="function"?e(t):e}function Sb(t){var e=xo(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=ur,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,u=null,l=o;do{var c=l.lane;if((au&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=d,i=r):u=u.next=d,Tn.lanes|=c,lu|=c}l=l.next}while(l!==null&&l!==o);u===null?i=r:u.next=a,Ho(r,e.memoizedState)||(ms=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Tn.lanes|=o,lu|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kb(t){var e=xo(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);Ho(o,e.memoizedState)||(ms=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function U3(){}function W3(t,e){var n=Tn,r=xo(),s=e(),o=!Ho(r.memoizedState,s);if(o&&(r.memoizedState=s,ms=!0),r=r.queue,WC(H3.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||gr!==null&&gr.memoizedState.tag&1){if(n.flags|=2048,Pf(9,G3.bind(null,n,r,s,e),void 0,null),vr===null)throw Error(Ae(349));au&30||j3(n,e,s)}return s}function j3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function G3(t,e,n,r){e.value=n,e.getSnapshot=r,K3(e)&&q3(t)}function H3(t,e,n){return n(function(){K3(e)&&q3(t)})}function K3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ho(t,n)}catch{return!0}}function q3(t){var e=ea(t,1);e!==null&&Uo(e,t,1,-1)}function t_(t){var e=ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Of,lastRenderedState:t},e.queue=t,t=t.dispatch=S8.bind(null,Tn,t),[e.memoizedState,t]}function Pf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Tn.updateQueue,e===null?(e={lastEffect:null,stores:null},Tn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function X3(){return xo().memoizedState}function u0(t,e,n,r){var s=ni();Tn.flags|=t,s.memoizedState=Pf(1|e,n,void 0,r===void 0?null:r)}function r1(t,e,n,r){var s=xo();r=r===void 0?null:r;var o=void 0;if(ur!==null){var i=ur.memoizedState;if(o=i.destroy,r!==null&&BC(r,i.deps)){s.memoizedState=Pf(e,n,o,r);return}}Tn.flags|=t,s.memoizedState=Pf(1|e,n,o,r)}function n_(t,e){return u0(8390656,8,t,e)}function WC(t,e){return r1(2048,8,t,e)}function Y3(t,e){return r1(4,2,t,e)}function Z3(t,e){return r1(4,4,t,e)}function Q3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J3(t,e,n){return n=n!=null?n.concat([t]):null,r1(4,4,Q3.bind(null,e,t),n)}function jC(){}function eP(t,e){var n=xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&BC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tP(t,e){var n=xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&BC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nP(t,e,n){return au&21?(Ho(n,e)||(n=a3(),Tn.lanes|=n,lu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ms=!0),t.memoizedState=n)}function b8(t,e){var n=Ht;Ht=n!==0&&4>n?n:4,t(!0);var r=wb.transition;wb.transition={};try{t(!1),e()}finally{Ht=n,wb.transition=r}}function rP(){return xo().memoizedState}function w8(t,e,n){var r=Ga(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sP(t))oP(e,n);else if(n=z3(t,e,n,r),n!==null){var s=ts();Uo(n,t,r,s),iP(n,e,r)}}function S8(t,e,n){var r=Ga(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sP(t))oP(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,Ho(a,i)){var u=e.interleaved;u===null?(s.next=s,PC(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=z3(t,e,s,r),n!==null&&(s=ts(),Uo(n,t,r,s),iP(n,e,r))}}function sP(t){var e=t.alternate;return t===Tn||e!==null&&e===Tn}function oP(t,e){nf=H0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wC(t,n)}}var K0={readContext:vo,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},k8={readContext:vo,useCallback:function(t,e){return ni().memoizedState=[t,e===void 0?null:e],t},useContext:vo,useEffect:n_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,u0(4194308,4,Q3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return u0(4194308,4,t,e)},useInsertionEffect:function(t,e){return u0(4,2,t,e)},useMemo:function(t,e){var n=ni();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ni();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=w8.bind(null,Tn,t),[r.memoizedState,t]},useRef:function(t){var e=ni();return t={current:t},e.memoizedState=t},useState:t_,useDebugValue:jC,useDeferredValue:function(t){return ni().memoizedState=t},useTransition:function(){var t=t_(!1),e=t[0];return t=b8.bind(null,t[1]),ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Tn,s=ni();if(kn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),vr===null)throw Error(Ae(349));au&30||j3(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,n_(H3.bind(null,r,o,t),[t]),r.flags|=2048,Pf(9,G3.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ni(),e=vr.identifierPrefix;if(kn){var n=Ki,r=Hi;n=(r&~(1<<32-Vo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Df++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C8={readContext:vo,useCallback:eP,useContext:vo,useEffect:WC,useImperativeHandle:J3,useInsertionEffect:Y3,useLayoutEffect:Z3,useMemo:tP,useReducer:Sb,useRef:X3,useState:function(){return Sb(Of)},useDebugValue:jC,useDeferredValue:function(t){var e=xo();return nP(e,ur.memoizedState,t)},useTransition:function(){var t=Sb(Of)[0],e=xo().memoizedState;return[t,e]},useMutableSource:U3,useSyncExternalStore:W3,useId:rP,unstable_isNewReconciler:!1},$8={readContext:vo,useCallback:eP,useContext:vo,useEffect:WC,useImperativeHandle:J3,useInsertionEffect:Y3,useLayoutEffect:Z3,useMemo:tP,useReducer:kb,useRef:X3,useState:function(){return kb(Of)},useDebugValue:jC,useDeferredValue:function(t){var e=xo();return ur===null?e.memoizedState=t:nP(e,ur.memoizedState,t)},useTransition:function(){var t=kb(Of)[0],e=xo().memoizedState;return[t,e]},useMutableSource:U3,useSyncExternalStore:W3,useId:rP,unstable_isNewReconciler:!1};function Do(t,e){if(t&&t.defaultProps){e=_n({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_n({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var s1={isMounted:function(t){return(t=t._reactInternals)?Au(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ts(),s=Ga(t),o=Xi(r,s);o.payload=e,n!=null&&(o.callback=n),e=Wa(t,o,s),e!==null&&(Uo(e,t,s,r),a0(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ts(),s=Ga(t),o=Xi(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Wa(t,o,s),e!==null&&(Uo(e,t,s,r),a0(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ts(),r=Ga(t),s=Xi(n,r);s.tag=2,e!=null&&(s.callback=e),e=Wa(t,s,r),e!==null&&(Uo(e,t,r,n),a0(e,t,r))}};function r_(t,e,n,r,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,i):e.prototype&&e.prototype.isPureReactComponent?!Ef(n,r)||!Ef(s,o):!0}function aP(t,e,n){var r=!1,s=Qa,o=e.contextType;return typeof o=="object"&&o!==null?o=vo(o):(s=bs(e)?ou:Kr.current,r=e.contextTypes,o=(r=r!=null)?Jc(t,s):Qa),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=s1,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function s_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&s1.enqueueReplaceState(e,e.state,null)}function mS(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},LC(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=vo(o):(o=bs(e)?ou:Kr.current,s.context=Jc(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(pS(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&s1.enqueueReplaceState(s,s.state,null),j0(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function rd(t,e){try{var n="",r=e;do n+=JW(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Cb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var I8=typeof WeakMap=="function"?WeakMap:Map;function lP(t,e,n){n=Xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){X0||(X0=!0,IS=r),gS(t,e)},n}function uP(t,e,n){n=Xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gS(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){gS(t,e),typeof r!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function o_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new I8;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=B8.bind(null,t,e,n),e.then(t,t))}function i_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function a_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xi(-1,1),e.tag=2,Wa(n,e,1))),n.lanes|=1),t)}var E8=ua.ReactCurrentOwner,ms=!1;function Qr(t,e,n,r){e.child=t===null?M3(e,null,n,r):td(e,t.child,n,r)}function l_(t,e,n,r,s){n=n.render;var o=e.ref;return zc(e,s),r=VC(t,e,n,r,o,s),n=UC(),t!==null&&!ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ta(t,e,s)):(kn&&n&&_C(e),e.flags|=1,Qr(t,e,r,s),e.child)}function u_(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!QC(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,cP(t,e,o,r,s)):(t=f0(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ef,n(i,r)&&t.ref===e.ref)return ta(t,e,s)}return e.flags|=1,t=Ha(o,r),t.ref=e.ref,t.return=e,e.child=t}function cP(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ef(o,r)&&t.ref===e.ref)if(ms=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(ms=!0);else return e.lanes=t.lanes,ta(t,e,s)}return yS(t,e,n,r,s)}function dP(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Ac,Ds),Ds|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,un(Ac,Ds),Ds|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,un(Ac,Ds),Ds|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,un(Ac,Ds),Ds|=r;return Qr(t,e,s,n),e.child}function hP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yS(t,e,n,r,s){var o=bs(n)?ou:Kr.current;return o=Jc(e,o),zc(e,s),n=VC(t,e,n,r,o,s),r=UC(),t!==null&&!ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ta(t,e,s)):(kn&&r&&_C(e),e.flags|=1,Qr(t,e,n,s),e.child)}function c_(t,e,n,r,s){if(bs(n)){var o=!0;z0(e)}else o=!1;if(zc(e,s),e.stateNode===null)c0(t,e),aP(e,n,r),mS(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var u=i.context,l=n.contextType;typeof l=="object"&&l!==null?l=vo(l):(l=bs(n)?ou:Kr.current,l=Jc(e,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==l)&&s_(e,i,r,l),Ia=!1;var h=e.memoizedState;i.state=h,j0(e,r,i,s),u=e.memoizedState,a!==r||h!==u||xs.current||Ia?(typeof c=="function"&&(pS(e,n,c,r),u=e.memoizedState),(a=Ia||r_(e,n,a,r,h,u,l))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),i.props=r,i.state=u,i.context=l,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,B3(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Do(e.type,a),i.props=l,d=e.pendingProps,h=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=vo(u):(u=bs(n)?ou:Kr.current,u=Jc(e,u));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||h!==u)&&s_(e,i,r,u),Ia=!1,h=e.memoizedState,i.state=h,j0(e,r,i,s);var p=e.memoizedState;a!==d||h!==p||xs.current||Ia?(typeof f=="function"&&(pS(e,n,f,r),p=e.memoizedState),(l=Ia||r_(e,n,l,r,h,p,u)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,u)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),i.props=r,i.state=p,i.context=u,r=l):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return vS(t,e,n,r,o,s)}function vS(t,e,n,r,s,o){hP(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&XT(e,n,!1),ta(t,e,o);r=e.stateNode,E8.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=td(e,t.child,null,o),e.child=td(e,null,a,o)):Qr(t,e,a,o),e.memoizedState=r.state,s&&XT(e,n,!0),e.child}function fP(t){var e=t.stateNode;e.pendingContext?qT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qT(t,e.context,!1),FC(t,e.containerInfo)}function d_(t,e,n,r,s){return ed(),RC(s),e.flags|=256,Qr(t,e,n,r),e.child}var xS={dehydrated:null,treeContext:null,retryLane:0};function bS(t){return{baseLanes:t,cachePool:null,transitions:null}}function pP(t,e,n){var r=e.pendingProps,s=En.current,o=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),un(En,s&1),t===null)return hS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,o?(r=e.mode,o=e.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=a1(i,r,0,null),t=Jl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=bS(n),e.memoizedState=xS,t):GC(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return T8(t,e,i,r,a,s,n);if(o){o=r.fallback,i=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ha(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=Ha(a,o):(o=Jl(o,i,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,i=t.child.memoizedState,i=i===null?bS(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~n,e.memoizedState=xS,r}return o=t.child,t=o.sibling,r=Ha(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function GC(t,e){return e=a1({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mg(t,e,n,r){return r!==null&&RC(r),td(e,t.child,null,n),t=GC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function T8(t,e,n,r,s,o,i){if(n)return e.flags&256?(e.flags&=-257,r=Cb(Error(Ae(422))),mg(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=a1({mode:"visible",children:r.children},s,0,null),o=Jl(o,s,i,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&td(e,t.child,null,i),e.child.memoizedState=bS(i),e.memoizedState=xS,o);if(!(e.mode&1))return mg(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Ae(419)),r=Cb(o,r,void 0),mg(t,e,i,r)}if(a=(i&t.childLanes)!==0,ms||a){if(r=vr,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ea(t,s),Uo(r,t,s,-1))}return ZC(),r=Cb(Error(Ae(421))),mg(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=V8.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Ms=Ua(s.nextSibling),Vs=e,kn=!0,Lo=null,t!==null&&(so[oo++]=Hi,so[oo++]=Ki,so[oo++]=iu,Hi=t.id,Ki=t.overflow,iu=e),e=GC(e,r.children),e.flags|=4096,e)}function h_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fS(t.return,e,n)}function $b(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function mP(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(Qr(t,e,r.children,n),r=En.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&h_(t,n,e);else if(t.tag===19)h_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(un(En,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&G0(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$b(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&G0(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$b(e,!0,n,null,o);break;case"together":$b(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function c0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ta(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),lu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=Ha(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ha(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _8(t,e,n){switch(e.tag){case 3:fP(e),ed();break;case 5:V3(e);break;case 1:bs(e.type)&&z0(e);break;case 4:FC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;un(U0,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(En,En.current&1),e.flags|=128,null):n&e.child.childLanes?pP(t,e,n):(un(En,En.current&1),t=ta(t,e,n),t!==null?t.sibling:null);un(En,En.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),un(En,En.current),r)break;return null;case 22:case 23:return e.lanes=0,dP(t,e,n)}return ta(t,e,n)}var gP,wS,yP,vP;gP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wS=function(){};yP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Hl(gi.current);var o=null;switch(n){case"input":s=Ww(t,s),r=Ww(t,r),o=[];break;case"select":s=_n({},s,{value:void 0}),r=_n({},r,{value:void 0}),o=[];break;case"textarea":s=Hw(t,s),r=Hw(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=F0)}qw(n,r);var i;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(bf.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(bf.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&mn("scroll",t),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};vP=function(t,e,n,r){n!==r&&(e.flags|=4)};function lh(t,e){if(!kn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function N8(t,e,n){var r=e.pendingProps;switch(NC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(e),null;case 1:return bs(e.type)&&M0(),zr(e),null;case 3:return r=e.stateNode,nd(),yn(xs),yn(Kr),zC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lo!==null&&(_S(Lo),Lo=null))),wS(t,e),zr(e),null;case 5:MC(e);var s=Hl(Af.current);if(n=e.type,t!==null&&e.stateNode!=null)yP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return zr(e),null}if(t=Hl(gi.current),fg(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[di]=e,r[Nf]=o,t=(e.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(s=0;s<Fh.length;s++)mn(Fh[s],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":wT(r,o),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},mn("invalid",r);break;case"textarea":kT(r,o),mn("invalid",r)}qw(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&hg(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&hg(r.textContent,a,t),s=["children",""+a]):bf.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&mn("scroll",r)}switch(n){case"input":sg(r),ST(r,o,!0);break;case"textarea":sg(r),CT(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=F0)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[di]=e,t[Nf]=r,gP(t,e,!1,!1),e.stateNode=t;e:{switch(i=Xw(n,r),n){case"dialog":mn("cancel",t),mn("close",t),s=r;break;case"iframe":case"object":case"embed":mn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fh.length;s++)mn(Fh[s],t);s=r;break;case"source":mn("error",t),s=r;break;case"img":case"image":case"link":mn("error",t),mn("load",t),s=r;break;case"details":mn("toggle",t),s=r;break;case"input":wT(t,r),s=Ww(t,r),mn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=_n({},r,{value:void 0}),mn("invalid",t);break;case"textarea":kT(t,r),s=Hw(t,r),mn("invalid",t);break;default:s=r}qw(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?XO(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&KO(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wf(t,u):typeof u=="number"&&wf(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(bf.hasOwnProperty(o)?u!=null&&o==="onScroll"&&mn("scroll",t):u!=null&&mC(t,o,u,i))}switch(n){case"input":sg(t),ST(t,r,!1);break;case"textarea":sg(t),CT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Za(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Pc(t,!!r.multiple,o,!1):r.defaultValue!=null&&Pc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=F0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zr(e),null;case 6:if(t&&e.stateNode!=null)vP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Hl(Af.current),Hl(gi.current),fg(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(o=r.nodeValue!==n)&&(t=Vs,t!==null))switch(t.tag){case 3:hg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hg(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[di]=e,e.stateNode=r}return zr(e),null;case 13:if(yn(En),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kn&&Ms!==null&&e.mode&1&&!(e.flags&128))L3(),ed(),e.flags|=98560,o=!1;else if(o=fg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Ae(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ae(317));o[di]=e}else ed(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zr(e),o=!1}else Lo!==null&&(_S(Lo),Lo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||En.current&1?hr===0&&(hr=3):ZC())),e.updateQueue!==null&&(e.flags|=4),zr(e),null);case 4:return nd(),wS(t,e),t===null&&Tf(e.stateNode.containerInfo),zr(e),null;case 10:return OC(e.type._context),zr(e),null;case 17:return bs(e.type)&&M0(),zr(e),null;case 19:if(yn(En),o=e.memoizedState,o===null)return zr(e),null;if(r=(e.flags&128)!==0,i=o.rendering,i===null)if(r)lh(o,!1);else{if(hr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=G0(t),i!==null){for(e.flags|=128,lh(o,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return un(En,En.current&1|2),e.child}t=t.sibling}o.tail!==null&&Hn()>sd&&(e.flags|=128,r=!0,lh(o,!1),e.lanes=4194304)}else{if(!r)if(t=G0(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!kn)return zr(e),null}else 2*Hn()-o.renderingStartTime>sd&&n!==1073741824&&(e.flags|=128,r=!0,lh(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(n=o.last,n!==null?n.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Hn(),e.sibling=null,n=En.current,un(En,r?n&1|2:n&1),e):(zr(e),null);case 22:case 23:return YC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ds&1073741824&&(zr(e),e.subtreeFlags&6&&(e.flags|=8192)):zr(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function R8(t,e){switch(NC(e),e.tag){case 1:return bs(e.type)&&M0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nd(),yn(xs),yn(Kr),zC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MC(e),null;case 13:if(yn(En),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));ed()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yn(En),null;case 4:return nd(),null;case 10:return OC(e.type._context),null;case 22:case 23:return YC(),null;case 24:return null;default:return null}}var gg=!1,Ur=!1,A8=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Rc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ln(t,e,r)}else n.current=null}function SS(t,e,n){try{n()}catch(r){Ln(t,e,r)}}var f_=!1;function D8(t,e){if(oS=O0,t=k3(),TC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,l=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=i+s),d!==o||r!==0&&d.nodeType!==3||(u=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=i),h===o&&++c===r&&(u=i),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(iS={focusedElem:t,selectionRange:n},O0=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Do(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(b){Ln(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return p=f_,f_=!1,p}function rf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&SS(e,n,o)}s=s.next}while(s!==r)}}function o1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xP(t){var e=t.alternate;e!==null&&(t.alternate=null,xP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[di],delete e[Nf],delete e[uS],delete e[m8],delete e[g8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bP(t){return t.tag===5||t.tag===3||t.tag===4}function p_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function CS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=F0));else if(r!==4&&(t=t.child,t!==null))for(CS(t,e,n),t=t.sibling;t!==null;)CS(t,e,n),t=t.sibling}function $S(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($S(t,e,n),t=t.sibling;t!==null;)$S(t,e,n),t=t.sibling}var $r=null,Oo=!1;function va(t,e,n){for(n=n.child;n!==null;)wP(t,e,n),n=n.sibling}function wP(t,e,n){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(Zy,n)}catch{}switch(n.tag){case 5:Ur||Rc(n,e);case 6:var r=$r,s=Oo;$r=null,va(t,e,n),$r=r,Oo=s,$r!==null&&(Oo?(t=$r,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$r.removeChild(n.stateNode));break;case 18:$r!==null&&(Oo?(t=$r,n=n.stateNode,t.nodeType===8?vb(t.parentNode,n):t.nodeType===1&&vb(t,n),$f(t)):vb($r,n.stateNode));break;case 4:r=$r,s=Oo,$r=n.stateNode.containerInfo,Oo=!0,va(t,e,n),$r=r,Oo=s;break;case 0:case 11:case 14:case 15:if(!Ur&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&SS(n,e,i),s=s.next}while(s!==r)}va(t,e,n);break;case 1:if(!Ur&&(Rc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ln(n,e,a)}va(t,e,n);break;case 21:va(t,e,n);break;case 22:n.mode&1?(Ur=(r=Ur)||n.memoizedState!==null,va(t,e,n),Ur=r):va(t,e,n);break;default:va(t,e,n)}}function m_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new A8),e.forEach(function(r){var s=U8.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function _o(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:$r=a.stateNode,Oo=!1;break e;case 3:$r=a.stateNode.containerInfo,Oo=!0;break e;case 4:$r=a.stateNode.containerInfo,Oo=!0;break e}a=a.return}if($r===null)throw Error(Ae(160));wP(o,i,s),$r=null,Oo=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(l){Ln(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SP(e,t),e=e.sibling}function SP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_o(e,t),Qo(t),r&4){try{rf(3,t,t.return),o1(3,t)}catch(m){Ln(t,t.return,m)}try{rf(5,t,t.return)}catch(m){Ln(t,t.return,m)}}break;case 1:_o(e,t),Qo(t),r&512&&n!==null&&Rc(n,n.return);break;case 5:if(_o(e,t),Qo(t),r&512&&n!==null&&Rc(n,n.return),t.flags&32){var s=t.stateNode;try{wf(s,"")}catch(m){Ln(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=n!==null?n.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&jO(s,o),Xw(a,i);var l=Xw(a,o);for(i=0;i<u.length;i+=2){var c=u[i],d=u[i+1];c==="style"?XO(s,d):c==="dangerouslySetInnerHTML"?KO(s,d):c==="children"?wf(s,d):mC(s,c,d,l)}switch(a){case"input":jw(s,o);break;case"textarea":GO(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Pc(s,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Pc(s,!!o.multiple,o.defaultValue,!0):Pc(s,!!o.multiple,o.multiple?[]:"",!1))}s[Nf]=o}catch(m){Ln(t,t.return,m)}}break;case 6:if(_o(e,t),Qo(t),r&4){if(t.stateNode===null)throw Error(Ae(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(m){Ln(t,t.return,m)}}break;case 3:if(_o(e,t),Qo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$f(e.containerInfo)}catch(m){Ln(t,t.return,m)}break;case 4:_o(e,t),Qo(t);break;case 13:_o(e,t),Qo(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(qC=Hn())),r&4&&m_(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ur=(l=Ur)||c,_o(e,t),Ur=l):_o(e,t),Qo(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Ke=t,c=t.child;c!==null;){for(d=Ke=c;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:rf(4,h,h.return);break;case 1:Rc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ln(r,n,m)}}break;case 5:Rc(h,h.return);break;case 22:if(h.memoizedState!==null){y_(d);continue}}f!==null?(f.return=h,Ke=f):y_(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,l?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,u=d.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=qO("display",i))}catch(m){Ln(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){Ln(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_o(e,t),Qo(t),r&4&&m_(t);break;case 21:break;default:_o(e,t),Qo(t)}}function Qo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bP(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wf(s,""),r.flags&=-33);var o=p_(t);$S(t,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=p_(t);CS(t,a,i);break;default:throw Error(Ae(161))}}catch(u){Ln(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O8(t,e,n){Ke=t,kP(t)}function kP(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||gg;if(!i){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Ur;a=gg;var l=Ur;if(gg=i,(Ur=u)&&!l)for(Ke=s;Ke!==null;)i=Ke,u=i.child,i.tag===22&&i.memoizedState!==null?v_(s):u!==null?(u.return=i,Ke=u):v_(s);for(;o!==null;)Ke=o,kP(o),o=o.sibling;Ke=s,gg=a,Ur=l}g_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Ke=o):g_(t)}}function g_(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ur||o1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ur)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Do(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&e_(e,o,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e_(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&$f(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Ur||e.flags&512&&kS(e)}catch(h){Ln(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function y_(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function v_(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{o1(4,e)}catch(u){Ln(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ln(e,s,u)}}var o=e.return;try{kS(e)}catch(u){Ln(e,o,u)}break;case 5:var i=e.return;try{kS(e)}catch(u){Ln(e,i,u)}}}catch(u){Ln(e,e.return,u)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var P8=Math.ceil,q0=ua.ReactCurrentDispatcher,HC=ua.ReactCurrentOwner,yo=ua.ReactCurrentBatchConfig,Dt=0,vr=null,tr=null,Er=0,Ds=0,Ac=ll(0),hr=0,Lf=null,lu=0,i1=0,KC=0,sf=null,fs=null,qC=0,sd=1/0,Vi=null,X0=!1,IS=null,ja=null,yg=!1,Da=null,Y0=0,of=0,ES=null,d0=-1,h0=0;function ts(){return Dt&6?Hn():d0!==-1?d0:d0=Hn()}function Ga(t){return t.mode&1?Dt&2&&Er!==0?Er&-Er:v8.transition!==null?(h0===0&&(h0=a3()),h0):(t=Ht,t!==0||(t=window.event,t=t===void 0?16:p3(t.type)),t):1}function Uo(t,e,n,r){if(50<of)throw of=0,ES=null,Error(Ae(185));up(t,n,r),(!(Dt&2)||t!==vr)&&(t===vr&&(!(Dt&2)&&(i1|=n),hr===4&&Na(t,Er)),ws(t,r),n===1&&Dt===0&&!(e.mode&1)&&(sd=Hn()+500,n1&&ul()))}function ws(t,e){var n=t.callbackNode;vj(t,e);var r=D0(t,t===vr?Er:0);if(r===0)n!==null&&ET(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ET(n),e===1)t.tag===0?y8(x_.bind(null,t)):D3(x_.bind(null,t)),f8(function(){!(Dt&6)&&ul()}),n=null;else{switch(l3(r)){case 1:n=bC;break;case 4:n=o3;break;case 16:n=A0;break;case 536870912:n=i3;break;default:n=A0}n=RP(n,CP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CP(t,e){if(d0=-1,h0=0,Dt&6)throw Error(Ae(327));var n=t.callbackNode;if(Bc()&&t.callbackNode!==n)return null;var r=D0(t,t===vr?Er:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Z0(t,r);else{e=r;var s=Dt;Dt|=2;var o=IP();(vr!==t||Er!==e)&&(Vi=null,sd=Hn()+500,Ql(t,e));do try{M8();break}catch(a){$P(t,a)}while(1);DC(),q0.current=o,Dt=s,tr!==null?e=0:(vr=null,Er=0,e=hr)}if(e!==0){if(e===2&&(s=eS(t),s!==0&&(r=s,e=TS(t,s))),e===1)throw n=Lf,Ql(t,0),Na(t,r),ws(t,Hn()),n;if(e===6)Na(t,r);else{if(s=t.current.alternate,!(r&30)&&!L8(s)&&(e=Z0(t,r),e===2&&(o=eS(t),o!==0&&(r=o,e=TS(t,o))),e===1))throw n=Lf,Ql(t,0),Na(t,r),ws(t,Hn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:Pl(t,fs,Vi);break;case 3:if(Na(t,r),(r&130023424)===r&&(e=qC+500-Hn(),10<e)){if(D0(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ts(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lS(Pl.bind(null,t,fs,Vi),e);break}Pl(t,fs,Vi);break;case 4:if(Na(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-Vo(r);o=1<<i,i=e[i],i>s&&(s=i),r&=~o}if(r=s,r=Hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*P8(r/1960))-r,10<r){t.timeoutHandle=lS(Pl.bind(null,t,fs,Vi),r);break}Pl(t,fs,Vi);break;case 5:Pl(t,fs,Vi);break;default:throw Error(Ae(329))}}}return ws(t,Hn()),t.callbackNode===n?CP.bind(null,t):null}function TS(t,e){var n=sf;return t.current.memoizedState.isDehydrated&&(Ql(t,e).flags|=256),t=Z0(t,e),t!==2&&(e=fs,fs=n,e!==null&&_S(e)),t}function _S(t){fs===null?fs=t:fs.push.apply(fs,t)}function L8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Ho(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Na(t,e){for(e&=~KC,e&=~i1,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vo(e),r=1<<n;t[n]=-1,e&=~r}}function x_(t){if(Dt&6)throw Error(Ae(327));Bc();var e=D0(t,0);if(!(e&1))return ws(t,Hn()),null;var n=Z0(t,e);if(t.tag!==0&&n===2){var r=eS(t);r!==0&&(e=r,n=TS(t,r))}if(n===1)throw n=Lf,Ql(t,0),Na(t,e),ws(t,Hn()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pl(t,fs,Vi),ws(t,Hn()),null}function XC(t,e){var n=Dt;Dt|=1;try{return t(e)}finally{Dt=n,Dt===0&&(sd=Hn()+500,n1&&ul())}}function uu(t){Da!==null&&Da.tag===0&&!(Dt&6)&&Bc();var e=Dt;Dt|=1;var n=yo.transition,r=Ht;try{if(yo.transition=null,Ht=1,t)return t()}finally{Ht=r,yo.transition=n,Dt=e,!(Dt&6)&&ul()}}function YC(){Ds=Ac.current,yn(Ac)}function Ql(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,h8(n)),tr!==null)for(n=tr.return;n!==null;){var r=n;switch(NC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&M0();break;case 3:nd(),yn(xs),yn(Kr),zC();break;case 5:MC(r);break;case 4:nd();break;case 13:yn(En);break;case 19:yn(En);break;case 10:OC(r.type._context);break;case 22:case 23:YC()}n=n.return}if(vr=t,tr=t=Ha(t.current,null),Er=Ds=e,hr=0,Lf=null,KC=i1=lu=0,fs=sf=null,Gl!==null){for(e=0;e<Gl.length;e++)if(n=Gl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}Gl=null}return t}function $P(t,e){do{var n=tr;try{if(DC(),l0.current=K0,H0){for(var r=Tn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}H0=!1}if(au=0,gr=ur=Tn=null,nf=!1,Df=0,HC.current=null,n===null||n.return===null){hr=1,Lf=e,tr=null;break}e:{var o=t,i=n.return,a=n,u=e;if(e=Er,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=i_(i);if(f!==null){f.flags&=-257,a_(f,i,a,o,e),f.mode&1&&o_(o,l,e),e=f,u=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(u),e.updateQueue=m}else p.add(u);break e}else{if(!(e&1)){o_(o,l,e),ZC();break e}u=Error(Ae(426))}}else if(kn&&a.mode&1){var y=i_(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),a_(y,i,a,o,e),RC(rd(u,a));break e}}o=u=rd(u,a),hr!==4&&(hr=2),sf===null?sf=[o]:sf.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=lP(o,u,e);JT(o,g);break e;case 1:a=u;var v=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ja===null||!ja.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var b=uP(o,a,e);JT(o,b);break e}}o=o.return}while(o!==null)}TP(n)}catch(w){e=w,tr===n&&n!==null&&(tr=n=n.return);continue}break}while(1)}function IP(){var t=q0.current;return q0.current=K0,t===null?K0:t}function ZC(){(hr===0||hr===3||hr===2)&&(hr=4),vr===null||!(lu&268435455)&&!(i1&268435455)||Na(vr,Er)}function Z0(t,e){var n=Dt;Dt|=2;var r=IP();(vr!==t||Er!==e)&&(Vi=null,Ql(t,e));do try{F8();break}catch(s){$P(t,s)}while(1);if(DC(),Dt=n,q0.current=r,tr!==null)throw Error(Ae(261));return vr=null,Er=0,hr}function F8(){for(;tr!==null;)EP(tr)}function M8(){for(;tr!==null&&!uj();)EP(tr)}function EP(t){var e=NP(t.alternate,t,Ds);t.memoizedProps=t.pendingProps,e===null?TP(t):tr=e,HC.current=null}function TP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=R8(n,e),n!==null){n.flags&=32767,tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hr=6,tr=null;return}}else if(n=N8(n,e,Ds),n!==null){tr=n;return}if(e=e.sibling,e!==null){tr=e;return}tr=e=t}while(e!==null);hr===0&&(hr=5)}function Pl(t,e,n){var r=Ht,s=yo.transition;try{yo.transition=null,Ht=1,z8(t,e,n,r)}finally{yo.transition=s,Ht=r}return null}function z8(t,e,n,r){do Bc();while(Da!==null);if(Dt&6)throw Error(Ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(xj(t,o),t===vr&&(tr=vr=null,Er=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yg||(yg=!0,RP(A0,function(){return Bc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=yo.transition,yo.transition=null;var i=Ht;Ht=1;var a=Dt;Dt|=4,HC.current=null,D8(t,n),SP(n,t),o8(iS),O0=!!oS,iS=oS=null,t.current=n,O8(n),cj(),Dt=a,Ht=i,yo.transition=o}else t.current=n;if(yg&&(yg=!1,Da=t,Y0=s),o=t.pendingLanes,o===0&&(ja=null),fj(n.stateNode),ws(t,Hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(X0)throw X0=!1,t=IS,IS=null,t;return Y0&1&&t.tag!==0&&Bc(),o=t.pendingLanes,o&1?t===ES?of++:(of=0,ES=t):of=0,ul(),null}function Bc(){if(Da!==null){var t=l3(Y0),e=yo.transition,n=Ht;try{if(yo.transition=null,Ht=16>t?16:t,Da===null)var r=!1;else{if(t=Da,Da=null,Y0=0,Dt&6)throw Error(Ae(331));var s=Dt;for(Dt|=4,Ke=t.current;Ke!==null;){var o=Ke,i=o.child;if(Ke.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Ke=l;Ke!==null;){var c=Ke;switch(c.tag){case 0:case 11:case 15:rf(8,c,o)}var d=c.child;if(d!==null)d.return=c,Ke=d;else for(;Ke!==null;){c=Ke;var h=c.sibling,f=c.return;if(xP(c),c===l){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Ke=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Ke=i;else e:for(;Ke!==null;){if(o=Ke,o.flags&2048)switch(o.tag){case 0:case 11:case 15:rf(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Ke=g;break e}Ke=o.return}}var v=t.current;for(Ke=v;Ke!==null;){i=Ke;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,Ke=x;else e:for(i=v;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:o1(9,a)}}catch(w){Ln(a,a.return,w)}if(a===i){Ke=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Ke=b;break e}Ke=a.return}}if(Dt=s,ul(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(Zy,t)}catch{}r=!0}return r}finally{Ht=n,yo.transition=e}}return!1}function b_(t,e,n){e=rd(n,e),e=lP(t,e,1),t=Wa(t,e,1),e=ts(),t!==null&&(up(t,1,e),ws(t,e))}function Ln(t,e,n){if(t.tag===3)b_(t,t,n);else for(;e!==null;){if(e.tag===3){b_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ja===null||!ja.has(r))){t=rd(n,t),t=uP(e,t,1),e=Wa(e,t,1),t=ts(),e!==null&&(up(e,1,t),ws(e,t));break}}e=e.return}}function B8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ts(),t.pingedLanes|=t.suspendedLanes&n,vr===t&&(Er&n)===n&&(hr===4||hr===3&&(Er&130023424)===Er&&500>Hn()-qC?Ql(t,0):KC|=n),ws(t,e)}function _P(t,e){e===0&&(t.mode&1?(e=ag,ag<<=1,!(ag&130023424)&&(ag=4194304)):e=1);var n=ts();t=ea(t,e),t!==null&&(up(t,e,n),ws(t,n))}function V8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_P(t,n)}function U8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),_P(t,n)}var NP;NP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xs.current)ms=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ms=!1,_8(t,e,n);ms=!!(t.flags&131072)}else ms=!1,kn&&e.flags&1048576&&O3(e,V0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;c0(t,e),t=e.pendingProps;var s=Jc(e,Kr.current);zc(e,n),s=VC(null,e,r,t,s,n);var o=UC();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bs(r)?(o=!0,z0(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,LC(e),s.updater=s1,e.stateNode=s,s._reactInternals=e,mS(e,r,t,n),e=vS(null,e,r,!0,o,n)):(e.tag=0,kn&&o&&_C(e),Qr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(c0(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=j8(r),t=Do(r,t),s){case 0:e=yS(null,e,r,t,n);break e;case 1:e=c_(null,e,r,t,n);break e;case 11:e=l_(null,e,r,t,n);break e;case 14:e=u_(null,e,r,Do(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Do(r,s),yS(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Do(r,s),c_(t,e,r,s,n);case 3:e:{if(fP(e),t===null)throw Error(Ae(387));r=e.pendingProps,o=e.memoizedState,s=o.element,B3(t,e),j0(e,r,null,n);var i=e.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=rd(Error(Ae(423)),e),e=d_(t,e,r,n,s);break e}else if(r!==s){s=rd(Error(Ae(424)),e),e=d_(t,e,r,n,s);break e}else for(Ms=Ua(e.stateNode.containerInfo.firstChild),Vs=e,kn=!0,Lo=null,n=M3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ed(),r===s){e=ta(t,e,n);break e}Qr(t,e,r,n)}e=e.child}return e;case 5:return V3(e),t===null&&hS(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,aS(r,s)?i=null:o!==null&&aS(r,o)&&(e.flags|=32),hP(t,e),Qr(t,e,i,n),e.child;case 6:return t===null&&hS(e),null;case 13:return pP(t,e,n);case 4:return FC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=td(e,null,r,n):Qr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Do(r,s),l_(t,e,r,s,n);case 7:return Qr(t,e,e.pendingProps,n),e.child;case 8:return Qr(t,e,e.pendingProps.children,n),e.child;case 12:return Qr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,un(U0,r._currentValue),r._currentValue=i,o!==null)if(Ho(o.value,i)){if(o.children===s.children&&!xs.current){e=ta(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Xi(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),fS(o.return,n,e),a.lanes|=n;break}u=u.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Ae(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),fS(i,n,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Qr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zc(e,n),s=vo(s),r=r(s),e.flags|=1,Qr(t,e,r,n),e.child;case 14:return r=e.type,s=Do(r,e.pendingProps),s=Do(r.type,s),u_(t,e,r,s,n);case 15:return cP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Do(r,s),c0(t,e),e.tag=1,bs(r)?(t=!0,z0(e)):t=!1,zc(e,n),aP(e,r,s),mS(e,r,s,n),vS(null,e,r,!0,t,n);case 19:return mP(t,e,n);case 22:return dP(t,e,n)}throw Error(Ae(156,e.tag))};function RP(t,e){return s3(t,e)}function W8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function co(t,e,n,r){return new W8(t,e,n,r)}function QC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j8(t){if(typeof t=="function")return QC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yC)return 11;if(t===vC)return 14}return 2}function Ha(t,e){var n=t.alternate;return n===null?(n=co(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function f0(t,e,n,r,s,o){var i=2;if(r=t,typeof t=="function")QC(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Sc:return Jl(n.children,s,o,e);case gC:i=8,s|=8;break;case zw:return t=co(12,n,e,s|2),t.elementType=zw,t.lanes=o,t;case Bw:return t=co(13,n,e,s),t.elementType=Bw,t.lanes=o,t;case Vw:return t=co(19,n,e,s),t.elementType=Vw,t.lanes=o,t;case VO:return a1(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zO:i=10;break e;case BO:i=9;break e;case yC:i=11;break e;case vC:i=14;break e;case $a:i=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=co(i,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function Jl(t,e,n,r){return t=co(7,t,r,e),t.lanes=n,t}function a1(t,e,n,r){return t=co(22,t,r,e),t.elementType=VO,t.lanes=n,t.stateNode={isHidden:!1},t}function Ib(t,e,n){return t=co(6,t,null,e),t.lanes=n,t}function Eb(t,e,n){return e=co(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function G8(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ab(0),this.expirationTimes=ab(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ab(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function JC(t,e,n,r,s,o,i,a,u){return t=new G8(t,e,n,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=co(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},LC(o),t}function H8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AP(t){if(!t)return Qa;t=t._reactInternals;e:{if(Au(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(bs(n))return A3(t,n,e)}return e}function DP(t,e,n,r,s,o,i,a,u){return t=JC(n,r,!0,t,s,o,i,a,u),t.context=AP(null),n=t.current,r=ts(),s=Ga(n),o=Xi(r,s),o.callback=e??null,Wa(n,o,s),t.current.lanes=s,up(t,s,r),ws(t,r),t}function l1(t,e,n,r){var s=e.current,o=ts(),i=Ga(s);return n=AP(n),e.context===null?e.context=n:e.pendingContext=n,e=Xi(o,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wa(s,e,i),t!==null&&(Uo(t,s,i,o),a0(t,s,i)),i}function Q0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function w_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function e2(t,e){w_(t,e),(t=t.alternate)&&w_(t,e)}function K8(){return null}var OP=typeof reportError=="function"?reportError:function(t){console.error(t)};function t2(t){this._internalRoot=t}u1.prototype.render=t2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));l1(t,e,null,null)};u1.prototype.unmount=t2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uu(function(){l1(null,t,null,null)}),e[Ji]=null}};function u1(t){this._internalRoot=t}u1.prototype.unstable_scheduleHydration=function(t){if(t){var e=d3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_a.length&&e!==0&&e<_a[n].priority;n++);_a.splice(n,0,t),n===0&&f3(t)}};function n2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S_(){}function q8(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var l=Q0(i);o.call(l)}}var i=DP(e,r,t,0,null,!1,!1,"",S_);return t._reactRootContainer=i,t[Ji]=i.current,Tf(t.nodeType===8?t.parentNode:t),uu(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Q0(u);a.call(l)}}var u=JC(t,0,!1,null,null,!1,!1,"",S_);return t._reactRootContainer=u,t[Ji]=u.current,Tf(t.nodeType===8?t.parentNode:t),uu(function(){l1(e,u,n,r)}),u}function d1(t,e,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var u=Q0(i);a.call(u)}}l1(e,i,t,s)}else i=q8(n,e,t,s,r);return Q0(i)}u3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lh(e.pendingLanes);n!==0&&(wC(e,n|1),ws(e,Hn()),!(Dt&6)&&(sd=Hn()+500,ul()))}break;case 13:uu(function(){var r=ea(t,1);if(r!==null){var s=ts();Uo(r,t,1,s)}}),e2(t,1)}};SC=function(t){if(t.tag===13){var e=ea(t,134217728);if(e!==null){var n=ts();Uo(e,t,134217728,n)}e2(t,134217728)}};c3=function(t){if(t.tag===13){var e=Ga(t),n=ea(t,e);if(n!==null){var r=ts();Uo(n,t,e,r)}e2(t,e)}};d3=function(){return Ht};h3=function(t,e){var n=Ht;try{return Ht=t,e()}finally{Ht=n}};Zw=function(t,e,n){switch(e){case"input":if(jw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=t1(r);if(!s)throw Error(Ae(90));WO(r),jw(r,s)}}}break;case"textarea":GO(t,n);break;case"select":e=n.value,e!=null&&Pc(t,!!n.multiple,e,!1)}};QO=XC;JO=uu;var X8={usingClientEntryPoint:!1,Events:[dp,Ic,t1,YO,ZO,XC]},uh={findFiberByHostInstance:jl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y8={bundleType:uh.bundleType,version:uh.version,rendererPackageName:uh.rendererPackageName,rendererConfig:uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n3(t),t===null?null:t.stateNode},findFiberByHostInstance:uh.findFiberByHostInstance||K8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vg.isDisabled&&vg.supportsFiber)try{Zy=vg.inject(Y8),mi=vg}catch{}}qs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X8;qs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n2(e))throw Error(Ae(200));return H8(t,e,null,n)};qs.createRoot=function(t,e){if(!n2(t))throw Error(Ae(299));var n=!1,r="",s=OP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=JC(t,1,!1,null,null,n,!1,r,s),t[Ji]=e.current,Tf(t.nodeType===8?t.parentNode:t),new t2(e)};qs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=n3(e),t=t===null?null:t.stateNode,t};qs.flushSync=function(t){return uu(t)};qs.hydrate=function(t,e,n){if(!c1(e))throw Error(Ae(200));return d1(null,t,e,!0,n)};qs.hydrateRoot=function(t,e,n){if(!n2(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=OP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=DP(e,null,t,1,n??null,s,!1,o,i),t[Ji]=e.current,Tf(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new u1(e)};qs.render=function(t,e,n){if(!c1(e))throw Error(Ae(200));return d1(null,t,e,!1,n)};qs.unmountComponentAtNode=function(t){if(!c1(t))throw Error(Ae(40));return t._reactRootContainer?(uu(function(){d1(null,null,t,!1,function(){t._reactRootContainer=null,t[Ji]=null})}),!0):!1};qs.unstable_batchedUpdates=XC;qs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!c1(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return d1(t,e,n,!1,r)};qs.version="18.3.1-next-f1338f8080-20240426";function PP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PP)}catch(t){console.error(t)}}PP(),PO.exports=qs;var r2=PO.exports;const LP=Ed(r2),Z8=Xy({__proto__:null,default:LP},[r2]);var k_=r2;Fw.createRoot=k_.createRoot,Fw.hydrateRoot=k_.hydrateRoot;const Q8={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let J8=class NS{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Q8,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new NS(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new NS(this.logger,e)}};var fi=new J8;let h1=class{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(i=>{let[a,u]=i;for(let l=0;l<u;l++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(i=>{let[a,u]=i;for(let l=0;l<u;l++)a.apply(a,[e,...r])})}};const ch=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},C_=t=>t==null?"":""+t,eG=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},tG=/###/g,$_=t=>t&&t.indexOf("###")>-1?t.replace(tG,"."):t,I_=t=>!t||typeof t=="string",af=(t,e,n)=>{const r=typeof e!="string"?e:e.split(".");let s=0;for(;s<r.length-1;){if(I_(t))return{};const o=$_(r[s]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++s}return I_(t)?{}:{obj:t,k:$_(r[s])}},E_=(t,e,n)=>{const{obj:r,k:s}=af(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let o=e[e.length-1],i=e.slice(0,e.length-1),a=af(t,i,Object);for(;a.obj===void 0&&i.length;)o=`${i[i.length-1]}.${o}`,i=i.slice(0,i.length-1),a=af(t,i,Object),a&&a.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=n},nG=(t,e,n,r)=>{const{obj:s,k:o}=af(t,e,Object);s[o]=s[o]||[],s[o].push(n)},J0=(t,e)=>{const{obj:n,k:r}=af(t,e);if(n)return n[r]},rG=(t,e,n)=>{const r=J0(t,n);return r!==void 0?r:J0(e,n)},FP=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):FP(t[r],e[r],n):t[r]=e[r]);return t},Qu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var sG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const oG=t=>typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>sG[e]):t;class iG{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const aG=[" ",",","?","!",";"],lG=new iG(20),uG=(t,e,n)=>{e=e||"",n=n||"";const r=aG.filter(i=>e.indexOf(i)<0&&n.indexOf(i)<0);if(r.length===0)return!0;const s=lG.getRegExp(`(${r.map(i=>i==="?"?"\\?":i).join("|")})`);let o=!s.test(t);if(!o){const i=t.indexOf(n);i>0&&!s.test(t.substring(0,i))&&(o=!0)}return o},RS=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let o=0;o<r.length;){if(!s||typeof s!="object")return;let i,a="";for(let u=o;u<r.length;++u)if(u!==o&&(a+=n),a+=r[u],i=s[a],i!==void 0){if(["string","number","boolean"].indexOf(typeof i)>-1&&u<r.length-1)continue;o+=u-o+1;break}s=i}return s},ey=t=>t&&t.indexOf("_")>0?t.replace("_","-"):t;class T_ extends h1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,i=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&o?a.push(...r.split(o)):a.push(r)));const u=J0(this.data,a);return!u&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),u||!i||typeof r!="string"?u:RS(this.data&&this.data[e]&&this.data[e][n],r,o)}addResource(e,n,r,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(i?r.split(i):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),E_(this.data,a,s),o.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(typeof r[o]=="string"||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,o){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let u=J0(this.data,a)||{};i.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?FP(u,r,o):u={...u,...r},E_(this.data,a,u),i.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var MP={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,n,r,s))}),e}};const __={};class ty extends h1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),eG(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=fi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const i=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!uG(e,r,s);if(i&&!a){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:o};const l=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(l[0])>-1)&&(o=l.shift()),e=l.join(s)}return typeof o=="string"&&(o=[o]),{key:e,namespaces:o}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:i,namespaces:a}=this.extractFromKey(e[e.length-1],n),u=a[a.length-1],l=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&l.toLowerCase()==="cimode"){if(c){const b=n.nsSeparator||this.options.nsSeparator;return s?{res:`${u}${b}${i}`,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:`${u}${b}${i}`}return s?{res:i,usedKey:i,exactUsedKey:i,usedLng:l,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:i}const d=this.resolve(e,n);let h=d&&d.res;const f=d&&d.usedKey||i,p=d&&d.exactUsedKey||i,m=Object.prototype.toString.apply(h),y=["[object Number]","[object Function]","[object RegExp]"],g=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject;if(v&&h&&(typeof h!="string"&&typeof h!="boolean"&&typeof h!="number")&&y.indexOf(m)<0&&!(typeof g=="string"&&Array.isArray(h))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const b=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...n,ns:a}):`key '${i} (${this.language})' returned an object instead of string.`;return s?(d.res=b,d.usedParams=this.getUsedParamsDetails(n),d):b}if(o){const b=Array.isArray(h),w=b?[]:{},k=b?p:f;for(const C in h)if(Object.prototype.hasOwnProperty.call(h,C)){const $=`${k}${o}${C}`;w[C]=this.translate($,{...n,joinArrays:!1,ns:a}),w[C]===$&&(w[C]=h[C])}h=w}}else if(v&&typeof g=="string"&&Array.isArray(h))h=h.join(g),h&&(h=this.extendTranslation(h,e,n,r));else{let b=!1,w=!1;const k=n.count!==void 0&&typeof n.count!="string",C=ty.hasDefaultValue(n),$=k?this.pluralResolver.getSuffix(l,n.count,n):"",E=n.ordinal&&k?this.pluralResolver.getSuffix(l,n.count,{ordinal:!1}):"",S=k&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),R=S&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${$}`]||n[`defaultValue${E}`]||n.defaultValue;!this.isValidLookup(h)&&C&&(b=!0,h=R),this.isValidLookup(h)||(w=!0,h=i);const P=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&w?void 0:h,I=C&&R!==h&&this.options.updateMissing;if(w||b||I){if(this.logger.log(I?"updateKey":"missingKey",l,u,i,I?R:h),o){const z=this.resolve(i,{...n,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let A=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let z=0;z<L.length;z++)A.push(L[z]);else this.options.saveMissingTo==="all"?A=this.languageUtils.toResolveHierarchy(n.lng||this.language):A.push(n.lng||this.language);const V=(z,M,_)=>{const F=C&&_!==h?_:P;this.options.missingKeyHandler?this.options.missingKeyHandler(z,u,M,F,I,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(z,u,M,F,I,n),this.emit("missingKey",z,u,M,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?A.forEach(z=>{const M=this.pluralResolver.getSuffixes(z,n);S&&n[`defaultValue${this.options.pluralSeparator}zero`]&&M.indexOf(`${this.options.pluralSeparator}zero`)<0&&M.push(`${this.options.pluralSeparator}zero`),M.forEach(_=>{V([z],i+_,n[`defaultValue${_}`]||R)})}):V(A,i,R))}h=this.extendTranslation(h,e,n,d,r),w&&h===i&&this.options.appendNamespaceToMissingKey&&(h=`${u}:${i}`),(w||b)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}:${i}`:i,b?h:void 0):h=this.options.parseMissingKeyHandler(h))}return s?(d.res=h,d.usedParams=this.getUsedParamsDetails(n),d):h}extendTranslation(e,n,r,s,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const l=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(l){const h=e.match(this.interpolator.nestingRegexp);c=h&&h.length}let d=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,r.lng||this.language||s.usedLng,r),l){const h=e.match(this.interpolator.nestingRegexp),f=h&&h.length;c<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,f=new Array(h),p=0;p<h;p++)f[p]=arguments[p];return o&&o[0]===f[0]&&!r.context?(i.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${n[0]}`),null):i.translate(...f,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,u=typeof a=="string"?[a]:a;return e!=null&&u&&u.length&&r.applyPostProcessor!==!1&&(e=MP.handle(u,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,o,i,a;return typeof e=="string"&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;const l=this.extractFromKey(u,n),c=l.key;s=c;let d=l.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=n.count!==void 0&&typeof n.count!="string",f=h&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",m=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(y=>{this.isValidLookup(r)||(a=y,!__[`${m[0]}-${y}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(__[`${m[0]}-${y}`]=!0,this.logger.warn(`key "${s}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(g=>{if(this.isValidLookup(r))return;i=g;const v=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,c,g,y,n);else{let b;h&&(b=this.pluralResolver.getSuffix(g,n.count,n));const w=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(v.push(c+b),n.ordinal&&b.indexOf(k)===0&&v.push(c+b.replace(k,this.options.pluralSeparator)),f&&v.push(c+w)),p){const C=`${c}${this.options.contextSeparator}${n.context}`;v.push(C),h&&(v.push(C+b),n.ordinal&&b.indexOf(k)===0&&v.push(C+b.replace(k,this.options.pluralSeparator)),f&&v.push(C+w))}}let x;for(;x=v.pop();)this.isValidLookup(r)||(o=x,r=this.getResource(g,y,x,n))}))})}),{res:r,usedKey:s,exactUsedKey:o,usedLng:i,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const o of n)delete s[o]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Tb=t=>t.charAt(0).toUpperCase()+t.slice(1);class N_{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fi.create("languageUtils")}getScriptPartFromCode(e){if(e=ey(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=ey(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Tb(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Tb(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Tb(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],o=i=>{i&&(this.isSupportedCode(i)?s.push(i):this.logger.warn(`rejecting language code not found in supportedLngs: ${i}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):typeof e=="string"&&o(this.formatLanguageCode(e)),r.forEach(i=>{s.indexOf(i)<0&&o(this.formatLanguageCode(i))}),s}}let cG=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],dG={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const hG=["v1","v2","v3"],fG=["v4"],R_={zero:0,one:1,two:2,few:3,many:4,other:5},pG=()=>{const t={};return cG.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:dG[e.fc]}})}),t};class mG{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=fi.create("pluralResolver"),(!this.options.compatibilityJSON||fG.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=pG(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=ey(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:s});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];const i=new Intl.PluralRules(r,{type:s});return this.pluralRulesCache[o]=i,i}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,o)=>R_[s]-R_[o]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const o=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!hG.includes(this.options.compatibilityJSON)}}const A_=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=rG(t,e,n);return!o&&s&&typeof n=="string"&&(o=RS(t,n,r),o===void 0&&(o=RS(e,n,r))),o},_b=t=>t.replace(/\$/g,"$$$$");class gG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=fi.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:o,prefixEscaped:i,suffix:a,suffixEscaped:u,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:y,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=n!==void 0?n:oG,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=o?Qu(o):i||"{{",this.suffix=a?Qu(a):u||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?Qu(h):f||Qu("$t("),this.nestingSuffix=p?Qu(p):m||Qu(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=g||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let o,i,a;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=f=>{if(f.indexOf(this.formatSeparator)<0){const g=A_(n,u,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(g,void 0,r,{...s,...n,interpolationkey:f}):g}const p=f.split(this.formatSeparator),m=p.shift().trim(),y=p.join(this.formatSeparator).trim();return this.format(A_(n,u,m,this.options.keySeparator,this.options.ignoreJSONStructure),y,r,{...s,...n,interpolationkey:m})};this.resetRegExp();const c=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,d=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>_b(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?_b(this.escape(f)):_b(f)}].forEach(f=>{for(a=0;o=f.regex.exec(e);){const p=o[1].trim();if(i=l(p),i===void 0)if(typeof c=="function"){const y=c(e,o,s);i=typeof y=="string"?y:""}else if(s&&Object.prototype.hasOwnProperty.call(s,p))i="";else if(d){i=o[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),i="";else typeof i!="string"&&!this.useRawValueToEscape&&(i=C_(i));const m=f.safeValue(i);if(e=e.replace(o[0],m),d?(f.regex.lastIndex+=i.length,f.regex.lastIndex-=o[0].length):f.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,o,i;const a=(u,l)=>{const c=this.nestingOptionsSeparator;if(u.indexOf(c)<0)return u;const d=u.split(new RegExp(`${c}[ ]*{`));let h=`{${d[1]}`;u=d[0],h=this.interpolate(h,i);const f=h.match(/'/g),p=h.match(/"/g);(f&&f.length%2===0&&!p||p.length%2!==0)&&(h=h.replace(/'/g,'"'));try{i=JSON.parse(h),l&&(i={...l,...i})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,m),`${u}${c}${h}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,u};for(;s=this.nestingRegexp.exec(e);){let u=[];i={...r},i=i.replace&&typeof i.replace!="string"?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let l=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const c=s[1].split(this.formatSeparator).map(d=>d.trim());s[1]=c.shift(),u=c,l=!0}if(o=n(a.call(this,s[1].trim(),i),i),o&&s[0]===e&&typeof o!="string")return o;typeof o!="string"&&(o=C_(o)),o||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),o=""),l&&(o=u.reduce((c,d)=>this.format(c,d,r.lng,{...r,interpolationkey:s[1].trim()}),o.trim())),e=e.replace(s[0],o),this.regexp.lastIndex=0}return e}}const yG=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(i=>{if(i){const[a,...u]=i.split(":"),l=u.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=l),l==="false"&&(n[c]=!1),l==="true"&&(n[c]=!0),isNaN(l)||(n[c]=parseInt(l,10))}})}return{formatName:e,formatOptions:n}},Ju=t=>{const e={};return(n,r,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const i=r+JSON.stringify(o);let a=e[i];return a||(a=t(ey(r),s),e[i]=a),a(n)}};class vG{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=fi.create("formatter"),this.options=e,this.formats={number:Ju((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return o=>s.format(o)}),currency:Ju((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return o=>s.format(o)}),datetime:Ju((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return o=>s.format(o)}),relativetime:Ju((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return o=>s.format(o,r.range||"day")}),list:Ju((n,r)=>{const s=new Intl.ListFormat(n,{...r});return o=>s.format(o)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Ju(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(u=>u.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,u)=>{const{formatName:l,formatOptions:c}=yG(u);if(this.formats[l]){let d=a;try{const h=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},f=h.locale||h.lng||s.locale||s.lng||r;d=this.formats[l](a,f,{...c,...s,...h})}catch(h){this.logger.warn(h)}return d}else this.logger.warn(`there was no format function for ${l}`);return a},e)}}const xG=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class bG extends h1{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=fi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const o={},i={},a={},u={};return e.forEach(l=>{let c=!0;n.forEach(d=>{const h=`${l}|${d}`;!r.reload&&this.store.hasResourceBundle(l,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?i[h]===void 0&&(i[h]=!0):(this.state[h]=1,c=!1,i[h]===void 0&&(i[h]=!0),o[h]===void 0&&(o[h]=!0),u[d]===void 0&&(u[d]=!0)))}),c||(a[l]=!0)}),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(u)}}loaded(e,n,r){const s=e.split("|"),o=s[0],i=s[1];n&&this.emit("failedLoading",o,i,n),!n&&r&&this.store.addResourceBundle(o,i,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(u=>{nG(u.loaded,[o],i),xG(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(l=>{a[l]||(a[l]={});const c=u.loaded[l];c.length&&c.forEach(d=>{a[l][d]===void 0&&(a[l][d]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(u=>!u.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!e.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:o,callback:i});return}this.readingCalls++;const a=(l,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(l&&c&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,o*2,i)},o);return}i(l,c)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const l=u(e,n);l&&typeof l.then=="function"?l.then(c=>a(null,c)).catch(a):a(null,l)}catch(l){a(l)}return}return u(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const o=this.queueLoad(e,n,r,s);if(!o.toLoad.length)return o.pending.length||s(),null;o.toLoad.forEach(i=>{this.loadOne(i)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],o=r[1];this.read(s,o,"read",void 0,void 0,(i,a)=>{i&&this.logger.warn(`${n}loading namespace ${o} for language ${s} failed`,i),!i&&a&&this.logger.log(`${n}loaded namespace ${o} for language ${s}`,a),this.loaded(e,i,a)})}saveMissing(e,n,r,s,o){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const u={...i,isUpdate:o},l=this.backend.create.bind(this.backend);if(l.length<6)try{let c;l.length===5?c=l(e,n,r,s,u):c=l(e,n,r,s),c&&typeof c.then=="function"?c.then(d=>a(null,d)).catch(a):a(null,c)}catch(c){a(c)}else l(e,n,r,s,a,u)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const D_=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),O_=t=>(typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),xg=()=>{},wG=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ff extends h1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=O_(e),this.services={},this.logger=fi,this.modules={external:[]},wG(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=D_();this.options={...s,...this.options,...O_(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const o=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?fi.init(o(this.modules.logger),this.options):fi.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=vG);const d=new N_(this.options);this.store=new T_(this.options.resources,this.options);const h=this.services;h.logger=fi,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new mG(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(h.formatter=o(c),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new gG(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new bG(o(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(f){for(var p=arguments.length,m=new Array(p>1?p-1:0),y=1;y<p;y++)m[y-1]=arguments[y];e.emit(f,...m)}),this.modules.languageDetector&&(h.languageDetector=o(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=o(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new ty(this.services,this.options),this.translator.on("*",function(f){for(var p=arguments.length,m=new Array(p>1?p-1:0),y=1;y<p;y++)m[y-1]=arguments[y];e.emit(f,...m)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,r||(r=xg),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const u=ch(),l=()=>{const c=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(h),r(d,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),u}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xg;const s=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],i=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(l=>{l!=="cimode"&&o.indexOf(l)<0&&o.push(l)})};s?i(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>i(u)),this.options.preload&&this.options.preload.forEach(a=>i(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const s=ch();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=xg),this.services.backendConnector.reload(e,n,o=>{s.resolve(),r(o)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&MP.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=ch();this.emit("languageChanging",e);const o=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},i=(u,l)=>{l?(o(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(u,function(){return r.t(...arguments)})},a=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const l=typeof u=="string"?u:this.services.languageUtils.getBestMatchFromCodes(u);l&&(this.language||o(l),this.translator.language||this.translator.changeLanguage(l),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(l)),this.loadResources(l,c=>{i(c,l)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,n,r){var s=this;const o=function(i,a){let u;if(typeof a!="object"){for(var l=arguments.length,c=new Array(l>2?l-2:0),d=2;d<l;d++)c[d-2]=arguments[d];u=s.options.overloadTranslationOptionHandler([i,a].concat(c))}else u={...a};u.lng=u.lng||o.lng,u.lngs=u.lngs||o.lngs,u.ns=u.ns||o.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||o.keyPrefix);const h=s.options.keySeparator||".";let f;return u.keyPrefix&&Array.isArray(i)?f=i.map(p=>`${u.keyPrefix}${h}${p}`):f=u.keyPrefix?`${u.keyPrefix}${h}${i}`:i,s.t(f,u)};return typeof e=="string"?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(a,u)=>{const l=this.services.backendConnector.state[`${a}|${u}`];return l===-1||l===0||l===2};if(n.precheck){const a=n.precheck(this,i);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(r,e)&&(!s||i(o,e)))}loadNamespaces(e,n){const r=ch();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=ch();typeof e=="string"&&(e=[e]);const s=this.options.preload||[],o=e.filter(i=>s.indexOf(i)<0&&this.services.languageUtils.isSupportedCode(i));return o.length?(this.options.preload=s.concat(o),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new N_(D_());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Ff(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xg;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},o=new Ff(s);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new T_(this.store.data,s),o.services.resourceStore=o.store),o.translator=new ty(o.services,s),o.translator.on("*",function(a){for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];o.emit(a,...l)}),o.init(s,n),o.translator.options=s,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ar=Ff.createInstance();Ar.createInstance=Ff.createInstance;Ar.createInstance;Ar.dir;Ar.init;Ar.loadResources;Ar.reloadResources;Ar.use;Ar.changeLanguage;Ar.getFixedT;Ar.t;Ar.exists;Ar.setDefaultNamespace;Ar.hasLoadedNamespace;Ar.loadNamespaces;Ar.loadLanguages;function SG(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];eu(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const P_={};function AS(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];eu(e[0])&&P_[e[0]]||(eu(e[0])&&(P_[e[0]]=new Date),SG(...e))}const zP=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},L_=(t,e,n)=>{t.loadNamespaces(e,zP(t,n))},F_=(t,e,n,r)=>{eu(n)&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,zP(t,r))},kG=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const i=(a,u)=>{const l=e.services.backendConnector.state[`${a}|${u}`];return l===-1||l===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!i(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||i(r,t)&&(!s||i(o,t)))},CG=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(AS("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,t))return!1}}):kG(t,e,n)},eu=t=>typeof t=="string",$G=t=>typeof t=="object"&&t!==null,IG=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,EG={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},TG=t=>EG[t],_G=t=>t.replace(IG,TG);let DS={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:_G};const NG=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};DS={...DS,...t}},RG=()=>DS;let BP;const AG=t=>{BP=t},DG=()=>BP,OG={type:"3rdParty",init(t){NG(t.options.react),AG(t)}},PG=K.createContext();class LG{constructor(){Fi(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}const FG=(t,e)=>{const n=K.useRef();return K.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current},VP=(t,e,n,r)=>t.getFixedT(e,n,r),MG=(t,e,n,r)=>K.useCallback(VP(t,e,n,r),[t,e,n,r]),zG=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=K.useContext(PG)||{},o=n||r||DG();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new LG),!o){AS("You will need to pass in an i18next instance by using initReactI18next");const b=(k,C)=>eu(C)?C:$G(C)&&eu(C.defaultValue)?C.defaultValue:Array.isArray(k)?k[k.length-1]:k,w=[b,{},!1];return w.t=b,w.i18n={},w.ready=!1,w}o.options.react&&o.options.react.wait!==void 0&&AS("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...RG(),...o.options.react,...e},{useSuspense:a,keyPrefix:u}=i;let l=t||s||o.options&&o.options.defaultNS;l=eu(l)?[l]:l||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(l);const c=(o.isInitialized||o.initializedStoreOnce)&&l.every(b=>CG(b,o,i)),d=MG(o,e.lng||null,i.nsMode==="fallback"?l:l[0],u),h=()=>d,f=()=>VP(o,e.lng||null,i.nsMode==="fallback"?l:l[0],u),[p,m]=K.useState(h);let y=l.join();e.lng&&(y=`${e.lng}${y}`);const g=FG(y),v=K.useRef(!0);K.useEffect(()=>{const{bindI18n:b,bindI18nStore:w}=i;v.current=!0,!c&&!a&&(e.lng?F_(o,e.lng,l,()=>{v.current&&m(f)}):L_(o,l,()=>{v.current&&m(f)})),c&&g&&g!==y&&v.current&&m(f);const k=()=>{v.current&&m(f)};return b&&o&&o.on(b,k),w&&o&&o.store.on(w,k),()=>{v.current=!1,b&&o&&b.split(" ").forEach(C=>o.off(C,k)),w&&o&&w.split(" ").forEach(C=>o.store.off(C,k))}},[o,y]),K.useEffect(()=>{v.current&&c&&m(h)},[o,u,c]);const x=[p,o,c];if(x.t=p,x.i18n=o,x.ready=c,c||!c&&!a)return x;throw new Promise(b=>{e.lng?F_(o,e.lng,l,()=>b()):L_(o,l,()=>b())})};function OS(t){"@babel/helpers - typeof";return OS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OS(t)}function UP(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":OS(XMLHttpRequest))==="object"}function BG(t){return!!t&&typeof t.then=="function"}function VG(t){return BG(t)?t:Promise.resolve(t)}function UG(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var PS={exports:{}},bg={exports:{}},M_;function WG(){return M_||(M_=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof vs<"u"&&vs,r=function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o}();(function(o){(function(i){var a=typeof o<"u"&&o||typeof self<"u"&&self||typeof a<"u"&&a,u={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(A){return A&&DataView.prototype.isPrototypeOf(A)}if(u.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(A){return A&&c.indexOf(Object.prototype.toString.call(A))>-1};function h(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(A)||A==="")throw new TypeError('Invalid character in header field name: "'+A+'"');return A.toLowerCase()}function f(A){return typeof A!="string"&&(A=String(A)),A}function p(A){var L={next:function(){var V=A.shift();return{done:V===void 0,value:V}}};return u.iterable&&(L[Symbol.iterator]=function(){return L}),L}function m(A){this.map={},A instanceof m?A.forEach(function(L,V){this.append(V,L)},this):Array.isArray(A)?A.forEach(function(L){this.append(L[0],L[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(L){this.append(L,A[L])},this)}m.prototype.append=function(A,L){A=h(A),L=f(L);var V=this.map[A];this.map[A]=V?V+", "+L:L},m.prototype.delete=function(A){delete this.map[h(A)]},m.prototype.get=function(A){return A=h(A),this.has(A)?this.map[A]:null},m.prototype.has=function(A){return this.map.hasOwnProperty(h(A))},m.prototype.set=function(A,L){this.map[h(A)]=f(L)},m.prototype.forEach=function(A,L){for(var V in this.map)this.map.hasOwnProperty(V)&&A.call(L,this.map[V],V,this)},m.prototype.keys=function(){var A=[];return this.forEach(function(L,V){A.push(V)}),p(A)},m.prototype.values=function(){var A=[];return this.forEach(function(L){A.push(L)}),p(A)},m.prototype.entries=function(){var A=[];return this.forEach(function(L,V){A.push([V,L])}),p(A)},u.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function y(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function g(A){return new Promise(function(L,V){A.onload=function(){L(A.result)},A.onerror=function(){V(A.error)}})}function v(A){var L=new FileReader,V=g(L);return L.readAsArrayBuffer(A),V}function x(A){var L=new FileReader,V=g(L);return L.readAsText(A),V}function b(A){for(var L=new Uint8Array(A),V=new Array(L.length),z=0;z<L.length;z++)V[z]=String.fromCharCode(L[z]);return V.join("")}function w(A){if(A.slice)return A.slice(0);var L=new Uint8Array(A.byteLength);return L.set(new Uint8Array(A)),L.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(A){this.bodyUsed=this.bodyUsed,this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:u.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:u.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():u.arrayBuffer&&u.blob&&l(A)?(this._bodyArrayBuffer=w(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||d(A))?this._bodyArrayBuffer=w(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var A=y(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var A=y(this);return A||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(v)}),this.text=function(){var A=y(this);if(A)return A;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $(A){var L=A.toUpperCase();return C.indexOf(L)>-1?L:A}function E(A,L){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');L=L||{};var V=L.body;if(A instanceof E){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,L.headers||(this.headers=new m(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!V&&A._bodyInit!=null&&(V=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=L.credentials||this.credentials||"same-origin",(L.headers||!this.headers)&&(this.headers=new m(L.headers)),this.method=$(L.method||this.method||"GET"),this.mode=L.mode||this.mode||null,this.signal=L.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(V),(this.method==="GET"||this.method==="HEAD")&&(L.cache==="no-store"||L.cache==="no-cache")){var z=/([?&])_=[^&]*/;if(z.test(this.url))this.url=this.url.replace(z,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function S(A){var L=new FormData;return A.trim().split("&").forEach(function(V){if(V){var z=V.split("="),M=z.shift().replace(/\+/g," "),_=z.join("=").replace(/\+/g," ");L.append(decodeURIComponent(M),decodeURIComponent(_))}}),L}function R(A){var L=new m,V=A.replace(/\r?\n[\t ]+/g," ");return V.split("\r").map(function(z){return z.indexOf(`
`)===0?z.substr(1,z.length):z}).forEach(function(z){var M=z.split(":"),_=M.shift().trim();if(_){var F=M.join(":").trim();L.append(_,F)}}),L}k.call(E.prototype);function T(A,L){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');L||(L={}),this.type="default",this.status=L.status===void 0?200:L.status,this.ok=this.status>=200&&this.status<300,this.statusText=L.statusText===void 0?"":""+L.statusText,this.headers=new m(L.headers),this.url=L.url||"",this._initBody(A)}k.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},T.error=function(){var A=new T(null,{status:0,statusText:""});return A.type="error",A};var P=[301,302,303,307,308];T.redirect=function(A,L){if(P.indexOf(L)===-1)throw new RangeError("Invalid status code");return new T(null,{status:L,headers:{location:A}})},i.DOMException=a.DOMException;try{new i.DOMException}catch{i.DOMException=function(L,V){this.message=L,this.name=V;var z=Error(L);this.stack=z.stack},i.DOMException.prototype=Object.create(Error.prototype),i.DOMException.prototype.constructor=i.DOMException}function I(A,L){return new Promise(function(V,z){var M=new E(A,L);if(M.signal&&M.signal.aborted)return z(new i.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function F(){_.abort()}_.onload=function(){var D={status:_.status,statusText:_.statusText,headers:R(_.getAllResponseHeaders()||"")};D.url="responseURL"in _?_.responseURL:D.headers.get("X-Request-URL");var j="response"in _?_.response:_.responseText;setTimeout(function(){V(new T(j,D))},0)},_.onerror=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},_.ontimeout=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},_.onabort=function(){setTimeout(function(){z(new i.DOMException("Aborted","AbortError"))},0)};function O(D){try{return D===""&&a.location.href?a.location.href:D}catch{return D}}_.open(M.method,O(M.url),!0),M.credentials==="include"?_.withCredentials=!0:M.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&(u.blob?_.responseType="blob":u.arrayBuffer&&M.headers.get("Content-Type")&&M.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(_.responseType="arraybuffer")),L&&typeof L.headers=="object"&&!(L.headers instanceof m)?Object.getOwnPropertyNames(L.headers).forEach(function(D){_.setRequestHeader(D,f(L.headers[D]))}):M.headers.forEach(function(D,j){_.setRequestHeader(j,D)}),M.signal&&(M.signal.addEventListener("abort",F),_.onreadystatechange=function(){_.readyState===4&&M.signal.removeEventListener("abort",F)}),_.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return I.polyfill=!0,a.fetch||(a.fetch=I,a.Headers=m,a.Request=E,a.Response=T),i.Headers=m,i.Request=E,i.Response=T,i.fetch=I,i})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(bg,bg.exports)),bg.exports}(function(t,e){var n;if(typeof fetch=="function"&&(typeof vs<"u"&&vs.fetch?n=vs.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof UG<"u"&&typeof window>"u"){var r=n||WG();r.default&&(r=r.default),e.default=r,t.exports=e.default}})(PS,PS.exports);var WP=PS.exports;const jP=Ed(WP),z_=Xy({__proto__:null,default:jP},[WP]);function B_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function V_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B_(Object(n),!0).forEach(function(r){jG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jG(t,e,n){return(e=GG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GG(t){var e=HG(t,"string");return cu(e)=="symbol"?e:e+""}function HG(t,e){if(cu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cu(t){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cu(t)}var Yi;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Yi=global.fetch:typeof window<"u"&&window.fetch?Yi=window.fetch:Yi=fetch);var Mf;UP()&&(typeof global<"u"&&global.XMLHttpRequest?Mf=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Mf=window.XMLHttpRequest));var ny;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?ny=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(ny=window.ActiveXObject));!Yi&&z_&&!Mf&&!ny&&(Yi=jP||z_);typeof Yi!="function"&&(Yi=void 0);var LS=function(e,n){if(n&&cu(n)==="object"){var r="";for(var s in n)r+="&"+encodeURIComponent(s)+"="+encodeURIComponent(n[s]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},U_=function(e,n,r,s){var o=function(u){if(!u.ok)return r(u.statusText||"Error",{status:u.status});u.text().then(function(l){r(null,{status:u.status,data:l})}).catch(r)};if(s){var i=s(e,n);if(i instanceof Promise){i.then(o).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(o).catch(r):Yi(e,n).then(o).catch(r)},W_=!1,KG=function(e,n,r,s){e.queryStringParams&&(n=LS(n,e.queryStringParams));var o=V_({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(o["Content-Type"]="application/json");var i=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,a=V_({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:o},W_?{}:i),u=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{U_(n,a,s,u)}catch(l){if(!i||Object.keys(i).length===0||!l.message||l.message.indexOf("not implemented")<0)return s(l);try{Object.keys(i).forEach(function(c){delete a[c]}),U_(n,a,s,u),W_=!0}catch(c){s(c)}}},qG=function(e,n,r,s){r&&cu(r)==="object"&&(r=LS("",r).slice(1)),e.queryStringParams&&(n=LS(n,e.queryStringParams));try{var o;Mf?o=new Mf:o=new ny("MSXML2.XMLHTTP.3.0"),o.open(r?"POST":"GET",n,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,r&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var i=e.customHeaders;if(i=typeof i=="function"?i():i,i)for(var a in i)o.setRequestHeader(a,i[a]);o.onreadystatechange=function(){o.readyState>3&&s(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(r)}catch(u){console&&console.log(u)}},XG=function(e,n,r,s){if(typeof r=="function"&&(s=r,r=void 0),s=s||function(){},Yi&&n.indexOf("file:")!==0)return KG(e,n,r,s);if(UP()||typeof ActiveXObject=="function")return qG(e,n,r,s);s(new Error("No fetch and no xhr implementation found!"))};function od(t){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(t)}function j_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Nb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j_(Object(n),!0).forEach(function(r){GP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HP(r.key),r)}}function ZG(t,e,n){return e&&G_(t.prototype,e),n&&G_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GP(t,e,n){return(e=HP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HP(t){var e=QG(t,"string");return od(e)=="symbol"?e:e+""}function QG(t,e){if(od(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JG=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,s){return GP({},r,s||"")},parseLoadPayload:function(n,r){},request:XG,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},KP=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};YG(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return ZG(t,[{key:"init",value:function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=Nb(Nb(Nb({},JG()),this.options||{}),s),this.allOptions=o,this.services&&this.options.reloadInterval){var i=setInterval(function(){return r.reload()},this.options.reloadInterval);od(i)==="object"&&typeof i.unref=="function"&&i.unref()}}},{key:"readMulti",value:function(n,r,s){this._readAny(n,n,r,r,s)}},{key:"read",value:function(n,r,s){this._readAny([n],n,[r],r,s)}},{key:"_readAny",value:function(n,r,s,o,i){var a=this,u=this.options.loadPath;typeof this.options.loadPath=="function"&&(u=this.options.loadPath(n,s)),u=VG(u),u.then(function(l){if(!l)return i(null,{});var c=a.services.interpolator.interpolate(l,{lng:n.join("+"),ns:s.join("+")});a.loadUrl(c,i,r,o)})}},{key:"loadUrl",value:function(n,r,s,o){var i=this,a=typeof s=="string"?[s]:s,u=typeof o=="string"?[o]:o,l=this.options.parseLoadPayload(a,u);this.options.request(this.options,n,l,function(c,d){if(d&&(d.status>=500&&d.status<600||!d.status))return r("failed loading "+n+"; status code: "+d.status,!0);if(d&&d.status>=400&&d.status<500)return r("failed loading "+n+"; status code: "+d.status,!1);if(!d&&c&&c.message&&c.message.toLowerCase().indexOf("failed")>-1&&(c.message.indexOf("fetch")>-1||c.message.toLowerCase().indexOf("network")>-1))return r("failed loading "+n+": "+c.message,!0);if(c)return r(c,!1);var h,f;try{typeof d.data=="string"?h=i.options.parse(d.data,s,o):h=d.data}catch{f="failed parsing "+n+" to json"}if(f)return r(f,!1);r(null,h)})}},{key:"create",value:function(n,r,s,o,i){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var u=this.options.parsePayload(r,s,o),l=0,c=[],d=[];n.forEach(function(h){var f=a.options.addPath;typeof a.options.addPath=="function"&&(f=a.options.addPath(h,r));var p=a.services.interpolator.interpolate(f,{lng:h,ns:r});a.options.request(a.options,p,u,function(m,y){l+=1,c.push(m),d.push(y),l===n.length&&typeof i=="function"&&i(c,d)})})}}},{key:"reload",value:function(){var n=this,r=this.services,s=r.backendConnector,o=r.languageUtils,i=r.logger,a=s.language;if(!(a&&a.toLowerCase()==="cimode")){var u=[],l=function(d){var h=o.toResolveHierarchy(d);h.forEach(function(f){u.indexOf(f)<0&&u.push(f)})};l(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(c){return l(c)}),u.forEach(function(c){n.allOptions.ns.forEach(function(d){s.read(c,d,"read",null,null,function(h,f){h&&i.warn("loading namespace ".concat(d," for language ").concat(c," failed"),h),!h&&f&&i.log("loaded namespace ".concat(d," for language ").concat(c),f),s.loaded("".concat(c,"|").concat(d),h,f)})})})}}}])}();KP.type="backend";function eH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function tH(t,e){if(zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nH(t){var e=tH(t,"string");return zf(e)=="symbol"?e:e+""}function H_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nH(r.key),r)}}function rH(t,e,n){return e&&H_(t.prototype,e),n&&H_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var qP=[],sH=qP.forEach,oH=qP.slice;function iH(t){return sH.call(oH.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var K_=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,aH=function(e,n,r){var s=r||{};s.path=s.path||"/";var o=encodeURIComponent(n),i="".concat(e,"=").concat(o);if(s.maxAge>0){var a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+="; Max-Age=".concat(Math.floor(a))}if(s.domain){if(!K_.test(s.domain))throw new TypeError("option domain is invalid");i+="; Domain=".concat(s.domain)}if(s.path){if(!K_.test(s.path))throw new TypeError("option path is invalid");i+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite){var u=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(u){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i},q_={create:function(e,n,r,s){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+r*60*1e3)),s&&(o.domain=s),document.cookie=aH(e,encodeURIComponent(n),o)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),s=0;s<r.length;s++){for(var o=r[s];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(n)===0)return o.substring(n.length,o.length)}return null},remove:function(e){this.create(e,"",-1)}},lH={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=q_.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&q_.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},uH={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=r.substring(1),o=s.split("&"),i=0;i<o.length;i++){var a=o[i].indexOf("=");if(a>0){var u=o[i].substring(0,a);u===e.lookupQuerystring&&(n=o[i].substring(a+1))}}}return n}},dh=null,X_=function(){if(dh!==null)return dh;try{dh=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{dh=!1}return dh},cH={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&X_()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&X_()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},hh=null,Y_=function(){if(hh!==null)return hh;try{hh=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{hh=!1}return hh},dH={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&Y_()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&Y_()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},hH={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},fH={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},pH={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},mH={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};function gH(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var XP=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};eH(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return rH(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=iH(r,this.options||{},gH()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(o){return o.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(lH),this.addDetector(uH),this.addDetector(cH),this.addDetector(dH),this.addDetector(hH),this.addDetector(fH),this.addDetector(pH),this.addDetector(mH)}},{key:"addDetector",value:function(n){return this.detectors[n.name]=n,this}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var s=[];return n.forEach(function(o){if(r.detectors[o]){var i=r.detectors[o].lookup(r.options);i&&typeof i=="string"&&(i=[i]),i&&(s=s.concat(i))}}),s=s.map(function(o){return r.options.convertDetectedLanguage(o)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var s=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(o){s.detectors[o]&&s.detectors[o].cacheUserLanguage(n,s.options)}))}}]),t}();XP.type="languageDetector";Ar.on("languageChanged",t=>{document.documentElement.setAttribute("lang",t)});Ar.use(XP).use(KP).use(OG).init({ns:["common"],defaultNS:"common",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},interpolation:{escapeValue:!1},fallbackLng:"en",supportedLngs:["en","fi"],debug:!1});const yH="modulepreload",vH=function(t){return"/"+t},Z_={},Ot=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=vH(o),o in Z_)return;Z_[o]=!0;const i=o.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let c=s.length-1;c>=0;c--){const d=s[c];if(d.href===o&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":yH,i||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),i)return new Promise((c,d)=>{l.addEventListener("load",c),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sn(){return Sn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sn.apply(this,arguments)}var Gn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gn||(Gn={}));const Q_="popstate";function xH(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:i,hash:a}=r.location;return Bf("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:du(s)}return wH(e,n,null,t)}function yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function id(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bH(){return Math.random().toString(36).substr(2,8)}function J_(t,e){return{usr:t.state,key:t.key,idx:e}}function Bf(t,e,n,r){return n===void 0&&(n=null),Sn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ca(e):e,{state:n,key:e&&e.key||r||bH()})}function du(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ca(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wH(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=Gn.Pop,u=null,l=c();l==null&&(l=0,i.replaceState(Sn({},i.state,{idx:l}),""));function c(){return(i.state||{idx:null}).idx}function d(){a=Gn.Pop;let y=c(),g=y==null?null:y-l;l=y,u&&u({action:a,location:m.location,delta:g})}function h(y,g){a=Gn.Push;let v=Bf(m.location,y,g);n&&n(v,y),l=c()+1;let x=J_(v,l),b=m.createHref(v);try{i.pushState(x,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(b)}o&&u&&u({action:a,location:m.location,delta:1})}function f(y,g){a=Gn.Replace;let v=Bf(m.location,y,g);n&&n(v,y),l=c();let x=J_(v,l),b=m.createHref(v);i.replaceState(x,"",b),o&&u&&u({action:a,location:m.location,delta:0})}function p(y){let g=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:du(y);return v=v.replace(/ $/,"%20"),yt(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let m={get action(){return a},get location(){return t(s,i)},listen(y){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Q_,d),u=y,()=>{s.removeEventListener(Q_,d),u=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:f,go(y){return i.go(y)}};return m}var Zt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zt||(Zt={}));const SH=new Set(["lazy","caseSensitive","path","id","index","children"]);function kH(t){return t.index===!0}function Vf(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,o)=>{let i=[...n,String(o)],a=typeof s.id=="string"?s.id:i.join("-");if(yt(s.index!==!0||!s.children,"Cannot specify children on an index route"),yt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),kH(s)){let u=Sn({},s,e(s),{id:a});return r[a]=u,u}else{let u=Sn({},s,e(s),{id:a,children:void 0});return r[a]=u,s.children&&(u.children=Vf(s.children,e,i,r)),u}})}function Ml(t,e,n){return n===void 0&&(n="/"),p0(t,e,n,!1)}function p0(t,e,n,r){let s=typeof e=="string"?ca(e):e,o=Rd(s.pathname||"/",n);if(o==null)return null;let i=YP(t);$H(i);let a=null;for(let u=0;a==null&&u<i.length;++u){let l=LH(o);a=OH(i[u],l,r)}return a}function CH(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function YP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};u.relativePath.startsWith("/")&&(yt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Zi([r,u.relativePath]),c=n.concat(u);o.children&&o.children.length>0&&(yt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),YP(o.children,e,c,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:AH(l,o.index),routesMeta:c})};return t.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let u of ZP(o.path))s(o,i,u)}),e}function ZP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=ZP(r.join("/")),a=[];return a.push(...i.map(u=>u===""?o:[o,u].join("/"))),s&&a.push(...i),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function $H(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IH=/^:[\w-]+$/,EH=3,TH=2,_H=1,NH=10,RH=-2,eN=t=>t==="*";function AH(t,e){let n=t.split("/"),r=n.length;return n.some(eN)&&(r+=RH),e&&(r+=TH),n.filter(s=>!eN(s)).reduce((s,o)=>s+(IH.test(o)?EH:o===""?_H:NH),r)}function DH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function OH(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},o="/",i=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",d=tN({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),h=u.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=tN({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:Zi([o,d.pathname]),pathnameBase:zH(Zi([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=Zi([o,d.pathnameBase]))}return i}function tN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PH(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,c,d)=>{let{paramName:h,isOptional:f}=c;if(h==="*"){let m=a[d]||"";i=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:i,pattern:t}}function PH(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),id(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function LH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return id(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Rd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function FH(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ca(t):t;return{pathname:n?n.startsWith("/")?n:MH(n,e):e,search:BH(r),hash:VH(s)}}function MH(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Rb(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function f1(t,e){let n=QP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function p1(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ca(t):(s=Sn({},t),yt(!s.pathname||!s.pathname.includes("?"),Rb("?","pathname","search",s)),yt(!s.pathname||!s.pathname.includes("#"),Rb("#","pathname","hash",s)),yt(!s.search||!s.search.includes("#"),Rb("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let d=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let u=FH(s,a),l=i&&i!=="/"&&i.endsWith("/"),c=(o||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Zi=t=>t.join("/").replace(/\/\/+/g,"/"),zH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,wg=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,Sn({},r,{headers:s}))};class ry{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function m1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const JP=["post","put","patch","delete"],UH=new Set(JP),WH=["get",...JP],jH=new Set(WH),GH=new Set([301,302,303,307,308]),HH=new Set([307,308]),Ab={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},KH={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},s2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qH=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),eL="remix-router-transitions";function XH(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;yt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let q=t.detectErrorBoundary;s=re=>({hasErrorBoundary:q(re)})}else s=qH;let o={},i=Vf(t.routes,s,void 0,o),a,u=t.basename||"/",l=t.unstable_dataStrategy||t7,c=t.unstable_patchRoutesOnNavigation,d=Sn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,f=new Set,p=1e3,m=new Set,y=null,g=null,v=null,x=t.hydrationData!=null,b=Ml(i,t.history.location,u),w=null;if(b==null&&!c){let q=Zr(404,{pathname:t.history.location.pathname}),{matches:re,route:pe}=cN(i);b=re,w={[pe.id]:q}}b&&!t.hydrationData&&To(b,i,t.history.location.pathname).active&&(b=null);let k;if(b)if(b.some(q=>q.route.lazy))k=!1;else if(!b.some(q=>q.route.loader))k=!0;else if(d.v7_partialHydration){let q=t.hydrationData?t.hydrationData.loaderData:null,re=t.hydrationData?t.hydrationData.errors:null,pe=Ie=>Ie.route.loader?typeof Ie.route.loader=="function"&&Ie.route.loader.hydrate===!0?!1:q&&q[Ie.route.id]!==void 0||re&&re[Ie.route.id]!==void 0:!0;if(re){let Ie=b.findIndex(He=>re[He.route.id]!==void 0);k=b.slice(0,Ie+1).every(pe)}else k=b.every(pe)}else k=t.hydrationData!=null;else if(k=!1,b=[],d.v7_partialHydration){let q=To(null,i,t.history.location.pathname);q.active&&q.matches&&(b=q.matches)}let C,$={historyAction:t.history.action,location:t.history.location,matches:b,initialized:k,navigation:Ab,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||w,fetchers:new Map,blockers:new Map},E=Gn.Pop,S=!1,R,T=!1,P=new Map,I=null,A=!1,L=!1,V=[],z=new Set,M=new Map,_=0,F=-1,O=new Map,D=new Set,j=new Map,G=new Map,J=new Set,me=new Map,fe=new Map,he=new Map,Te;function Re(){if(h=t.history.listen(q=>{let{action:re,location:pe,delta:Ie}=q;if(Te){Te(),Te=void 0;return}id(fe.size===0||Ie!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let He=Je({currentLocation:$.location,nextLocation:pe,historyAction:re});if(He&&Ie!=null){let rt=new Promise(dt=>{Te=dt});t.history.go(Ie*-1),nt(He,{state:"blocked",location:pe,proceed(){nt(He,{state:"proceeding",proceed:void 0,reset:void 0,location:pe}),rt.then(()=>t.history.go(Ie))},reset(){let dt=new Map($.blockers);dt.set(He,fh),N({blockers:dt})}});return}return U(re,pe)}),n){g7(e,P);let q=()=>y7(e,P);e.addEventListener("pagehide",q),I=()=>e.removeEventListener("pagehide",q)}return $.initialized||U(Gn.Pop,$.location,{initialHydration:!0}),C}function Me(){h&&h(),I&&I(),f.clear(),R&&R.abort(),$.fetchers.forEach((q,re)=>ft(re)),$.blockers.forEach((q,re)=>Ge(re))}function Ve(q){return f.add(q),()=>f.delete(q)}function N(q,re){re===void 0&&(re={}),$=Sn({},$,q);let pe=[],Ie=[];d.v7_fetcherPersist&&$.fetchers.forEach((He,rt)=>{He.state==="idle"&&(J.has(rt)?Ie.push(rt):pe.push(rt))}),[...f].forEach(He=>He($,{deletedFetchers:Ie,unstable_viewTransitionOpts:re.viewTransitionOpts,unstable_flushSync:re.flushSync===!0})),d.v7_fetcherPersist&&(pe.forEach(He=>$.fetchers.delete(He)),Ie.forEach(He=>ft(He)))}function ue(q,re,pe){var Ie,He;let{flushSync:rt}=pe===void 0?{}:pe,dt=$.actionData!=null&&$.navigation.formMethod!=null&&Po($.navigation.formMethod)&&$.navigation.state==="loading"&&((Ie=q.state)==null?void 0:Ie._isRedirect)!==!0,Be;re.actionData?Object.keys(re.actionData).length>0?Be=re.actionData:Be=null:dt?Be=$.actionData:Be=null;let it=re.loaderData?lN($.loaderData,re.loaderData,re.matches||[],re.errors):$.loaderData,Ye=$.blockers;Ye.size>0&&(Ye=new Map(Ye),Ye.forEach((Gt,pn)=>Ye.set(pn,fh)));let Ze=S===!0||$.navigation.formMethod!=null&&Po($.navigation.formMethod)&&((He=q.state)==null?void 0:He._isRedirect)!==!0;a&&(i=a,a=void 0),A||E===Gn.Pop||(E===Gn.Push?t.history.push(q,q.state):E===Gn.Replace&&t.history.replace(q,q.state));let zt;if(E===Gn.Pop){let Gt=P.get($.location.pathname);Gt&&Gt.has(q.pathname)?zt={currentLocation:$.location,nextLocation:q}:P.has(q.pathname)&&(zt={currentLocation:q,nextLocation:$.location})}else if(T){let Gt=P.get($.location.pathname);Gt?Gt.add(q.pathname):(Gt=new Set([q.pathname]),P.set($.location.pathname,Gt)),zt={currentLocation:$.location,nextLocation:q}}N(Sn({},re,{actionData:Be,loaderData:it,historyAction:E,location:q,initialized:!0,navigation:Ab,revalidation:"idle",restoreScrollPosition:us(q,re.matches||$.matches),preventScrollReset:Ze,blockers:Ye}),{viewTransitionOpts:zt,flushSync:rt===!0}),E=Gn.Pop,S=!1,T=!1,A=!1,L=!1,V=[]}async function ne(q,re){if(typeof q=="number"){t.history.go(q);return}let pe=FS($.location,$.matches,u,d.v7_prependBasename,q,d.v7_relativeSplatPath,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:Ie,submission:He,error:rt}=nN(d.v7_normalizeFormMethod,!1,pe,re),dt=$.location,Be=Bf($.location,Ie,re&&re.state);Be=Sn({},Be,t.history.encodeLocation(Be));let it=re&&re.replace!=null?re.replace:void 0,Ye=Gn.Push;it===!0?Ye=Gn.Replace:it===!1||He!=null&&Po(He.formMethod)&&He.formAction===$.location.pathname+$.location.search&&(Ye=Gn.Replace);let Ze=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,zt=(re&&re.unstable_flushSync)===!0,Gt=Je({currentLocation:dt,nextLocation:Be,historyAction:Ye});if(Gt){nt(Gt,{state:"blocked",location:Be,proceed(){nt(Gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Be}),ne(q,re)},reset(){let pn=new Map($.blockers);pn.set(Gt,fh),N({blockers:pn})}});return}return await U(Ye,Be,{submission:He,pendingError:rt,preventScrollReset:Ze,replace:re&&re.replace,enableViewTransition:re&&re.unstable_viewTransition,flushSync:zt})}function W(){if(Ue(),N({revalidation:"loading"}),$.navigation.state!=="submitting"){if($.navigation.state==="idle"){U($.historyAction,$.location,{startUninterruptedRevalidation:!0});return}U(E||$.historyAction,$.navigation.location,{overrideNavigation:$.navigation,enableViewTransition:T===!0})}}async function U(q,re,pe){R&&R.abort(),R=null,E=q,A=(pe&&pe.startUninterruptedRevalidation)===!0,ls($.location,$.matches),S=(pe&&pe.preventScrollReset)===!0,T=(pe&&pe.enableViewTransition)===!0;let Ie=a||i,He=pe&&pe.overrideNavigation,rt=Ml(Ie,re,u),dt=(pe&&pe.flushSync)===!0,Be=To(rt,Ie,re.pathname);if(Be.active&&Be.matches&&(rt=Be.matches),!rt){let{error:At,notFoundMatches:mr,route:Zn}=et(re.pathname);ue(re,{matches:mr,loaderData:{},errors:{[Zn.id]:At}},{flushSync:dt});return}if($.initialized&&!L&&a7($.location,re)&&!(pe&&pe.submission&&Po(pe.submission.formMethod))){ue(re,{matches:rt},{flushSync:dt});return}R=new AbortController;let it=ec(t.history,re,R.signal,pe&&pe.submission),Ye;if(pe&&pe.pendingError)Ye=[Dc(rt).route.id,{type:Zt.error,error:pe.pendingError}];else if(pe&&pe.submission&&Po(pe.submission.formMethod)){let At=await Z(it,re,pe.submission,rt,Be.active,{replace:pe.replace,flushSync:dt});if(At.shortCircuited)return;if(At.pendingActionResult){let[mr,Zn]=At.pendingActionResult;if(Os(Zn)&&m1(Zn.error)&&Zn.error.status===404){R=null,ue(re,{matches:At.matches,loaderData:{},errors:{[mr]:Zn.error}});return}}rt=At.matches||rt,Ye=At.pendingActionResult,He=Db(re,pe.submission),dt=!1,Be.active=!1,it=ec(t.history,it.url,it.signal)}let{shortCircuited:Ze,matches:zt,loaderData:Gt,errors:pn}=await xe(it,re,rt,Be.active,He,pe&&pe.submission,pe&&pe.fetcherSubmission,pe&&pe.replace,pe&&pe.initialHydration===!0,dt,Ye);Ze||(R=null,ue(re,Sn({matches:zt||rt},uN(Ye),{loaderData:Gt,errors:pn})))}async function Z(q,re,pe,Ie,He,rt){rt===void 0&&(rt={}),Ue();let dt=p7(re,pe);if(N({navigation:dt},{flushSync:rt.flushSync===!0}),He){let Ye=await Di(Ie,re.pathname,q.signal);if(Ye.type==="aborted")return{shortCircuited:!0};if(Ye.type==="error"){let{boundaryId:Ze,error:zt}=pt(re.pathname,Ye);return{matches:Ye.partialMatches,pendingActionResult:[Ze,{type:Zt.error,error:zt}]}}else if(Ye.matches)Ie=Ye.matches;else{let{notFoundMatches:Ze,error:zt,route:Gt}=et(re.pathname);return{matches:Ze,pendingActionResult:[Gt.id,{type:Zt.error,error:zt}]}}}let Be,it=Mh(Ie,re);if(!it.route.action&&!it.route.lazy)Be={type:Zt.error,error:Zr(405,{method:q.method,pathname:re.pathname,routeId:it.route.id})};else if(Be=(await ge("action",$,q,[it],Ie,null))[it.route.id],q.signal.aborted)return{shortCircuited:!0};if(Kl(Be)){let Ye;return rt&&rt.replace!=null?Ye=rt.replace:Ye=oN(Be.response.headers.get("Location"),new URL(q.url),u)===$.location.pathname+$.location.search,await te(q,Be,!0,{submission:pe,replace:Ye}),{shortCircuited:!0}}if(Oa(Be))throw Zr(400,{type:"defer-action"});if(Os(Be)){let Ye=Dc(Ie,it.route.id);return(rt&&rt.replace)!==!0&&(E=Gn.Push),{matches:Ie,pendingActionResult:[Ye.route.id,Be]}}return{matches:Ie,pendingActionResult:[it.route.id,Be]}}async function xe(q,re,pe,Ie,He,rt,dt,Be,it,Ye,Ze){let zt=He||Db(re,rt),Gt=rt||dt||hN(zt),pn=!A&&(!d.v7_partialHydration||!it);if(Ie){if(pn){let Nn=ce(Ze);N(Sn({navigation:zt},Nn!==void 0?{actionData:Nn}:{}),{flushSync:Ye})}let bt=await Di(pe,re.pathname,q.signal);if(bt.type==="aborted")return{shortCircuited:!0};if(bt.type==="error"){let{boundaryId:Nn,error:Rs}=pt(re.pathname,bt);return{matches:bt.partialMatches,loaderData:{},errors:{[Nn]:Rs}}}else if(bt.matches)pe=bt.matches;else{let{error:Nn,notFoundMatches:Rs,route:Rn}=et(re.pathname);return{matches:Rs,loaderData:{},errors:{[Rn.id]:Nn}}}}let At=a||i,[mr,Zn]=rN(t.history,$,pe,Gt,re,d.v7_partialHydration&&it===!0,d.v7_skipActionErrorRevalidation,L,V,z,J,j,D,At,u,Ze);if(Xt(bt=>!(pe&&pe.some(Nn=>Nn.route.id===bt))||mr&&mr.some(Nn=>Nn.route.id===bt)),F=++_,mr.length===0&&Zn.length===0){let bt=Ce();return ue(re,Sn({matches:pe,loaderData:{},errors:Ze&&Os(Ze[1])?{[Ze[0]]:Ze[1].error}:null},uN(Ze),bt?{fetchers:new Map($.fetchers)}:{}),{flushSync:Ye}),{shortCircuited:!0}}if(pn){let bt={};if(!Ie){bt.navigation=zt;let Nn=ce(Ze);Nn!==void 0&&(bt.actionData=Nn)}Zn.length>0&&(bt.fetchers=ie(Zn)),N(bt,{flushSync:Ye})}Zn.forEach(bt=>{M.has(bt.key)&&ae(bt.key),bt.controller&&M.set(bt.key,bt.controller)});let th=()=>Zn.forEach(bt=>ae(bt.key));R&&R.signal.addEventListener("abort",th);let{loaderResults:Oi,fetcherResults:Yu}=await ke($,pe,mr,Zn,q);if(q.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",th),Zn.forEach(bt=>M.delete(bt.key));let ya=Sg(Oi);if(ya)return await te(q,ya.result,!0,{replace:Be}),{shortCircuited:!0};if(ya=Sg(Yu),ya)return D.add(ya.key),await te(q,ya.result,!0,{replace:Be}),{shortCircuited:!0};let{loaderData:Qm,errors:Pi}=aN($,pe,mr,Oi,Ze,Zn,Yu,me);me.forEach((bt,Nn)=>{bt.subscribe(Rs=>{(Rs||bt.done)&&me.delete(Nn)})}),d.v7_partialHydration&&it&&$.errors&&Object.entries($.errors).filter(bt=>{let[Nn]=bt;return!mr.some(Rs=>Rs.route.id===Nn)}).forEach(bt=>{let[Nn,Rs]=bt;Pi=Object.assign(Pi||{},{[Nn]:Rs})});let Jm=Ce(),eg=Pe(F),tg=Jm||eg||Zn.length>0;return Sn({matches:pe,loaderData:Qm,errors:Pi},tg?{fetchers:new Map($.fetchers)}:{})}function ce(q){if(q&&!Os(q[1]))return{[q[0]]:q[1].data};if($.actionData)return Object.keys($.actionData).length===0?null:$.actionData}function ie(q){return q.forEach(re=>{let pe=$.fetchers.get(re.key),Ie=ph(void 0,pe?pe.data:void 0);$.fetchers.set(re.key,Ie)}),new Map($.fetchers)}function _e(q,re,pe,Ie){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");M.has(q)&&ae(q);let He=(Ie&&Ie.unstable_flushSync)===!0,rt=a||i,dt=FS($.location,$.matches,u,d.v7_prependBasename,pe,d.v7_relativeSplatPath,re,Ie==null?void 0:Ie.relative),Be=Ml(rt,dt,u),it=To(Be,rt,dt);if(it.active&&it.matches&&(Be=it.matches),!Be){lt(q,re,Zr(404,{pathname:dt}),{flushSync:He});return}let{path:Ye,submission:Ze,error:zt}=nN(d.v7_normalizeFormMethod,!0,dt,Ie);if(zt){lt(q,re,zt,{flushSync:He});return}let Gt=Mh(Be,Ye);if(S=(Ie&&Ie.preventScrollReset)===!0,Ze&&Po(Ze.formMethod)){Oe(q,re,Ye,Gt,Be,it.active,He,Ze);return}j.set(q,{routeId:re,path:Ye}),Ee(q,re,Ye,Gt,Be,it.active,He,Ze)}async function Oe(q,re,pe,Ie,He,rt,dt,Be){Ue(),j.delete(q);function it(Rn){if(!Rn.route.action&&!Rn.route.lazy){let Li=Zr(405,{method:Be.formMethod,pathname:pe,routeId:re});return lt(q,re,Li,{flushSync:dt}),!0}return!1}if(!rt&&it(Ie))return;let Ye=$.fetchers.get(q);ot(q,m7(Be,Ye),{flushSync:dt});let Ze=new AbortController,zt=ec(t.history,pe,Ze.signal,Be);if(rt){let Rn=await Di(He,pe,zt.signal);if(Rn.type==="aborted")return;if(Rn.type==="error"){let{error:Li}=pt(pe,Rn);lt(q,re,Li,{flushSync:dt});return}else if(Rn.matches){if(He=Rn.matches,Ie=Mh(He,pe),it(Ie))return}else{lt(q,re,Zr(404,{pathname:pe}),{flushSync:dt});return}}M.set(q,Ze);let Gt=_,At=(await ge("action",$,zt,[Ie],He,q))[Ie.route.id];if(zt.signal.aborted){M.get(q)===Ze&&M.delete(q);return}if(d.v7_fetcherPersist&&J.has(q)){if(Kl(At)||Os(At)){ot(q,wa(void 0));return}}else{if(Kl(At))if(M.delete(q),F>Gt){ot(q,wa(void 0));return}else return D.add(q),ot(q,ph(Be)),te(zt,At,!1,{fetcherSubmission:Be});if(Os(At)){lt(q,re,At.error);return}}if(Oa(At))throw Zr(400,{type:"defer-action"});let mr=$.navigation.location||$.location,Zn=ec(t.history,mr,Ze.signal),th=a||i,Oi=$.navigation.state!=="idle"?Ml(th,$.navigation.location,u):$.matches;yt(Oi,"Didn't find any matches after fetcher action");let Yu=++_;O.set(q,Yu);let ya=ph(Be,At.data);$.fetchers.set(q,ya);let[Qm,Pi]=rN(t.history,$,Oi,Be,mr,!1,d.v7_skipActionErrorRevalidation,L,V,z,J,j,D,th,u,[Ie.route.id,At]);Pi.filter(Rn=>Rn.key!==q).forEach(Rn=>{let Li=Rn.key,pT=$.fetchers.get(Li),SW=ph(void 0,pT?pT.data:void 0);$.fetchers.set(Li,SW),M.has(Li)&&ae(Li),Rn.controller&&M.set(Li,Rn.controller)}),N({fetchers:new Map($.fetchers)});let Jm=()=>Pi.forEach(Rn=>ae(Rn.key));Ze.signal.addEventListener("abort",Jm);let{loaderResults:eg,fetcherResults:tg}=await ke($,Oi,Qm,Pi,Zn);if(Ze.signal.aborted)return;Ze.signal.removeEventListener("abort",Jm),O.delete(q),M.delete(q),Pi.forEach(Rn=>M.delete(Rn.key));let bt=Sg(eg);if(bt)return te(Zn,bt.result,!1);if(bt=Sg(tg),bt)return D.add(bt.key),te(Zn,bt.result,!1);let{loaderData:Nn,errors:Rs}=aN($,Oi,Qm,eg,void 0,Pi,tg,me);if($.fetchers.has(q)){let Rn=wa(At.data);$.fetchers.set(q,Rn)}Pe(Yu),$.navigation.state==="loading"&&Yu>F?(yt(E,"Expected pending action"),R&&R.abort(),ue($.navigation.location,{matches:Oi,loaderData:Nn,errors:Rs,fetchers:new Map($.fetchers)})):(N({errors:Rs,loaderData:lN($.loaderData,Nn,Oi,Rs),fetchers:new Map($.fetchers)}),L=!1)}async function Ee(q,re,pe,Ie,He,rt,dt,Be){let it=$.fetchers.get(q);ot(q,ph(Be,it?it.data:void 0),{flushSync:dt});let Ye=new AbortController,Ze=ec(t.history,pe,Ye.signal);if(rt){let At=await Di(He,pe,Ze.signal);if(At.type==="aborted")return;if(At.type==="error"){let{error:mr}=pt(pe,At);lt(q,re,mr,{flushSync:dt});return}else if(At.matches)He=At.matches,Ie=Mh(He,pe);else{lt(q,re,Zr(404,{pathname:pe}),{flushSync:dt});return}}M.set(q,Ye);let zt=_,pn=(await ge("loader",$,Ze,[Ie],He,q))[Ie.route.id];if(Oa(pn)&&(pn=await o2(pn,Ze.signal,!0)||pn),M.get(q)===Ye&&M.delete(q),!Ze.signal.aborted){if(J.has(q)){ot(q,wa(void 0));return}if(Kl(pn))if(F>zt){ot(q,wa(void 0));return}else{D.add(q),await te(Ze,pn,!1);return}if(Os(pn)){lt(q,re,pn.error);return}yt(!Oa(pn),"Unhandled fetcher deferred data"),ot(q,wa(pn.data))}}async function te(q,re,pe,Ie){let{submission:He,fetcherSubmission:rt,replace:dt}=Ie===void 0?{}:Ie;re.response.headers.has("X-Remix-Revalidate")&&(L=!0);let Be=re.response.headers.get("Location");yt(Be,"Expected a Location header on the redirect Response"),Be=oN(Be,new URL(q.url),u);let it=Bf($.location,Be,{_isRedirect:!0});if(n){let At=!1;if(re.response.headers.has("X-Remix-Reload-Document"))At=!0;else if(s2.test(Be)){const mr=t.history.createURL(Be);At=mr.origin!==e.location.origin||Rd(mr.pathname,u)==null}if(At){dt?e.location.replace(Be):e.location.assign(Be);return}}R=null;let Ye=dt===!0||re.response.headers.has("X-Remix-Replace")?Gn.Replace:Gn.Push,{formMethod:Ze,formAction:zt,formEncType:Gt}=$.navigation;!He&&!rt&&Ze&&zt&&Gt&&(He=hN($.navigation));let pn=He||rt;if(HH.has(re.response.status)&&pn&&Po(pn.formMethod))await U(Ye,it,{submission:Sn({},pn,{formAction:Be}),preventScrollReset:S,enableViewTransition:pe?T:void 0});else{let At=Db(it,He);await U(Ye,it,{overrideNavigation:At,fetcherSubmission:rt,preventScrollReset:S,enableViewTransition:pe?T:void 0})}}async function ge(q,re,pe,Ie,He,rt){let dt,Be={};try{dt=await n7(l,q,re,pe,Ie,He,rt,o,s)}catch(it){return Ie.forEach(Ye=>{Be[Ye.route.id]={type:Zt.error,error:it}}),Be}for(let[it,Ye]of Object.entries(dt))if(u7(Ye)){let Ze=Ye.result;Be[it]={type:Zt.redirect,response:o7(Ze,pe,it,He,u,d.v7_relativeSplatPath)}}else Be[it]=await s7(Ye);return Be}async function ke(q,re,pe,Ie,He){let rt=q.matches,dt=ge("loader",q,He,pe,re,null),Be=Promise.all(Ie.map(async Ze=>{if(Ze.matches&&Ze.match&&Ze.controller){let Gt=(await ge("loader",q,ec(t.history,Ze.path,Ze.controller.signal),[Ze.match],Ze.matches,Ze.key))[Ze.match.route.id];return{[Ze.key]:Gt}}else return Promise.resolve({[Ze.key]:{type:Zt.error,error:Zr(404,{pathname:Ze.path})}})})),it=await dt,Ye=(await Be).reduce((Ze,zt)=>Object.assign(Ze,zt),{});return await Promise.all([h7(re,it,He.signal,rt,q.loaderData),f7(re,Ye,Ie)]),{loaderResults:it,fetcherResults:Ye}}function Ue(){L=!0,V.push(...Xt()),j.forEach((q,re)=>{M.has(re)&&(z.add(re),ae(re))})}function ot(q,re,pe){pe===void 0&&(pe={}),$.fetchers.set(q,re),N({fetchers:new Map($.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function lt(q,re,pe,Ie){Ie===void 0&&(Ie={});let He=Dc($.matches,re);ft(q),N({errors:{[He.route.id]:pe},fetchers:new Map($.fetchers)},{flushSync:(Ie&&Ie.flushSync)===!0})}function Mt(q){return d.v7_fetcherPersist&&(G.set(q,(G.get(q)||0)+1),J.has(q)&&J.delete(q)),$.fetchers.get(q)||KH}function ft(q){let re=$.fetchers.get(q);M.has(q)&&!(re&&re.state==="loading"&&O.has(q))&&ae(q),j.delete(q),O.delete(q),D.delete(q),J.delete(q),z.delete(q),$.fetchers.delete(q)}function Lr(q){if(d.v7_fetcherPersist){let re=(G.get(q)||0)-1;re<=0?(G.delete(q),J.add(q)):G.set(q,re)}else ft(q);N({fetchers:new Map($.fetchers)})}function ae(q){let re=M.get(q);yt(re,"Expected fetch controller: "+q),re.abort(),M.delete(q)}function Y(q){for(let re of q){let pe=Mt(re),Ie=wa(pe.data);$.fetchers.set(re,Ie)}}function Ce(){let q=[],re=!1;for(let pe of D){let Ie=$.fetchers.get(pe);yt(Ie,"Expected fetcher: "+pe),Ie.state==="loading"&&(D.delete(pe),q.push(pe),re=!0)}return Y(q),re}function Pe(q){let re=[];for(let[pe,Ie]of O)if(Ie<q){let He=$.fetchers.get(pe);yt(He,"Expected fetcher: "+pe),He.state==="loading"&&(ae(pe),O.delete(pe),re.push(pe))}return Y(re),re.length>0}function ze(q,re){let pe=$.blockers.get(q)||fh;return fe.get(q)!==re&&fe.set(q,re),pe}function Ge(q){$.blockers.delete(q),fe.delete(q)}function nt(q,re){let pe=$.blockers.get(q)||fh;yt(pe.state==="unblocked"&&re.state==="blocked"||pe.state==="blocked"&&re.state==="blocked"||pe.state==="blocked"&&re.state==="proceeding"||pe.state==="blocked"&&re.state==="unblocked"||pe.state==="proceeding"&&re.state==="unblocked","Invalid blocker state transition: "+pe.state+" -> "+re.state);let Ie=new Map($.blockers);Ie.set(q,re),N({blockers:Ie})}function Je(q){let{currentLocation:re,nextLocation:pe,historyAction:Ie}=q;if(fe.size===0)return;fe.size>1&&id(!1,"A router only supports one blocker at a time");let He=Array.from(fe.entries()),[rt,dt]=He[He.length-1],Be=$.blockers.get(rt);if(!(Be&&Be.state==="proceeding")&&dt({currentLocation:re,nextLocation:pe,historyAction:Ie}))return rt}function et(q){let re=Zr(404,{pathname:q}),pe=a||i,{matches:Ie,route:He}=cN(pe);return Xt(),{notFoundMatches:Ie,route:He,error:re}}function pt(q,re){return{boundaryId:Dc(re.partialMatches).route.id,error:Zr(400,{type:"route-discovery",pathname:q,message:re.error!=null&&"message"in re.error?re.error:String(re.error)})}}function Xt(q){let re=[];return me.forEach((pe,Ie)=>{(!q||q(Ie))&&(pe.cancel(),re.push(Ie),me.delete(Ie))}),re}function Fr(q,re,pe){if(y=q,v=re,g=pe||null,!x&&$.navigation===Ab){x=!0;let Ie=us($.location,$.matches);Ie!=null&&N({restoreScrollPosition:Ie})}return()=>{y=null,v=null,g=null}}function jn(q,re){return g&&g(q,re.map(Ie=>CH(Ie,$.loaderData)))||q.key}function ls(q,re){if(y&&v){let pe=jn(q,re);y[pe]=v()}}function us(q,re){if(y){let pe=jn(q,re),Ie=y[pe];if(typeof Ie=="number")return Ie}return null}function To(q,re,pe){if(c){if(m.has(pe))return{active:!1,matches:q};if(q){if(Object.keys(q[0].params).length>0)return{active:!0,matches:p0(re,pe,u,!0)}}else return{active:!0,matches:p0(re,pe,u,!0)||[]}}return{active:!1,matches:null}}async function Di(q,re,pe){let Ie=q;for(;;){let He=a==null,rt=a||i;try{await JH(c,re,Ie,rt,o,s,he,pe)}catch(it){return{type:"error",error:it,partialMatches:Ie}}finally{He&&(i=[...i])}if(pe.aborted)return{type:"aborted"};let dt=Ml(rt,re,u);if(dt)return ga(re,m),{type:"success",matches:dt};let Be=p0(rt,re,u,!0);if(!Be||Ie.length===Be.length&&Ie.every((it,Ye)=>it.route.id===Be[Ye].route.id))return ga(re,m),{type:"success",matches:null};Ie=Be}}function ga(q,re){if(re.size>=p){let pe=re.values().next().value;re.delete(pe)}re.add(q)}function Il(q){o={},a=Vf(q,s,void 0,o)}function wW(q,re){let pe=a==null;nL(q,re,a||i,o,s),pe&&(i=[...i],N({}))}return C={get basename(){return u},get future(){return d},get state(){return $},get routes(){return i},get window(){return e},initialize:Re,subscribe:Ve,enableScrollRestoration:Fr,navigate:ne,fetch:_e,revalidate:W,createHref:q=>t.history.createHref(q),encodeLocation:q=>t.history.encodeLocation(q),getFetcher:Mt,deleteFetcher:Lr,dispose:Me,getBlocker:ze,deleteBlocker:Ge,patchRoutes:wW,_internalFetchControllers:M,_internalActiveDeferreds:me,_internalSetRoutes:Il},C}function YH(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function FS(t,e,n,r,s,o,i,a){let u,l;if(i){u=[];for(let d of e)if(u.push(d),d.route.id===i){l=d;break}}else u=e,l=e[e.length-1];let c=p1(s||".",f1(u,o),Rd(t.pathname,n)||t.pathname,a==="path");return s==null&&(c.search=t.search,c.hash=t.hash),(s==null||s===""||s===".")&&l&&l.route.index&&!i2(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:Zi([n,c.pathname])),du(c)}function nN(t,e,n,r){if(!r||!YH(r))return{path:n};if(r.formMethod&&!d7(r.formMethod))return{path:n,error:Zr(405,{method:r.formMethod})};let s=()=>({path:n,error:Zr(400,{type:"invalid-body"})}),o=r.formMethod||"get",i=t?o.toUpperCase():o.toLowerCase(),a=rL(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Po(i))return s();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[m,y]=p;return""+f+m+"="+y+`
`},""):String(r.body);return{path:n,submission:{formMethod:i,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!Po(i))return s();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:i,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return s()}}}yt(typeof FormData=="function","FormData is not available in this environment");let u,l;if(r.formData)u=MS(r.formData),l=r.formData;else if(r.body instanceof FormData)u=MS(r.body),l=r.body;else if(r.body instanceof URLSearchParams)u=r.body,l=iN(u);else if(r.body==null)u=new URLSearchParams,l=new FormData;else try{u=new URLSearchParams(r.body),l=iN(u)}catch{return s()}let c={formMethod:i,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Po(c.formMethod))return{path:n,submission:c};let d=ca(n);return e&&d.search&&i2(d.search)&&u.append("index",""),d.search="?"+u,{path:du(d),submission:c}}function ZH(t,e){let n=t;if(e){let r=t.findIndex(s=>s.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function rN(t,e,n,r,s,o,i,a,u,l,c,d,h,f,p,m){let y=m?Os(m[1])?m[1].error:m[1].data:void 0,g=t.createURL(e.location),v=t.createURL(s),x=m&&Os(m[1])?m[0]:void 0,b=x?ZH(n,x):n,w=m?m[1].statusCode:void 0,k=i&&w&&w>=400,C=b.filter((E,S)=>{let{route:R}=E;if(R.lazy)return!0;if(R.loader==null)return!1;if(o)return typeof R.loader!="function"||R.loader.hydrate?!0:e.loaderData[R.id]===void 0&&(!e.errors||e.errors[R.id]===void 0);if(QH(e.loaderData,e.matches[S],E)||u.some(I=>I===E.route.id))return!0;let T=e.matches[S],P=E;return sN(E,Sn({currentUrl:g,currentParams:T.params,nextUrl:v,nextParams:P.params},r,{actionResult:y,actionStatus:w,defaultShouldRevalidate:k?!1:a||g.pathname+g.search===v.pathname+v.search||g.search!==v.search||tL(T,P)}))}),$=[];return d.forEach((E,S)=>{if(o||!n.some(A=>A.route.id===E.routeId)||c.has(S))return;let R=Ml(f,E.path,p);if(!R){$.push({key:S,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let T=e.fetchers.get(S),P=Mh(R,E.path),I=!1;h.has(S)?I=!1:l.has(S)?(l.delete(S),I=!0):T&&T.state!=="idle"&&T.data===void 0?I=a:I=sN(P,Sn({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:y,actionStatus:w,defaultShouldRevalidate:k?!1:a})),I&&$.push({key:S,routeId:E.routeId,path:E.path,matches:R,match:P,controller:new AbortController})}),[C,$]}function QH(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function tL(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function sN(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function JH(t,e,n,r,s,o,i,a){let u=[e,...n.map(l=>l.route.id)].join("-");try{let l=i.get(u);l||(l=t({path:e,matches:n,patch:(c,d)=>{a.aborted||nL(c,d,r,s,o)}}),i.set(u,l)),l&&l7(l)&&await l}finally{i.delete(u)}}function nL(t,e,n,r,s){if(t){var o;let i=r[t];yt(i,"No route found to patch children into: routeId = "+t);let a=Vf(e,s,[t,"patch",String(((o=i.children)==null?void 0:o.length)||"0")],r);i.children?i.children.push(...a):i.children=a}else{let i=Vf(e,s,["patch",String(n.length||"0")],r);n.push(...i)}}async function e7(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];yt(s,"No route found in manifest");let o={};for(let i in r){let u=s[i]!==void 0&&i!=="hasErrorBoundary";id(!u,'Route "'+s.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!u&&!SH.has(i)&&(o[i]=r[i])}Object.assign(s,o),Object.assign(s,Sn({},e(s),{lazy:void 0}))}async function t7(t){let{matches:e}=t,n=e.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,o,i)=>Object.assign(s,{[n[i].route.id]:o}),{})}async function n7(t,e,n,r,s,o,i,a,u,l){let c=o.map(f=>f.route.lazy?e7(f.route,u,a):void 0),d=o.map((f,p)=>{let m=c[p],y=s.some(v=>v.route.id===f.route.id);return Sn({},f,{shouldLoad:y,resolve:async v=>(v&&r.method==="GET"&&(f.route.lazy||f.route.loader)&&(y=!0),y?r7(e,r,f,m,v,l):Promise.resolve({type:Zt.data,result:void 0}))})}),h=await t({matches:d,request:r,params:o[0].params,fetcherKey:i,context:l});try{await Promise.all(c)}catch{}return h}async function r7(t,e,n,r,s,o){let i,a,u=l=>{let c,d=new Promise((p,m)=>c=m);a=()=>c(),e.signal.addEventListener("abort",a);let h=p=>typeof l!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):l({request:e,params:n.params,context:o},...p!==void 0?[p]:[]),f=(async()=>{try{return{type:"data",result:await(s?s(m=>h(m)):h())}}catch(p){return{type:"error",result:p}}})();return Promise.race([f,d])};try{let l=n.route[t];if(r)if(l){let c,[d]=await Promise.all([u(l).catch(h=>{c=h}),r]);if(c!==void 0)throw c;i=d}else if(await r,l=n.route[t],l)i=await u(l);else if(t==="action"){let c=new URL(e.url),d=c.pathname+c.search;throw Zr(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:Zt.data,result:void 0};else if(l)i=await u(l);else{let c=new URL(e.url),d=c.pathname+c.search;throw Zr(404,{pathname:d})}yt(i.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(l){return{type:Zt.error,result:l}}finally{a&&e.signal.removeEventListener("abort",a)}return i}async function s7(t){let{result:e,type:n}=t;if(sL(e)){let l;try{let c=e.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?e.body==null?l=null:l=await e.json():l=await e.text()}catch(c){return{type:Zt.error,error:c}}return n===Zt.error?{type:Zt.error,error:new ry(e.status,e.statusText,l),statusCode:e.status,headers:e.headers}:{type:Zt.data,data:l,statusCode:e.status,headers:e.headers}}if(n===Zt.error){if(dN(e)){var r;if(e.data instanceof Error){var s;return{type:Zt.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new ry(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Zt.error,error:e,statusCode:m1(e)?e.status:void 0}}if(c7(e)){var o,i;return{type:Zt.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((i=e.init)==null?void 0:i.headers)&&new Headers(e.init.headers)}}if(dN(e)){var a,u;return{type:Zt.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Zt.data,data:e}}function o7(t,e,n,r,s,o){let i=t.headers.get("Location");if(yt(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!s2.test(i)){let a=r.slice(0,r.findIndex(u=>u.route.id===n)+1);i=FS(new URL(e.url),a,s,!0,i,o),t.headers.set("Location",i)}return t}function oN(t,e,n){if(s2.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Rd(s.pathname,n)!=null;if(s.origin===e.origin&&o)return s.pathname+s.search+s.hash}return t}function ec(t,e,n,r){let s=t.createURL(rL(e)).toString(),o={signal:n};if(r&&Po(r.formMethod)){let{formMethod:i,formEncType:a}=r;o.method=i.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=MS(r.formData):o.body=r.formData}return new Request(s,o)}function MS(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function iN(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function i7(t,e,n,r,s){let o={},i=null,a,u=!1,l={},c=n&&Os(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let h=d.route.id,f=e[h];if(yt(!Kl(f),"Cannot handle redirect results in processLoaderData"),Os(f)){let p=f.error;if(c!==void 0&&(p=c,c=void 0),i=i||{},s)i[h]=p;else{let m=Dc(t,h);i[m.route.id]==null&&(i[m.route.id]=p)}o[h]=void 0,u||(u=!0,a=m1(f.error)?f.error.status:500),f.headers&&(l[h]=f.headers)}else Oa(f)?(r.set(h,f.deferredData),o[h]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!u&&(a=f.statusCode),f.headers&&(l[h]=f.headers)):(o[h]=f.data,f.statusCode&&f.statusCode!==200&&!u&&(a=f.statusCode),f.headers&&(l[h]=f.headers))}),c!==void 0&&n&&(i={[n[0]]:c},o[n[0]]=void 0),{loaderData:o,errors:i,statusCode:a||200,loaderHeaders:l}}function aN(t,e,n,r,s,o,i,a){let{loaderData:u,errors:l}=i7(e,r,s,a,!1);return o.forEach(c=>{let{key:d,match:h,controller:f}=c,p=i[d];if(yt(p,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Os(p)){let m=Dc(t.matches,h==null?void 0:h.route.id);l&&l[m.route.id]||(l=Sn({},l,{[m.route.id]:p.error})),t.fetchers.delete(d)}else if(Kl(p))yt(!1,"Unhandled fetcher revalidation redirect");else if(Oa(p))yt(!1,"Unhandled fetcher deferred data");else{let m=wa(p.data);t.fetchers.set(d,m)}}),{loaderData:u,errors:l}}function lN(t,e,n,r){let s=Sn({},e);for(let o of n){let i=o.route.id;if(e.hasOwnProperty(i)?e[i]!==void 0&&(s[i]=e[i]):t[i]!==void 0&&o.route.loader&&(s[i]=t[i]),r&&r.hasOwnProperty(i))break}return s}function uN(t){return t?Os(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Dc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function cN(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zr(t,e){let{pathname:n,routeId:r,method:s,type:o,message:i}=e===void 0?{}:e,a="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(a="Bad Request",o==="route-discovery"?u='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+i):s&&n&&r?u="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?u="defer() is not supported in actions":o==="invalid-body"&&(u="Unable to encode submission body")):t===403?(a="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",u='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?u="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(u='Invalid request method "'+s.toUpperCase()+'"')),new ry(t||500,a,new Error(u),!0)}function Sg(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,s]=e[n];if(Kl(s))return{key:r,result:s}}}function rL(t){let e=typeof t=="string"?ca(t):t;return du(Sn({},e,{hash:""}))}function a7(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function l7(t){return typeof t=="object"&&t!=null&&"then"in t}function u7(t){return sL(t.result)&&GH.has(t.result.status)}function Oa(t){return t.type===Zt.deferred}function Os(t){return t.type===Zt.error}function Kl(t){return(t&&t.type)===Zt.redirect}function dN(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function c7(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function sL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function d7(t){return jH.has(t.toLowerCase())}function Po(t){return UH.has(t.toLowerCase())}async function h7(t,e,n,r,s){let o=Object.entries(e);for(let i=0;i<o.length;i++){let[a,u]=o[i],l=t.find(h=>(h==null?void 0:h.route.id)===a);if(!l)continue;let c=r.find(h=>h.route.id===l.route.id),d=c!=null&&!tL(c,l)&&(s&&s[l.route.id])!==void 0;Oa(u)&&d&&await o2(u,n,!1).then(h=>{h&&(e[a]=h)})}}async function f7(t,e,n){for(let r=0;r<n.length;r++){let{key:s,routeId:o,controller:i}=n[r],a=e[s];t.find(l=>(l==null?void 0:l.route.id)===o)&&Oa(a)&&(yt(i,"Expected an AbortController for revalidating fetcher deferred result"),await o2(a,i.signal,!0).then(l=>{l&&(e[s]=l)}))}}async function o2(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Zt.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Zt.error,error:s}}return{type:Zt.data,data:t.deferredData.data}}}function i2(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Mh(t,e){let n=typeof e=="string"?ca(e).search:e.search;if(t[t.length-1].route.index&&i2(n||""))return t[t.length-1];let r=QP(t);return r[r.length-1]}function hN(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:o,json:i}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(i!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function Db(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function p7(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ph(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function m7(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function wa(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function g7(t,e){try{let n=t.sessionStorage.getItem(eL);if(n){let r=JSON.parse(n);for(let[s,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(s,new Set(o||[]))}}catch{}}function y7(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(eL,JSON.stringify(n))}catch(r){id(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uf(){return Uf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uf.apply(this,arguments)}const g1=K.createContext(null),oL=K.createContext(null),cl=K.createContext(null),y1=K.createContext(null),_i=K.createContext({outlet:null,matches:[],isDataRoute:!1}),iL=K.createContext(null);function v7(t,e){let{relative:n}=e===void 0?{}:e;Ad()||yt(!1);let{basename:r,navigator:s}=K.useContext(cl),{hash:o,pathname:i,search:a}=lL(t,{relative:n}),u=i;return r!=="/"&&(u=i==="/"?r:Zi([r,i])),s.createHref({pathname:u,search:a,hash:o})}function Ad(){return K.useContext(y1)!=null}function Du(){return Ad()||yt(!1),K.useContext(y1).location}function aL(t){K.useContext(cl).static||K.useLayoutEffect(t)}function v1(){let{isDataRoute:t}=K.useContext(_i);return t?R7():x7()}function x7(){Ad()||yt(!1);let t=K.useContext(g1),{basename:e,future:n,navigator:r}=K.useContext(cl),{matches:s}=K.useContext(_i),{pathname:o}=Du(),i=JSON.stringify(f1(s,n.v7_relativeSplatPath)),a=K.useRef(!1);return aL(()=>{a.current=!0}),K.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=p1(l,JSON.parse(i),o,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Zi([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,i,o,t])}const b7=K.createContext(null);function w7(t){let e=K.useContext(_i).outlet;return e&&K.createElement(b7.Provider,{value:t},e)}function ize(){let{matches:t}=K.useContext(_i),e=t[t.length-1];return e?e.params:{}}function lL(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=K.useContext(cl),{matches:s}=K.useContext(_i),{pathname:o}=Du(),i=JSON.stringify(f1(s,r.v7_relativeSplatPath));return K.useMemo(()=>p1(t,JSON.parse(i),o,n==="path"),[t,i,o,n])}function S7(t,e,n,r){Ad()||yt(!1);let{navigator:s}=K.useContext(cl),{matches:o}=K.useContext(_i),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let u=i?i.pathnameBase:"/";i&&i.route;let l=Du(),c;if(e){var d;let y=typeof e=="string"?ca(e):e;u==="/"||(d=y.pathname)!=null&&d.startsWith(u)||yt(!1),c=y}else c=l;let h=c.pathname||"/",f=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Ml(t,{pathname:f}),m=E7(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Zi([u,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Zi([u,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return e&&m?K.createElement(y1.Provider,{value:{location:Uf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Gn.Pop}},m):m}function k7(){let t=dL(),e=m1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),n?K.createElement("pre",{style:s},n):null,o)}const C7=K.createElement(k7,null);class $7 extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?K.createElement(_i.Provider,{value:this.props.routeContext},K.createElement(iL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I7(t){let{routeContext:e,match:n,children:r}=t,s=K.useContext(g1);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),K.createElement(_i.Provider,{value:e},r)}function E7(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let c=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||yt(!1),i=i.slice(0,Math.min(i.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){u=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,d,h)=>{let f,p=!1,m=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||C7,u&&(l<0&&h===0?(A7("route-fallback",!1),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,h+1)),v=()=>{let x;return f?x=m:p?x=y:d.route.Component?x=K.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,K.createElement(I7,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?K.createElement($7,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var uL=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uL||{}),sy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sy||{});function T7(t){let e=K.useContext(g1);return e||yt(!1),e}function _7(t){let e=K.useContext(oL);return e||yt(!1),e}function N7(t){let e=K.useContext(_i);return e||yt(!1),e}function cL(t){let e=N7(),n=e.matches[e.matches.length-1];return n.route.id||yt(!1),n.route.id}function dL(){var t;let e=K.useContext(iL),n=_7(sy.UseRouteError),r=cL(sy.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function R7(){let{router:t}=T7(uL.UseNavigateStable),e=cL(sy.UseNavigateStable),n=K.useRef(!1);return aL(()=>{n.current=!0}),K.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Uf({fromRouteId:e},o)))},[t,e])}const fN={};function A7(t,e,n){!e&&!fN[t]&&(fN[t]=!0)}function D7(t){let{to:e,replace:n,state:r,relative:s}=t;Ad()||yt(!1);let{future:o,static:i}=K.useContext(cl),{matches:a}=K.useContext(_i),{pathname:u}=Du(),l=v1(),c=p1(e,f1(a,o.v7_relativeSplatPath),u,s==="path"),d=JSON.stringify(c);return K.useEffect(()=>l(JSON.parse(d),{replace:n,state:r,relative:s}),[l,d,s,n,r]),null}function aze(t){return w7(t.context)}function wt(t){yt(!1)}function O7(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Gn.Pop,navigator:o,static:i=!1,future:a}=t;Ad()&&yt(!1);let u=e.replace(/^\/*/,"/"),l=K.useMemo(()=>({basename:u,navigator:o,static:i,future:Uf({v7_relativeSplatPath:!1},a)}),[u,a,o,i]);typeof r=="string"&&(r=ca(r));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=K.useMemo(()=>{let y=Rd(c,u);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[u,c,d,h,f,p,s]);return m==null?null:K.createElement(cl.Provider,{value:l},K.createElement(y1.Provider,{children:n,value:m}))}new Promise(()=>{});function zS(t,e){e===void 0&&(e=[]);let n=[];return K.Children.forEach(t,(r,s)=>{if(!K.isValidElement(r))return;let o=[...e,s];if(r.type===K.Fragment){n.push.apply(n,zS(r.props.children,o));return}r.type!==wt&&yt(!1),!r.props.index||!r.props.children||yt(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=zS(r.props.children,o)),n.push(i)}),n}function P7(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:K.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:K.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:K.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wf.apply(this,arguments)}function L7(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function F7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function M7(t,e){return t.button===0&&(!e||e==="_self")&&!F7(t)}function BS(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function z7(t,e){let n=BS(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}const B7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],V7="6";try{window.__reactRouterVersion=V7}catch{}function U7(t,e){return XH({basename:e==null?void 0:e.basename,future:Wf({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:xH({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||W7(),routes:t,mapRouteProperties:P7,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy,unstable_patchRoutesOnNavigation:e==null?void 0:e.unstable_patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function W7(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Wf({},e,{errors:j7(e.errors)})),e}function j7(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new ry(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let o=window[s.__subType];if(typeof o=="function")try{let i=new o(s.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let o=new Error(s.message);o.stack="",n[r]=o}}else n[r]=s;return n}const G7=K.createContext({isTransitioning:!1}),H7=K.createContext(new Map),K7="startTransition",pN=T0[K7],q7="flushSync",mN=Z8[q7];function X7(t){pN?pN(t):t()}function mh(t){mN?mN(t):t()}class Y7{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function Z7(t){let{fallbackElement:e,router:n,future:r}=t,[s,o]=K.useState(n.state),[i,a]=K.useState(),[u,l]=K.useState({isTransitioning:!1}),[c,d]=K.useState(),[h,f]=K.useState(),[p,m]=K.useState(),y=K.useRef(new Map),{v7_startTransition:g}=r||{},v=K.useCallback($=>{g?X7($):$()},[g]),x=K.useCallback(($,E)=>{let{deletedFetchers:S,unstable_flushSync:R,unstable_viewTransitionOpts:T}=E;S.forEach(I=>y.current.delete(I)),$.fetchers.forEach((I,A)=>{I.data!==void 0&&y.current.set(A,I.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!T||P){R?mh(()=>o($)):v(()=>o($));return}if(R){mh(()=>{h&&(c&&c.resolve(),h.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:T.currentLocation,nextLocation:T.nextLocation})});let I=n.window.document.startViewTransition(()=>{mh(()=>o($))});I.finished.finally(()=>{mh(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})})}),mh(()=>f(I));return}h?(c&&c.resolve(),h.skipTransition(),m({state:$,currentLocation:T.currentLocation,nextLocation:T.nextLocation})):(a($),l({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}))},[n.window,h,c,y,v]);K.useLayoutEffect(()=>n.subscribe(x),[n,x]),K.useEffect(()=>{u.isTransitioning&&!u.flushSync&&d(new Y7)},[u]),K.useEffect(()=>{if(c&&i&&n.window){let $=i,E=c.promise,S=n.window.document.startViewTransition(async()=>{v(()=>o($)),await E});S.finished.finally(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})}),f(S)}},[v,i,c,n.window]),K.useEffect(()=>{c&&i&&s.location.key===i.location.key&&c.resolve()},[c,h,s.location,i]),K.useEffect(()=>{!u.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[u.isTransitioning,p]),K.useEffect(()=>{},[]);let b=K.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:$=>n.navigate($),push:($,E,S)=>n.navigate($,{state:E,preventScrollReset:S==null?void 0:S.preventScrollReset}),replace:($,E,S)=>n.navigate($,{replace:!0,state:E,preventScrollReset:S==null?void 0:S.preventScrollReset})}),[n]),w=n.basename||"/",k=K.useMemo(()=>({router:n,navigator:b,static:!1,basename:w}),[n,b,w]),C=K.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return K.createElement(K.Fragment,null,K.createElement(g1.Provider,{value:k},K.createElement(oL.Provider,{value:s},K.createElement(H7.Provider,{value:y.current},K.createElement(G7.Provider,{value:u},K.createElement(O7,{basename:w,location:s.location,navigationType:s.historyAction,navigator:b,future:C},s.initialized||n.future.v7_partialHydration?K.createElement(Q7,{routes:n.routes,future:n.future,state:s}):e))))),null)}const Q7=K.memo(J7);function J7(t){let{routes:e,future:n,state:r}=t;return S7(e,void 0,r,n)}const e9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",t9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lze=K.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:d}=e,h=L7(e,B7),{basename:f}=K.useContext(cl),p,m=!1;if(typeof l=="string"&&t9.test(l)&&(p=l,e9))try{let x=new URL(window.location.href),b=l.startsWith("//")?new URL(x.protocol+l):new URL(l),w=Rd(b.pathname,f);b.origin===x.origin&&w!=null?l=w+b.search+b.hash:m=!0}catch{}let y=v7(l,{relative:s}),g=n9(l,{replace:i,state:a,target:u,preventScrollReset:c,relative:s,unstable_viewTransition:d});function v(x){r&&r(x),x.defaultPrevented||g(x)}return K.createElement("a",Wf({},h,{href:p||y,onClick:m||o?r:v,ref:n,target:u}))});var gN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gN||(gN={}));var yN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yN||(yN={}));function n9(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,unstable_viewTransition:a}=e===void 0?{}:e,u=v1(),l=Du(),c=lL(t,{relative:i});return K.useCallback(d=>{if(M7(d,n)){d.preventDefault();let h=r!==void 0?r:du(l)===du(c);u(t,{replace:h,state:s,preventScrollReset:o,relative:i,unstable_viewTransition:a})}},[l,u,c,r,s,n,t,o,i,a])}function uze(t){let e=K.useRef(BS(t)),n=K.useRef(!1),r=Du(),s=K.useMemo(()=>z7(r.search,n.current?null:e.current),[r.search]),o=v1(),i=K.useCallback((a,u)=>{const l=BS(typeof a=="function"?a(s):a);n.current=!0,o("?"+l,u)},[o,s]);return[s,i]}function r9(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var s9=r9,St=s9;function o9(t){return!!t&&typeof t.then=="function"}var gn=o9;function i9(t,e){if(t!=null)return t;throw St(e??"Got unexpected null or undefined")}var Cn=i9;function vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class x1{getValue(){throw St("BaseLoadable")}toPromise(){throw St("BaseLoadable")}valueMaybe(){throw St("BaseLoadable")}valueOrThrow(){throw St(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw St("BaseLoadable")}promiseOrThrow(){throw St(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw St("BaseLoadable")}errorOrThrow(){throw St(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw St("BaseLoadable")}}class a9 extends x1{constructor(e){super(),vt(this,"state","hasValue"),vt(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return gn(n)?hu(n):ad(n)?n:fp(n)}catch(n){return gn(n)?hu(n.next(()=>this.map(e))):b1(n)}}}class l9 extends x1{constructor(e){super(),vt(this,"state","hasError"),vt(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class hL extends x1{constructor(e){super(),vt(this,"state","loading"),vt(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return hu(this.contents.then(n=>{const r=e(n);if(ad(r)){const s=r;switch(s.state){case"hasValue":return s.contents;case"hasError":throw s.contents;case"loading":return s.contents}}return r}).catch(n=>{if(gn(n))return n.then(()=>this.map(e).contents);throw n}))}}function fp(t){return Object.freeze(new a9(t))}function b1(t){return Object.freeze(new l9(t))}function hu(t){return Object.freeze(new hL(t))}function fL(){return Object.freeze(new hL(new Promise(()=>{})))}function u9(t){return t.every(e=>e.state==="hasValue")?fp(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?b1(Cn(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):hu(Promise.all(t.map(e=>e.contents)))}function pL(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(s=>t[s])).map(s=>ad(s)?s:gn(s)?hu(s):fp(s)),r=u9(n);return Array.isArray(t)?r:r.map(s=>Object.getOwnPropertyNames(t).reduce((o,i,a)=>({...o,[i]:s[a]}),{}))}function ad(t){return t instanceof x1}const c9={of:t=>gn(t)?hu(t):ad(t)?t:fp(t),error:t=>b1(t),loading:()=>fL(),all:pL,isLoadable:ad};var Ou={loadableWithValue:fp,loadableWithError:b1,loadableWithPromise:hu,loadableLoading:fL,loadableAll:pL,isLoadable:ad,RecoilLoadable:c9},d9=Ou.loadableWithValue,h9=Ou.loadableWithError,f9=Ou.loadableWithPromise,p9=Ou.loadableLoading,m9=Ou.loadableAll,g9=Ou.isLoadable,y9=Ou.RecoilLoadable,pp=Object.freeze({__proto__:null,loadableWithValue:d9,loadableWithError:h9,loadableWithPromise:f9,loadableLoading:p9,loadableAll:m9,isLoadable:g9,RecoilLoadable:y9});const VS={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function v9(t,e){var n,r;const s=(n=process.env[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(s==null||s==="")return;if(!["true","false"].includes(s))throw St(`({}).${t} value must be 'true', 'false', or empty: ${s}`);e(s==="true")}function x9(t,e){var n;const r=(n=process.env[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function b9(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(v9("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{VS.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),x9("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{VS.RECOIL_GKS_ENABLED.add(n)})}))}b9();var Dd=VS;function w1(t){return Dd.RECOIL_GKS_ENABLED.has(t)}w1.setPass=t=>{Dd.RECOIL_GKS_ENABLED.add(t)};w1.setFail=t=>{Dd.RECOIL_GKS_ENABLED.delete(t)};w1.clear=()=>{Dd.RECOIL_GKS_ENABLED.clear()};var on=w1;function w9(t,e,{error:n}={}){return null}var S9=w9,a2=S9,Ob,Pb,Lb;const k9=(Ob=Lt.createMutableSource)!==null&&Ob!==void 0?Ob:Lt.unstable_createMutableSource,mL=(Pb=Lt.useMutableSource)!==null&&Pb!==void 0?Pb:Lt.unstable_useMutableSource,gL=(Lb=Lt.useSyncExternalStore)!==null&&Lb!==void 0?Lb:Lt.unstable_useSyncExternalStore;function C9(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function $9(){return on("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:on("recoil_sync_external_store")&&gL!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:on("recoil_mutable_source")&&mL!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?on("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:on("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function I9(){return!1}var mp={createMutableSource:k9,useMutableSource:mL,useSyncExternalStore:gL,currentRendererSupportsUseSyncExternalStore:C9,reactMode:$9,isFastRefreshEnabled:I9};class l2{constructor(e){vt(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class yL extends l2{}class vL extends l2{}function E9(t){return t instanceof yL||t instanceof vL}var S1={AbstractRecoilValue:l2,RecoilState:yL,RecoilValueReadOnly:vL,isRecoilValue:E9},T9=S1.AbstractRecoilValue,_9=S1.RecoilState,N9=S1.RecoilValueReadOnly,R9=S1.isRecoilValue,ld=Object.freeze({__proto__:null,AbstractRecoilValue:T9,RecoilState:_9,RecoilValueReadOnly:N9,isRecoilValue:R9});function A9(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var k1=A9;class xL{}const D9=new xL,fu=new Map,u2=new Map;function O9(t){return k1(t,e=>Cn(u2.get(e)))}function P9(t){if(fu.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function L9(t){Dd.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&P9(t.key),fu.set(t.key,t);const e=t.set==null?new ld.RecoilValueReadOnly(t.key):new ld.RecoilState(t.key);return u2.set(t.key,e),e}class bL extends Error{}function F9(t){const e=fu.get(t);if(e==null)throw new bL(`Missing definition for RecoilValue: "${t}""`);return e}function M9(t){return fu.get(t)}const oy=new Map;function z9(t){var e;if(!on("recoil_memory_managament_2020"))return;const n=fu.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;fu.delete(t),(r=wL(t))===null||r===void 0||r(),oy.delete(t)}}function B9(t,e){on("recoil_memory_managament_2020")&&(e===void 0?oy.delete(t):oy.set(t,e))}function wL(t){return oy.get(t)}var Ts={nodes:fu,recoilValues:u2,registerNode:L9,getNode:F9,getNodeMaybe:M9,deleteNodeConfigIfPossible:z9,setConfigDeletionHandler:B9,getConfigDeletionHandler:wL,recoilValuesForKeys:O9,NodeMissingError:bL,DefaultValue:xL,DEFAULT_VALUE:D9};function V9(t,e){e()}var U9={enqueueExecution:V9};function W9(t,e){return e={exports:{}},t(e,e.exports),e.exports}var j9=W9(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},n={},r=5,s=Math.pow(2,r),o=s-1,i=s/2,a=s/4,u={},l=function(Y){return function(){return Y}},c=n.hash=function(ae){var Y=typeof ae>"u"?"undefined":e(ae);if(Y==="number")return ae;Y!=="string"&&(ae+="");for(var Ce=0,Pe=0,ze=ae.length;Pe<ze;++Pe){var Ge=ae.charCodeAt(Pe);Ce=(Ce<<5)-Ce+Ge|0}return Ce},d=function(Y){return Y-=Y>>1&1431655765,Y=(Y&858993459)+(Y>>2&858993459),Y=Y+(Y>>4)&252645135,Y+=Y>>8,Y+=Y>>16,Y&127},h=function(Y,Ce){return Ce>>>Y&o},f=function(Y){return 1<<Y},p=function(Y,Ce){return d(Y&Ce-1)},m=function(Y,Ce,Pe,ze){var Ge=ze;if(!Y){var nt=ze.length;Ge=new Array(nt);for(var Je=0;Je<nt;++Je)Ge[Je]=ze[Je]}return Ge[Ce]=Pe,Ge},y=function(Y,Ce,Pe){var ze=Pe.length-1,Ge=0,nt=0,Je=Pe;if(Y)Ge=nt=Ce;else for(Je=new Array(ze);Ge<Ce;)Je[nt++]=Pe[Ge++];for(++Ge;Ge<=ze;)Je[nt++]=Pe[Ge++];return Y&&(Je.length=ze),Je},g=function(Y,Ce,Pe,ze){var Ge=ze.length;if(Y){for(var nt=Ge;nt>=Ce;)ze[nt--]=ze[nt];return ze[Ce]=Pe,ze}for(var Je=0,et=0,pt=new Array(Ge+1);Je<Ce;)pt[et++]=ze[Je++];for(pt[Ce]=Pe;Je<Ge;)pt[++et]=ze[Je++];return pt},v=1,x=2,b=3,w=4,k={__hamt_isEmpty:!0},C=function(Y){return Y===k||Y&&Y.__hamt_isEmpty},$=function(Y,Ce,Pe,ze){return{type:v,edit:Y,hash:Ce,key:Pe,value:ze,_modify:z}},E=function(Y,Ce,Pe){return{type:x,edit:Y,hash:Ce,children:Pe,_modify:M}},S=function(Y,Ce,Pe){return{type:b,edit:Y,mask:Ce,children:Pe,_modify:_}},R=function(Y,Ce,Pe){return{type:w,edit:Y,size:Ce,children:Pe,_modify:F}},T=function(Y){return Y===k||Y.type===v||Y.type===x},P=function(Y,Ce,Pe,ze,Ge){for(var nt=[],Je=ze,et=0,pt=0;Je;++pt)Je&1&&(nt[pt]=Ge[et++]),Je>>>=1;return nt[Ce]=Pe,R(Y,et+1,nt)},I=function(Y,Ce,Pe,ze){for(var Ge=new Array(Ce-1),nt=0,Je=0,et=0,pt=ze.length;et<pt;++et)if(et!==Pe){var Xt=ze[et];Xt&&!C(Xt)&&(Ge[nt++]=Xt,Je|=1<<et)}return S(Y,Je,Ge)},A=function ae(Y,Ce,Pe,ze,Ge,nt){if(Pe===Ge)return E(Y,Pe,[nt,ze]);var Je=h(Ce,Pe),et=h(Ce,Ge);return S(Y,f(Je)|f(et),Je===et?[ae(Y,Ce+r,Pe,ze,Ge,nt)]:Je<et?[ze,nt]:[nt,ze])},L=function(Y,Ce,Pe,ze,Ge,nt,Je,et){for(var pt=Ge.length,Xt=0;Xt<pt;++Xt){var Fr=Ge[Xt];if(Pe(Je,Fr.key)){var jn=Fr.value,ls=nt(jn);return ls===jn?Ge:ls===u?(--et.value,y(Y,Xt,Ge)):m(Y,Xt,$(Ce,ze,Je,ls),Ge)}}var us=nt();return us===u?Ge:(++et.value,m(Y,pt,$(Ce,ze,Je,us),Ge))},V=function(Y,Ce){return Y===Ce.edit},z=function(Y,Ce,Pe,ze,Ge,nt,Je){if(Ce(nt,this.key)){var et=ze(this.value);return et===this.value?this:et===u?(--Je.value,k):V(Y,this)?(this.value=et,this):$(Y,Ge,nt,et)}var pt=ze();return pt===u?this:(++Je.value,A(Y,Pe,this.hash,this,Ge,$(Y,Ge,nt,pt)))},M=function(Y,Ce,Pe,ze,Ge,nt,Je){if(Ge===this.hash){var et=V(Y,this),pt=L(et,Y,Ce,this.hash,this.children,ze,nt,Je);return pt===this.children?this:pt.length>1?E(Y,this.hash,pt):pt[0]}var Xt=ze();return Xt===u?this:(++Je.value,A(Y,Pe,this.hash,this,Ge,$(Y,Ge,nt,Xt)))},_=function(Y,Ce,Pe,ze,Ge,nt,Je){var et=this.mask,pt=this.children,Xt=h(Pe,Ge),Fr=f(Xt),jn=p(et,Fr),ls=et&Fr,us=ls?pt[jn]:k,To=us._modify(Y,Ce,Pe+r,ze,Ge,nt,Je);if(us===To)return this;var Di=V(Y,this),ga=et,Il=void 0;if(ls&&C(To)){if(ga&=~Fr,!ga)return k;if(pt.length<=2&&T(pt[jn^1]))return pt[jn^1];Il=y(Di,jn,pt)}else if(!ls&&!C(To)){if(pt.length>=i)return P(Y,Xt,To,et,pt);ga|=Fr,Il=g(Di,jn,To,pt)}else Il=m(Di,jn,To,pt);return Di?(this.mask=ga,this.children=Il,this):S(Y,ga,Il)},F=function(Y,Ce,Pe,ze,Ge,nt,Je){var et=this.size,pt=this.children,Xt=h(Pe,Ge),Fr=pt[Xt],jn=(Fr||k)._modify(Y,Ce,Pe+r,ze,Ge,nt,Je);if(Fr===jn)return this;var ls=V(Y,this),us=void 0;if(C(Fr)&&!C(jn))++et,us=m(ls,Xt,jn,pt);else if(!C(Fr)&&C(jn)){if(--et,et<=a)return I(Y,et,Xt,pt);us=m(ls,Xt,k,pt)}else us=m(ls,Xt,jn,pt);return ls?(this.size=et,this.children=us,this):R(Y,et,us)};k._modify=function(ae,Y,Ce,Pe,ze,Ge,nt){var Je=Pe();return Je===u?k:(++nt.value,$(ae,ze,Ge,Je))};function O(ae,Y,Ce,Pe,ze){this._editable=ae,this._edit=Y,this._config=Ce,this._root=Pe,this._size=ze}O.prototype.setTree=function(ae,Y){return this._editable?(this._root=ae,this._size=Y,this):ae===this._root?this:new O(this._editable,this._edit,this._config,ae,Y)};var D=n.tryGetHash=function(ae,Y,Ce,Pe){for(var ze=Pe._root,Ge=0,nt=Pe._config.keyEq;;)switch(ze.type){case v:return nt(Ce,ze.key)?ze.value:ae;case x:{if(Y===ze.hash)for(var Je=ze.children,et=0,pt=Je.length;et<pt;++et){var Xt=Je[et];if(nt(Ce,Xt.key))return Xt.value}return ae}case b:{var Fr=h(Ge,Y),jn=f(Fr);if(ze.mask&jn){ze=ze.children[p(ze.mask,jn)],Ge+=r;break}return ae}case w:{if(ze=ze.children[h(Ge,Y)],ze){Ge+=r;break}return ae}default:return ae}};O.prototype.tryGetHash=function(ae,Y,Ce){return D(ae,Y,Ce,this)};var j=n.tryGet=function(ae,Y,Ce){return D(ae,Ce._config.hash(Y),Y,Ce)};O.prototype.tryGet=function(ae,Y){return j(ae,Y,this)};var G=n.getHash=function(ae,Y,Ce){return D(void 0,ae,Y,Ce)};O.prototype.getHash=function(ae,Y){return G(ae,Y,this)},n.get=function(ae,Y){return D(void 0,Y._config.hash(ae),ae,Y)},O.prototype.get=function(ae,Y){return j(Y,ae,this)};var J=n.has=function(ae,Y,Ce){return D(u,ae,Y,Ce)!==u};O.prototype.hasHash=function(ae,Y){return J(ae,Y,this)};var me=n.has=function(ae,Y){return J(Y._config.hash(ae),ae,Y)};O.prototype.has=function(ae){return me(ae,this)};var fe=function(Y,Ce){return Y===Ce};n.make=function(ae){return new O(0,0,{keyEq:ae&&ae.keyEq||fe,hash:ae&&ae.hash||c},k,0)},n.empty=n.make();var he=n.isEmpty=function(ae){return ae&&!!C(ae._root)};O.prototype.isEmpty=function(){return he(this)};var Te=n.modifyHash=function(ae,Y,Ce,Pe){var ze={value:Pe._size},Ge=Pe._root._modify(Pe._editable?Pe._edit:NaN,Pe._config.keyEq,0,ae,Y,Ce,ze);return Pe.setTree(Ge,ze.value)};O.prototype.modifyHash=function(ae,Y,Ce){return Te(Ce,ae,Y,this)};var Re=n.modify=function(ae,Y,Ce){return Te(ae,Ce._config.hash(Y),Y,Ce)};O.prototype.modify=function(ae,Y){return Re(Y,ae,this)};var Me=n.setHash=function(ae,Y,Ce,Pe){return Te(l(Ce),ae,Y,Pe)};O.prototype.setHash=function(ae,Y,Ce){return Me(ae,Y,Ce,this)};var Ve=n.set=function(ae,Y,Ce){return Me(Ce._config.hash(ae),ae,Y,Ce)};O.prototype.set=function(ae,Y){return Ve(ae,Y,this)};var N=l(u),ue=n.removeHash=function(ae,Y,Ce){return Te(N,ae,Y,Ce)};O.prototype.removeHash=O.prototype.deleteHash=function(ae,Y){return ue(ae,Y,this)};var ne=n.remove=function(ae,Y){return ue(Y._config.hash(ae),ae,Y)};O.prototype.remove=O.prototype.delete=function(ae){return ne(ae,this)};var W=n.beginMutation=function(ae){return new O(ae._editable+1,ae._edit+1,ae._config,ae._root,ae._size)};O.prototype.beginMutation=function(){return W(this)};var U=n.endMutation=function(ae){return ae._editable=ae._editable&&ae._editable-1,ae};O.prototype.endMutation=function(){return U(this)};var Z=n.mutate=function(ae,Y){var Ce=W(Y);return ae(Ce),U(Ce)};O.prototype.mutate=function(ae){return Z(ae,this)};var xe=function(Y){return Y&&ce(Y[0],Y[1],Y[2],Y[3],Y[4])},ce=function(Y,Ce,Pe,ze,Ge){for(;Pe<Y;){var nt=Ce[Pe++];if(nt&&!C(nt))return ie(nt,ze,[Y,Ce,Pe,ze,Ge])}return xe(Ge)},ie=function(Y,Ce,Pe){switch(Y.type){case v:return{value:Ce(Y),rest:Pe};case x:case w:case b:var ze=Y.children;return ce(ze.length,ze,0,Ce,Pe);default:return xe(Pe)}},_e={done:!0};function Oe(ae){this.v=ae}Oe.prototype.next=function(){if(!this.v)return _e;var ae=this.v;return this.v=xe(ae.rest),ae},Oe.prototype[Symbol.iterator]=function(){return this};var Ee=function(Y,Ce){return new Oe(ie(Y._root,Ce))},te=function(Y){return[Y.key,Y.value]},ge=n.entries=function(ae){return Ee(ae,te)};O.prototype.entries=O.prototype[Symbol.iterator]=function(){return ge(this)};var ke=function(Y){return Y.key},Ue=n.keys=function(ae){return Ee(ae,ke)};O.prototype.keys=function(){return Ue(this)};var ot=function(Y){return Y.value},lt=n.values=O.prototype.values=function(ae){return Ee(ae,ot)};O.prototype.values=function(){return lt(this)};var Mt=n.fold=function(ae,Y,Ce){var Pe=Ce._root;if(Pe.type===v)return ae(Y,Pe.value,Pe.key);for(var ze=[Pe.children],Ge=void 0;Ge=ze.pop();)for(var nt=0,Je=Ge.length;nt<Je;){var et=Ge[nt++];et&&et.type&&(et.type===v?Y=ae(Y,et.value,et.key):ze.push(et.children))}return Y};O.prototype.fold=function(ae,Y){return Mt(ae,Y,this)};var ft=n.forEach=function(ae,Y){return Mt(function(Ce,Pe,ze){return ae(Pe,ze,Y)},null,Y)};O.prototype.forEach=function(ae){return ft(ae,this)};var Lr=n.count=function(ae){return ae._size};O.prototype.count=function(){return Lr(this)},Object.defineProperty(O.prototype,"size",{get:O.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class G9{constructor(e){vt(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return d2(this)}toMap(){return new Map(this._map)}}class c2{constructor(e){if(vt(this,"_hamt",j9.empty.beginMutation()),e instanceof c2){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return d2(this)}toMap(){return new Map(this._hamt)}}function d2(t){return on("recoil_hamt_2020")?new c2(t):new G9(t)}var H9={persistentMap:d2},K9=H9.persistentMap,q9=Object.freeze({__proto__:null,persistentMap:K9});function X9(t,...e){const n=new Set;e:for(const r of t){for(const s of e)if(s.has(r))continue e;n.add(r)}return n}var lf=X9;function Y9(t,e){const n=new Map;return t.forEach((r,s)=>{n.set(s,e(r,s))}),n}var iy=Y9;function Z9(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function Q9(t){return{nodeDeps:iy(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:iy(t.nodeToNodeSubscriptions,e=>new Set(e))}}function Fb(t,e,n,r){const{nodeDeps:s,nodeToNodeSubscriptions:o}=n,i=s.get(t);if(i&&r&&i!==r.nodeDeps.get(t))return;s.set(t,e);const a=i==null?e:lf(e,i);for(const u of a)o.has(u)||o.set(u,new Set),Cn(o.get(u)).add(t);if(i){const u=lf(i,e);for(const l of u){if(!o.has(l))return;const c=Cn(o.get(l));c.delete(t),c.size===0&&o.delete(l)}}}function J9(t,e,n,r){var s,o,i,a;const u=n.getState();r===u.currentTree.version||r===((s=u.nextTree)===null||s===void 0?void 0:s.version)||((o=u.previousTree)===null||o===void 0||o.version);const l=n.getGraph(r);if(Fb(t,e,l),r===((i=u.previousTree)===null||i===void 0?void 0:i.version)){const d=n.getGraph(u.currentTree.version);Fb(t,e,d,l)}if(r===((a=u.previousTree)===null||a===void 0?void 0:a.version)||r===u.currentTree.version){var c;const d=(c=u.nextTree)===null||c===void 0?void 0:c.version;if(d!==void 0){const h=n.getGraph(d);Fb(t,e,h,l)}}}var gp={cloneGraph:Q9,graph:Z9,saveDepsToStore:J9};let eK=0;const tK=()=>eK++;let nK=0;const rK=()=>nK++;let sK=0;const oK=()=>sK++;var C1={getNextTreeStateVersion:tK,getNextStoreID:rK,getNextComponentID:oK};const{persistentMap:vN}=q9,{graph:iK}=gp,{getNextTreeStateVersion:SL}=C1;function kL(){const t=SL();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:vN(),nonvalidatedAtoms:vN()}}function aK(){const t=kL();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,iK()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var CL={makeEmptyTreeState:kL,makeEmptyStoreState:aK,getNextTreeStateVersion:SL};class $L{}function lK(){return new $L}var $1={RetentionZone:$L,retentionZone:lK};function uK(t,e){const n=new Set(t);return n.add(e),n}function cK(t,e){const n=new Set(t);return n.delete(e),n}function dK(t,e,n){const r=new Map(t);return r.set(e,n),r}function hK(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function fK(t,e){const n=new Map(t);return n.delete(e),n}function pK(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var IL={setByAddingToSet:uK,setByDeletingFromSet:cK,mapBySettingInMap:dK,mapByUpdatingInMap:hK,mapByDeletingFromMap:fK,mapByDeletingMultipleFromMap:pK};function*mK(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var h2=mK;function gK(t,e){return new Proxy(t,{get:(r,s)=>(!(s in r)&&s in e&&(r[s]=e[s]()),r[s]),ownKeys:r=>Object.keys(r)})}var EL=gK;const{getNode:yp,getNodeMaybe:yK,recoilValuesForKeys:xN}=Ts,{RetentionZone:bN}=$1,{setByAddingToSet:vK}=IL,xK=Object.freeze(new Set);class bK extends Error{}function wK(t,e,n){if(!on("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function s(o){let i=r.get(o);i||r.set(o,i=new Set),i.add(e)}if(n instanceof bN)s(n);else if(Array.isArray(n))for(const o of n)s(o);return()=>{if(!on("recoil_memory_managament_2020"))return;const{retention:o}=t.getState();function i(a){const u=o.nodesRetainedByZone.get(a);u==null||u.delete(e),u&&u.size===0&&o.nodesRetainedByZone.delete(a)}if(n instanceof bN)i(n);else if(Array.isArray(n))for(const a of n)i(a)}}function f2(t,e,n,r){const s=t.getState();if(s.nodeCleanupFunctions.has(n))return;const o=yp(n),i=wK(t,n,o.retainedBy),a=o.init(t,e,r);s.nodeCleanupFunctions.set(n,()=>{a(),i()})}function SK(t,e,n){f2(t,t.getState().currentTree,e,n)}function kK(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function CK(t,e,n){return f2(t,e,n,"get"),yp(n).get(t,e)}function TL(t,e,n){return yp(n).peek(t,e)}function $K(t,e,n){var r;const s=yK(e);return s==null||(r=s.invalidate)===null||r===void 0||r.call(s,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:vK(t.dirtyAtoms,e)}}function IK(t,e,n,r){const s=yp(n);if(s.set==null)throw new bK(`Attempt to set read-only RecoilValue: ${n}`);const o=s.set;return f2(t,e,n,"set"),o(t,e,r)}function EK(t,e,n){const r=t.getState(),s=t.getGraph(e.version),o=yp(n).nodeType;return EL({type:o},{loadable:()=>TL(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>o==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var i;return xN((i=s.nodeDeps.get(n))!==null&&i!==void 0?i:[])},subscribers:()=>{var i,a;return{nodes:xN(h2(_L(t,e,new Set([n])),u=>u!==n)),components:k1((i=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&i!==void 0?i:[],([u])=>({name:u}))}}})}function _L(t,e,n){const r=new Set,s=Array.from(n),o=t.getGraph(e.version);for(let a=s.pop();a;a=s.pop()){var i;r.add(a);const u=(i=o.nodeToNodeSubscriptions.get(a))!==null&&i!==void 0?i:xK;for(const l of u)r.has(l)||s.push(l)}return r}var dl={getNodeLoadable:CK,peekNodeLoadable:TL,setNodeValue:IK,initializeNode:SK,cleanUpNode:kK,setUnvalidatedAtomValue_DEPRECATED:$K,peekNodeInfo:EK,getDownstreamNodes:_L};let NL=null;function TK(t){NL=t}function _K(){var t;(t=NL)===null||t===void 0||t()}var RL={setInvalidateMemoizedSnapshot:TK,invalidateMemoizedSnapshot:_K};const{getDownstreamNodes:NK,getNodeLoadable:AL,setNodeValue:RK}=dl,{getNextComponentID:AK}=C1,{getNode:DK,getNodeMaybe:DL}=Ts,{DefaultValue:p2}=Ts,{reactMode:OK}=mp,{AbstractRecoilValue:PK,RecoilState:LK,RecoilValueReadOnly:FK,isRecoilValue:MK}=ld,{invalidateMemoizedSnapshot:zK}=RL;function BK(t,{key:e},n=t.getState().currentTree){var r,s;const o=t.getState();n.version===o.currentTree.version||n.version===((r=o.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(s=o.previousTree)===null||s===void 0||s.version);const i=AL(t,n,e);return i.state==="loading"&&i.contents.catch(()=>{}),i}function VK(t,e){const n=t.clone();return e.forEach((r,s)=>{r.state==="hasValue"&&r.contents instanceof p2?n.delete(s):n.set(s,r)}),n}function UK(t,e,{key:n},r){if(typeof r=="function"){const s=AL(t,e,n);if(s.state==="loading"){const o=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw St(o)}else if(s.state==="hasError")throw s.contents;return r(s.contents)}else return r}function WK(t,e,n){if(n.type==="set"){const{recoilValue:s,valueOrUpdater:o}=n,i=UK(t,e,s,o),a=RK(t,e,s.key,i);for(const[u,l]of a.entries())US(e,u,l)}else if(n.type==="setLoadable"){const{recoilValue:{key:s},loadable:o}=n;US(e,s,o)}else if(n.type==="markModified"){const{recoilValue:{key:s}}=n;e.dirtyAtoms.add(s)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:s},unvalidatedValue:o}=n,i=DL(s);i==null||(r=i.invalidate)===null||r===void 0||r.call(i,e),e.atomValues.delete(s),e.nonvalidatedAtoms.set(s,o),e.dirtyAtoms.add(s)}else a2(`Unknown action ${n.type}`)}function US(t,e,n){n.state==="hasValue"&&n.contents instanceof p2?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function OL(t,e){t.replaceState(n=>{const r=PL(n);for(const s of e)WK(t,r,s);return LL(t,r),zK(),r})}function I1(t,e){if(uf.length){const n=uf[uf.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else OL(t,[e])}const uf=[];function jK(){const t=new Map;return uf.push(t),()=>{for(const[e,n]of t)OL(e,n);uf.pop()}}function PL(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function LL(t,e){const n=NK(t,e,e.dirtyAtoms);for(const o of n){var r,s;(r=DL(o))===null||r===void 0||(s=r.invalidate)===null||s===void 0||s.call(r,e)}}function FL(t,e,n){I1(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function GK(t,e,n){if(n instanceof p2)return FL(t,e,n);I1(t,{type:"setLoadable",recoilValue:e,loadable:n})}function HK(t,e){I1(t,{type:"markModified",recoilValue:e})}function KK(t,e,n){I1(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function qK(t,{key:e},n,r=null){const s=AK(),o=t.getState();o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),Cn(o.nodeToComponentSubscriptions.get(e)).set(s,[r??"<not captured>",n]);const i=OK();if(i.early&&(i.mode==="LEGACY"||i.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),u=a.nodeToComponentSubscriptions.get(e);u===void 0||!u.has(s)||(u.delete(s),u.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function XK(t,e){var n;const{currentTree:r}=t.getState(),s=DK(e.key);(n=s.clearCache)===null||n===void 0||n.call(s,t,r)}var Ni={RecoilValueReadOnly:FK,AbstractRecoilValue:PK,RecoilState:LK,getRecoilValueAsLoadable:BK,setRecoilValue:FL,setRecoilValueLoadable:GK,markRecoilValueModified:HK,setUnvalidatedRecoilValue:KK,subscribeToRecoilValue:qK,isRecoilValue:MK,applyAtomValueWrites:VK,batchStart:jK,writeLoadableToTreeState:US,invalidateDownstreams:LL,copyTreeState:PL,refreshRecoilValue:XK};function YK(t,e,n){const r=t.entries();let s=r.next();for(;!s.done;){const o=s.value;if(e.call(n,o[1],o[0],t))return!0;s=r.next()}return!1}var ZK=YK;const{cleanUpNode:QK}=dl,{deleteNodeConfigIfPossible:JK,getNode:ML}=Ts,{RetentionZone:zL}=$1,eq=12e4,BL=new Set;function VL(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const s=new Set;for(const i of e)if(i instanceof zL)for(const a of sq(n,i))s.add(a);else s.add(i);const o=tq(t,s);for(const i of o)rq(t,r,i)}function tq(t,e){const n=t.getState(),r=n.currentTree,s=t.getGraph(r.version),o=new Set,i=new Set;return a(e),o;function a(u){const l=new Set,c=nq(t,r,u,o,i);for(const p of c){var d;if(ML(p).retainedBy==="recoilRoot"){i.add(p);continue}if(((d=n.retention.referenceCounts.get(p))!==null&&d!==void 0?d:0)>0){i.add(p);continue}if(UL(p).some(y=>n.retention.referenceCounts.get(y))){i.add(p);continue}const m=s.nodeToNodeSubscriptions.get(p);if(m&&ZK(m,y=>i.has(y))){i.add(p);continue}o.add(p),l.add(p)}const h=new Set;for(const p of l)for(const m of(f=s.nodeDeps.get(p))!==null&&f!==void 0?f:BL){var f;o.has(m)||h.add(m)}h.size&&a(h)}}function nq(t,e,n,r,s){const o=t.getGraph(e.version),i=[],a=new Set;for(;n.size>0;)u(Cn(n.values().next().value));return i;function u(l){if(r.has(l)||s.has(l)){n.delete(l);return}if(a.has(l))return;const c=o.nodeToNodeSubscriptions.get(l);if(c)for(const d of c)u(d);a.add(l),n.delete(l),i.push(l)}}function rq(t,e,n){if(!on("recoil_memory_managament_2020"))return;QK(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const s=UL(n);for(const u of s){var o;(o=r.retention.nodesRetainedByZone.get(u))===null||o===void 0||o.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const i=r.graphsByVersion.get(e.version);if(i){const u=i.nodeDeps.get(n);if(u!==void 0){i.nodeDeps.delete(n);for(const l of u){var a;(a=i.nodeToNodeSubscriptions.get(l))===null||a===void 0||a.delete(n)}}i.nodeToNodeSubscriptions.delete(n)}JK(n)}function sq(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:BL}function UL(t){const e=ML(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof zL?[e]:e}function oq(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):VL(t,new Set([e]))}function iq(t,e,n){var r;if(!on("recoil_memory_managament_2020"))return;const s=t.getState().retention.referenceCounts,o=((r=s.get(e))!==null&&r!==void 0?r:0)+n;o===0?WL(t,e):s.set(e,o)}function WL(t,e){if(!on("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),oq(t,e)}function aq(t){if(!on("recoil_memory_managament_2020"))return;const e=t.getState();VL(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function lq(t){return t===void 0?"recoilRoot":t}var Pu={SUSPENSE_TIMEOUT_MS:eq,updateRetainCount:iq,updateRetainCountToZero:WL,releaseScheduledRetainablesNow:aq,retainedByOptionWithDefault:lq};const{unstable_batchedUpdates:uq}=LP;var cq={unstable_batchedUpdates:uq};const{unstable_batchedUpdates:dq}=cq;var hq={unstable_batchedUpdates:dq};const{batchStart:fq}=Ni,{unstable_batchedUpdates:pq}=hq;let m2=pq||(t=>t());const mq=t=>{m2=t},gq=()=>m2,yq=t=>{m2(()=>{let e=()=>{};try{e=fq(),t()}finally{e()}})};var E1={getBatcher:gq,setBatcher:mq,batchUpdates:yq};function*vq(t){for(const e of t)for(const n of e)yield n}var jL=vq;const GL=typeof Window>"u"||typeof window>"u",xq=t=>!GL&&(t===window||t instanceof Window),bq=typeof navigator<"u"&&navigator.product==="ReactNative";var T1={isSSR:GL,isReactNative:bq,isWindow:xq};function wq(t,e){let n;return(...r)=>{n||(n={});const s=e(...r);return Object.hasOwnProperty.call(n,s)||(n[s]=t(...r)),n[s]}}function Sq(t,e){let n,r;return(...s)=>{const o=e(...s);return n===o||(n=o,r=t(...s)),r}}function kq(t,e){let n,r;return[(...i)=>{const a=e(...i);return n===a||(n=a,r=t(...i)),r},()=>{n=null}]}var Cq={memoizeWithArgsHash:wq,memoizeOneWithArgsHash:Sq,memoizeOneWithArgsHashAndInvalidation:kq};const{batchUpdates:WS}=E1,{initializeNode:$q,peekNodeInfo:Iq}=dl,{graph:Eq}=gp,{getNextStoreID:Tq}=C1,{DEFAULT_VALUE:_q,recoilValues:wN,recoilValuesForKeys:SN}=Ts,{AbstractRecoilValue:Nq,getRecoilValueAsLoadable:Rq,setRecoilValue:kN,setUnvalidatedRecoilValue:Aq}=Ni,{updateRetainCount:m0}=Pu,{setInvalidateMemoizedSnapshot:Dq}=RL,{getNextTreeStateVersion:Oq,makeEmptyStoreState:Pq}=CL,{isSSR:Lq}=T1,{memoizeOneWithArgsHashAndInvalidation:Fq}=Cq;class _1{constructor(e,n){vt(this,"_store",void 0),vt(this,"_refCount",1),vt(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Rq(this._store,r))),vt(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),vt(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const i=this._store.getState().currentTree;return SN(i.dirtyAtoms)}const s=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?wN.values():r.isInitialized===!0?SN(jL([s,o])):h2(wN.values(),({key:i})=>!s.has(i)&&!o.has(i))}),vt(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Iq(this._store,this._store.getState().currentTree,r))),vt(this,"map",r=>{this.checkRefCount_INTERNAL();const s=new jS(this,WS);return r(s),s}),vt(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const s=new jS(this,WS);return s.retain(),await r(s),s.autoRelease_INTERNAL(),s}),this._store={storeID:Tq(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const s=e.graphsByVersion;if(s.has(r))return Cn(s.get(r));const o=Eq();return s.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw St("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)$q(this._store,r,"get"),m0(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){Lq||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!on("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){on("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function HL(t,e,n=!1){const r=t.getState(),s=n?Oq():e.version;return{currentTree:{version:n?s:e.version,stateID:n?s:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(s,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(k1(r.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function Mq(t){const e=new _1(Pq());return t!=null?e.map(t):e}const[CN,KL]=Fq((t,e)=>{var n;const r=t.getState(),s=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Cn(r.previousTree);return new _1(HL(t,s),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});Dq(KL);function zq(t,e="latest"){const n=CN(t,e);return n.isRetained()?n:(KL(),CN(t,e))}class jS extends _1{constructor(e,n){super(HL(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),vt(this,"_batch",void 0),vt(this,"set",(r,s)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{m0(o,r.key,1),kN(this.getStore_INTERNAL(),r,s)})}),vt(this,"reset",r=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{m0(s,r.key,1),kN(this.getStore_INTERNAL(),r,_q)})}),vt(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();WS(()=>{for(const[o,i]of r.entries())m0(s,o,1),Aq(s,new Nq(o),i)})}),this._batch=n}}var N1={Snapshot:_1,MutableSnapshot:jS,freshSnapshot:Mq,cloneSnapshot:zq},Bq=N1.Snapshot,Vq=N1.MutableSnapshot,Uq=N1.freshSnapshot,Wq=N1.cloneSnapshot,R1=Object.freeze({__proto__:null,Snapshot:Bq,MutableSnapshot:Vq,freshSnapshot:Uq,cloneSnapshot:Wq});function jq(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var Gq=jq;const{useRef:Hq}=Lt;function Kq(t){const e=Hq(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var $N=Kq;const{getNextTreeStateVersion:qq,makeEmptyStoreState:qL}=CL,{cleanUpNode:Xq,getDownstreamNodes:Yq,initializeNode:Zq,setNodeValue:Qq,setUnvalidatedAtomValue_DEPRECATED:Jq}=dl,{graph:eX}=gp,{cloneGraph:tX}=gp,{getNextStoreID:XL}=C1,{createMutableSource:Mb,reactMode:YL}=mp,{applyAtomValueWrites:nX}=Ni,{releaseScheduledRetainablesNow:ZL}=Pu,{freshSnapshot:rX}=R1,{useCallback:sX,useContext:QL,useEffect:GS,useMemo:oX,useRef:iX,useState:aX}=Lt;function gh(){throw St("This component must be used inside a <RecoilRoot> component.")}const JL=Object.freeze({storeID:XL(),getState:gh,replaceState:gh,getGraph:gh,subscribeToTransactions:gh,addTransactionMetadata:gh});let HS=!1;function IN(t){if(HS)throw St("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){on("recoil_memory_managament_2020")&&on("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&ZL(t);const n=e.currentTree.version,r=qq();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,tX(Cn(e.graphsByVersion.get(n))))}}const eF=Lt.createContext({current:JL}),A1=()=>QL(eF),tF=Lt.createContext(null);function lX(){return QL(tF)}function g2(t,e,n){const r=Yq(t,n,n.dirtyAtoms);for(const s of r){const o=e.nodeToComponentSubscriptions.get(s);if(o)for(const[i,[a,u]]of o)u(n)}}function nF(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[s,o]of e.nodeTransactionSubscriptions)if(r.has(s))for(const[i,a]of o)a(t);for(const[s,o]of e.transactionSubscriptions)o(t);(!YL().early||e.suspendedComponentResolvers.size>0)&&(g2(t,e,n),e.suspendedComponentResolvers.forEach(s=>s()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(s=>s(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function uX(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,nF(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):a2("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,on("recoil_memory_managament_2020")&&n==null&&ZL(t)}finally{e.commitDepth--}}function cX({setNotifyBatcherOfChange:t}){const e=A1(),[,n]=aX([]);return t(()=>n({})),GS(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),GS(()=>{U9.enqueueExecution("Batcher",()=>{uX(e.current)})}),null}function dX(t,e){const n=qL();return e({set:(r,s)=>{const o=n.currentTree,i=Qq(t,o,r.key,s),a=new Set(i.keys()),u=o.nonvalidatedAtoms.clone();for(const l of a)u.delete(l);n.currentTree={...o,dirtyAtoms:Gq(o.dirtyAtoms,a),atomValues:nX(o.atomValues,i),nonvalidatedAtoms:u}},setUnvalidatedAtomValues:r=>{r.forEach((s,o)=>{n.currentTree=Jq(n.currentTree,o,s)})}}),n}function hX(t){const e=rX(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let EN=0;function fX({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let s;const o=f=>{const p=s.current.graphsByVersion;if(p.has(f))return Cn(p.get(f));const m=eX();return p.set(f,m),m},i=(f,p)=>{if(p==null){const{transactionSubscriptions:m}=d.current.getState(),y=EN++;return m.set(y,f),{release:()=>{m.delete(y)}}}else{const{nodeTransactionSubscriptions:m}=d.current.getState();m.has(p)||m.set(p,new Map);const y=EN++;return Cn(m.get(p)).set(y,f),{release:()=>{const g=m.get(p);g&&(g.delete(y),g.size===0&&m.delete(p))}}}},a=f=>{IN(d.current);for(const p of Object.keys(f))Cn(d.current.getState().nextTree).transactionMetadata[p]=f[p]},u=f=>{IN(d.current);const p=Cn(s.current.nextTree);let m;try{HS=!0,m=f(p)}finally{HS=!1}m!==p&&(s.current.nextTree=m,YL().early&&g2(d.current,s.current,m),Cn(l.current)())},l=iX(null),c=sX(f=>{l.current=f},[l]),d=$N(()=>n??{storeID:XL(),getState:()=>s.current,replaceState:u,getGraph:o,subscribeToTransactions:i,addTransactionMetadata:a});n!=null&&(d.current=n),s=$N(()=>t!=null?dX(d.current,t):e!=null?hX(e):qL());const h=oX(()=>Mb==null?void 0:Mb(s,()=>s.current.currentTree.version),[s]);return GS(()=>{const f=d.current;for(const p of new Set(f.getState().knownAtoms))Zq(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)Xq(f,p)}},[d]),Lt.createElement(eF.Provider,{value:d},Lt.createElement(tF.Provider,{value:h},Lt.createElement(cX,{setNotifyBatcherOfChange:c}),r))}function pX(t){const{override:e,...n}=t,r=A1();return e===!1&&r.current!==JL?t.children:Lt.createElement(fX,n)}function mX(){return A1().current.storeID}var da={RecoilRoot:pX,useStoreRef:A1,useRecoilMutableSource:lX,useRecoilStoreID:mX,notifyComponents_FOR_TESTING:g2,sendEndOfBatchNotifications_FOR_TESTING:nF};function gX(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var yX=gX;const{useEffect:vX,useRef:xX}=Lt;function bX(t){const e=xX();return vX(()=>{e.current=t}),e.current}var rF=bX;const{useStoreRef:wX}=da,{SUSPENSE_TIMEOUT_MS:SX}=Pu,{updateRetainCount:yh}=Pu,{RetentionZone:kX}=$1,{useEffect:CX,useRef:$X}=Lt,{isSSR:TN}=T1;function IX(t){if(on("recoil_memory_managament_2020"))return EX(t)}function EX(t){const n=(Array.isArray(t)?t:[t]).map(i=>i instanceof kX?i:i.key),r=wX();CX(()=>{if(!on("recoil_memory_managament_2020"))return;const i=r.current;if(s.current&&!TN)window.clearTimeout(s.current),s.current=null;else for(const a of n)yh(i,a,1);return()=>{for(const a of n)yh(i,a,-1)}},[r,...n]);const s=$X(),o=rF(n);if(!TN&&(o===void 0||!yX(o,n))){const i=r.current;for(const a of n)yh(i,a,1);if(o)for(const a of o)yh(i,a,-1);s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{s.current=null;for(const a of n)yh(i,a,-1)},SX)}}var y2=IX;function TX(){return"<component name not available>"}var vp=TX;const{batchUpdates:_X}=E1,{DEFAULT_VALUE:sF}=Ts,{currentRendererSupportsUseSyncExternalStore:NX,reactMode:Od,useMutableSource:RX,useSyncExternalStore:AX}=mp,{useRecoilMutableSource:DX,useStoreRef:Ri}=da,{AbstractRecoilValue:KS,getRecoilValueAsLoadable:xp,setRecoilValue:ay,setUnvalidatedRecoilValue:OX,subscribeToRecoilValue:ud}=Ni,{useCallback:Ss,useEffect:cd,useMemo:oF,useRef:cf,useState:v2}=Lt,{setByAddingToSet:PX}=IL,{isSSR:LX}=T1;function x2(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(s=>{const o=n.current.getState().suspendedComponentResolvers;o.add(s),LX&&gn(t.contents)&&t.contents.finally(()=>{o.delete(s)})}):t.state==="hasError"?t.contents:St(`Invalid value of loadable atom "${e.key}"`)}function FX(){const t=vp(),e=Ri(),[,n]=v2([]),r=cf(new Set);r.current=new Set;const s=cf(new Set),o=cf(new Map),i=Ss(u=>{const l=o.current.get(u);l&&(l.release(),o.current.delete(u))},[o]),a=Ss((u,l)=>{o.current.has(l)&&n([])},[]);return cd(()=>{const u=e.current;lf(r.current,s.current).forEach(l=>{if(o.current.has(l))return;const c=ud(u,new KS(l),h=>a(h,l),t);o.current.set(l,c),u.getState().nextTree?u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(u.getState(),l)}):a(u.getState(),l)}),lf(s.current,r.current).forEach(l=>{i(l)}),s.current=r.current}),cd(()=>{const u=o.current;return lf(r.current,new Set(u.keys())).forEach(l=>{const c=ud(e.current,new KS(l),d=>a(d,l),t);u.set(l,c)}),()=>u.forEach((l,c)=>i(c))},[t,e,i,a]),oF(()=>{function u(p){return m=>{ay(e.current,p,m)}}function l(p){return()=>ay(e.current,p,sF)}function c(p){var m;r.current.has(p.key)||(r.current=PX(r.current,p.key));const y=e.current.getState();return xp(e.current,p,Od().early&&(m=y.nextTree)!==null&&m!==void 0?m:y.currentTree)}function d(p){const m=c(p);return x2(m,p,e)}function h(p){return[d(p),u(p)]}function f(p){return[c(p),u(p)]}return{getRecoilValue:d,getRecoilValueLoadable:c,getRecoilState:h,getRecoilStateLoadable:f,getSetRecoilState:u,getResetRecoilState:l}},[r,e])}const MX={current:0};function zX(t){const e=Ri(),n=vp(),r=Ss(()=>{var a;const u=e.current,l=u.getState(),c=Od().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return{loadable:xp(u,t,c),key:t.key}},[e,t]),s=Ss(a=>{let u;return()=>{var l,c;const d=a();return(l=u)!==null&&l!==void 0&&l.loadable.is(d.loadable)&&((c=u)===null||c===void 0?void 0:c.key)===d.key?u:(u=d,d)}},[]),o=oF(()=>s(r),[r,s]),i=Ss(a=>{const u=e.current;return ud(u,t,a,n).release},[e,t,n]);return AX(i,o,o).loadable}function BX(t){const e=Ri(),n=Ss(()=>{var l;const c=e.current,d=c.getState(),h=Od().early&&(l=d.nextTree)!==null&&l!==void 0?l:d.currentTree;return xp(c,t,h)},[e,t]),r=Ss(()=>n(),[n]),s=vp(),o=Ss((l,c)=>{const d=e.current;return ud(d,t,()=>{if(!on("recoil_suppress_rerender_in_callback"))return c();const f=n();u.current.is(f)||c(),u.current=f},s).release},[e,t,s,n]),i=DX();if(i==null)throw St("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=RX(i,r,o),u=cf(a);return cd(()=>{u.current=a}),a}function qS(t){const e=Ri(),n=vp(),r=Ss(()=>{var u;const l=e.current,c=l.getState(),d=Od().early&&(u=c.nextTree)!==null&&u!==void 0?u:c.currentTree;return xp(l,t,d)},[e,t]),s=Ss(()=>({loadable:r(),key:t.key}),[r,t.key]),o=Ss(u=>{const l=s();return u.loadable.is(l.loadable)&&u.key===l.key?u:l},[s]);cd(()=>{const u=ud(e.current,t,l=>{a(o)},n);return a(o),u.release},[n,t,e,o]);const[i,a]=v2(s);return i.key!==t.key?s().loadable:i.loadable}function VX(t){const e=Ri(),[,n]=v2([]),r=vp(),s=Ss(()=>{var a;const u=e.current,l=u.getState(),c=Od().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return xp(u,t,c)},[e,t]),o=s(),i=cf(o);return cd(()=>{i.current=o}),cd(()=>{const a=e.current,u=a.getState(),l=ud(a,t,d=>{var h;if(!on("recoil_suppress_rerender_in_callback"))return n([]);const f=s();(h=i.current)!==null&&h!==void 0&&h.is(f)||n(f),i.current=f},r);if(u.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{i.current=null,n([])});else{var c;if(!on("recoil_suppress_rerender_in_callback"))return n([]);const d=s();(c=i.current)!==null&&c!==void 0&&c.is(d)||n(d),i.current=d}return l.release},[r,s,t,e]),o}function b2(t){return on("recoil_memory_managament_2020")&&y2(t),{TRANSITION_SUPPORT:qS,SYNC_EXTERNAL_STORE:NX()?zX:qS,MUTABLE_SOURCE:BX,LEGACY:VX}[Od().mode](t)}function iF(t){const e=Ri(),n=b2(t);return x2(n,t,e)}function D1(t){const e=Ri();return Ss(n=>{ay(e.current,t,n)},[e,t])}function UX(t){const e=Ri();return Ss(()=>{ay(e.current,t,sF)},[e,t])}function WX(t){return[iF(t),D1(t)]}function jX(t){return[b2(t),D1(t)]}function GX(){const t=Ri();return(e,n={})=>{_X(()=>{t.current.addTransactionMetadata(n),e.forEach((r,s)=>OX(t.current,new KS(s),r))})}}function aF(t){return on("recoil_memory_managament_2020")&&y2(t),qS(t)}function lF(t){const e=Ri(),n=aF(t);return x2(n,t,e)}function HX(t){return[lF(t),D1(t)]}var KX={recoilComponentGetRecoilValueCount_FOR_TESTING:MX,useRecoilInterface:FX,useRecoilState:WX,useRecoilStateLoadable:jX,useRecoilValue:iF,useRecoilValueLoadable:b2,useResetRecoilState:UX,useSetRecoilState:D1,useSetUnvalidatedAtomValues:GX,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:aF,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:lF,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:HX};function qX(t,e){const n=new Map;for(const[r,s]of t)e(s,r)&&n.set(r,s);return n}var XX=qX;function YX(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var ZX=YX;function QX(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let s;for(;!(s=r.next()).done;)e.set(s.value,t[n].get(s.value))}return e}var JX=QX;const{batchUpdates:eY}=E1,{DEFAULT_VALUE:tY,getNode:uF,nodes:nY}=Ts,{useStoreRef:w2}=da,{AbstractRecoilValue:rY,setRecoilValueLoadable:sY}=Ni,{SUSPENSE_TIMEOUT_MS:oY}=Pu,{cloneSnapshot:ly}=R1,{useCallback:O1,useEffect:cF,useRef:_N,useState:iY}=Lt,{isSSR:NN}=T1;function P1(t){const e=w2();cF(()=>e.current.subscribeToTransactions(t).release,[t,e])}function RN(t){const e=t.atomValues.toMap(),n=iy(XX(e,(r,s)=>{const i=uF(s).persistence_UNSTABLE;return i!=null&&i.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return JX(t.nonvalidatedAtoms.toMap(),n)}function aY(t){P1(O1(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const s=RN(r),o=RN(n),i=iy(nY,u=>{var l,c,d,h;return{persistence_UNSTABLE:{type:(l=(c=u.persistence_UNSTABLE)===null||c===void 0?void 0:c.type)!==null&&l!==void 0?l:"none",backButton:(d=(h=u.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&d!==void 0?d:!1}}}),a=ZX(r.dirtyAtoms,u=>s.has(u)||o.has(u));t({atomValues:s,previousAtomValues:o,atomInfo:i,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function lY(t){P1(O1(e=>{const n=ly(e,"latest"),r=ly(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function uY(){const t=w2(),[e,n]=iY(()=>ly(t.current)),r=rF(e),s=_N(),o=_N();if(P1(O1(a=>n(ly(a)),[])),cF(()=>{const a=e.retain();if(s.current&&!NN){var u;window.clearTimeout(s.current),s.current=null,(u=o.current)===null||u===void 0||u.call(o),o.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!NN){if(s.current){var i;window.clearTimeout(s.current),s.current=null,(i=o.current)===null||i===void 0||i.call(o),o.current=null}o.current=e.retain(),s.current=window.setTimeout(()=>{var a;s.current=null,(a=o.current)===null||a===void 0||a.call(o),o.current=null},oY)}return e}function dF(t,e){var n;const r=t.getState(),s=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,o=e.getStore_INTERNAL().getState().currentTree;eY(()=>{const i=new Set;for(const l of[s.atomValues.keys(),o.atomValues.keys()])for(const c of l){var a,u;((a=s.atomValues.get(c))===null||a===void 0?void 0:a.contents)!==((u=o.atomValues.get(c))===null||u===void 0?void 0:u.contents)&&uF(c).shouldRestoreFromSnapshots&&i.add(c)}i.forEach(l=>{sY(t,new rY(l),o.atomValues.has(l)?Cn(o.atomValues.get(l)):tY)}),t.replaceState(l=>({...l,stateID:e.getID()}))})}function cY(){const t=w2();return O1(e=>dF(t.current,e),[t])}var hF={useRecoilSnapshot:uY,gotoSnapshot:dF,useGotoRecoilSnapshot:cY,useRecoilTransactionObserver:lY,useTransactionObservation_DEPRECATED:aY,useTransactionSubscription_DEPRECATED:P1};const{peekNodeInfo:dY}=dl,{useStoreRef:hY}=da;function fY(){const t=hY();return({key:e})=>dY(t.current,t.current.getState().currentTree,e)}var pY=fY;const{reactMode:mY}=mp,{RecoilRoot:gY,useStoreRef:yY}=da,{useMemo:vY}=Lt;function xY(){mY().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=yY().current;return vY(()=>{function e({children:n}){return Lt.createElement(gY,{store_INTERNAL:t},n)}return e},[t])}var bY=xY;const{loadableWithValue:wY}=pp,{initializeNode:SY}=dl,{DEFAULT_VALUE:kY,getNode:CY}=Ts,{copyTreeState:$Y,getRecoilValueAsLoadable:IY,invalidateDownstreams:EY,writeLoadableToTreeState:TY}=Ni;function AN(t){return CY(t.key).nodeType==="atom"}class _Y{constructor(e,n){vt(this,"_store",void 0),vt(this,"_treeState",void 0),vt(this,"_changes",void 0),vt(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!AN(r))throw St("Reading selectors within atomicUpdate is not supported");const s=IY(this._store,r,this._treeState);if(s.state==="hasValue")return s.contents;throw s.state==="hasError"?s.contents:St(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),vt(this,"set",(r,s)=>{if(!AN(r))throw St("Setting selectors within atomicUpdate is not supported");if(typeof s=="function"){const o=this.get(r);this._changes.set(r.key,s(o))}else SY(this._store,r.key,"set"),this._changes.set(r.key,s)}),vt(this,"reset",r=>{this.set(r,kY)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=$Y(this._treeState);for(const[n,r]of this._changes)TY(e,n,wY(r));return EY(this._store,e),e}}function NY(t){return e=>{t.replaceState(n=>{const r=new _Y(t,n);return e(r),r.newTreeState_INTERNAL()})}}var RY={atomicUpdater:NY},AY=RY.atomicUpdater,fF=Object.freeze({__proto__:null,atomicUpdater:AY});function DY(t,e){if(!t)throw new Error(e)}var OY=DY,zh=OY;const{atomicUpdater:PY}=fF,{batchUpdates:LY}=E1,{DEFAULT_VALUE:FY}=Ts,{useStoreRef:MY}=da,{refreshRecoilValue:zY,setRecoilValue:DN}=Ni,{cloneSnapshot:BY}=R1,{gotoSnapshot:VY}=hF,{useCallback:UY}=Lt;class pF{}const WY=new pF;function mF(t,e,n,r){let s=WY,o;if(LY(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw St(a);const u=EL({...r??{},set:(c,d)=>DN(t,c,d),reset:c=>DN(t,c,FY),refresh:c=>zY(t,c),gotoSnapshot:c=>VY(t,c),transact_UNSTABLE:c=>PY(t)(c)},{snapshot:()=>{const c=BY(t);return o=c.retain(),c}}),l=e(u);if(typeof l!="function")throw St(a);s=l(...n)}),s instanceof pF&&zh(!1),gn(s))s=s.finally(()=>{var a;(a=o)===null||a===void 0||a()});else{var i;(i=o)===null||i===void 0||i()}return s}function jY(t,e){const n=MY();return UY((...r)=>mF(n.current,t,r),e!=null?[...e,n]:void 0)}var gF={recoilCallback:mF,useRecoilCallback:jY};const{useStoreRef:GY}=da,{refreshRecoilValue:HY}=Ni,{useCallback:KY}=Lt;function qY(t){const e=GY();return KY(()=>{const n=e.current;HY(n,t)},[t,e])}var XY=qY;const{atomicUpdater:YY}=fF,{useStoreRef:ZY}=da,{useMemo:QY}=Lt;function JY(t,e){const n=ZY();return QY(()=>(...r)=>{YY(n.current)(o=>{t(o)(...r)})},e!=null?[...e,n]:void 0)}var eZ=JY;class tZ{constructor(e){vt(this,"value",void 0),this.value=e}}var nZ={WrappedValue:tZ},rZ=nZ.WrappedValue,yF=Object.freeze({__proto__:null,WrappedValue:rZ});const{isFastRefreshEnabled:sZ}=mp;class ON extends Error{}class oZ{constructor(e){var n,r,s;vt(this,"_name",void 0),vt(this,"_numLeafs",void 0),vt(this,"_root",void 0),vt(this,"_onHit",void 0),vt(this,"_onSet",void 0),vt(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(s=e==null?void 0:e.mapNodeValue)!==null&&s!==void 0?s:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const s=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(s)}}set(e,n,r){const s=()=>{var o,i,a,u;let l,c;for(const[y,g]of e){var d,h,f;const v=this._root;if((v==null?void 0:v.type)==="leaf")throw this.invalidCacheError();const x=l;if(l=x?x.branches.get(c):v,l=(d=l)!==null&&d!==void 0?d:{type:"branch",nodeKey:y,parent:x,branches:new Map,branchKey:c},l.type!=="branch"||l.nodeKey!==y)throw this.invalidCacheError();x==null||x.branches.set(c,l),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,l),c=this._mapNodeValue(g),this._root=(f=this._root)!==null&&f!==void 0?f:l}const p=l?(o=l)===null||o===void 0?void 0:o.branches.get(c):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==c))throw this.invalidCacheError();const m={type:"leaf",value:n,parent:l,branchKey:c};(i=l)===null||i===void 0||i.branches.set(c,m),this._root=(a=this._root)!==null&&a!==void 0?a:m,this._numLeafs++,this._onSet(m),r==null||(u=r.onNodeVisit)===null||u===void 0||u.call(r,m)};try{s()}catch(o){if(o instanceof ON)this.clear(),s();else throw o}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,s=e.branchKey;for(;r;){var o;if(r.branches.delete(s),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;s=(o=r)===null||o===void 0?void 0:o.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=sZ()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw a2(e+(this._name!=null?` - ${this._name}`:"")),new ON}}var iZ={TreeCache:oZ},aZ=iZ.TreeCache,vF=Object.freeze({__proto__:null,TreeCache:aZ});class lZ{constructor(e){var n;vt(this,"_maxSize",void 0),vt(this,"_size",void 0),vt(this,"_head",void 0),vt(this,"_tail",void 0),vt(this,"_map",void 0),vt(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const o=this.head(),i={key:e,right:o,left:null,value:n};o?o.left=i:this._tail=i,this._map.set(r,i),this._head=i,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Cn(this._map.get(n)),s=r.right,o=r.left;s&&(s.left=r.left),o&&(o.right=r.right),r===this.head()&&(this._head=s),r===this.tail()&&(this._tail=o),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var uZ={LRUCache:lZ},cZ=uZ.LRUCache,xF=Object.freeze({__proto__:null,LRUCache:cZ});const{LRUCache:dZ}=xF,{TreeCache:hZ}=vF;function fZ({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new dZ({maxSize:e}),s=new hZ({name:t,mapNodeValue:n,onHit:o=>{r.set(o,!0)},onSet:o=>{const i=r.tail();r.set(o,!0),i&&s.size()>e&&s.delete(i.key)}});return s}var PN=fZ;function Ro(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw St("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(gn(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((s,o)=>Ro(s,e,o.toString()))}]`;if(typeof t.toJSON=="function")return Ro(t.toJSON(n),e,n);if(t instanceof Map){const s={};for(const[o,i]of t)s[typeof o=="string"?o:Ro(o,e)]=i;return Ro(s,e,n)}return t instanceof Set?Ro(Array.from(t).sort((s,o)=>Ro(s,e).localeCompare(Ro(o,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Ro(Array.from(t),e,n):`{${Object.keys(t).filter(s=>t[s]!==void 0).sort().map(s=>`${Ro(s,e)}:${Ro(t[s],e,s)}`).join(",")}}`}function pZ(t,e={allowFunctions:!1}){return Ro(t,e)}var L1=pZ;const{TreeCache:mZ}=vF,kg={equality:"reference",eviction:"keep-all",maxSize:1/0};function gZ({equality:t=kg.equality,eviction:e=kg.eviction,maxSize:n=kg.maxSize}=kg,r){const s=yZ(t);return vZ(e,n,s,r)}function yZ(t){switch(t){case"reference":return e=>e;case"value":return e=>L1(e)}throw St(`Unrecognized equality policy ${t}`)}function vZ(t,e,n,r){switch(t){case"keep-all":return new mZ({name:r,mapNodeValue:n});case"lru":return PN({name:r,maxSize:Cn(e),mapNodeValue:n});case"most-recent":return PN({name:r,maxSize:1,mapNodeValue:n})}throw St(`Unrecognized eviction policy ${t}`)}var xZ=gZ;function bZ(t){return()=>null}var wZ={startPerfBlock:bZ};const{isLoadable:SZ,loadableWithError:Cg,loadableWithPromise:kZ,loadableWithValue:zb}=pp,{WrappedValue:bF}=yF,{getNodeLoadable:$g,peekNodeLoadable:CZ,setNodeValue:$Z}=dl,{saveDepsToStore:IZ}=gp,{DEFAULT_VALUE:EZ,getConfigDeletionHandler:TZ,getNode:_Z,registerNode:LN}=Ts,{isRecoilValue:NZ}=ld,{markRecoilValueModified:FN}=Ni,{retainedByOptionWithDefault:RZ}=Pu,{recoilCallback:AZ}=gF,{startPerfBlock:DZ}=wZ;class wF{}const vh=new wF,xh=[],Ig=new Map,OZ=(()=>{let t=0;return()=>t++})();function SF(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:s}=t,o=t.set!=null?t.set:void 0,i=new Set,a=xZ(s??{equality:"reference",eviction:"keep-all"},n),u=RZ(t.retainedBy_UNSTABLE),l=new Map;let c=0;function d(){return!on("recoil_memory_managament_2020")||c>0}function h(O){return O.getState().knownSelectors.add(n),c++,()=>{c--}}function f(){return TZ(n)!==void 0&&!d()}function p(O,D,j,G,J){L(D,G,J),m(O,j)}function m(O,D){I(O,D)&&P(O),g(D,!0)}function y(O,D){I(O,D)&&(Cn(S(O)).stateVersions.clear(),g(D,!1))}function g(O,D){const j=Ig.get(O);if(j!=null){for(const G of j)FN(G,Cn(e));D&&Ig.delete(O)}}function v(O,D){let j=Ig.get(D);j==null&&Ig.set(D,j=new Set),j.add(O)}function x(O,D,j,G,J,me){return D.then(fe=>{if(!d())throw P(O),vh;const he=zb(fe);return p(O,j,J,he,G),fe}).catch(fe=>{if(!d())throw P(O),vh;if(gn(fe))return b(O,fe,j,G,J,me);const he=Cg(fe);throw p(O,j,J,he,G),fe})}function b(O,D,j,G,J,me){return D.then(fe=>{if(!d())throw P(O),vh;me.loadingDepKey!=null&&me.loadingDepPromise===D?j.atomValues.set(me.loadingDepKey,zb(fe)):O.getState().knownSelectors.forEach(Me=>{j.atomValues.delete(Me)});const he=C(O,j);if(he&&he.state!=="loading"){if((I(O,J)||S(O)==null)&&m(O,J),he.state==="hasValue")return he.contents;throw he.contents}if(!I(O,J)){const Me=E(O,j);if(Me!=null)return Me.loadingLoadable.contents}const[Te,Re]=k(O,j,J);if(Te.state!=="loading"&&p(O,j,J,Te,Re),Te.state==="hasError")throw Te.contents;return Te.contents}).catch(fe=>{if(fe instanceof wF)throw vh;if(!d())throw P(O),vh;const he=Cg(fe);throw p(O,j,J,he,G),fe})}function w(O,D,j,G){var J,me,fe,he;if(I(O,G)||D.version===((J=O.getState())===null||J===void 0||(me=J.currentTree)===null||me===void 0?void 0:me.version)||D.version===((fe=O.getState())===null||fe===void 0||(he=fe.nextTree)===null||he===void 0?void 0:he.version)){var Te,Re,Me;IZ(n,j,O,(Te=(Re=O.getState())===null||Re===void 0||(Me=Re.nextTree)===null||Me===void 0?void 0:Me.version)!==null&&Te!==void 0?Te:O.getState().currentTree.version)}for(const Ve of j)i.add(Ve)}function k(O,D,j){const G=DZ(n);let J=!0,me=!0;const fe=()=>{G(),me=!1};let he,Te=!1,Re;const Me={loadingDepKey:null,loadingDepPromise:null},Ve=new Map;function N({key:ne}){const W=$g(O,D,ne);switch(Ve.set(ne,W),J||(w(O,D,new Set(Ve.keys()),j),y(O,j)),W.state){case"hasValue":return W.contents;case"hasError":throw W.contents;case"loading":throw Me.loadingDepKey=ne,Me.loadingDepPromise=W.contents,W.contents}throw St("Invalid Loadable state")}const ue=ne=>(...W)=>{if(me)throw St("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&zh(!1),AZ(O,ne,W,{node:e})};try{he=r({get:N,getCallback:ue}),he=NZ(he)?N(he):he,SZ(he)&&(he.state==="hasError"&&(Te=!0),he=he.contents),gn(he)?he=x(O,he,D,Ve,j,Me).finally(fe):fe(),he=he instanceof bF?he.value:he}catch(ne){he=ne,gn(he)?he=b(O,he,D,Ve,j,Me).finally(fe):(Te=!0,fe())}return Te?Re=Cg(he):gn(he)?Re=kZ(he):Re=zb(he),J=!1,T(O,j,Ve),w(O,D,new Set(Ve.keys()),j),[Re,Ve]}function C(O,D){let j=D.atomValues.get(n);if(j!=null)return j;const G=new Set;try{j=a.get(me=>(typeof me!="string"&&zh(!1),$g(O,D,me).contents),{onNodeVisit:me=>{me.type==="branch"&&me.nodeKey!==n&&G.add(me.nodeKey)}})}catch(me){throw St(`Problem with cache lookup for selector "${n}": ${me.message}`)}if(j){var J;D.atomValues.set(n,j),w(O,D,G,(J=S(O))===null||J===void 0?void 0:J.executionID)}return j}function $(O,D){const j=C(O,D);if(j!=null)return P(O),j;const G=E(O,D);if(G!=null){var J;return((J=G.loadingLoadable)===null||J===void 0?void 0:J.state)==="loading"&&v(O,G.executionID),G.loadingLoadable}const me=OZ(),[fe,he]=k(O,D,me);return fe.state==="loading"?(R(O,me,fe,he,D),v(O,me)):(P(O),L(D,fe,he)),fe}function E(O,D){const j=jL([l.has(O)?[Cn(l.get(O))]:[],k1(h2(l,([J])=>J!==O),([,J])=>J)]);function G(J){for(const[me,fe]of J)if(!$g(O,D,me).is(fe))return!0;return!1}for(const J of j){if(J.stateVersions.get(D.version)||!G(J.depValuesDiscoveredSoFarDuringAsyncWork))return J.stateVersions.set(D.version,!0),J;J.stateVersions.set(D.version,!1)}}function S(O){return l.get(O)}function R(O,D,j,G,J){l.set(O,{depValuesDiscoveredSoFarDuringAsyncWork:G,executionID:D,loadingLoadable:j,stateVersions:new Map([[J.version,!0]])})}function T(O,D,j){if(I(O,D)){const G=S(O);G!=null&&(G.depValuesDiscoveredSoFarDuringAsyncWork=j)}}function P(O){l.delete(O)}function I(O,D){var j;return D===((j=S(O))===null||j===void 0?void 0:j.executionID)}function A(O){return Array.from(O.entries()).map(([D,j])=>[D,j.contents])}function L(O,D,j){O.atomValues.set(n,D);try{a.set(A(j),D)}catch(G){throw St(`Problem with setting cache for selector "${n}": ${G.message}`)}}function V(O){if(xh.includes(n)){const D=`Recoil selector has circular dependencies: ${xh.slice(xh.indexOf(n)).join(" → ")}`;return Cg(St(D))}xh.push(n);try{return O()}finally{xh.pop()}}function z(O,D){const j=D.atomValues.get(n);return j??a.get(G=>{var J;return typeof G!="string"&&zh(!1),(J=CZ(O,D,G))===null||J===void 0?void 0:J.contents})}function M(O,D){return V(()=>$(O,D))}function _(O){O.atomValues.delete(n)}function F(O,D){e==null&&zh(!1);for(const G of i){var j;const J=_Z(G);(j=J.clearCache)===null||j===void 0||j.call(J,O,D)}i.clear(),_(D),a.clear(),FN(O,e)}return o!=null?e=LN({key:n,nodeType:"selector",peek:z,get:M,set:(D,j,G)=>{let J=!1;const me=new Map;function fe({key:Me}){if(J)throw St("Recoil: Async selector sets are not currently supported.");const Ve=$g(D,j,Me);if(Ve.state==="hasValue")return Ve.contents;if(Ve.state==="loading"){const N=`Getting value of asynchronous atom or selector "${Me}" in a pending state while setting selector "${n}" is not yet supported.`;throw St(N)}else throw Ve.contents}function he(Me,Ve){if(J)throw St("Recoil: Async selector sets are not currently supported.");const N=typeof Ve=="function"?Ve(fe(Me)):Ve;$Z(D,j,Me.key,N).forEach((ne,W)=>me.set(W,ne))}function Te(Me){he(Me,EZ)}const Re=o({set:he,get:fe,reset:Te},G);if(Re!==void 0)throw gn(Re)?St("Recoil: Async selector sets are not currently supported."):St("Recoil: selector set should be a void function.");return J=!0,me},init:h,invalidate:_,clearCache:F,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u}):e=LN({key:n,nodeType:"selector",peek:z,get:M,init:h,invalidate:_,clearCache:F,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u})}SF.value=t=>new bF(t);var dd=SF;const{isLoadable:PZ,loadableWithError:Bb,loadableWithPromise:Vb,loadableWithValue:tc}=pp,{WrappedValue:kF}=yF,{peekNodeInfo:LZ}=dl,{DEFAULT_VALUE:zl,DefaultValue:Ea,getConfigDeletionHandler:CF,registerNode:FZ,setConfigDeletionHandler:MZ}=Ts,{isRecoilValue:zZ}=ld,{getRecoilValueAsLoadable:BZ,markRecoilValueModified:VZ,setRecoilValue:MN,setRecoilValueLoadable:UZ}=Ni,{retainedByOptionWithDefault:WZ}=Pu,bh=t=>t instanceof kF?t.value:t;function jZ(t){const{key:e,persistence_UNSTABLE:n}=t,r=WZ(t.retainedBy_UNSTABLE);let s=0;function o(v){return Vb(v.then(x=>(i=tc(x),x)).catch(x=>{throw i=Bb(x),x}))}let i=gn(t.default)?o(t.default):PZ(t.default)?t.default.state==="loading"?o(t.default.contents):t.default:tc(bh(t.default));i.contents;let a;const u=new Map;function l(v){return v}function c(v,x){const b=x.then(w=>{var k,C;return((C=((k=v.getState().nextTree)!==null&&k!==void 0?k:v.getState().currentTree).atomValues.get(e))===null||C===void 0?void 0:C.contents)===b&&MN(v,g,w),w}).catch(w=>{var k,C;throw((C=((k=v.getState().nextTree)!==null&&k!==void 0?k:v.getState().currentTree).atomValues.get(e))===null||C===void 0?void 0:C.contents)===b&&UZ(v,g,Bb(w)),w});return b}function d(v,x,b){var w;s++;const k=()=>{var S;s--,(S=u.get(v))===null||S===void 0||S.forEach(R=>R()),u.delete(v)};if(v.getState().knownAtoms.add(e),i.state==="loading"){const S=()=>{var R;((R=v.getState().nextTree)!==null&&R!==void 0?R:v.getState().currentTree).atomValues.has(e)||VZ(v,g)};i.contents.finally(S)}const C=(w=t.effects)!==null&&w!==void 0?w:t.effects_UNSTABLE;if(C!=null){let I=function(_){if(R&&_.key===e){const F=S;return F instanceof Ea?h(v,x):gn(F)?Vb(F.then(O=>O instanceof Ea?i.toPromise():O)):tc(F)}return BZ(v,_)},A=function(_){return I(_).toPromise()},L=function(_){var F;const O=LZ(v,(F=v.getState().nextTree)!==null&&F!==void 0?F:v.getState().currentTree,_.key);return R&&_.key===e&&!(S instanceof Ea)?{...O,isSet:!0,loadable:I(_)}:O},S=zl,R=!0,T=!1,P=null;const V=_=>F=>{if(R){const O=I(g),D=O.state==="hasValue"?O.contents:zl;S=typeof F=="function"?F(D):F,gn(S)&&(S=S.then(j=>(P={effect:_,value:j},j)))}else{if(gn(F))throw St("Setting atoms to async values is not implemented.");typeof F!="function"&&(P={effect:_,value:bh(F)}),MN(v,g,typeof F=="function"?O=>{const D=bh(F(O));return P={effect:_,value:D},D}:bh(F))}},z=_=>()=>V(_)(zl),M=_=>F=>{var O;const{release:D}=v.subscribeToTransactions(j=>{var G;let{currentTree:J,previousTree:me}=j.getState();me||(me=J);const fe=(G=J.atomValues.get(e))!==null&&G!==void 0?G:i;if(fe.state==="hasValue"){var he,Te,Re,Me;const Ve=fe.contents,N=(he=me.atomValues.get(e))!==null&&he!==void 0?he:i,ue=N.state==="hasValue"?N.contents:zl;((Te=P)===null||Te===void 0?void 0:Te.effect)!==_||((Re=P)===null||Re===void 0?void 0:Re.value)!==Ve?F(Ve,ue,!J.atomValues.has(e)):((Me=P)===null||Me===void 0?void 0:Me.effect)===_&&(P=null)}},e);u.set(v,[...(O=u.get(v))!==null&&O!==void 0?O:[],D])};for(const _ of C)try{const F=_({node:g,storeID:v.storeID,parentStoreID_UNSTABLE:v.parentStoreID,trigger:b,setSelf:V(_),resetSelf:z(_),onSet:M(_),getPromise:A,getLoadable:I,getInfo_UNSTABLE:L});if(F!=null){var $;u.set(v,[...($=u.get(v))!==null&&$!==void 0?$:[],F])}}catch(F){S=F,T=!0}if(R=!1,!(S instanceof Ea)){var E;const _=T?Bb(S):gn(S)?Vb(c(v,S)):tc(bh(S));_.contents,x.atomValues.set(e,_),(E=v.getState().nextTree)===null||E===void 0||E.atomValues.set(e,_)}}return k}function h(v,x){var b,w;return(b=(w=x.atomValues.get(e))!==null&&w!==void 0?w:a)!==null&&b!==void 0?b:i}function f(v,x){if(x.atomValues.has(e))return Cn(x.atomValues.get(e));if(x.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return i;const b=x.nonvalidatedAtoms.get(e),w=n.validator(b,zl);return a=w instanceof Ea?i:tc(w),a}else return i}function p(){a=void 0}function m(v,x,b){if(x.atomValues.has(e)){const w=Cn(x.atomValues.get(e));if(w.state==="hasValue"&&b===w.contents)return new Map}else if(!x.nonvalidatedAtoms.has(e)&&b instanceof Ea)return new Map;return a=void 0,new Map().set(e,tc(b))}function y(){return CF(e)!==void 0&&s<=0}const g=FZ({key:e,nodeType:"atom",peek:h,get:f,set:m,init:d,invalidate:p,shouldDeleteConfigOnRelease:y,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return g}function S2(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return zZ(n)?GZ({...e,default:n}):jZ({...e,default:n})}function GZ(t){const e=S2({...t,default:zl,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Ea?r:Cn(t.persistence_UNSTABLE).validator(r,zl)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=dd({key:`${t.key}__withFallback`,get:({get:r})=>{const s=r(e);return s instanceof Ea?t.default:s},set:({set:r},s)=>r(e,s),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return MZ(n.key,CF(t.key)),n}S2.value=t=>new kF(t);var $F=S2;class HZ{constructor(e){var n;vt(this,"_map",void 0),vt(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var KZ={MapCache:HZ},qZ=KZ.MapCache,XZ=Object.freeze({__proto__:null,MapCache:qZ});const{LRUCache:zN}=xF,{MapCache:YZ}=XZ,Eg={equality:"reference",eviction:"none",maxSize:1/0};function ZZ({equality:t=Eg.equality,eviction:e=Eg.eviction,maxSize:n=Eg.maxSize}=Eg){const r=QZ(t);return JZ(e,n,r)}function QZ(t){switch(t){case"reference":return e=>e;case"value":return e=>L1(e)}throw St(`Unrecognized equality policy ${t}`)}function JZ(t,e,n){switch(t){case"keep-all":return new YZ({mapKey:n});case"lru":return new zN({mapKey:n,maxSize:Cn(e)});case"most-recent":return new zN({mapKey:n,maxSize:1})}throw St(`Unrecognized eviction policy ${t}`)}var IF=ZZ;const{setConfigDeletionHandler:eQ}=Ts;function tQ(t){var e,n;const r=IF({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return s=>{var o,i;const a=r.get(s);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:u,...l}=t,c="default"in t?t.default:new Promise(()=>{}),d=$F({...l,key:`${t.key}__${(o=L1(s))!==null&&o!==void 0?o:"void"}`,default:typeof c=="function"?c(s):c,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(s):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(s):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(s):(i=t.effects)!==null&&i!==void 0?i:t.effects_UNSTABLE});return r.set(s,d),eQ(d.key,()=>{r.delete(s)}),d}}var nQ=tQ;const{setConfigDeletionHandler:rQ}=Ts;let sQ=0;function oQ(t){var e,n;const r=IF({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return s=>{var o;let i;try{i=r.get(s)}catch(h){throw St(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(i!=null)return i;const a=`${t.key}__selectorFamily/${(o=L1(s,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${sQ++}`,u=h=>t.get(s)(h),l=t.cachePolicy_UNSTABLE,c=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(s):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const h=t.set;d=dd({key:a,get:u,set:(p,m)=>h(s)(p,m),cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else d=dd({key:a,get:u,cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(s,d),rQ(d.key,()=>{r.delete(s)}),d}}var hl=oQ;const iQ=hl({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function aQ(t){return iQ(t)}var lQ=aQ;const uQ=hl({key:"__error",get:t=>()=>{throw St(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function cQ(t){return uQ(t)}var dQ=cQ;function hQ(t){return t}var fQ=hQ;const{loadableWithError:EF,loadableWithPromise:TF,loadableWithValue:_F}=pp;function F1(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[s,o]of e.entries())try{n[s]=t(o)}catch(i){r[s]=i}return[n,r]}function pQ(t){return t!=null&&!gn(t)}function M1(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function XS(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,s)=>({...n,[r]:e[s]}),{})}function Vc(t,e,n){const r=n.map((s,o)=>s==null?_F(e[o]):gn(s)?TF(s):EF(s));return XS(t,r)}function mQ(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const gQ=hl({key:"__waitForNone",get:t=>({get:e})=>{const n=M1(t),[r,s]=F1(e,n);return Vc(t,r,s)},dangerouslyAllowMutability:!0}),yQ=hl({key:"__waitForAny",get:t=>({get:e})=>{const n=M1(t),[r,s]=F1(e,n);return s.some(o=>!gn(o))?Vc(t,r,s):new Promise(o=>{for(const[i,a]of s.entries())gn(a)&&a.then(u=>{r[i]=u,s[i]=void 0,o(Vc(t,r,s))}).catch(u=>{s[i]=u,o(Vc(t,r,s))})})},dangerouslyAllowMutability:!0}),vQ=hl({key:"__waitForAll",get:t=>({get:e})=>{const n=M1(t),[r,s]=F1(e,n);if(s.every(i=>i==null))return XS(t,r);const o=s.find(pQ);if(o!=null)throw o;return Promise.all(s).then(i=>XS(t,mQ(r,i)))},dangerouslyAllowMutability:!0}),xQ=hl({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=M1(t),[r,s]=F1(e,n);return s.every(o=>!gn(o))?Vc(t,r,s):Promise.all(s.map((o,i)=>gn(o)?o.then(a=>{r[i]=a,s[i]=void 0}).catch(a=>{r[i]=void 0,s[i]=a}):null)).then(()=>Vc(t,r,s))},dangerouslyAllowMutability:!0}),bQ=hl({key:"__noWait",get:t=>({get:e})=>{try{return dd.value(_F(e(t)))}catch(n){return dd.value(gn(n)?TF(n):EF(n))}},dangerouslyAllowMutability:!0});var wQ={waitForNone:gQ,waitForAny:yQ,waitForAll:vQ,waitForAllSettled:xQ,noWait:bQ};const{RecoilLoadable:SQ}=pp,{DefaultValue:kQ}=Ts,{RecoilRoot:CQ,useRecoilStoreID:$Q}=da,{isRecoilValue:IQ}=ld,{retentionZone:EQ}=$1,{freshSnapshot:TQ}=R1,{useRecoilState:_Q,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:NQ,useRecoilStateLoadable:RQ,useRecoilValue:AQ,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:DQ,useRecoilValueLoadable:OQ,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:PQ,useResetRecoilState:LQ,useSetRecoilState:FQ}=KX,{useGotoRecoilSnapshot:MQ,useRecoilSnapshot:zQ,useRecoilTransactionObserver:BQ}=hF,{useRecoilCallback:VQ}=gF,{noWait:UQ,waitForAll:WQ,waitForAllSettled:jQ,waitForAny:GQ,waitForNone:HQ}=wQ;var fl={DefaultValue:kQ,isRecoilValue:IQ,RecoilLoadable:SQ,RecoilEnv:Dd,RecoilRoot:CQ,useRecoilStoreID:$Q,useRecoilBridgeAcrossReactRoots_UNSTABLE:bY,atom:$F,selector:dd,atomFamily:nQ,selectorFamily:hl,constSelector:lQ,errorSelector:dQ,readOnlySelector:fQ,noWait:UQ,waitForNone:HQ,waitForAny:GQ,waitForAll:WQ,waitForAllSettled:jQ,useRecoilValue:AQ,useRecoilValueLoadable:OQ,useRecoilState:_Q,useRecoilStateLoadable:RQ,useSetRecoilState:FQ,useResetRecoilState:LQ,useGetRecoilValueInfo_UNSTABLE:pY,useRecoilRefresher_UNSTABLE:XY,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:PQ,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:DQ,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:NQ,useRecoilCallback:VQ,useRecoilTransaction_UNSTABLE:eZ,useGotoRecoilSnapshot:MQ,useRecoilSnapshot:zQ,useRecoilTransactionObserver_UNSTABLE:BQ,snapshot_UNSTABLE:TQ,useRetain:y2,retentionZone:EQ},KQ=fl.RecoilRoot,cze=fl.atom,dze=fl.atomFamily,hze=fl.selectorFamily,fze=fl.useRecoilValue,pze=fl.useRecoilState,mze=fl.useSetRecoilState,gze=fl.useRecoilCallback;function pu(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const Uc="$$material";function YS(){return YS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YS.apply(null,arguments)}var qQ=!1;function XQ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function YQ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var NF=function(){function t(n){var r=this;this._insertTag=function(s){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,o),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!qQ:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(YQ(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=XQ(s);try{o.insertRule(r,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Br="-ms-",uy="-moz-",Bt="-webkit-",RF="comm",k2="rule",C2="decl",ZQ="@import",AF="@keyframes",QQ="@layer",JQ=Math.abs,z1=String.fromCharCode,eJ=Object.assign;function tJ(t,e){return Ir(t,0)^45?(((e<<2^Ir(t,0))<<2^Ir(t,1))<<2^Ir(t,2))<<2^Ir(t,3):0}function DF(t){return t.trim()}function nJ(t,e){return(t=e.exec(t))?t[0]:t}function Vt(t,e,n){return t.replace(e,n)}function ZS(t,e){return t.indexOf(e)}function Ir(t,e){return t.charCodeAt(e)|0}function jf(t,e,n){return t.slice(e,n)}function ii(t){return t.length}function $2(t){return t.length}function Tg(t,e){return e.push(t),t}function rJ(t,e){return t.map(e).join("")}var B1=1,hd=1,OF=0,Cs=0,Jn=0,Pd="";function V1(t,e,n,r,s,o,i){return{value:t,root:e,parent:n,type:r,props:s,children:o,line:B1,column:hd,length:i,return:""}}function wh(t,e){return eJ(V1("",null,null,"",null,null,0),t,{length:-t.length},e)}function sJ(){return Jn}function oJ(){return Jn=Cs>0?Ir(Pd,--Cs):0,hd--,Jn===10&&(hd=1,B1--),Jn}function Us(){return Jn=Cs<OF?Ir(Pd,Cs++):0,hd++,Jn===10&&(hd=1,B1++),Jn}function yi(){return Ir(Pd,Cs)}function g0(){return Cs}function bp(t,e){return jf(Pd,t,e)}function Gf(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function PF(t){return B1=hd=1,OF=ii(Pd=t),Cs=0,[]}function LF(t){return Pd="",t}function y0(t){return DF(bp(Cs-1,QS(t===91?t+2:t===40?t+1:t)))}function iJ(t){for(;(Jn=yi())&&Jn<33;)Us();return Gf(t)>2||Gf(Jn)>3?"":" "}function aJ(t,e){for(;--e&&Us()&&!(Jn<48||Jn>102||Jn>57&&Jn<65||Jn>70&&Jn<97););return bp(t,g0()+(e<6&&yi()==32&&Us()==32))}function QS(t){for(;Us();)switch(Jn){case t:return Cs;case 34:case 39:t!==34&&t!==39&&QS(Jn);break;case 40:t===41&&QS(t);break;case 92:Us();break}return Cs}function lJ(t,e){for(;Us()&&t+Jn!==47+10;)if(t+Jn===42+42&&yi()===47)break;return"/*"+bp(e,Cs-1)+"*"+z1(t===47?t:Us())}function uJ(t){for(;!Gf(yi());)Us();return bp(t,Cs)}function cJ(t){return LF(v0("",null,null,null,[""],t=PF(t),0,[0],t))}function v0(t,e,n,r,s,o,i,a,u){for(var l=0,c=0,d=i,h=0,f=0,p=0,m=1,y=1,g=1,v=0,x="",b=s,w=o,k=r,C=x;y;)switch(p=v,v=Us()){case 40:if(p!=108&&Ir(C,d-1)==58){ZS(C+=Vt(y0(v),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:C+=y0(v);break;case 9:case 10:case 13:case 32:C+=iJ(p);break;case 92:C+=aJ(g0()-1,7);continue;case 47:switch(yi()){case 42:case 47:Tg(dJ(lJ(Us(),g0()),e,n),u);break;default:C+="/"}break;case 123*m:a[l++]=ii(C)*g;case 125*m:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+c:g==-1&&(C=Vt(C,/\f/g,"")),f>0&&ii(C)-d&&Tg(f>32?VN(C+";",r,n,d-1):VN(Vt(C," ","")+";",r,n,d-2),u);break;case 59:C+=";";default:if(Tg(k=BN(C,e,n,l,c,s,a,x,b=[],w=[],d),o),v===123)if(c===0)v0(C,e,k,k,b,o,d,a,w);else switch(h===99&&Ir(C,3)===110?100:h){case 100:case 108:case 109:case 115:v0(t,k,k,r&&Tg(BN(t,k,k,0,0,s,a,x,s,b=[],d),w),s,w,d,a,r?b:w);break;default:v0(C,k,k,k,[""],w,0,a,w)}}l=c=f=0,m=g=1,x=C="",d=i;break;case 58:d=1+ii(C),f=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&oJ()==125)continue}switch(C+=z1(v),v*m){case 38:g=c>0?1:(C+="\f",-1);break;case 44:a[l++]=(ii(C)-1)*g,g=1;break;case 64:yi()===45&&(C+=y0(Us())),h=yi(),c=d=ii(x=C+=uJ(g0())),v++;break;case 45:p===45&&ii(C)==2&&(m=0)}}return o}function BN(t,e,n,r,s,o,i,a,u,l,c){for(var d=s-1,h=s===0?o:[""],f=$2(h),p=0,m=0,y=0;p<r;++p)for(var g=0,v=jf(t,d+1,d=JQ(m=i[p])),x=t;g<f;++g)(x=DF(m>0?h[g]+" "+v:Vt(v,/&\f/g,h[g])))&&(u[y++]=x);return V1(t,e,n,s===0?k2:a,u,l,c)}function dJ(t,e,n){return V1(t,e,n,RF,z1(sJ()),jf(t,2,-2),0)}function VN(t,e,n,r){return V1(t,e,n,C2,jf(t,0,r),jf(t,r+1,-1),r)}function Wc(t,e){for(var n="",r=$2(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function hJ(t,e,n,r){switch(t.type){case QQ:if(t.children.length)break;case ZQ:case C2:return t.return=t.return||t.value;case RF:return"";case AF:return t.return=t.value+"{"+Wc(t.children,r)+"}";case k2:t.value=t.props.join(",")}return ii(n=Wc(t.children,r))?t.return=t.value+"{"+n+"}":""}function fJ(t){var e=$2(t);return function(n,r,s,o){for(var i="",a=0;a<e;a++)i+=t[a](n,r,s,o)||"";return i}}function pJ(t){return function(e){e.root||(e=e.return)&&t(e)}}function FF(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var mJ=function(e,n,r){for(var s=0,o=0;s=o,o=yi(),s===38&&o===12&&(n[r]=1),!Gf(o);)Us();return bp(e,Cs)},gJ=function(e,n){var r=-1,s=44;do switch(Gf(s)){case 0:s===38&&yi()===12&&(n[r]=1),e[r]+=mJ(Cs-1,n,r);break;case 2:e[r]+=y0(s);break;case 4:if(s===44){e[++r]=yi()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=z1(s)}while(s=Us());return e},yJ=function(e,n){return LF(gJ(PF(e),n))},UN=new WeakMap,vJ=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!UN.get(r))&&!s){UN.set(e,!0);for(var o=[],i=yJ(n,o),a=r.props,u=0,l=0;u<i.length;u++)for(var c=0;c<a.length;c++,l++)e.props[l]=o[u]?i[u].replace(/&\f/g,a[c]):a[c]+" "+i[u]}}},xJ=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function MF(t,e){switch(tJ(t,e)){case 5103:return Bt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Bt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Bt+t+uy+t+Br+t+t;case 6828:case 4268:return Bt+t+Br+t+t;case 6165:return Bt+t+Br+"flex-"+t+t;case 5187:return Bt+t+Vt(t,/(\w+).+(:[^]+)/,Bt+"box-$1$2"+Br+"flex-$1$2")+t;case 5443:return Bt+t+Br+"flex-item-"+Vt(t,/flex-|-self/,"")+t;case 4675:return Bt+t+Br+"flex-line-pack"+Vt(t,/align-content|flex-|-self/,"")+t;case 5548:return Bt+t+Br+Vt(t,"shrink","negative")+t;case 5292:return Bt+t+Br+Vt(t,"basis","preferred-size")+t;case 6060:return Bt+"box-"+Vt(t,"-grow","")+Bt+t+Br+Vt(t,"grow","positive")+t;case 4554:return Bt+Vt(t,/([^-])(transform)/g,"$1"+Bt+"$2")+t;case 6187:return Vt(Vt(Vt(t,/(zoom-|grab)/,Bt+"$1"),/(image-set)/,Bt+"$1"),t,"")+t;case 5495:case 3959:return Vt(t,/(image-set\([^]*)/,Bt+"$1$`$1");case 4968:return Vt(Vt(t,/(.+:)(flex-)?(.*)/,Bt+"box-pack:$3"+Br+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Bt+t+t;case 4095:case 3583:case 4068:case 2532:return Vt(t,/(.+)-inline(.+)/,Bt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ii(t)-1-e>6)switch(Ir(t,e+1)){case 109:if(Ir(t,e+4)!==45)break;case 102:return Vt(t,/(.+:)(.+)-([^]+)/,"$1"+Bt+"$2-$3$1"+uy+(Ir(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~ZS(t,"stretch")?MF(Vt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ir(t,e+1)!==115)break;case 6444:switch(Ir(t,ii(t)-3-(~ZS(t,"!important")&&10))){case 107:return Vt(t,":",":"+Bt)+t;case 101:return Vt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Bt+(Ir(t,14)===45?"inline-":"")+"box$3$1"+Bt+"$2$3$1"+Br+"$2box$3")+t}break;case 5936:switch(Ir(t,e+11)){case 114:return Bt+t+Br+Vt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Bt+t+Br+Vt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Bt+t+Br+Vt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Bt+t+Br+t+t}return t}var bJ=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case C2:e.return=MF(e.value,e.length);break;case AF:return Wc([wh(e,{value:Vt(e.value,"@","@"+Bt)})],s);case k2:if(e.length)return rJ(e.props,function(o){switch(nJ(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Wc([wh(e,{props:[Vt(o,/:(read-\w+)/,":"+uy+"$1")]})],s);case"::placeholder":return Wc([wh(e,{props:[Vt(o,/:(plac\w+)/,":"+Bt+"input-$1")]}),wh(e,{props:[Vt(o,/:(plac\w+)/,":"+uy+"$1")]}),wh(e,{props:[Vt(o,/:(plac\w+)/,Br+"input-$1")]})],s)}return""})}},wJ=[bJ],zF=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var y=m.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var s=e.stylisPlugins||wJ,o={},i,a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var y=m.getAttribute("data-emotion").split(" "),g=1;g<y.length;g++)o[y[g]]=!0;a.push(m)});var u,l=[vJ,xJ];{var c,d=[hJ,pJ(function(m){c.insert(m)})],h=fJ(l.concat(s,d)),f=function(y){return Wc(cJ(y),h)};u=function(y,g,v,x){c=v,f(y?y+"{"+g.styles+"}":g.styles),x&&(p.inserted[g.name]=!0)}}var p={key:n,sheet:new NF({key:n,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:u};return p.sheet.hydrate(a),p},BF={exports:{}},qt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var br=typeof Symbol=="function"&&Symbol.for,I2=br?Symbol.for("react.element"):60103,E2=br?Symbol.for("react.portal"):60106,U1=br?Symbol.for("react.fragment"):60107,W1=br?Symbol.for("react.strict_mode"):60108,j1=br?Symbol.for("react.profiler"):60114,G1=br?Symbol.for("react.provider"):60109,H1=br?Symbol.for("react.context"):60110,T2=br?Symbol.for("react.async_mode"):60111,K1=br?Symbol.for("react.concurrent_mode"):60111,q1=br?Symbol.for("react.forward_ref"):60112,X1=br?Symbol.for("react.suspense"):60113,SJ=br?Symbol.for("react.suspense_list"):60120,Y1=br?Symbol.for("react.memo"):60115,Z1=br?Symbol.for("react.lazy"):60116,kJ=br?Symbol.for("react.block"):60121,CJ=br?Symbol.for("react.fundamental"):60117,$J=br?Symbol.for("react.responder"):60118,IJ=br?Symbol.for("react.scope"):60119;function Ys(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case I2:switch(t=t.type,t){case T2:case K1:case U1:case j1:case W1:case X1:return t;default:switch(t=t&&t.$$typeof,t){case H1:case q1:case Z1:case Y1:case G1:return t;default:return e}}case E2:return e}}}function VF(t){return Ys(t)===K1}qt.AsyncMode=T2;qt.ConcurrentMode=K1;qt.ContextConsumer=H1;qt.ContextProvider=G1;qt.Element=I2;qt.ForwardRef=q1;qt.Fragment=U1;qt.Lazy=Z1;qt.Memo=Y1;qt.Portal=E2;qt.Profiler=j1;qt.StrictMode=W1;qt.Suspense=X1;qt.isAsyncMode=function(t){return VF(t)||Ys(t)===T2};qt.isConcurrentMode=VF;qt.isContextConsumer=function(t){return Ys(t)===H1};qt.isContextProvider=function(t){return Ys(t)===G1};qt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===I2};qt.isForwardRef=function(t){return Ys(t)===q1};qt.isFragment=function(t){return Ys(t)===U1};qt.isLazy=function(t){return Ys(t)===Z1};qt.isMemo=function(t){return Ys(t)===Y1};qt.isPortal=function(t){return Ys(t)===E2};qt.isProfiler=function(t){return Ys(t)===j1};qt.isStrictMode=function(t){return Ys(t)===W1};qt.isSuspense=function(t){return Ys(t)===X1};qt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===U1||t===K1||t===j1||t===W1||t===X1||t===SJ||typeof t=="object"&&t!==null&&(t.$$typeof===Z1||t.$$typeof===Y1||t.$$typeof===G1||t.$$typeof===H1||t.$$typeof===q1||t.$$typeof===CJ||t.$$typeof===$J||t.$$typeof===IJ||t.$$typeof===kJ)};qt.typeOf=Ys;BF.exports=qt;var EJ=BF.exports,UF=EJ,TJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_J={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},WF={};WF[UF.ForwardRef]=TJ;WF[UF.Memo]=_J;var NJ=!0;function jF(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(r+=s+" ")}),r}var _2=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||NJ===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},N2=function(e,n,r){_2(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function RJ(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var AJ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},DJ=!1,OJ=/[A-Z]|^ms/g,PJ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,GF=function(e){return e.charCodeAt(1)===45},WN=function(e){return e!=null&&typeof e!="boolean"},Ub=FF(function(t){return GF(t)?t:t.replace(OJ,"-$&").toLowerCase()}),jN=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(PJ,function(r,s,o){return ai={name:s,styles:o,next:ai},s})}return AJ[e]!==1&&!GF(e)&&typeof n=="number"&&n!==0?n+"px":n},LJ="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Hf(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return ai={name:s.name,styles:s.styles,next:ai},s.name;var o=n;if(o.styles!==void 0){var i=o.next;if(i!==void 0)for(;i!==void 0;)ai={name:i.name,styles:i.styles,next:ai},i=i.next;var a=o.styles+";";return a}return FJ(t,e,n)}case"function":{if(t!==void 0){var u=ai,l=n(t);return ai=u,Hf(t,e,l)}break}}var c=n;if(e==null)return c;var d=e[c];return d!==void 0?d:c}function FJ(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Hf(t,e,n[s])+";";else for(var o in n){var i=n[o];if(typeof i!="object"){var a=i;e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":WN(a)&&(r+=Ub(o)+":"+jN(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&DJ)throw new Error(LJ);if(Array.isArray(i)&&typeof i[0]=="string"&&(e==null||e[i[0]]===void 0))for(var u=0;u<i.length;u++)WN(i[u])&&(r+=Ub(o)+":"+jN(o,i[u])+";");else{var l=Hf(t,e,i);switch(o){case"animation":case"animationName":{r+=Ub(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}}return r}var GN=/label:\s*([^\s;{]+)\s*(;|$)/g,ai;function Q1(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";ai=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,s+=Hf(n,e,o);else{var i=o;s+=i[0]}for(var a=1;a<t.length;a++)if(s+=Hf(n,e,t[a]),r){var u=o;s+=u[a]}GN.lastIndex=0;for(var l="",c;(c=GN.exec(s))!==null;)l+="-"+c[1];var d=RJ(s)+l;return{name:d,styles:s,next:ai}}var MJ=function(e){return e()},HF=T0["useInsertionEffect"]?T0["useInsertionEffect"]:!1,KF=HF||MJ,HN=HF||K.useLayoutEffect,zJ=!1,qF=K.createContext(typeof HTMLElement<"u"?zF({key:"css"}):null),BJ=qF.Provider,R2=function(e){return K.forwardRef(function(n,r){var s=K.useContext(qF);return e(n,s,r)})},wp=K.createContext({}),A2={}.hasOwnProperty,JS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",VJ=function(e,n){var r={};for(var s in n)A2.call(n,s)&&(r[s]=n[s]);return r[JS]=e,r},UJ=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return _2(n,r,s),KF(function(){return N2(n,r,s)}),null},WJ=R2(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[JS],o=[r],i="";typeof t.className=="string"?i=jF(e.registered,o,t.className):t.className!=null&&(i=t.className+" ");var a=Q1(o,void 0,K.useContext(wp));i+=e.key+"-"+a.name;var u={};for(var l in t)A2.call(t,l)&&l!=="css"&&l!==JS&&!zJ&&(u[l]=t[l]);return u.className=i,n&&(u.ref=n),K.createElement(K.Fragment,null,K.createElement(UJ,{cache:e,serialized:a,isStringTag:typeof s=="string"}),K.createElement(s,u))}),jJ=WJ,KN=function(e,n){var r=arguments;if(n==null||!A2.call(n,"css"))return K.createElement.apply(void 0,r);var s=r.length,o=new Array(s);o[0]=jJ,o[1]=VJ(e,n);for(var i=2;i<s;i++)o[i]=r[i];return K.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(KN||(KN={}));var GJ=R2(function(t,e){var n=t.styles,r=Q1([n],void 0,K.useContext(wp)),s=K.useRef();return HN(function(){var o=e.key+"-global",i=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(i.before=e.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",o),i.hydrate([u])),s.current=[i,a],function(){i.flush()}},[e]),HN(function(){var o=s.current,i=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&N2(e,r.next,!0),i.tags.length){var u=i.tags[i.tags.length-1].nextElementSibling;i.before=u,i.flush()}e.insert("",r,i,!1)},[e,r.name]),null});function D2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Q1(e)}function Sp(){var t=D2.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var HJ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,KJ=FF(function(t){return HJ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),qJ=!1,XJ=KJ,YJ=function(e){return e!=="theme"},qN=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?XJ:YJ},XN=function(e,n,r){var s;if(n){var o=n.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(i){return e.__emotion_forwardProp(i)&&o(i)}:o}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},ZJ=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return _2(n,r,s),KF(function(){return N2(n,r,s)}),null},QJ=function t(e,n){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,o,i;n!==void 0&&(o=n.label,i=n.target);var a=XN(e,n,r),u=a||qN(s),l=!u("as");return function(){var c=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{var h=c[0];d.push(h[0]);for(var f=c.length,p=1;p<f;p++)d.push(c[p],h[p])}var m=R2(function(y,g,v){var x=l&&y.as||s,b="",w=[],k=y;if(y.theme==null){k={};for(var C in y)k[C]=y[C];k.theme=K.useContext(wp)}typeof y.className=="string"?b=jF(g.registered,w,y.className):y.className!=null&&(b=y.className+" ");var $=Q1(d.concat(w),g.registered,k);b+=g.key+"-"+$.name,i!==void 0&&(b+=" "+i);var E=l&&a===void 0?qN(x):u,S={};for(var R in y)l&&R==="as"||E(R)&&(S[R]=y[R]);return S.className=b,v&&(S.ref=v),K.createElement(K.Fragment,null,K.createElement(ZJ,{cache:g,serialized:$,isStringTag:typeof x=="string"}),K.createElement(x,S))});return m.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=d,m.__emotion_forwardProp=a,Object.defineProperty(m,"toString",{value:function(){return i===void 0&&qJ?"NO_COMPONENT_SELECTOR":"."+i}}),m.withComponent=function(y,g){var v=t(y,YS({},n,g,{shouldForwardProp:XN(m,g,!0)}));return v.apply(void 0,d)},m}},JJ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],ek=QJ.bind(null);JJ.forEach(function(t){ek[t]=ek(t)});const eee=(t,e)=>{const n=zF(t);return n.sheet=new e({key:n.key,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy,prepend:n.sheet.prepend,insertionPoint:n.sheet.insertionPoint}),n};let tk;if(typeof document=="object"){let t=document.querySelector('[name="emotion-insertion-point"]');if(!t){t=document.createElement("meta"),t.setAttribute("name","emotion-insertion-point"),t.setAttribute("content","");const n=document.querySelector("head");n&&n.prepend(t)}class e extends NF{insert(r,s){return this.key&&this.key.endsWith("global")&&(this.before=t),super.insert(r,s)}}tk=eee({key:"css",insertionPoint:t},e)}function tee(t){const{injectFirst:e,children:n}=t;return e&&tk?be.jsx(BJ,{value:tk,children:n}):n}function nee(t){return t==null||Object.keys(t).length===0}function ree(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?s=>e(nee(s)?n:s):e;return be.jsx(GJ,{styles:r})}function Ra(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function XF(t){if(K.isValidElement(t)||!Ra(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=XF(t[n])}),e}function Ws(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Ra(t)&&Ra(e)&&Object.keys(e).forEach(s=>{K.isValidElement(e[s])?r[s]=e[s]:Ra(e[s])&&Object.prototype.hasOwnProperty.call(t,s)&&Ra(t[s])?r[s]=Ws(t[s],e[s],n):n.clone?r[s]=Ra(e[s])?XF(e[s]):e[s]:r[s]=e[s]}),r}const see=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function oee(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=t,o=see(e),i=Object.keys(o);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function u(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function l(h,f){const p=i.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[i[p]]=="number"?e[i[p]]:f)-r/100}${n})`}function c(h){return i.indexOf(h)+1<i.length?l(h,i[i.indexOf(h)+1]):a(h)}function d(h){const f=i.indexOf(h);return f===0?a(i[1]):f===i.length-1?u(i[f]):l(h,i[i.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:i,values:o,up:a,down:u,between:l,only:c,not:d,unit:n,...s}}function iee(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var i,a;const o=/min-width:\s*([0-9.]+)/;return+(((i=r.match(o))==null?void 0:i[1])||0)-+(((a=s.match(o))==null?void 0:a[1])||0)});return n.length?n.reduce((r,s)=>{const o=e[s];return delete r[s],r[s]=o,r},{...e}):e}function aee(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function lee(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(s).up(o)}function uee(t){const e=(o,i)=>o.replace("@media",i?`@container ${i}`:"@container");function n(o,i){o.up=(...a)=>e(t.breakpoints.up(...a),i),o.down=(...a)=>e(t.breakpoints.down(...a),i),o.between=(...a)=>e(t.breakpoints.between(...a),i),o.only=(...a)=>e(t.breakpoints.only(...a),i),o.not=(...a)=>{const u=e(t.breakpoints.not(...a),i);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},s=o=>(n(r,o),r);return n(s),{...t,containerQueries:s}}const cee={borderRadius:4},dee=cee;function df(t,e){return e?Ws(t,e,{clone:!1}):t}const J1={xs:0,sm:600,md:900,lg:1200,xl:1536},YN={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${J1[t]}px)`},hee={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:J1[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function na(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||YN;return e.reduce((i,a,u)=>(i[o.up(o.keys[u])]=n(e[u]),i),{})}if(typeof e=="object"){const o=r.breakpoints||YN;return Object.keys(e).reduce((i,a)=>{if(aee(o.keys,a)){const u=lee(r.containerQueries?r:hee,a);u&&(i[u]=n(e[a],a))}else if(Object.keys(o.values||J1).includes(a)){const u=o.up(a);i[u]=n(e[a],a)}else{const u=a;i[u]=e[u]}return i},{})}return n(e)}function fee(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,s)=>{const o=t.up(s);return r[o]={},r},{}))||{}}function pee(t,e){return t.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function YF(t){if(typeof t!="string")throw new Error(pu(7));return t.charAt(0).toUpperCase()+t.slice(1)}function ev(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,t)}function cy(t,e,n,r=n){let s;return typeof t=="function"?s=t(n):Array.isArray(t)?s=t[n]||r:s=ev(t,n)||r,e&&(s=e(s,r,t)),s}function Xn(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:s}=t,o=i=>{if(i[e]==null)return null;const a=i[e],u=i.theme,l=ev(u,r)||{};return na(i,a,d=>{let h=cy(l,s,d);return d===h&&typeof d=="string"&&(h=cy(l,s,`${e}${d==="default"?"":YF(d)}`,d)),n===!1?h:{[n]:h}})};return o.propTypes={},o.filterProps=[e],o}function mee(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const gee={m:"margin",p:"padding"},yee={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ZN={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},vee=mee(t=>{if(t.length>2)if(ZN[t])t=ZN[t];else return[t];const[e,n]=t.split(""),r=gee[e],s=yee[n]||"";return Array.isArray(s)?s.map(o=>r+o):[r+s]}),O2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],P2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...O2,...P2];function kp(t,e,n,r){const s=ev(t,e,!0)??n;return typeof s=="number"||typeof s=="string"?o=>typeof o=="string"?o:typeof s=="string"?`calc(${o} * ${s})`:s*o:Array.isArray(s)?o=>{if(typeof o=="string")return o;const i=Math.abs(o),a=s[i];return o>=0?a:typeof a=="number"?-a:`-${a}`}:typeof s=="function"?s:()=>{}}function L2(t){return kp(t,"spacing",8)}function Cp(t,e){return typeof e=="string"||e==null?e:t(e)}function xee(t,e){return n=>t.reduce((r,s)=>(r[s]=Cp(e,n),r),{})}function bee(t,e,n,r){if(!e.includes(n))return null;const s=vee(n),o=xee(s,r),i=t[n];return na(t,i,o)}function ZF(t,e){const n=L2(t.theme);return Object.keys(t).map(r=>bee(t,e,r,n)).reduce(df,{})}function An(t){return ZF(t,O2)}An.propTypes={};An.filterProps=O2;function Dn(t){return ZF(t,P2)}Dn.propTypes={};Dn.filterProps=P2;function QF(t=8,e=L2({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const i=e(o);return typeof i=="number"?`${i}px`:i}).join(" ");return n.mui=!0,n}function tv(...t){const e=t.reduce((r,s)=>(s.filterProps.forEach(o=>{r[o]=s}),r),{}),n=r=>Object.keys(r).reduce((s,o)=>e[o]?df(s,e[o](r)):s,{});return n.propTypes={},n.filterProps=t.reduce((r,s)=>r.concat(s.filterProps),[]),n}function io(t){return typeof t!="number"?t:`${t}px solid`}function So(t,e){return Xn({prop:t,themeKey:"borders",transform:e})}const wee=So("border",io),See=So("borderTop",io),kee=So("borderRight",io),Cee=So("borderBottom",io),$ee=So("borderLeft",io),Iee=So("borderColor"),Eee=So("borderTopColor"),Tee=So("borderRightColor"),_ee=So("borderBottomColor"),Nee=So("borderLeftColor"),Ree=So("outline",io),Aee=So("outlineColor"),nv=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=kp(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Cp(e,r)});return na(t,t.borderRadius,n)}return null};nv.propTypes={};nv.filterProps=["borderRadius"];tv(wee,See,kee,Cee,$ee,Iee,Eee,Tee,_ee,Nee,nv,Ree,Aee);const rv=t=>{if(t.gap!==void 0&&t.gap!==null){const e=kp(t.theme,"spacing",8),n=r=>({gap:Cp(e,r)});return na(t,t.gap,n)}return null};rv.propTypes={};rv.filterProps=["gap"];const sv=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=kp(t.theme,"spacing",8),n=r=>({columnGap:Cp(e,r)});return na(t,t.columnGap,n)}return null};sv.propTypes={};sv.filterProps=["columnGap"];const ov=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=kp(t.theme,"spacing",8),n=r=>({rowGap:Cp(e,r)});return na(t,t.rowGap,n)}return null};ov.propTypes={};ov.filterProps=["rowGap"];const Dee=Xn({prop:"gridColumn"}),Oee=Xn({prop:"gridRow"}),Pee=Xn({prop:"gridAutoFlow"}),Lee=Xn({prop:"gridAutoColumns"}),Fee=Xn({prop:"gridAutoRows"}),Mee=Xn({prop:"gridTemplateColumns"}),zee=Xn({prop:"gridTemplateRows"}),Bee=Xn({prop:"gridTemplateAreas"}),Vee=Xn({prop:"gridArea"});tv(rv,sv,ov,Dee,Oee,Pee,Lee,Fee,Mee,zee,Bee,Vee);function jc(t,e){return e==="grey"?e:t}const Uee=Xn({prop:"color",themeKey:"palette",transform:jc}),Wee=Xn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:jc}),jee=Xn({prop:"backgroundColor",themeKey:"palette",transform:jc});tv(Uee,Wee,jee);function Ps(t){return t<=1&&t!==0?`${t*100}%`:t}const Gee=Xn({prop:"width",transform:Ps}),F2=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var s,o,i,a,u;const r=((i=(o=(s=t.theme)==null?void 0:s.breakpoints)==null?void 0:o.values)==null?void 0:i[n])||J1[n];return r?((u=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Ps(n)}};return na(t,t.maxWidth,e)}return null};F2.filterProps=["maxWidth"];const Hee=Xn({prop:"minWidth",transform:Ps}),Kee=Xn({prop:"height",transform:Ps}),qee=Xn({prop:"maxHeight",transform:Ps}),Xee=Xn({prop:"minHeight",transform:Ps});Xn({prop:"size",cssProperty:"width",transform:Ps});Xn({prop:"size",cssProperty:"height",transform:Ps});const Yee=Xn({prop:"boxSizing"});tv(Gee,F2,Hee,Kee,qee,Xee,Yee);const Zee={border:{themeKey:"borders",transform:io},borderTop:{themeKey:"borders",transform:io},borderRight:{themeKey:"borders",transform:io},borderBottom:{themeKey:"borders",transform:io},borderLeft:{themeKey:"borders",transform:io},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:io},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:nv},color:{themeKey:"palette",transform:jc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:jc},backgroundColor:{themeKey:"palette",transform:jc},p:{style:Dn},pt:{style:Dn},pr:{style:Dn},pb:{style:Dn},pl:{style:Dn},px:{style:Dn},py:{style:Dn},padding:{style:Dn},paddingTop:{style:Dn},paddingRight:{style:Dn},paddingBottom:{style:Dn},paddingLeft:{style:Dn},paddingX:{style:Dn},paddingY:{style:Dn},paddingInline:{style:Dn},paddingInlineStart:{style:Dn},paddingInlineEnd:{style:Dn},paddingBlock:{style:Dn},paddingBlockStart:{style:Dn},paddingBlockEnd:{style:Dn},m:{style:An},mt:{style:An},mr:{style:An},mb:{style:An},ml:{style:An},mx:{style:An},my:{style:An},margin:{style:An},marginTop:{style:An},marginRight:{style:An},marginBottom:{style:An},marginLeft:{style:An},marginX:{style:An},marginY:{style:An},marginInline:{style:An},marginInlineStart:{style:An},marginInlineEnd:{style:An},marginBlock:{style:An},marginBlockStart:{style:An},marginBlockEnd:{style:An},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:rv},rowGap:{style:ov},columnGap:{style:sv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ps},maxWidth:{style:F2},minWidth:{transform:Ps},height:{transform:Ps},maxHeight:{transform:Ps},minHeight:{transform:Ps},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},iv=Zee;function Qee(...t){const e=t.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Jee(t,e){return typeof t=="function"?t(e):t}function ete(){function t(n,r,s,o){const i={[n]:r,theme:s},a=o[n];if(!a)return{[n]:r};const{cssProperty:u=n,themeKey:l,transform:c,style:d}=a;if(r==null)return null;if(l==="typography"&&r==="inherit")return{[n]:r};const h=ev(s,l)||{};return d?d(i):na(i,r,p=>{let m=cy(h,c,p);return p===m&&typeof p=="string"&&(m=cy(h,c,`${n}${p==="default"?"":YF(p)}`,p)),u===!1?m:{[u]:m}})}function e(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const o=s.unstable_sxConfig??iv;function i(a){let u=a;if(typeof a=="function")u=a(s);else if(typeof a!="object")return a;if(!u)return null;const l=fee(s.breakpoints),c=Object.keys(l);let d=l;return Object.keys(u).forEach(h=>{const f=Jee(u[h],s);if(f!=null)if(typeof f=="object")if(o[h])d=df(d,t(h,f,s,o));else{const p=na({theme:s},f,m=>({[h]:m}));Qee(p,f)?d[h]=e({sx:f,theme:s}):d=df(d,p)}else d=df(d,t(h,f,s,o))}),iee(s,pee(c,d))}return Array.isArray(r)?r.map(i):i(r)}return e}const JF=ete();JF.filterProps=["sx"];const av=JF;function tte(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(t);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return n.palette.mode===t?e:{}}function nte(t={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:o={},...i}=t,a=oee(n),u=QF(s);let l=Ws({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...dee,...o}},i);return l=uee(l),l.applyStyles=tte,l=e.reduce((c,d)=>Ws(c,d),l),l.unstable_sxConfig={...iv,...i==null?void 0:i.unstable_sxConfig},l.unstable_sx=function(d){return av({sx:d,theme:this})},l}function rte(t){return Object.keys(t).length===0}function ste(t=null){const e=K.useContext(wp);return!e||rte(e)?t:e}function nk(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const s=r;if(s==="components"||s==="slots")n[s]={...t[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const o=t[s],i=e[s];if(!i)n[s]=o||{};else if(!o)n[s]=i;else{n[s]={...i};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const u=a;n[s][u]=nk(o[u],i[u])}}}else n[s]===void 0&&(n[s]=t[s])}return n}function ote(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function M2(t,e=0,n=1){return ote(t,e,n)}function ite(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ja(t){if(t.type)return t;if(t.charAt(0)==="#")return Ja(ite(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(pu(9,t));let r=t.substring(e+1,t.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(pu(10,s))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:s}}const ate=t=>{const e=Ja(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Bh=(t,e)=>{try{return ate(t)}catch{return t}};function lv(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((s,o)=>o<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function eM(t){t=Ja(t);const{values:e}=t,n=e[0],r=e[1]/100,s=e[2]/100,o=r*Math.min(s,1-s),i=(l,c=(l+n/30)%12)=>s-o*Math.max(Math.min(c-3,9-c,1),-1);let a="rgb";const u=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return t.type==="hsla"&&(a+="a",u.push(e[3])),lv({type:a,values:u})}function rk(t){t=Ja(t);let e=t.type==="hsl"||t.type==="hsla"?Ja(eM(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function lte(t,e){const n=rk(t),r=rk(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function ute(t,e){return t=Ja(t),e=M2(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,lv(t)}function _g(t,e,n){try{return ute(t,e)}catch{return t}}function z2(t,e){if(t=Ja(t),e=M2(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return lv(t)}function Jt(t,e,n){try{return z2(t,e)}catch{return t}}function B2(t,e){if(t=Ja(t),e=M2(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return lv(t)}function en(t,e,n){try{return B2(t,e)}catch{return t}}function cte(t,e=.15){return rk(t)>.5?z2(t,e):B2(t,e)}function Ng(t,e,n){try{return cte(t,e)}catch{return t}}const dte=K.createContext(null),tM=dte;function V2(){return K.useContext(tM)}const hte=typeof Symbol=="function"&&Symbol.for,fte=hte?Symbol.for("mui.nested"):"__THEME_NESTED__";function pte(t,e){return typeof e=="function"?e(t):{...t,...e}}function mte(t){const{children:e,theme:n}=t,r=V2(),s=K.useMemo(()=>{const o=r===null?{...n}:pte(r,n);return o!=null&&(o[fte]=r!==null),o},[n,r]);return be.jsx(tM.Provider,{value:s,children:e})}const nM=K.createContext();function gte({value:t,...e}){return be.jsx(nM.Provider,{value:t??!0,...e})}const yze=()=>K.useContext(nM)??!1,rM=K.createContext(void 0);function yte({value:t,children:e}){return be.jsx(rM.Provider,{value:t,children:e})}function vte(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const s=e.components[n];return s.defaultProps?nk(s.defaultProps,r):!s.styleOverrides&&!s.variants?nk(s,r):r}function vze({props:t,name:e}){const n=K.useContext(rM);return vte({props:t,name:e,theme:{components:n}})}const QN={};function JN(t,e,n,r=!1){return K.useMemo(()=>{const s=t&&e[t]||e;if(typeof n=="function"){const o=n(s),i=t?{...e,[t]:o}:o;return r?()=>i:i}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,r])}function sM(t){const{children:e,theme:n,themeId:r}=t,s=ste(QN),o=V2()||QN,i=JN(r,s,n),a=JN(r,o,n,!0),u=(r?i[r]:i).direction==="rtl";return be.jsx(mte,{theme:a,children:be.jsx(wp.Provider,{value:i,children:be.jsx(gte,{value:u,children:be.jsx(yte,{value:r?i[r].components:i.components,children:e})})})})}const U2="mode",W2="color-scheme",xte="data-color-scheme";function bte(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:s=U2,colorSchemeStorageKey:o=W2,attribute:i=xte,colorSchemeNode:a="document.documentElement",nonce:u}=t||{};let l="",c=i;if(i==="class"&&(c=".%s"),i==="data"&&(c="[data-%s]"),c.startsWith(".")){const h=c.substring(1);l+=`${a}.classList.remove('${h}'.replace('%s', light), '${h}'.replace('%s', dark));
      ${a}.classList.add('${h}'.replace('%s', colorScheme));`}const d=c.match(/\[([^\]]+)\]/);if(d){const[h,f]=d[1].split("=");f||(l+=`${a}.removeAttribute('${h}'.replace('%s', light));
      ${a}.removeAttribute('${h}'.replace('%s', dark));`),l+=`
      ${a}.setAttribute('${h}'.replace('%s', colorScheme), ${f?`${f}.replace('%s', colorScheme)`:'""'});`}else l+=`${a}.setAttribute('${c}', colorScheme);`;return be.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${s}') || '${e}';
  const dark = localStorage.getItem('${o}-dark') || '${r}';
  const light = localStorage.getItem('${o}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${l}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function eR(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function oM(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function wte(t){return oM(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function Wb(t,e){if(typeof window>"u")return;let n;try{n=localStorage.getItem(t)||void 0,n||localStorage.setItem(t,e)}catch{}return n||e}function Ste(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:s=[],modeStorageKey:o=U2,colorSchemeStorageKey:i=W2,storageWindow:a=typeof window>"u"?void 0:window,noSsr:u=!1}=t,l=s.join(","),c=s.length>1,[d,h]=K.useState(()=>{const b=Wb(o,e),w=Wb(`${i}-light`,n),k=Wb(`${i}-dark`,r);return{mode:b,systemMode:eR(b),lightColorScheme:w,darkColorScheme:k}}),[f,p]=K.useState(u||!c);K.useEffect(()=>{p(!0)},[]);const m=wte(d),y=K.useCallback(b=>{h(w=>{if(b===w.mode)return w;const k=b??e;try{localStorage.setItem(o,k)}catch{}return{...w,mode:k,systemMode:eR(k)}})},[o,e]),g=K.useCallback(b=>{b?typeof b=="string"?b&&!l.includes(b)?console.error(`\`${b}\` does not exist in \`theme.colorSchemes\`.`):h(w=>{const k={...w};return oM(w,C=>{try{localStorage.setItem(`${i}-${C}`,b)}catch{}C==="light"&&(k.lightColorScheme=b),C==="dark"&&(k.darkColorScheme=b)}),k}):h(w=>{const k={...w},C=b.light===null?n:b.light,$=b.dark===null?r:b.dark;if(C)if(!l.includes(C))console.error(`\`${C}\` does not exist in \`theme.colorSchemes\`.`);else{k.lightColorScheme=C;try{localStorage.setItem(`${i}-light`,C)}catch{}}if($)if(!l.includes($))console.error(`\`${$}\` does not exist in \`theme.colorSchemes\`.`);else{k.darkColorScheme=$;try{localStorage.setItem(`${i}-dark`,$)}catch{}}return k}):h(w=>{try{localStorage.setItem(`${i}-light`,n),localStorage.setItem(`${i}-dark`,r)}catch{}return{...w,lightColorScheme:n,darkColorScheme:r}})},[l,i,n,r]),v=K.useCallback(b=>{d.mode==="system"&&h(w=>{const k=b!=null&&b.matches?"dark":"light";return w.systemMode===k?w:{...w,systemMode:k}})},[d.mode]),x=K.useRef(v);return x.current=v,K.useEffect(()=>{if(typeof window.matchMedia!="function"||!c)return;const b=(...k)=>x.current(...k),w=window.matchMedia("(prefers-color-scheme: dark)");return w.addListener(b),b(w),()=>{w.removeListener(b)}},[c]),K.useEffect(()=>{if(a&&c){const b=w=>{const k=w.newValue;typeof w.key=="string"&&w.key.startsWith(i)&&(!k||l.match(k))&&(w.key.endsWith("light")&&g({light:k}),w.key.endsWith("dark")&&g({dark:k})),w.key===o&&(!k||["light","dark","system"].includes(k))&&y(k||e)};return a.addEventListener("storage",b),()=>{a.removeEventListener("storage",b)}}},[g,y,o,i,l,e,a,c]),{...d,mode:f?d.mode:void 0,systemMode:f?d.systemMode:void 0,colorScheme:f?m:void 0,setMode:y,setColorScheme:g}}const kte="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Cte(t){const{themeId:e,theme:n={},modeStorageKey:r=U2,colorSchemeStorageKey:s=W2,disableTransitionOnChange:o=!1,defaultColorScheme:i,resolveTheme:a}=t,u={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},l=K.createContext(void 0),c=()=>K.useContext(l)||u,d={},h={};function f(g){var _e,Oe,Ee,te;const{children:v,theme:x,modeStorageKey:b=r,colorSchemeStorageKey:w=s,disableTransitionOnChange:k=o,storageWindow:C=typeof window>"u"?void 0:window,documentNode:$=typeof document>"u"?void 0:document,colorSchemeNode:E=typeof document>"u"?void 0:document.documentElement,disableNestedContext:S=!1,disableStyleSheetGeneration:R=!1,defaultMode:T="system",noSsr:P}=g,I=K.useRef(!1),A=V2(),L=K.useContext(l),V=!!L&&!S,z=K.useMemo(()=>x||(typeof n=="function"?n():n),[x]),M=z[e],_=M||z,{colorSchemes:F=d,components:O=h,cssVarPrefix:D}=_,j=Object.keys(F).filter(ge=>!!F[ge]).join(","),G=K.useMemo(()=>j.split(","),[j]),J=typeof i=="string"?i:i.light,me=typeof i=="string"?i:i.dark,fe=F[J]&&F[me]?T:((Oe=(_e=F[_.defaultColorScheme])==null?void 0:_e.palette)==null?void 0:Oe.mode)||((Ee=_.palette)==null?void 0:Ee.mode),{mode:he,setMode:Te,systemMode:Re,lightColorScheme:Me,darkColorScheme:Ve,colorScheme:N,setColorScheme:ue}=Ste({supportedColorSchemes:G,defaultLightColorScheme:J,defaultDarkColorScheme:me,modeStorageKey:b,colorSchemeStorageKey:w,defaultMode:fe,storageWindow:C,noSsr:P});let ne=he,W=N;V&&(ne=L.mode,W=L.colorScheme);const U=K.useMemo(()=>{var ot;const ge=W||_.defaultColorScheme,ke=((ot=_.generateThemeVars)==null?void 0:ot.call(_))||_.vars,Ue={..._,components:O,colorSchemes:F,cssVarPrefix:D,vars:ke};if(typeof Ue.generateSpacing=="function"&&(Ue.spacing=Ue.generateSpacing()),ge){const lt=F[ge];lt&&typeof lt=="object"&&Object.keys(lt).forEach(Mt=>{lt[Mt]&&typeof lt[Mt]=="object"?Ue[Mt]={...Ue[Mt],...lt[Mt]}:Ue[Mt]=lt[Mt]})}return a?a(Ue):Ue},[_,W,O,F,D]),Z=_.colorSchemeSelector;K.useEffect(()=>{if(W&&E&&Z&&Z!=="media"){const ge=Z;let ke=Z;if(ge==="class"&&(ke=".%s"),ge==="data"&&(ke="[data-%s]"),ge!=null&&ge.startsWith("data-")&&!ge.includes("%s")&&(ke=`[${ge}="%s"]`),ke.startsWith("."))E.classList.remove(...G.map(Ue=>ke.substring(1).replace("%s",Ue))),E.classList.add(ke.substring(1).replace("%s",W));else{const Ue=ke.replace("%s",W).match(/\[([^\]]+)\]/);if(Ue){const[ot,lt]=Ue[1].split("=");lt||G.forEach(Mt=>{E.removeAttribute(ot.replace(W,Mt))}),E.setAttribute(ot,lt?lt.replace(/"|'/g,""):"")}else E.setAttribute(ke,W)}}},[W,Z,E,G]),K.useEffect(()=>{let ge;if(k&&I.current&&$){const ke=$.createElement("style");ke.appendChild($.createTextNode(kte)),$.head.appendChild(ke),window.getComputedStyle($.body),ge=setTimeout(()=>{$.head.removeChild(ke)},1)}return()=>{clearTimeout(ge)}},[W,k,$]),K.useEffect(()=>(I.current=!0,()=>{I.current=!1}),[]);const xe=K.useMemo(()=>({allColorSchemes:G,colorScheme:W,darkColorScheme:Ve,lightColorScheme:Me,mode:ne,setColorScheme:ue,setMode:Te,systemMode:Re}),[G,W,Ve,Me,ne,ue,Te,Re,U.colorSchemeSelector]);let ce=!0;(R||_.cssVariables===!1||V&&(A==null?void 0:A.cssVarPrefix)===D)&&(ce=!1);const ie=be.jsxs(K.Fragment,{children:[be.jsx(sM,{themeId:M?e:void 0,theme:U,children:v}),ce&&be.jsx(ree,{styles:((te=U.generateStyleSheets)==null?void 0:te.call(U))||[]})]});return V?ie:be.jsx(l.Provider,{value:xe,children:ie})}const p=typeof i=="string"?i:i.light,m=typeof i=="string"?i:i.dark;return{CssVarsProvider:f,useColorScheme:c,getInitColorSchemeScript:g=>bte({colorSchemeStorageKey:s,defaultLightColorScheme:p,defaultDarkColorScheme:m,modeStorageKey:r,...g})}}function $te(t=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${t?`${t}-`:""}${r}${e(...s)})`}const tR=(t,e,n,r=[])=>{let s=t;e.forEach((o,i)=>{i===e.length-1?Array.isArray(s)?s[Number(o)]=n:s&&typeof s=="object"&&(s[o]=n):s&&typeof s=="object"&&(s[o]||(s[o]=r.includes(o)?[]:{}),s=s[o])})},Ite=(t,e,n)=>{function r(s,o=[],i=[]){Object.entries(s).forEach(([a,u])=>{(!n||n&&!n([...o,a]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...o,a],Array.isArray(u)?[...i,a]:i):e([...o,a],u,i))})}r(t)},Ete=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function jb(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},s={},o={},i={};return Ite(t,(a,u,l)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(a,u))){const c=`--${n?`${n}-`:""}${a.join("-")}`,d=Ete(a,u);Object.assign(s,{[c]:d}),tR(o,a,`var(${c})`,l),tR(i,a,`var(${c}, ${d})`,l)}},a=>a[0]==="vars"),{css:s,vars:o,varsWithDefaults:i}}function Tte(t,e={}){const{getSelector:n=y,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:o={},components:i,defaultColorScheme:a="light",...u}=t,{vars:l,css:c,varsWithDefaults:d}=jb(u,e);let h=d;const f={},{[a]:p,...m}=o;if(Object.entries(m||{}).forEach(([x,b])=>{const{vars:w,css:k,varsWithDefaults:C}=jb(b,e);h=Ws(h,C),f[x]={css:k,vars:w}}),p){const{css:x,vars:b,varsWithDefaults:w}=jb(p,e);h=Ws(h,w),f[a]={css:x,vars:b}}function y(x,b){var k,C;let w=s;if(s==="class"&&(w=".%s"),s==="data"&&(w="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(w=`[${s}="%s"]`),x){if(w==="media")return t.defaultColorScheme===x?":root":{[`@media (prefers-color-scheme: ${((C=(k=o[x])==null?void 0:k.palette)==null?void 0:C.mode)||x})`]:{":root":b}};if(w)return t.defaultColorScheme===x?`:root, ${w.replace("%s",String(x))}`:w.replace("%s",String(x))}return":root"}return{vars:h,generateThemeVars:()=>{let x={...l};return Object.entries(f).forEach(([,{vars:b}])=>{x=Ws(x,b)}),x},generateStyleSheets:()=>{var $,E;const x=[],b=t.defaultColorScheme||"light";function w(S,R){Object.keys(R).length&&x.push(typeof S=="string"?{[S]:{...R}}:S)}w(n(void 0,{...c}),c);const{[b]:k,...C}=f;if(k){const{css:S}=k,R=(E=($=o[b])==null?void 0:$.palette)==null?void 0:E.mode,T=!r&&R?{colorScheme:R,...S}:{...S};w(n(b,{...T}),T)}return Object.entries(C).forEach(([S,{css:R}])=>{var I,A;const T=(A=(I=o[S])==null?void 0:I.palette)==null?void 0:A.mode,P=!r&&T?{colorScheme:T,...R}:{...R};w(n(S,{...P}),P)}),x}}}function _te(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const Nte={black:"#000",white:"#fff"},Kf=Nte,Rte={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Ate=Rte,Dte={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},nc=Dte,Ote={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},rc=Ote,Pte={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Sh=Pte,Lte={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},sc=Lte,Fte={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},oc=Fte,Mte={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},ic=Mte;function iM(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Kf.white,default:Kf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const zte=iM();function aM(){return{text:{primary:Kf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Kf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const nR=aM();function rR(t,e,n,r){const s=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=B2(t.main,s):e==="dark"&&(t.dark=z2(t.main,o)))}function Bte(t="light"){return t==="dark"?{main:sc[200],light:sc[50],dark:sc[400]}:{main:sc[700],light:sc[400],dark:sc[800]}}function Vte(t="light"){return t==="dark"?{main:nc[200],light:nc[50],dark:nc[400]}:{main:nc[500],light:nc[300],dark:nc[700]}}function Ute(t="light"){return t==="dark"?{main:rc[500],light:rc[300],dark:rc[700]}:{main:rc[700],light:rc[400],dark:rc[800]}}function Wte(t="light"){return t==="dark"?{main:oc[400],light:oc[300],dark:oc[700]}:{main:oc[700],light:oc[500],dark:oc[900]}}function jte(t="light"){return t==="dark"?{main:ic[400],light:ic[300],dark:ic[700]}:{main:ic[800],light:ic[500],dark:ic[900]}}function Gte(t="light"){return t==="dark"?{main:Sh[400],light:Sh[300],dark:Sh[700]}:{main:"#ed6c02",light:Sh[500],dark:Sh[900]}}function j2(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=t,o=t.primary||Bte(e),i=t.secondary||Vte(e),a=t.error||Ute(e),u=t.info||Wte(e),l=t.success||jte(e),c=t.warning||Gte(e);function d(m){return lte(m,nR.text.primary)>=n?nR.text.primary:zte.text.primary}const h=({color:m,name:y,mainShade:g=500,lightShade:v=300,darkShade:x=700})=>{if(m={...m},!m.main&&m[g]&&(m.main=m[g]),!m.hasOwnProperty("main"))throw new Error(pu(11,y?` (${y})`:"",g));if(typeof m.main!="string")throw new Error(pu(12,y?` (${y})`:"",JSON.stringify(m.main)));return rR(m,"light",v,r),rR(m,"dark",x,r),m.contrastText||(m.contrastText=d(m.main)),m};let f;return e==="light"?f=iM():e==="dark"&&(f=aM()),Ws({common:{...Kf},mode:e,primary:h({color:o,name:"primary"}),secondary:h({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:u,name:"info"}),success:h({color:l,name:"success"}),grey:Ate,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r,...f},s)}function Hte(t){const e={};return Object.entries(t).forEach(r=>{const[s,o]=r;typeof o=="object"&&(e[s]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function Kte(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function qte(t){return Math.round(t*1e5)/1e5}const sR={textTransform:"uppercase"},oR='"Roboto", "Helvetica", "Arial", sans-serif';function lM(t,e){const{fontFamily:n=oR,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:i=500,fontWeightBold:a=700,htmlFontSize:u=16,allVariants:l,pxToRem:c,...d}=typeof e=="function"?e(t):e,h=r/14,f=c||(y=>`${y/u*h}rem`),p=(y,g,v,x,b)=>({fontFamily:n,fontWeight:y,fontSize:f(g),lineHeight:v,...n===oR?{letterSpacing:`${qte(x/g)}em`}:{},...b,...l}),m={h1:p(s,96,1.167,-1.5),h2:p(s,60,1.2,-.5),h3:p(o,48,1.167,0),h4:p(o,34,1.235,.25),h5:p(o,24,1.334,0),h6:p(i,20,1.6,.15),subtitle1:p(o,16,1.75,.15),subtitle2:p(i,14,1.57,.1),body1:p(o,16,1.5,.15),body2:p(o,14,1.43,.15),button:p(i,14,1.75,.4,sR),caption:p(o,12,1.66,.4),overline:p(o,12,2.66,1,sR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ws({htmlFontSize:u,pxToRem:f,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:i,fontWeightBold:a,...m},d,{clone:!1})}const Xte=.2,Yte=.14,Zte=.12;function bn(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Xte})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Yte})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Zte})`].join(",")}const Qte=["none",bn(0,2,1,-1,0,1,1,0,0,1,3,0),bn(0,3,1,-2,0,2,2,0,0,1,5,0),bn(0,3,3,-2,0,3,4,0,0,1,8,0),bn(0,2,4,-1,0,4,5,0,0,1,10,0),bn(0,3,5,-1,0,5,8,0,0,1,14,0),bn(0,3,5,-1,0,6,10,0,0,1,18,0),bn(0,4,5,-2,0,7,10,1,0,2,16,1),bn(0,5,5,-3,0,8,10,1,0,3,14,2),bn(0,5,6,-3,0,9,12,1,0,3,16,2),bn(0,6,6,-3,0,10,14,1,0,4,18,3),bn(0,6,7,-4,0,11,15,1,0,4,20,3),bn(0,7,8,-4,0,12,17,2,0,5,22,4),bn(0,7,8,-4,0,13,19,2,0,5,24,4),bn(0,7,9,-4,0,14,21,2,0,5,26,4),bn(0,8,9,-5,0,15,22,2,0,6,28,5),bn(0,8,10,-5,0,16,24,2,0,6,30,5),bn(0,8,11,-5,0,17,26,2,0,6,32,5),bn(0,9,11,-5,0,18,28,2,0,7,34,6),bn(0,9,12,-6,0,19,29,2,0,7,36,6),bn(0,10,13,-6,0,20,31,3,0,8,38,7),bn(0,10,13,-6,0,21,33,3,0,8,40,7),bn(0,10,14,-6,0,22,35,3,0,8,42,7),bn(0,11,14,-7,0,23,36,3,0,9,44,8),bn(0,11,15,-7,0,24,38,3,0,9,46,8)],Jte=Qte,ene={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},tne={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function iR(t){return`${Math.round(t)}ms`}function nne(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function rne(t){const e={...ene,...t.easing},n={...tne,...t.duration};return{getAutoHeightDuration:nne,create:(s=["all"],o={})=>{const{duration:i=n.standard,easing:a=e.easeInOut,delay:u=0,...l}=o;return(Array.isArray(s)?s:[s]).map(c=>`${c} ${typeof i=="string"?i:iR(i)} ${a} ${typeof u=="string"?u:iR(u)}`).join(",")},...t,easing:e,duration:n}}const sne={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},one=sne;function ine(t){return Ra(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function uM(t={}){const e={...t};function n(r){const s=Object.entries(r);for(let o=0;o<s.length;o++){const[i,a]=s[o];!ine(a)||i.startsWith("unstable_")?delete r[i]:Ra(a)&&(r[i]={...a},n(r[i]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function sk(t={},...e){const{breakpoints:n,mixins:r={},spacing:s,palette:o={},transitions:i={},typography:a={},shape:u,...l}=t;if(t.vars)throw new Error(pu(20));const c=j2(o),d=nte(t);let h=Ws(d,{mixins:Kte(d.breakpoints,r),palette:c,shadows:Jte.slice(),typography:lM(c,a),transitions:rne(i),zIndex:{...one}});return h=Ws(h,l),h=e.reduce((f,p)=>Ws(f,p),h),h.unstable_sxConfig={...iv,...l==null?void 0:l.unstable_sxConfig},h.unstable_sx=function(p){return av({sx:p,theme:this})},h.toRuntimeSource=uM,h}function ane(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const lne=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=ane(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function cM(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function dM(t){return t==="dark"?lne:[]}function une(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...s}=t,o=j2(e);return{palette:o,opacity:{...cM(o.mode),...n},overlays:r||dM(o.mode),...s}}function cne(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const dne=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],hne=dne,fne=t=>(e,n)=>{const r=t.rootSelector||":root",s=t.colorSchemeSelector;let o=s;if(s==="class"&&(o=".%s"),s==="data"&&(o="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(o=`[${s}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const i={};return hne(t.cssVarPrefix).forEach(a=>{i[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",e)]:i,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...i}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function pne(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function we(t,e,n){!t[e]&&n&&(t[e]=n)}function Vh(t){return typeof t!="string"||!t.startsWith("hsl")?t:eM(t)}function Mi(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Bh(Vh(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function mne(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Jo=t=>{try{return t()}catch{}},gne=(t="mui")=>$te(t);function Gb(t,e,n,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!n){t[r]=une({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:o,...i}=sk({...n,palette:{mode:s,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...cM(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||dM(s)},i}function yne(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:i=cne,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:u=":root",...l}=t,c=Object.keys(n)[0],d=r||(n.light&&c!=="light"?"light":c),h=gne(o),{[d]:f,light:p,dark:m,...y}=n,g={...y};let v=f;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(v=!0),!v)throw new Error(pu(21,d));const x=Gb(g,v,l,d);p&&!g.light&&Gb(g,p,void 0,"light"),m&&!g.dark&&Gb(g,m,void 0,"dark");let b={defaultColorScheme:d,...x,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:u,getCssVar:h,colorSchemes:g,font:{...Hte(x.typography),...x.font},spacing:mne(l.spacing)};Object.keys(b.colorSchemes).forEach(E=>{const S=b.colorSchemes[E].palette,R=T=>{const P=T.split("-"),I=P[1],A=P[2];return h(T,S[I][A])};if(S.mode==="light"&&(we(S.common,"background","#fff"),we(S.common,"onBackground","#000")),S.mode==="dark"&&(we(S.common,"background","#000"),we(S.common,"onBackground","#fff")),pne(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){we(S.Alert,"errorColor",Jt(S.error.light,.6)),we(S.Alert,"infoColor",Jt(S.info.light,.6)),we(S.Alert,"successColor",Jt(S.success.light,.6)),we(S.Alert,"warningColor",Jt(S.warning.light,.6)),we(S.Alert,"errorFilledBg",R("palette-error-main")),we(S.Alert,"infoFilledBg",R("palette-info-main")),we(S.Alert,"successFilledBg",R("palette-success-main")),we(S.Alert,"warningFilledBg",R("palette-warning-main")),we(S.Alert,"errorFilledColor",Jo(()=>S.getContrastText(S.error.main))),we(S.Alert,"infoFilledColor",Jo(()=>S.getContrastText(S.info.main))),we(S.Alert,"successFilledColor",Jo(()=>S.getContrastText(S.success.main))),we(S.Alert,"warningFilledColor",Jo(()=>S.getContrastText(S.warning.main))),we(S.Alert,"errorStandardBg",en(S.error.light,.9)),we(S.Alert,"infoStandardBg",en(S.info.light,.9)),we(S.Alert,"successStandardBg",en(S.success.light,.9)),we(S.Alert,"warningStandardBg",en(S.warning.light,.9)),we(S.Alert,"errorIconColor",R("palette-error-main")),we(S.Alert,"infoIconColor",R("palette-info-main")),we(S.Alert,"successIconColor",R("palette-success-main")),we(S.Alert,"warningIconColor",R("palette-warning-main")),we(S.AppBar,"defaultBg",R("palette-grey-100")),we(S.Avatar,"defaultBg",R("palette-grey-400")),we(S.Button,"inheritContainedBg",R("palette-grey-300")),we(S.Button,"inheritContainedHoverBg",R("palette-grey-A100")),we(S.Chip,"defaultBorder",R("palette-grey-400")),we(S.Chip,"defaultAvatarColor",R("palette-grey-700")),we(S.Chip,"defaultIconColor",R("palette-grey-700")),we(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),we(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),we(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),we(S.LinearProgress,"primaryBg",en(S.primary.main,.62)),we(S.LinearProgress,"secondaryBg",en(S.secondary.main,.62)),we(S.LinearProgress,"errorBg",en(S.error.main,.62)),we(S.LinearProgress,"infoBg",en(S.info.main,.62)),we(S.LinearProgress,"successBg",en(S.success.main,.62)),we(S.LinearProgress,"warningBg",en(S.warning.main,.62)),we(S.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.11)`),we(S.Slider,"primaryTrack",en(S.primary.main,.62)),we(S.Slider,"secondaryTrack",en(S.secondary.main,.62)),we(S.Slider,"errorTrack",en(S.error.main,.62)),we(S.Slider,"infoTrack",en(S.info.main,.62)),we(S.Slider,"successTrack",en(S.success.main,.62)),we(S.Slider,"warningTrack",en(S.warning.main,.62));const T=Ng(S.background.default,.8);we(S.SnackbarContent,"bg",T),we(S.SnackbarContent,"color",Jo(()=>S.getContrastText(T))),we(S.SpeedDialAction,"fabHoverBg",Ng(S.background.paper,.15)),we(S.StepConnector,"border",R("palette-grey-400")),we(S.StepContent,"border",R("palette-grey-400")),we(S.Switch,"defaultColor",R("palette-common-white")),we(S.Switch,"defaultDisabledColor",R("palette-grey-100")),we(S.Switch,"primaryDisabledColor",en(S.primary.main,.62)),we(S.Switch,"secondaryDisabledColor",en(S.secondary.main,.62)),we(S.Switch,"errorDisabledColor",en(S.error.main,.62)),we(S.Switch,"infoDisabledColor",en(S.info.main,.62)),we(S.Switch,"successDisabledColor",en(S.success.main,.62)),we(S.Switch,"warningDisabledColor",en(S.warning.main,.62)),we(S.TableCell,"border",en(_g(S.divider,1),.88)),we(S.Tooltip,"bg",_g(S.grey[700],.92))}if(S.mode==="dark"){we(S.Alert,"errorColor",en(S.error.light,.6)),we(S.Alert,"infoColor",en(S.info.light,.6)),we(S.Alert,"successColor",en(S.success.light,.6)),we(S.Alert,"warningColor",en(S.warning.light,.6)),we(S.Alert,"errorFilledBg",R("palette-error-dark")),we(S.Alert,"infoFilledBg",R("palette-info-dark")),we(S.Alert,"successFilledBg",R("palette-success-dark")),we(S.Alert,"warningFilledBg",R("palette-warning-dark")),we(S.Alert,"errorFilledColor",Jo(()=>S.getContrastText(S.error.dark))),we(S.Alert,"infoFilledColor",Jo(()=>S.getContrastText(S.info.dark))),we(S.Alert,"successFilledColor",Jo(()=>S.getContrastText(S.success.dark))),we(S.Alert,"warningFilledColor",Jo(()=>S.getContrastText(S.warning.dark))),we(S.Alert,"errorStandardBg",Jt(S.error.light,.9)),we(S.Alert,"infoStandardBg",Jt(S.info.light,.9)),we(S.Alert,"successStandardBg",Jt(S.success.light,.9)),we(S.Alert,"warningStandardBg",Jt(S.warning.light,.9)),we(S.Alert,"errorIconColor",R("palette-error-main")),we(S.Alert,"infoIconColor",R("palette-info-main")),we(S.Alert,"successIconColor",R("palette-success-main")),we(S.Alert,"warningIconColor",R("palette-warning-main")),we(S.AppBar,"defaultBg",R("palette-grey-900")),we(S.AppBar,"darkBg",R("palette-background-paper")),we(S.AppBar,"darkColor",R("palette-text-primary")),we(S.Avatar,"defaultBg",R("palette-grey-600")),we(S.Button,"inheritContainedBg",R("palette-grey-800")),we(S.Button,"inheritContainedHoverBg",R("palette-grey-700")),we(S.Chip,"defaultBorder",R("palette-grey-700")),we(S.Chip,"defaultAvatarColor",R("palette-grey-300")),we(S.Chip,"defaultIconColor",R("palette-grey-300")),we(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),we(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),we(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),we(S.LinearProgress,"primaryBg",Jt(S.primary.main,.5)),we(S.LinearProgress,"secondaryBg",Jt(S.secondary.main,.5)),we(S.LinearProgress,"errorBg",Jt(S.error.main,.5)),we(S.LinearProgress,"infoBg",Jt(S.info.main,.5)),we(S.LinearProgress,"successBg",Jt(S.success.main,.5)),we(S.LinearProgress,"warningBg",Jt(S.warning.main,.5)),we(S.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.13)`),we(S.Slider,"primaryTrack",Jt(S.primary.main,.5)),we(S.Slider,"secondaryTrack",Jt(S.secondary.main,.5)),we(S.Slider,"errorTrack",Jt(S.error.main,.5)),we(S.Slider,"infoTrack",Jt(S.info.main,.5)),we(S.Slider,"successTrack",Jt(S.success.main,.5)),we(S.Slider,"warningTrack",Jt(S.warning.main,.5));const T=Ng(S.background.default,.98);we(S.SnackbarContent,"bg",T),we(S.SnackbarContent,"color",Jo(()=>S.getContrastText(T))),we(S.SpeedDialAction,"fabHoverBg",Ng(S.background.paper,.15)),we(S.StepConnector,"border",R("palette-grey-600")),we(S.StepContent,"border",R("palette-grey-600")),we(S.Switch,"defaultColor",R("palette-grey-300")),we(S.Switch,"defaultDisabledColor",R("palette-grey-600")),we(S.Switch,"primaryDisabledColor",Jt(S.primary.main,.55)),we(S.Switch,"secondaryDisabledColor",Jt(S.secondary.main,.55)),we(S.Switch,"errorDisabledColor",Jt(S.error.main,.55)),we(S.Switch,"infoDisabledColor",Jt(S.info.main,.55)),we(S.Switch,"successDisabledColor",Jt(S.success.main,.55)),we(S.Switch,"warningDisabledColor",Jt(S.warning.main,.55)),we(S.TableCell,"border",Jt(_g(S.divider,1),.68)),we(S.Tooltip,"bg",_g(S.grey[700],.92))}Mi(S.background,"default"),Mi(S.background,"paper"),Mi(S.common,"background"),Mi(S.common,"onBackground"),Mi(S,"divider"),Object.keys(S).forEach(T=>{const P=S[T];T!=="tonalOffset"&&P&&typeof P=="object"&&(P.main&&we(S[T],"mainChannel",Bh(Vh(P.main))),P.light&&we(S[T],"lightChannel",Bh(Vh(P.light))),P.dark&&we(S[T],"darkChannel",Bh(Vh(P.dark))),P.contrastText&&we(S[T],"contrastTextChannel",Bh(Vh(P.contrastText))),T==="text"&&(Mi(S[T],"primary"),Mi(S[T],"secondary")),T==="action"&&(P.active&&Mi(S[T],"active"),P.selected&&Mi(S[T],"selected")))})}),b=e.reduce((E,S)=>Ws(E,S),b);const w={prefix:o,disableCssColorScheme:s,shouldSkipGeneratingVar:i,getSelector:fne(b)},{vars:k,generateThemeVars:C,generateStyleSheets:$}=Tte(b,w);return b.vars=k,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach(([E,S])=>{b[E]=S}),b.generateThemeVars=C,b.generateStyleSheets=$,b.generateSpacing=function(){return QF(l.spacing,L2(this))},b.getColorSchemeSelector=_te(a),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=i,b.unstable_sxConfig={...iv,...l==null?void 0:l.unstable_sxConfig},b.unstable_sx=function(S){return av({sx:S,theme:this})},b.toRuntimeSource=uM,b}function aR(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:j2({...n===!0?{}:n.palette,mode:e})})}function vne(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...i}=t,a=o||"light",u=s==null?void 0:s[a],l={...s,...n?{[a]:{...typeof u!="boolean"&&u,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return sk(t,...e);let c=n;"palette"in t||l[a]&&(l[a]!==!0?c=l[a].palette:a==="dark"&&(c={mode:"dark"}));const d=sk({...t,palette:c},...e);return d.defaultColorScheme=a,d.colorSchemes=l,d.palette.mode==="light"&&(d.colorSchemes.light={...l.light!==!0&&l.light,palette:d.palette},aR(d,"dark",l.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...l.dark!==!0&&l.dark,palette:d.palette},aR(d,"light",l.light)),d}return!n&&!("light"in l)&&a==="light"&&(l.light=!0),yne({...i,colorSchemes:l,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}function lR({theme:t,...e}){const n=Uc in t?t[Uc]:void 0;return be.jsx(sM,{...e,themeId:n?Uc:void 0,theme:n||t})}const Rg={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:xne,useColorScheme:xze,getInitColorSchemeScript:bze}=Cte({themeId:Uc,theme:()=>vne({cssVariables:!0}),colorSchemeStorageKey:Rg.colorSchemeStorageKey,modeStorageKey:Rg.modeStorageKey,defaultColorScheme:{light:Rg.defaultLightColorScheme,dark:Rg.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:lM(t.palette,t.typography)};return e.unstable_sx=function(r){return av({sx:r,theme:this})},e}}),bne=xne;function wne({theme:t,...e}){return typeof t=="function"?be.jsx(lR,{theme:t,...e}):"colorSchemes"in(Uc in t?t[Uc]:t)?be.jsx(bne,{theme:t,...e}):be.jsx(lR,{theme:t,...e})}const Sne="#008297",kne="#444",Cne="_container_vq5ms_3",uR={primary:Sne,textDark:kne,container:Cne};function $ne(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ji(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function hM(t){if(K.isValidElement(t)||!ji(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=hM(t[n])}),e}function js(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return ji(t)&&ji(e)&&Object.keys(e).forEach(s=>{K.isValidElement(e[s])?r[s]=e[s]:ji(e[s])&&Object.prototype.hasOwnProperty.call(t,s)&&ji(t[s])?r[s]=js(t[s],e[s],n):n.clone?r[s]=ji(e[s])?hM(e[s]):e[s]:r[s]=e[s]}),r}var fM={exports:{}},Hb,cR;function Ine(){if(cR)return Hb;cR=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Hb=t,Hb}var Kb,dR;function Ene(){if(dR)return Kb;dR=1;var t=Ine();function e(){}function n(){}return n.resetWarningCache=e,Kb=function(){function r(i,a,u,l,c,d){if(d!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function s(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},Kb}fM.exports=Ene()();var Tne=fM.exports;const x0=$ne(Tne);function mu(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function Fn(t){if(typeof t!="string")throw new Error(mu(7));return t.charAt(0).toUpperCase()+t.slice(1)}const hR=t=>t,_ne=()=>{let t=hR;return{configure(e){t=e},generate(e){return t(e)},reset(){t=hR}}},Nne=_ne(),Rne={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function $p(t,e,n="Mui"){const r=Rne[e];return r?`${n}-${r}`:`${Nne.generate(t)}-${e}`}function Ane(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function hf(t,e){return e?js(t,e,{clone:!1}):t}function Dne(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var o,i;const a=/min-width:\s*([0-9.]+)/;return+(((o=r.match(a))==null?void 0:o[1])||0)-+(((i=s.match(a))==null?void 0:i[1])||0)});return n.length?n.reduce((r,s)=>{const o=e[s];return delete r[s],r[s]=o,r},{...e}):e}function One(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function Pne(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(s).up(o)}function Lne(t){const e=(o,i)=>o.replace("@media",i?`@container ${i}`:"@container");function n(o,i){o.up=(...a)=>e(t.breakpoints.up(...a),i),o.down=(...a)=>e(t.breakpoints.down(...a),i),o.between=(...a)=>e(t.breakpoints.between(...a),i),o.only=(...a)=>e(t.breakpoints.only(...a),i),o.not=(...a)=>{const u=e(t.breakpoints.not(...a),i);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},s=o=>(n(r,o),r);return n(s),{...t,containerQueries:s}}const uv={xs:0,sm:600,md:900,lg:1200,xl:1536},fR={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${uv[t]}px)`},Fne={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:uv[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function ra(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||fR;return e.reduce((o,i,a)=>(o[s.up(s.keys[a])]=n(e[a]),o),{})}if(typeof e=="object"){const s=r.breakpoints||fR;return Object.keys(e).reduce((o,i)=>{if(One(s.keys,i)){const a=Pne(r.containerQueries?r:Fne,i);a&&(o[a]=n(e[i],i))}else if(Object.keys(s.values||uv).includes(i)){const a=s.up(i);o[a]=n(e[i],i)}else{const a=i;o[a]=e[a]}return o},{})}return n(e)}function Mne(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((n,r)=>{const s=t.up(r);return n[s]={},n},{}))||{}}function zne(t,e){return t.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function cv(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,t)}function dy(t,e,n,r=n){let s;return typeof t=="function"?s=t(n):Array.isArray(t)?s=t[n]||r:s=cv(t,n)||r,e&&(s=e(s,r,t)),s}function Yn(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:s}=t,o=i=>{if(i[e]==null)return null;const a=i[e],u=i.theme,l=cv(u,r)||{};return ra(i,a,c=>{let d=dy(l,s,c);return c===d&&typeof c=="string"&&(d=dy(l,s,`${e}${c==="default"?"":Fn(c)}`,c)),n===!1?d:{[n]:d}})};return o.propTypes={},o.filterProps=[e],o}function Bne(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Vne={m:"margin",p:"padding"},Une={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},pR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Wne=Bne(t=>{if(t.length>2)if(pR[t])t=pR[t];else return[t];const[e,n]=t.split(""),r=Vne[e],s=Une[n]||"";return Array.isArray(s)?s.map(o=>r+o):[r+s]}),G2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],H2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...G2,...H2];function Ip(t,e,n,r){const s=cv(t,e,!0)??n;return typeof s=="number"||typeof s=="string"?o=>typeof o=="string"?o:typeof s=="string"?`calc(${o} * ${s})`:s*o:Array.isArray(s)?o=>{if(typeof o=="string")return o;const i=Math.abs(o),a=s[i];return o>=0?a:typeof a=="number"?-a:`-${a}`}:typeof s=="function"?s:()=>{}}function K2(t){return Ip(t,"spacing",8)}function Ep(t,e){return typeof e=="string"||e==null?e:t(e)}function jne(t,e){return n=>t.reduce((r,s)=>(r[s]=Ep(e,n),r),{})}function Gne(t,e,n,r){if(!e.includes(n))return null;const s=Wne(n),o=jne(s,r),i=t[n];return ra(t,i,o)}function pM(t,e){const n=K2(t.theme);return Object.keys(t).map(r=>Gne(t,e,r,n)).reduce(hf,{})}function On(t){return pM(t,G2)}On.propTypes={};On.filterProps=G2;function Pn(t){return pM(t,H2)}Pn.propTypes={};Pn.filterProps=H2;function dv(...t){const e=t.reduce((r,s)=>(s.filterProps.forEach(o=>{r[o]=s}),r),{}),n=r=>Object.keys(r).reduce((s,o)=>e[o]?hf(s,e[o](r)):s,{});return n.propTypes={},n.filterProps=t.reduce((r,s)=>r.concat(s.filterProps),[]),n}function ao(t){return typeof t!="number"?t:`${t}px solid`}function ko(t,e){return Yn({prop:t,themeKey:"borders",transform:e})}const Hne=ko("border",ao),Kne=ko("borderTop",ao),qne=ko("borderRight",ao),Xne=ko("borderBottom",ao),Yne=ko("borderLeft",ao),Zne=ko("borderColor"),Qne=ko("borderTopColor"),Jne=ko("borderRightColor"),ere=ko("borderBottomColor"),tre=ko("borderLeftColor"),nre=ko("outline",ao),rre=ko("outlineColor"),hv=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Ip(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Ep(e,r)});return ra(t,t.borderRadius,n)}return null};hv.propTypes={};hv.filterProps=["borderRadius"];dv(Hne,Kne,qne,Xne,Yne,Zne,Qne,Jne,ere,tre,hv,nre,rre);const fv=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Ip(t.theme,"spacing",8),n=r=>({gap:Ep(e,r)});return ra(t,t.gap,n)}return null};fv.propTypes={};fv.filterProps=["gap"];const pv=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Ip(t.theme,"spacing",8),n=r=>({columnGap:Ep(e,r)});return ra(t,t.columnGap,n)}return null};pv.propTypes={};pv.filterProps=["columnGap"];const mv=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Ip(t.theme,"spacing",8),n=r=>({rowGap:Ep(e,r)});return ra(t,t.rowGap,n)}return null};mv.propTypes={};mv.filterProps=["rowGap"];const sre=Yn({prop:"gridColumn"}),ore=Yn({prop:"gridRow"}),ire=Yn({prop:"gridAutoFlow"}),are=Yn({prop:"gridAutoColumns"}),lre=Yn({prop:"gridAutoRows"}),ure=Yn({prop:"gridTemplateColumns"}),cre=Yn({prop:"gridTemplateRows"}),dre=Yn({prop:"gridTemplateAreas"}),hre=Yn({prop:"gridArea"});dv(fv,pv,mv,sre,ore,ire,are,lre,ure,cre,dre,hre);function Gc(t,e){return e==="grey"?e:t}const fre=Yn({prop:"color",themeKey:"palette",transform:Gc}),pre=Yn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Gc}),mre=Yn({prop:"backgroundColor",themeKey:"palette",transform:Gc});dv(fre,pre,mre);function Ls(t){return t<=1&&t!==0?`${t*100}%`:t}const gre=Yn({prop:"width",transform:Ls}),q2=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,s,o,i,a;const u=((o=(s=(r=t.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:o[n])||uv[n];return u?((a=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:a.unit)!=="px"?{maxWidth:`${u}${t.theme.breakpoints.unit}`}:{maxWidth:u}:{maxWidth:Ls(n)}};return ra(t,t.maxWidth,e)}return null};q2.filterProps=["maxWidth"];const yre=Yn({prop:"minWidth",transform:Ls}),vre=Yn({prop:"height",transform:Ls}),xre=Yn({prop:"maxHeight",transform:Ls}),bre=Yn({prop:"minHeight",transform:Ls});Yn({prop:"size",cssProperty:"width",transform:Ls});Yn({prop:"size",cssProperty:"height",transform:Ls});const wre=Yn({prop:"boxSizing"});dv(gre,q2,yre,vre,xre,bre,wre);const gv={border:{themeKey:"borders",transform:ao},borderTop:{themeKey:"borders",transform:ao},borderRight:{themeKey:"borders",transform:ao},borderBottom:{themeKey:"borders",transform:ao},borderLeft:{themeKey:"borders",transform:ao},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ao},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:hv},color:{themeKey:"palette",transform:Gc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Gc},backgroundColor:{themeKey:"palette",transform:Gc},p:{style:Pn},pt:{style:Pn},pr:{style:Pn},pb:{style:Pn},pl:{style:Pn},px:{style:Pn},py:{style:Pn},padding:{style:Pn},paddingTop:{style:Pn},paddingRight:{style:Pn},paddingBottom:{style:Pn},paddingLeft:{style:Pn},paddingX:{style:Pn},paddingY:{style:Pn},paddingInline:{style:Pn},paddingInlineStart:{style:Pn},paddingInlineEnd:{style:Pn},paddingBlock:{style:Pn},paddingBlockStart:{style:Pn},paddingBlockEnd:{style:Pn},m:{style:On},mt:{style:On},mr:{style:On},mb:{style:On},ml:{style:On},mx:{style:On},my:{style:On},margin:{style:On},marginTop:{style:On},marginRight:{style:On},marginBottom:{style:On},marginLeft:{style:On},marginX:{style:On},marginY:{style:On},marginInline:{style:On},marginInlineStart:{style:On},marginInlineEnd:{style:On},marginBlock:{style:On},marginBlockStart:{style:On},marginBlockEnd:{style:On},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:fv},rowGap:{style:mv},columnGap:{style:pv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ls},maxWidth:{style:q2},minWidth:{transform:Ls},height:{transform:Ls},maxHeight:{transform:Ls},minHeight:{transform:Ls},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Sre(...t){const e=t.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function kre(t,e){return typeof t=="function"?t(e):t}function Cre(){function t(n,r,s,o){const i={[n]:r,theme:s},a=o[n];if(!a)return{[n]:r};const{cssProperty:u=n,themeKey:l,transform:c,style:d}=a;if(r==null)return null;if(l==="typography"&&r==="inherit")return{[n]:r};const h=cv(s,l)||{};return d?d(i):ra(i,r,f=>{let p=dy(h,c,f);return f===p&&typeof f=="string"&&(p=dy(h,c,`${n}${f==="default"?"":Fn(f)}`,f)),u===!1?p:{[u]:p}})}function e(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const o=s.unstable_sxConfig??gv;function i(a){let u=a;if(typeof a=="function")u=a(s);else if(typeof a!="object")return a;if(!u)return null;const l=Mne(s.breakpoints),c=Object.keys(l);let d=l;return Object.keys(u).forEach(h=>{const f=kre(u[h],s);if(f!=null)if(typeof f=="object")if(o[h])d=hf(d,t(h,f,s,o));else{const p=ra({theme:s},f,m=>({[h]:m}));Sre(p,f)?d[h]=e({sx:f,theme:s}):d=hf(d,p)}else d=hf(d,t(h,f,s,o))}),Dne(s,zne(c,d))}return Array.isArray(r)?r.map(i):i(r)}return e}const fd=Cre();fd.filterProps=["sx"];const $re=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Ire(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=t,o=$re(e),i=Object.keys(o);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function u(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function l(h,f){const p=i.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[i[p]]=="number"?e[i[p]]:f)-r/100}${n})`}function c(h){return i.indexOf(h)+1<i.length?l(h,i[i.indexOf(h)+1]):a(h)}function d(h){const f=i.indexOf(h);return f===0?a(i[1]):f===i.length-1?u(i[f]):l(h,i[i.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:i,values:o,up:a,down:u,between:l,only:c,not:d,unit:n,...s}}const Ere={borderRadius:4};function mM(t=8,e=K2({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function Tre(t,e){var n;const r=this;if(r.vars){if(!((n=r.colorSchemes)!=null&&n[t])||typeof r.getColorSchemeSelector!="function")return{};let s=r.getColorSchemeSelector(t);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return r.palette.mode===t?e:{}}function gM(t={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:o={},...i}=t,a=Ire(n),u=mM(s);let l=js({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...Ere,...o}},i);return l=Lne(l),l.applyStyles=Tre,l=e.reduce((c,d)=>js(c,d),l),l.unstable_sxConfig={...gv,...i==null?void 0:i.unstable_sxConfig},l.unstable_sx=function(c){return fd({sx:c,theme:this})},l}function X2(t,e=0,n=1){return Ane(t,e,n)}function _re(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function el(t){if(t.type)return t;if(t.charAt(0)==="#")return el(_re(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(mu(9,t));let r=t.substring(e+1,t.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(mu(10,s))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:s}}const Nre=t=>{const e=el(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Uh=(t,e)=>{try{return Nre(t)}catch{return t}};function yv(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((s,o)=>o<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function yM(t){t=el(t);const{values:e}=t,n=e[0],r=e[1]/100,s=e[2]/100,o=r*Math.min(s,1-s),i=(l,c=(l+n/30)%12)=>s-o*Math.max(Math.min(c-3,9-c,1),-1);let a="rgb";const u=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return t.type==="hsla"&&(a+="a",u.push(e[3])),yv({type:a,values:u})}function ok(t){t=el(t);let e=t.type==="hsl"||t.type==="hsla"?el(yM(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Rre(t,e){const n=ok(t),r=ok(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function yc(t,e){return t=el(t),e=X2(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,yv(t)}function Ag(t,e,n){try{return yc(t,e)}catch{return t}}function Y2(t,e){if(t=el(t),e=X2(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return yv(t)}function tn(t,e,n){try{return Y2(t,e)}catch{return t}}function Z2(t,e){if(t=el(t),e=X2(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return yv(t)}function nn(t,e,n){try{return Z2(t,e)}catch{return t}}function Are(t,e=.15){return ok(t)>.5?Y2(t,e):Z2(t,e)}function Dg(t,e,n){try{return Are(t,e)}catch{return t}}function Dre(t=""){function e(...n){if(!n.length)return"";const r=n[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${r}${e(...n.slice(1))})`:`, ${r}`}return(n,...r)=>`var(--${t?`${t}-`:""}${n}${e(...r)})`}const mR=(t,e,n,r=[])=>{let s=t;e.forEach((o,i)=>{i===e.length-1?Array.isArray(s)?s[Number(o)]=n:s&&typeof s=="object"&&(s[o]=n):s&&typeof s=="object"&&(s[o]||(s[o]=r.includes(o)?[]:{}),s=s[o])})},Ore=(t,e,n)=>{function r(s,o=[],i=[]){Object.entries(s).forEach(([a,u])=>{(!n||n&&!n([...o,a]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...o,a],Array.isArray(u)?[...i,a]:i):e([...o,a],u,i))})}r(t)},Pre=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>t.includes(n))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function qb(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},s={},o={},i={};return Ore(t,(a,u,l)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(a,u))){const c=`--${n?`${n}-`:""}${a.join("-")}`,d=Pre(a,u);Object.assign(s,{[c]:d}),mR(o,a,`var(${c})`,l),mR(i,a,`var(${c}, ${d})`,l)}},a=>a[0]==="vars"),{css:s,vars:o,varsWithDefaults:i}}function Lre(t,e={}){const{getSelector:n=y,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:o={},components:i,defaultColorScheme:a="light",...u}=t,{vars:l,css:c,varsWithDefaults:d}=qb(u,e);let h=d;const f={},{[a]:p,...m}=o;if(Object.entries(m||{}).forEach(([g,v])=>{const{vars:x,css:b,varsWithDefaults:w}=qb(v,e);h=js(h,w),f[g]={css:b,vars:x}}),p){const{css:g,vars:v,varsWithDefaults:x}=qb(p,e);h=js(h,x),f[a]={css:g,vars:v}}function y(g,v){var x,b;let w=s;if(s==="class"&&(w=".%s"),s==="data"&&(w="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(w=`[${s}="%s"]`),g){if(w==="media")return t.defaultColorScheme===g?":root":{[`@media (prefers-color-scheme: ${((b=(x=o[g])==null?void 0:x.palette)==null?void 0:b.mode)||g})`]:{":root":v}};if(w)return t.defaultColorScheme===g?`:root, ${w.replace("%s",String(g))}`:w.replace("%s",String(g))}return":root"}return{vars:h,generateThemeVars:()=>{let g={...l};return Object.entries(f).forEach(([,{vars:v}])=>{g=js(g,v)}),g},generateStyleSheets:()=>{var g,v;const x=[],b=t.defaultColorScheme||"light";function w($,E){Object.keys(E).length&&x.push(typeof $=="string"?{[$]:{...E}}:$)}w(n(void 0,{...c}),c);const{[b]:k,...C}=f;if(k){const{css:$}=k,E=(v=(g=o[b])==null?void 0:g.palette)==null?void 0:v.mode,S=!r&&E?{colorScheme:E,...$}:{...$};w(n(b,{...S}),S)}return Object.entries(C).forEach(([$,{css:E}])=>{var S,R;const T=(R=(S=o[$])==null?void 0:S.palette)==null?void 0:R.mode,P=!r&&T?{colorScheme:T,...E}:{...E};w(n($,{...P}),P)}),x}}}function Fre(t){return function(e){return t==="media"?`@media (prefers-color-scheme: ${e})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${e}"] &`:t==="class"?`.${e} &`:t==="data"?`[data-${e}] &`:`${t.replace("%s",e)} &`:"&"}}const qf={black:"#000",white:"#fff"},Mre={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ac={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},lc={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},kh={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},uc={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},cc={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},dc={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function vM(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:qf.white,default:qf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const zre=vM();function xM(){return{text:{primary:qf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:qf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const gR=xM();function yR(t,e,n,r){const s=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Z2(t.main,s):e==="dark"&&(t.dark=Y2(t.main,o)))}function Bre(t="light"){return t==="dark"?{main:uc[200],light:uc[50],dark:uc[400]}:{main:uc[700],light:uc[400],dark:uc[800]}}function Vre(t="light"){return t==="dark"?{main:ac[200],light:ac[50],dark:ac[400]}:{main:ac[500],light:ac[300],dark:ac[700]}}function Ure(t="light"){return t==="dark"?{main:lc[500],light:lc[300],dark:lc[700]}:{main:lc[700],light:lc[400],dark:lc[800]}}function Wre(t="light"){return t==="dark"?{main:cc[400],light:cc[300],dark:cc[700]}:{main:cc[700],light:cc[500],dark:cc[900]}}function jre(t="light"){return t==="dark"?{main:dc[400],light:dc[300],dark:dc[700]}:{main:dc[800],light:dc[500],dark:dc[900]}}function Gre(t="light"){return t==="dark"?{main:kh[400],light:kh[300],dark:kh[700]}:{main:"#ed6c02",light:kh[500],dark:kh[900]}}function Q2(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=t,o=t.primary||Bre(e),i=t.secondary||Vre(e),a=t.error||Ure(e),u=t.info||Wre(e),l=t.success||jre(e),c=t.warning||Gre(e);function d(p){return Rre(p,gR.text.primary)>=n?gR.text.primary:zre.text.primary}const h=({color:p,name:m,mainShade:y=500,lightShade:g=300,darkShade:v=700})=>{if(p={...p},!p.main&&p[y]&&(p.main=p[y]),!p.hasOwnProperty("main"))throw new Error(mu(11,m?` (${m})`:"",y));if(typeof p.main!="string")throw new Error(mu(12,m?` (${m})`:"",JSON.stringify(p.main)));return yR(p,"light",g,r),yR(p,"dark",v,r),p.contrastText||(p.contrastText=d(p.main)),p};let f;return e==="light"?f=vM():e==="dark"&&(f=xM()),js({common:{...qf},mode:e,primary:h({color:o,name:"primary"}),secondary:h({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:u,name:"info"}),success:h({color:l,name:"success"}),grey:Mre,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r,...f},s)}function Hre(t){const e={};return Object.entries(t).forEach(n=>{const[r,s]=n;typeof s=="object"&&(e[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function Kre(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function qre(t){return Math.round(t*1e5)/1e5}const vR={textTransform:"uppercase"},xR='"Roboto", "Helvetica", "Arial", sans-serif';function Xre(t,e){const{fontFamily:n=xR,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:i=500,fontWeightBold:a=700,htmlFontSize:u=16,allVariants:l,pxToRem:c,...d}=typeof e=="function"?e(t):e,h=r/14,f=c||(y=>`${y/u*h}rem`),p=(y,g,v,x,b)=>({fontFamily:n,fontWeight:y,fontSize:f(g),lineHeight:v,...n===xR?{letterSpacing:`${qre(x/g)}em`}:{},...b,...l}),m={h1:p(s,96,1.167,-1.5),h2:p(s,60,1.2,-.5),h3:p(o,48,1.167,0),h4:p(o,34,1.235,.25),h5:p(o,24,1.334,0),h6:p(i,20,1.6,.15),subtitle1:p(o,16,1.75,.15),subtitle2:p(i,14,1.57,.1),body1:p(o,16,1.5,.15),body2:p(o,14,1.43,.15),button:p(i,14,1.75,.4,vR),caption:p(o,12,1.66,.4),overline:p(o,12,2.66,1,vR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return js({htmlFontSize:u,pxToRem:f,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:i,fontWeightBold:a,...m},d,{clone:!1})}const Yre=.2,Zre=.14,Qre=.12;function wn(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Yre})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Zre})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Qre})`].join(",")}const Jre=["none",wn(0,2,1,-1,0,1,1,0,0,1,3,0),wn(0,3,1,-2,0,2,2,0,0,1,5,0),wn(0,3,3,-2,0,3,4,0,0,1,8,0),wn(0,2,4,-1,0,4,5,0,0,1,10,0),wn(0,3,5,-1,0,5,8,0,0,1,14,0),wn(0,3,5,-1,0,6,10,0,0,1,18,0),wn(0,4,5,-2,0,7,10,1,0,2,16,1),wn(0,5,5,-3,0,8,10,1,0,3,14,2),wn(0,5,6,-3,0,9,12,1,0,3,16,2),wn(0,6,6,-3,0,10,14,1,0,4,18,3),wn(0,6,7,-4,0,11,15,1,0,4,20,3),wn(0,7,8,-4,0,12,17,2,0,5,22,4),wn(0,7,8,-4,0,13,19,2,0,5,24,4),wn(0,7,9,-4,0,14,21,2,0,5,26,4),wn(0,8,9,-5,0,15,22,2,0,6,28,5),wn(0,8,10,-5,0,16,24,2,0,6,30,5),wn(0,8,11,-5,0,17,26,2,0,6,32,5),wn(0,9,11,-5,0,18,28,2,0,7,34,6),wn(0,9,12,-6,0,19,29,2,0,7,36,6),wn(0,10,13,-6,0,20,31,3,0,8,38,7),wn(0,10,13,-6,0,21,33,3,0,8,40,7),wn(0,10,14,-6,0,22,35,3,0,8,42,7),wn(0,11,14,-7,0,23,36,3,0,9,44,8),wn(0,11,15,-7,0,24,38,3,0,9,46,8)],ese={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},tse={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function bR(t){return`${Math.round(t)}ms`}function nse(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function rse(t){const e={...ese,...t.easing},n={...tse,...t.duration};return{getAutoHeightDuration:nse,create:(r=["all"],s={})=>{const{duration:o=n.standard,easing:i=e.easeInOut,delay:a=0,...u}=s;return(Array.isArray(r)?r:[r]).map(l=>`${l} ${typeof o=="string"?o:bR(o)} ${i} ${typeof a=="string"?a:bR(a)}`).join(",")},...t,easing:e,duration:n}}const sse={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function ose(t){return ji(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function bM(t={}){const e={...t};function n(r){const s=Object.entries(r);for(let o=0;o<s.length;o++){const[i,a]=s[o];!ose(a)||i.startsWith("unstable_")?delete r[i]:ji(a)&&(r[i]={...a},n(r[i]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function ik(t={},...e){const{breakpoints:n,mixins:r={},spacing:s,palette:o={},transitions:i={},typography:a={},shape:u,...l}=t;if(t.vars)throw new Error(mu(20));const c=Q2(o),d=gM(t);let h=js(d,{mixins:Kre(d.breakpoints,r),palette:c,shadows:Jre.slice(),typography:Xre(c,a),transitions:rse(i),zIndex:{...sse}});return h=js(h,l),h=e.reduce((f,p)=>js(f,p),h),h.unstable_sxConfig={...gv,...l==null?void 0:l.unstable_sxConfig},h.unstable_sx=function(f){return fd({sx:f,theme:this})},h.toRuntimeSource=bM,h}function ise(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const ase=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=ise(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function wM(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function SM(t){return t==="dark"?ase:[]}function lse(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...s}=t,o=Q2(e);return{palette:o,opacity:{...wM(o.mode),...n},overlays:r||SM(o.mode),...s}}function use(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const cse=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],dse=t=>(e,n)=>{const r=t.rootSelector||":root",s=t.colorSchemeSelector;let o=s;if(s==="class"&&(o=".%s"),s==="data"&&(o="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(o=`[${s}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const i={};return cse(t.cssVarPrefix).forEach(a=>{i[a]=n[a],delete n[a]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",e)]:i,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...i}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function hse(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Se(t,e,n){!t[e]&&n&&(t[e]=n)}function Wh(t){return typeof t!="string"||!t.startsWith("hsl")?t:yM(t)}function zi(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Uh(Wh(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function fse(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const ei=t=>{try{return t()}catch{}},pse=(t="mui")=>Dre(t);function Xb(t,e,n,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!n){t[r]=lse({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:o,...i}=ik({...n,palette:{mode:s,...e==null?void 0:e.palette}});return t[r]={...e,palette:o,opacity:{...wM(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||SM(s)},i}function mse(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:i=use,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:u=":root",...l}=t,c=Object.keys(n)[0],d=r||(n.light&&c!=="light"?"light":c),h=pse(o),{[d]:f,light:p,dark:m,...y}=n,g={...y};let v=f;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(v=!0),!v)throw new Error(mu(21,d));const x=Xb(g,v,l,d);p&&!g.light&&Xb(g,p,void 0,"light"),m&&!g.dark&&Xb(g,m,void 0,"dark");let b={defaultColorScheme:d,...x,cssVarPrefix:o,colorSchemeSelector:a,rootSelector:u,getCssVar:h,colorSchemes:g,font:{...Hre(x.typography),...x.font},spacing:fse(l.spacing)};Object.keys(b.colorSchemes).forEach(E=>{const S=b.colorSchemes[E].palette,R=T=>{const P=T.split("-"),I=P[1],A=P[2];return h(T,S[I][A])};if(S.mode==="light"&&(Se(S.common,"background","#fff"),Se(S.common,"onBackground","#000")),S.mode==="dark"&&(Se(S.common,"background","#000"),Se(S.common,"onBackground","#fff")),hse(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){Se(S.Alert,"errorColor",tn(S.error.light,.6)),Se(S.Alert,"infoColor",tn(S.info.light,.6)),Se(S.Alert,"successColor",tn(S.success.light,.6)),Se(S.Alert,"warningColor",tn(S.warning.light,.6)),Se(S.Alert,"errorFilledBg",R("palette-error-main")),Se(S.Alert,"infoFilledBg",R("palette-info-main")),Se(S.Alert,"successFilledBg",R("palette-success-main")),Se(S.Alert,"warningFilledBg",R("palette-warning-main")),Se(S.Alert,"errorFilledColor",ei(()=>S.getContrastText(S.error.main))),Se(S.Alert,"infoFilledColor",ei(()=>S.getContrastText(S.info.main))),Se(S.Alert,"successFilledColor",ei(()=>S.getContrastText(S.success.main))),Se(S.Alert,"warningFilledColor",ei(()=>S.getContrastText(S.warning.main))),Se(S.Alert,"errorStandardBg",nn(S.error.light,.9)),Se(S.Alert,"infoStandardBg",nn(S.info.light,.9)),Se(S.Alert,"successStandardBg",nn(S.success.light,.9)),Se(S.Alert,"warningStandardBg",nn(S.warning.light,.9)),Se(S.Alert,"errorIconColor",R("palette-error-main")),Se(S.Alert,"infoIconColor",R("palette-info-main")),Se(S.Alert,"successIconColor",R("palette-success-main")),Se(S.Alert,"warningIconColor",R("palette-warning-main")),Se(S.AppBar,"defaultBg",R("palette-grey-100")),Se(S.Avatar,"defaultBg",R("palette-grey-400")),Se(S.Button,"inheritContainedBg",R("palette-grey-300")),Se(S.Button,"inheritContainedHoverBg",R("palette-grey-A100")),Se(S.Chip,"defaultBorder",R("palette-grey-400")),Se(S.Chip,"defaultAvatarColor",R("palette-grey-700")),Se(S.Chip,"defaultIconColor",R("palette-grey-700")),Se(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Se(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Se(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Se(S.LinearProgress,"primaryBg",nn(S.primary.main,.62)),Se(S.LinearProgress,"secondaryBg",nn(S.secondary.main,.62)),Se(S.LinearProgress,"errorBg",nn(S.error.main,.62)),Se(S.LinearProgress,"infoBg",nn(S.info.main,.62)),Se(S.LinearProgress,"successBg",nn(S.success.main,.62)),Se(S.LinearProgress,"warningBg",nn(S.warning.main,.62)),Se(S.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.11)`),Se(S.Slider,"primaryTrack",nn(S.primary.main,.62)),Se(S.Slider,"secondaryTrack",nn(S.secondary.main,.62)),Se(S.Slider,"errorTrack",nn(S.error.main,.62)),Se(S.Slider,"infoTrack",nn(S.info.main,.62)),Se(S.Slider,"successTrack",nn(S.success.main,.62)),Se(S.Slider,"warningTrack",nn(S.warning.main,.62));const T=Dg(S.background.default,.8);Se(S.SnackbarContent,"bg",T),Se(S.SnackbarContent,"color",ei(()=>S.getContrastText(T))),Se(S.SpeedDialAction,"fabHoverBg",Dg(S.background.paper,.15)),Se(S.StepConnector,"border",R("palette-grey-400")),Se(S.StepContent,"border",R("palette-grey-400")),Se(S.Switch,"defaultColor",R("palette-common-white")),Se(S.Switch,"defaultDisabledColor",R("palette-grey-100")),Se(S.Switch,"primaryDisabledColor",nn(S.primary.main,.62)),Se(S.Switch,"secondaryDisabledColor",nn(S.secondary.main,.62)),Se(S.Switch,"errorDisabledColor",nn(S.error.main,.62)),Se(S.Switch,"infoDisabledColor",nn(S.info.main,.62)),Se(S.Switch,"successDisabledColor",nn(S.success.main,.62)),Se(S.Switch,"warningDisabledColor",nn(S.warning.main,.62)),Se(S.TableCell,"border",nn(Ag(S.divider,1),.88)),Se(S.Tooltip,"bg",Ag(S.grey[700],.92))}if(S.mode==="dark"){Se(S.Alert,"errorColor",nn(S.error.light,.6)),Se(S.Alert,"infoColor",nn(S.info.light,.6)),Se(S.Alert,"successColor",nn(S.success.light,.6)),Se(S.Alert,"warningColor",nn(S.warning.light,.6)),Se(S.Alert,"errorFilledBg",R("palette-error-dark")),Se(S.Alert,"infoFilledBg",R("palette-info-dark")),Se(S.Alert,"successFilledBg",R("palette-success-dark")),Se(S.Alert,"warningFilledBg",R("palette-warning-dark")),Se(S.Alert,"errorFilledColor",ei(()=>S.getContrastText(S.error.dark))),Se(S.Alert,"infoFilledColor",ei(()=>S.getContrastText(S.info.dark))),Se(S.Alert,"successFilledColor",ei(()=>S.getContrastText(S.success.dark))),Se(S.Alert,"warningFilledColor",ei(()=>S.getContrastText(S.warning.dark))),Se(S.Alert,"errorStandardBg",tn(S.error.light,.9)),Se(S.Alert,"infoStandardBg",tn(S.info.light,.9)),Se(S.Alert,"successStandardBg",tn(S.success.light,.9)),Se(S.Alert,"warningStandardBg",tn(S.warning.light,.9)),Se(S.Alert,"errorIconColor",R("palette-error-main")),Se(S.Alert,"infoIconColor",R("palette-info-main")),Se(S.Alert,"successIconColor",R("palette-success-main")),Se(S.Alert,"warningIconColor",R("palette-warning-main")),Se(S.AppBar,"defaultBg",R("palette-grey-900")),Se(S.AppBar,"darkBg",R("palette-background-paper")),Se(S.AppBar,"darkColor",R("palette-text-primary")),Se(S.Avatar,"defaultBg",R("palette-grey-600")),Se(S.Button,"inheritContainedBg",R("palette-grey-800")),Se(S.Button,"inheritContainedHoverBg",R("palette-grey-700")),Se(S.Chip,"defaultBorder",R("palette-grey-700")),Se(S.Chip,"defaultAvatarColor",R("palette-grey-300")),Se(S.Chip,"defaultIconColor",R("palette-grey-300")),Se(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Se(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Se(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Se(S.LinearProgress,"primaryBg",tn(S.primary.main,.5)),Se(S.LinearProgress,"secondaryBg",tn(S.secondary.main,.5)),Se(S.LinearProgress,"errorBg",tn(S.error.main,.5)),Se(S.LinearProgress,"infoBg",tn(S.info.main,.5)),Se(S.LinearProgress,"successBg",tn(S.success.main,.5)),Se(S.LinearProgress,"warningBg",tn(S.warning.main,.5)),Se(S.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.13)`),Se(S.Slider,"primaryTrack",tn(S.primary.main,.5)),Se(S.Slider,"secondaryTrack",tn(S.secondary.main,.5)),Se(S.Slider,"errorTrack",tn(S.error.main,.5)),Se(S.Slider,"infoTrack",tn(S.info.main,.5)),Se(S.Slider,"successTrack",tn(S.success.main,.5)),Se(S.Slider,"warningTrack",tn(S.warning.main,.5));const T=Dg(S.background.default,.98);Se(S.SnackbarContent,"bg",T),Se(S.SnackbarContent,"color",ei(()=>S.getContrastText(T))),Se(S.SpeedDialAction,"fabHoverBg",Dg(S.background.paper,.15)),Se(S.StepConnector,"border",R("palette-grey-600")),Se(S.StepContent,"border",R("palette-grey-600")),Se(S.Switch,"defaultColor",R("palette-grey-300")),Se(S.Switch,"defaultDisabledColor",R("palette-grey-600")),Se(S.Switch,"primaryDisabledColor",tn(S.primary.main,.55)),Se(S.Switch,"secondaryDisabledColor",tn(S.secondary.main,.55)),Se(S.Switch,"errorDisabledColor",tn(S.error.main,.55)),Se(S.Switch,"infoDisabledColor",tn(S.info.main,.55)),Se(S.Switch,"successDisabledColor",tn(S.success.main,.55)),Se(S.Switch,"warningDisabledColor",tn(S.warning.main,.55)),Se(S.TableCell,"border",tn(Ag(S.divider,1),.68)),Se(S.Tooltip,"bg",Ag(S.grey[700],.92))}zi(S.background,"default"),zi(S.background,"paper"),zi(S.common,"background"),zi(S.common,"onBackground"),zi(S,"divider"),Object.keys(S).forEach(T=>{const P=S[T];T!=="tonalOffset"&&P&&typeof P=="object"&&(P.main&&Se(S[T],"mainChannel",Uh(Wh(P.main))),P.light&&Se(S[T],"lightChannel",Uh(Wh(P.light))),P.dark&&Se(S[T],"darkChannel",Uh(Wh(P.dark))),P.contrastText&&Se(S[T],"contrastTextChannel",Uh(Wh(P.contrastText))),T==="text"&&(zi(S[T],"primary"),zi(S[T],"secondary")),T==="action"&&(P.active&&zi(S[T],"active"),P.selected&&zi(S[T],"selected")))})}),b=e.reduce((E,S)=>js(E,S),b);const w={prefix:o,disableCssColorScheme:s,shouldSkipGeneratingVar:i,getSelector:dse(b)},{vars:k,generateThemeVars:C,generateStyleSheets:$}=Lre(b,w);return b.vars=k,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach(([E,S])=>{b[E]=S}),b.generateThemeVars=C,b.generateStyleSheets=$,b.generateSpacing=function(){return mM(l.spacing,K2(this))},b.getColorSchemeSelector=Fre(a),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=i,b.unstable_sxConfig={...gv,...l==null?void 0:l.unstable_sxConfig},b.unstable_sx=function(E){return fd({sx:E,theme:this})},b.toRuntimeSource=bM,b}function wR(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:Q2({...n===!0?{}:n.palette,mode:e})})}function kM(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...i}=t,a=o||"light",u=s==null?void 0:s[a],l={...s,...n?{[a]:{...typeof u!="boolean"&&u,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return ik(t,...e);let c=n;"palette"in t||l[a]&&(l[a]!==!0?c=l[a].palette:a==="dark"&&(c={mode:"dark"}));const d=ik({...t,palette:c},...e);return d.defaultColorScheme=a,d.colorSchemes=l,d.palette.mode==="light"&&(d.colorSchemes.light={...l.light!==!0&&l.light,palette:d.palette},wR(d,"dark",l.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...l.dark!==!0&&l.dark,palette:d.palette},wR(d,"light",l.light)),d}return!n&&!("light"in l)&&a==="light"&&(l.light=!0),mse({...i,colorSchemes:l,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}var Yt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SR;function gse(){if(SR)return Yt;SR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),i=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),f=Symbol.for("react.client.reference");function p(m){if(typeof m=="object"&&m!==null){var y=m.$$typeof;switch(y){case t:switch(m=m.type,m){case n:case s:case r:case u:case l:return m;default:switch(m=m&&m.$$typeof,m){case i:case a:case d:case c:return m;case o:return m;default:return y}}case e:return y}}}return Yt.ContextConsumer=o,Yt.ContextProvider=i,Yt.Element=t,Yt.ForwardRef=a,Yt.Fragment=n,Yt.Lazy=d,Yt.Memo=c,Yt.Portal=e,Yt.Profiler=s,Yt.StrictMode=r,Yt.Suspense=u,Yt.SuspenseList=l,Yt.isContextConsumer=function(m){return p(m)===o},Yt.isContextProvider=function(m){return p(m)===i},Yt.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===t},Yt.isForwardRef=function(m){return p(m)===a},Yt.isFragment=function(m){return p(m)===n},Yt.isLazy=function(m){return p(m)===d},Yt.isMemo=function(m){return p(m)===c},Yt.isPortal=function(m){return p(m)===e},Yt.isProfiler=function(m){return p(m)===s},Yt.isStrictMode=function(m){return p(m)===r},Yt.isSuspense=function(m){return p(m)===u},Yt.isSuspenseList=function(m){return p(m)===l},Yt.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===n||m===s||m===r||m===u||m===l||m===h||typeof m=="object"&&m!==null&&(m.$$typeof===d||m.$$typeof===c||m.$$typeof===i||m.$$typeof===o||m.$$typeof===a||m.$$typeof===f||m.getModuleId!==void 0)},Yt.typeOf=p,Yt}gse();function hy(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const s=r;if(s==="components"||s==="slots")n[s]={...t[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const o=t[s],i=e[s];if(!i)n[s]=o||{};else if(!o)n[s]=i;else{n[s]={...i};for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const u=a;n[s][u]=hy(o[u],i[u])}}}else n[s]===void 0&&(n[s]=t[s])}return n}function vv(t,e,n=void 0){const r={};for(const s in t){const o=t[s];let i="",a=!0;for(let u=0;u<o.length;u+=1){const l=o[u];l&&(i+=(a===!0?"":" ")+e(l),a=!1,n&&n[l]&&(i+=" "+n[l]))}r[s]=i}return r}function Tp(t,e,n="Mui"){const r={};return e.forEach(s=>{r[s]=$p(t,s,n)}),r}function CM(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=CM(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hs(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=CM(t))&&(r&&(r+=" "),r+=e);return r}function yse(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var vse={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function xse(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var bse=!1,wse=/[A-Z]|^ms/g,Sse=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$M=function(t){return t.charCodeAt(1)===45},kR=function(t){return t!=null&&typeof t!="boolean"},Yb=xse(function(t){return $M(t)?t:t.replace(wse,"-$&").toLowerCase()}),CR=function(t,e){switch(t){case"animation":case"animationName":if(typeof e=="string")return e.replace(Sse,function(n,r,s){return Pa={name:r,styles:s,next:Pa},r})}return vse[t]!==1&&!$M(t)&&typeof e=="number"&&e!==0?e+"px":e},kse="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function fy(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return Pa={name:s.name,styles:s.styles,next:Pa},s.name;var o=n;if(o.styles!==void 0){var i=o.next;if(i!==void 0)for(;i!==void 0;)Pa={name:i.name,styles:i.styles,next:Pa},i=i.next;var a=o.styles+";";return a}return Cse(t,e,n)}}var u=n;return u}function Cse(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=fy(t,e,n[s])+";";else for(var o in n){var i=n[o];if(typeof i!="object"){var a=i;kR(a)&&(r+=Yb(o)+":"+CR(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&bse)throw new Error(kse);if(Array.isArray(i)&&typeof i[0]=="string"&&e==null)for(var u=0;u<i.length;u++)kR(i[u])&&(r+=Yb(o)+":"+CR(o,i[u])+";");else{var l=fy(t,e,i);switch(o){case"animation":case"animationName":{r+=Yb(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}}return r}var $R=/label:\s*([^\s;{]+)\s*(;|$)/g,Pa;function $se(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";Pa=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,s+=fy(n,e,o);else{var i=o;s+=i[0]}for(var a=1;a<t.length;a++)if(s+=fy(n,e,t[a]),r){var u=o;s+=u[a]}$R.lastIndex=0;for(var l="",c;(c=$R.exec(s))!==null;)l+="-"+c[1];var d=yse(s)+l;return{name:d,styles:s,next:Pa}}/**
 * @mui/styled-engine v6.4.0
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Ise(t,e){return ek(t,e)}function Ese(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const IR=[];function ER(t){return IR[0]=t,$se(IR)}function IM(t){const{variants:e,...n}=t,r={variants:e,style:ER(n),isProcessed:!0};return r.style===n||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=ER(s.style))}),r}const Tse=gM();function Zb(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function _se(t){return t?(e,n)=>n[t]:null}function Nse(t,e,n){t.theme=Dse(t.theme)?n:t.theme[e]||t.theme}function b0(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>b0(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:s,...o}=n;r=o}return EM(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function EM(t,e,n=[]){var r;let s;e:for(let o=0;o<e.length;o+=1){const i=e[o];if(typeof i.props=="function"){if(s??(s={...t,...t.ownerState,ownerState:t.ownerState}),!i.props(s))continue}else for(const a in i.props)if(t[a]!==i.props[a]&&((r=t.ownerState)==null?void 0:r[a])!==i.props[a])continue e;typeof i.style=="function"?(s??(s={...t,...t.ownerState,ownerState:t.ownerState}),n.push(i.style(s))):n.push(i.style)}return n}function Rse(t={}){const{themeId:e,defaultTheme:n=Tse,rootShouldForwardProp:r=Zb,slotShouldForwardProp:s=Zb}=t;function o(i){Nse(i,e,n)}return(i,a={})=>{Ese(i,b=>b.filter(w=>w!==fd));const{name:u,slot:l,skipVariantsResolver:c,skipSx:d,overridesResolver:h=_se(Pse(l)),...f}=a,p=c!==void 0?c:l&&l!=="Root"&&l!=="root"||!1,m=d||!1;let y=Zb;l==="Root"||l==="root"?y=r:l?y=s:Ose(i)&&(y=void 0);const g=Ise(i,{shouldForwardProp:y,label:Ase(),...f}),v=b=>{if(typeof b=="function"&&b.__emotion_real!==b)return function(w){return b0(w,b)};if(ji(b)){const w=IM(b);return w.variants?function(k){return b0(k,w)}:w.style}return b},x=(...b)=>{const w=[],k=b.map(v),C=[];if(w.push(o),u&&h&&C.push(function(S){var R,T;const P=(T=(R=S.theme.components)==null?void 0:R[u])==null?void 0:T.styleOverrides;if(!P)return null;const I={};for(const A in P)I[A]=b0(S,P[A]);return h(S,I)}),u&&!p&&C.push(function(S){var R,T;const P=S.theme,I=(T=(R=P==null?void 0:P.components)==null?void 0:R[u])==null?void 0:T.variants;return I?EM(S,I):null}),m||C.push(fd),Array.isArray(k[0])){const S=k.shift(),R=new Array(w.length).fill(""),T=new Array(C.length).fill("");let P;P=[...R,...S,...T],P.raw=[...R,...S.raw,...T],w.unshift(P)}const $=[...w,...k,...C],E=g(...$);return i.muiName&&(E.muiName=i.muiName),E};return g.withConfig&&(x.withConfig=g.withConfig),x}}function Ase(t,e){let n;return n}function Dse(t){for(const e in t)return!1;return!0}function Ose(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Pse(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const Lse=K.createContext(void 0);function Fse(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const s=e.components[n];return s.defaultProps?hy(s.defaultProps,r):!s.styleOverrides&&!s.variants?hy(s,r):r}function Mse({props:t,name:e}){const n=K.useContext(Lse);return Fse({props:t,name:e,theme:{components:n}})}const TR={theme:void 0};function zse(t){let e,n;return function(r){let s=e;return(s===void 0||r.theme!==n)&&(TR.theme=r.theme,s=IM(t(TR)),e=s,n=r.theme),s}}const Bse=kM(),Vse="$$material";function Use(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const TM=t=>Use(t)&&t!=="classes",_s=Rse({themeId:Vse,defaultTheme:Bse,rootShouldForwardProp:TM}),xv=zse;function _p(t){return Mse(t)}function Wse(t){return $p("MuiSvgIcon",t)}Tp("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const jse=t=>{const{color:e,fontSize:n,classes:r}=t,s={root:["root",e!=="inherit"&&`color${Fn(e)}`,`fontSize${Fn(n)}`]};return vv(s,Wse,r)},Gse=_s("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Fn(n.color)}`],e[`fontSize${Fn(n.fontSize)}`]]}})(xv(({theme:t})=>{var e,n,r,s,o,i,a,u,l,c,d,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=t.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:m=>!m.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((i=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:i.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((u=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:u.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((c=(l=t.typography)==null?void 0:l.pxToRem)==null?void 0:c.call(l,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,m])=>m&&m.main).map(([m])=>{var y,g;return{props:{color:m},style:{color:(g=(y=(t.vars??t).palette)==null?void 0:y[m])==null?void 0:g.main}}}),{props:{color:"action"},style:{color:(h=(d=(t.vars??t).palette)==null?void 0:d.action)==null?void 0:h.active}},{props:{color:"disabled"},style:{color:(p=(f=(t.vars??t).palette)==null?void 0:f.action)==null?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),ak=K.forwardRef(function(t,e){const n=_p({props:t,name:"MuiSvgIcon"}),{children:r,className:s,color:o="inherit",component:i="svg",fontSize:a="medium",htmlColor:u,inheritViewBox:l=!1,titleAccess:c,viewBox:d="0 0 24 24",...h}=n,f=K.isValidElement(r)&&r.type==="svg",p={...n,color:o,component:i,fontSize:a,instanceFontSize:t.fontSize,inheritViewBox:l,viewBox:d,hasSvgAsChild:f},m={};l||(m.viewBox=d);const y=jse(p);return be.jsxs(Gse,{as:i,className:hs(y.root,s),focusable:"false",color:u,"aria-hidden":c?void 0:!0,role:c?"img":void 0,ref:e,...m,...h,...f&&r.props,ownerState:p,children:[f?r.props.children:r,c?be.jsx("title",{children:c}):null]})});ak.muiName="SvgIcon";function Hse(t,e){function n(r,s){return be.jsx(ak,{"data-testid":`${e}Icon`,ref:s,...r,children:t})}return n.muiName=ak.muiName,K.memo(K.forwardRef(n))}var Kse=Object.defineProperty,qse=(t,e,n)=>e in t?Kse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w0=(t,e,n)=>qse(t,typeof e!="symbol"?e+"":e,n);function Xse(t,e){return()=>null}Xse(x0.elementType);x0.oneOfType([x0.func,x0.object]);function Yse(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const Zse=typeof window<"u"?K.useLayoutEffect:K.useEffect;let _R=0;function Qse(t){const[e,n]=K.useState(t),r=t||e;return K.useEffect(()=>{e==null&&(_R+=1,n(`mui-${_R}`))},[e]),r}const Jse={...T0},NR=Jse.useId;function eoe(t){if(NR!==void 0){const e=NR();return t??e}return Qse(t)}function S0(t){const e=K.useRef(t);return Zse(()=>{e.current=t}),K.useRef((...n)=>(0,e.current)(...n)).current}function RR(...t){return K.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Yse(n,e)})},t)}const AR={};function _M(t,e){const n=K.useRef(AR);return n.current===AR&&(n.current=t(e)),n}const toe=[];function noe(t){K.useEffect(t,toe)}class J2{constructor(){w0(this,"currentId",null),w0(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)}),w0(this,"disposeEffect",()=>this.clear)}static create(){return new J2}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function roe(){const t=_M(J2.create).current;return noe(t.disposeEffect),t}function DR(t){try{return t.matches(":focus-visible")}catch{}return!1}class py{constructor(){w0(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())}),this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new py}static use(){const e=_M(py.create).current,[n,r]=K.useState(!1);return e.shouldMount=n,e.setShouldMount=r,K.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=ooe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function soe(){return py.use()}function ooe(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n}function lk(){return lk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lk.apply(null,arguments)}function ioe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function uk(t,e){return uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uk(t,e)}function aoe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uk(t,e)}const OR=Lt.createContext(null);function loe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e$(t,e){var n=function(s){return e&&K.isValidElement(s)?e(s):s},r=Object.create(null);return t&&K.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function uoe(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var i,a={};for(var u in e){if(r[u])for(i=0;i<r[u].length;i++){var l=r[u][i];a[r[u][i]]=n(l)}a[u]=n(u)}for(i=0;i<s.length;i++)a[s[i]]=n(s[i]);return a}function ql(t,e,n){return n[e]!=null?n[e]:t.props[e]}function coe(t,e){return e$(t.children,function(n){return K.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ql(n,"appear",t),enter:ql(n,"enter",t),exit:ql(n,"exit",t)})})}function doe(t,e,n){var r=e$(t.children),s=uoe(e,r);return Object.keys(s).forEach(function(o){var i=s[o];if(K.isValidElement(i)){var a=o in e,u=o in r,l=e[o],c=K.isValidElement(l)&&!l.props.in;u&&(!a||c)?s[o]=K.cloneElement(i,{onExited:n.bind(null,i),in:!0,exit:ql(i,"exit",t),enter:ql(i,"enter",t)}):!u&&a&&!c?s[o]=K.cloneElement(i,{in:!1}):u&&a&&K.isValidElement(l)&&(s[o]=K.cloneElement(i,{onExited:n.bind(null,i),in:l.props.in,exit:ql(i,"exit",t),enter:ql(i,"enter",t)}))}}),s}var hoe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},foe={component:"div",childFactory:function(t){return t}},t$=function(t){aoe(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var i=o.handleExited.bind(loe(o));return o.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(r,s){var o=s.children,i=s.handleExited,a=s.firstRender;return{children:a?coe(r,i):doe(r,o,i),firstRender:!1}},n.handleExited=function(r,s){var o=e$(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(s),this.mounted&&this.setState(function(i){var a=lk({},i.children);return delete a[r.key],{children:a}}))},n.render=function(){var r=this.props,s=r.component,o=r.childFactory,i=ioe(r,["component","childFactory"]),a=this.state.contextValue,u=hoe(this.state.children).map(o);return delete i.appear,delete i.enter,delete i.exit,s===null?Lt.createElement(OR.Provider,{value:a},u):Lt.createElement(OR.Provider,{value:a},Lt.createElement(s,i,u))},e}(Lt.Component);t$.propTypes={};t$.defaultProps=foe;function poe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:s,rippleY:o,rippleSize:i,in:a,onExited:u,timeout:l}=t,[c,d]=K.useState(!1),h=hs(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:i,height:i,top:-(i/2)+o,left:-(i/2)+s},p=hs(n.child,c&&n.childLeaving,r&&n.childPulsate);return!a&&!c&&d(!0),K.useEffect(()=>{if(!a&&u!=null){const m=setTimeout(u,l);return()=>{clearTimeout(m)}}},[u,a,l]),be.jsx("span",{className:h,style:f,children:be.jsx("span",{className:p})})}const ro=Tp("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ck=550,moe=80,goe=Sp`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,yoe=Sp`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,voe=Sp`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,xoe=_s("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),boe=_s(poe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ro.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${goe};
    animation-duration: ${ck}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${ro.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${ro.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ro.childLeaving} {
    opacity: 0;
    animation-name: ${yoe};
    animation-duration: ${ck}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${ro.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${voe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,woe=K.forwardRef(function(t,e){const n=_p({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:s={},className:o,...i}=n,[a,u]=K.useState([]),l=K.useRef(0),c=K.useRef(null);K.useEffect(()=>{c.current&&(c.current(),c.current=null)},[a]);const d=K.useRef(!1),h=roe(),f=K.useRef(null),p=K.useRef(null),m=K.useCallback(x=>{const{pulsate:b,rippleX:w,rippleY:k,rippleSize:C,cb:$}=x;u(E=>[...E,be.jsx(boe,{classes:{ripple:hs(s.ripple,ro.ripple),rippleVisible:hs(s.rippleVisible,ro.rippleVisible),ripplePulsate:hs(s.ripplePulsate,ro.ripplePulsate),child:hs(s.child,ro.child),childLeaving:hs(s.childLeaving,ro.childLeaving),childPulsate:hs(s.childPulsate,ro.childPulsate)},timeout:ck,pulsate:b,rippleX:w,rippleY:k,rippleSize:C},l.current)]),l.current+=1,c.current=$},[s]),y=K.useCallback((x={},b={},w=()=>{})=>{const{pulsate:k=!1,center:C=r||b.pulsate,fakeElement:$=!1}=b;if((x==null?void 0:x.type)==="mousedown"&&d.current){d.current=!1;return}(x==null?void 0:x.type)==="touchstart"&&(d.current=!0);const E=$?null:p.current,S=E?E.getBoundingClientRect():{width:0,height:0,left:0,top:0};let R,T,P;if(C||x===void 0||x.clientX===0&&x.clientY===0||!x.clientX&&!x.touches)R=Math.round(S.width/2),T=Math.round(S.height/2);else{const{clientX:I,clientY:A}=x.touches&&x.touches.length>0?x.touches[0]:x;R=Math.round(I-S.left),T=Math.round(A-S.top)}if(C)P=Math.sqrt((2*S.width**2+S.height**2)/3),P%2===0&&(P+=1);else{const I=Math.max(Math.abs((E?E.clientWidth:0)-R),R)*2+2,A=Math.max(Math.abs((E?E.clientHeight:0)-T),T)*2+2;P=Math.sqrt(I**2+A**2)}x!=null&&x.touches?f.current===null&&(f.current=()=>{m({pulsate:k,rippleX:R,rippleY:T,rippleSize:P,cb:w})},h.start(moe,()=>{f.current&&(f.current(),f.current=null)})):m({pulsate:k,rippleX:R,rippleY:T,rippleSize:P,cb:w})},[r,m,h]),g=K.useCallback(()=>{y({},{pulsate:!0})},[y]),v=K.useCallback((x,b)=>{if(h.clear(),(x==null?void 0:x.type)==="touchend"&&f.current){f.current(),f.current=null,h.start(0,()=>{v(x,b)});return}f.current=null,u(w=>w.length>0?w.slice(1):w),c.current=b},[h]);return K.useImperativeHandle(e,()=>({pulsate:g,start:y,stop:v}),[g,y,v]),be.jsx(xoe,{className:hs(ro.root,s.root,o),ref:p,...i,children:be.jsx(t$,{component:null,exit:!0,children:a})})});function Soe(t){return $p("MuiButtonBase",t)}const koe=Tp("MuiButtonBase",["root","disabled","focusVisible"]),Coe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:s}=t,o=vv({root:["root",e&&"disabled",n&&"focusVisible"]},Soe,s);return n&&r&&(o.root+=` ${r}`),o},$oe=_s("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${koe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Ioe=K.forwardRef(function(t,e){const n=_p({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:s=!1,children:o,className:i,component:a="button",disabled:u=!1,disableRipple:l=!1,disableTouchRipple:c=!1,focusRipple:d=!1,focusVisibleClassName:h,LinkComponent:f="a",onBlur:p,onClick:m,onContextMenu:y,onDragLeave:g,onFocus:v,onFocusVisible:x,onKeyDown:b,onKeyUp:w,onMouseDown:k,onMouseLeave:C,onMouseUp:$,onTouchEnd:E,onTouchMove:S,onTouchStart:R,tabIndex:T=0,TouchRippleProps:P,touchRippleRef:I,type:A,...L}=n,V=K.useRef(null),z=soe(),M=RR(z.ref,I),[_,F]=K.useState(!1);u&&_&&F(!1),K.useImperativeHandle(r,()=>({focusVisible:()=>{F(!0),V.current.focus()}}),[]);const O=z.shouldMount&&!l&&!u;K.useEffect(()=>{_&&d&&!l&&z.pulsate()},[l,d,_,z]);const D=Bi(z,"start",k,c),j=Bi(z,"stop",y,c),G=Bi(z,"stop",g,c),J=Bi(z,"stop",$,c),me=Bi(z,"stop",ce=>{_&&ce.preventDefault(),C&&C(ce)},c),fe=Bi(z,"start",R,c),he=Bi(z,"stop",E,c),Te=Bi(z,"stop",S,c),Re=Bi(z,"stop",ce=>{DR(ce.target)||F(!1),p&&p(ce)},!1),Me=S0(ce=>{V.current||(V.current=ce.currentTarget),DR(ce.target)&&(F(!0),x&&x(ce)),v&&v(ce)}),Ve=()=>{const ce=V.current;return a&&a!=="button"&&!(ce.tagName==="A"&&ce.href)},N=S0(ce=>{d&&!ce.repeat&&_&&ce.key===" "&&z.stop(ce,()=>{z.start(ce)}),ce.target===ce.currentTarget&&Ve()&&ce.key===" "&&ce.preventDefault(),b&&b(ce),ce.target===ce.currentTarget&&Ve()&&ce.key==="Enter"&&!u&&(ce.preventDefault(),m&&m(ce))}),ue=S0(ce=>{d&&ce.key===" "&&_&&!ce.defaultPrevented&&z.stop(ce,()=>{z.pulsate(ce)}),w&&w(ce),m&&ce.target===ce.currentTarget&&Ve()&&ce.key===" "&&!ce.defaultPrevented&&m(ce)});let ne=a;ne==="button"&&(L.href||L.to)&&(ne=f);const W={};ne==="button"?(W.type=A===void 0?"button":A,W.disabled=u):(!L.href&&!L.to&&(W.role="button"),u&&(W["aria-disabled"]=u));const U=RR(e,V),Z={...n,centerRipple:s,component:a,disabled:u,disableRipple:l,disableTouchRipple:c,focusRipple:d,tabIndex:T,focusVisible:_},xe=Coe(Z);return be.jsxs($oe,{as:ne,className:hs(xe.root,i),ownerState:Z,onBlur:Re,onClick:m,onContextMenu:j,onFocus:Me,onKeyDown:N,onKeyUp:ue,onMouseDown:D,onMouseLeave:me,onMouseUp:J,onDragLeave:G,onTouchEnd:he,onTouchMove:Te,onTouchStart:fe,ref:U,tabIndex:u?-1:T,type:A,...W,...L,children:[o,O?be.jsx(woe,{ref:M,center:s,...P}):null]})});function Bi(t,e,n,r=!1){return S0(s=>(n&&n(s),r||t[e](s),!0))}function Eoe(t){return typeof t.main=="string"}function Toe(t,e=[]){if(!Eoe(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function NM(t=[]){return([,e])=>e&&Toe(e,t)}function _oe(t){return $p("MuiCircularProgress",t)}Tp("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const xa=44,dk=Sp`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,hk=Sp`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Noe=typeof dk!="string"?D2`
        animation: ${dk} 1.4s linear infinite;
      `:null,Roe=typeof hk!="string"?D2`
        animation: ${hk} 1.4s ease-in-out infinite;
      `:null,Aoe=t=>{const{classes:e,variant:n,color:r,disableShrink:s}=t,o={root:["root",n,`color${Fn(r)}`],svg:["svg"],circle:["circle",`circle${Fn(n)}`,s&&"circleDisableShrink"]};return vv(o,_oe,e)},Doe=_s("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Fn(n.color)}`]]}})(xv(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Noe||{animation:`${dk} 1.4s linear infinite`}},...Object.entries(t.palette).filter(NM()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),Ooe=_s("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),Poe=_s("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Fn(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(xv(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:Roe||{animation:`${hk} 1.4s ease-in-out infinite`}}]}))),Loe=K.forwardRef(function(t,e){const n=_p({props:t,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:o=!1,size:i=40,style:a,thickness:u=3.6,value:l=0,variant:c="indeterminate",...d}=n,h={...n,color:s,disableShrink:o,size:i,thickness:u,value:l,variant:c},f=Aoe(h),p={},m={},y={};if(c==="determinate"){const g=2*Math.PI*((xa-u)/2);p.strokeDasharray=g.toFixed(3),y["aria-valuenow"]=Math.round(l),p.strokeDashoffset=`${((100-l)/100*g).toFixed(3)}px`,m.transform="rotate(-90deg)"}return be.jsx(Doe,{className:hs(f.root,r),style:{width:i,height:i,...m,...a},ownerState:h,ref:e,role:"progressbar",...y,...d,children:be.jsx(Ooe,{className:f.svg,ownerState:h,viewBox:`${xa/2} ${xa/2} ${xa} ${xa}`,children:be.jsx(Poe,{className:f.circle,style:p,ownerState:h,cx:xa,cy:xa,r:(xa-u)/2,fill:"none",strokeWidth:u})})})});function Foe(t){return $p("MuiButton",t)}const El=Tp("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Moe=K.createContext({}),zoe=K.createContext(void 0),Boe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:s,variant:o,loading:i,loadingPosition:a,classes:u}=t,l={root:["root",i&&"loading",o,`${o}${Fn(e)}`,`size${Fn(s)}`,`${o}Size${Fn(s)}`,`color${Fn(e)}`,n&&"disableElevation",r&&"fullWidth",i&&`loadingPosition${Fn(a)}`],startIcon:["icon","startIcon",`iconSize${Fn(s)}`],endIcon:["icon","endIcon",`iconSize${Fn(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},c=vv(l,Foe,u);return{...u,...c}},RM=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Voe=_s(Ioe,{shouldForwardProp:t=>TM(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Fn(n.color)}`],e[`size${Fn(n.size)}`],e[`${n.variant}Size${Fn(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(xv(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${El.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${El.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${El.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${El.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(NM()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[r].mainChannel} / 0.5)`:yc(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:yc(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:yc(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:yc(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:yc(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${El.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${El.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${El.loading}`]:{color:"transparent"}}}]}})),Uoe=_s("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${Fn(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...RM]})),Woe=_s("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${Fn(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...RM]})),joe=_s("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>e.loadingIndicator})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),PR=_s("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(t,e)=>e.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),AM=K.forwardRef(function(t,e){const n=K.useContext(Moe),r=K.useContext(zoe),s=hy(n,t),o=_p({props:s,name:"MuiButton"}),{children:i,color:a="primary",component:u="button",className:l,disabled:c=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:f,focusVisibleClassName:p,fullWidth:m=!1,id:y,loading:g=null,loadingIndicator:v,loadingPosition:x="center",size:b="medium",startIcon:w,type:k,variant:C="text",...$}=o,E=eoe(y),S=v??be.jsx(Loe,{"aria-labelledby":E,color:"inherit",size:16}),R={...o,color:a,component:u,disabled:c,disableElevation:d,disableFocusRipple:h,fullWidth:m,loading:g,loadingIndicator:S,loadingPosition:x,size:b,type:k,variant:C},T=Boe(R),P=(w||g&&x==="start")&&be.jsx(Uoe,{className:T.startIcon,ownerState:R,children:w||be.jsx(PR,{className:T.loadingIconPlaceholder,ownerState:R})}),I=(f||g&&x==="end")&&be.jsx(Woe,{className:T.endIcon,ownerState:R,children:f||be.jsx(PR,{className:T.loadingIconPlaceholder,ownerState:R})}),A=r||"",L=typeof g=="boolean"?be.jsx("span",{className:T.loadingWrapper,style:{display:"contents"},children:g&&be.jsx(joe,{className:T.loadingIndicator,ownerState:R,children:S})}):null;return be.jsxs(Voe,{ownerState:R,className:hs(n.className,T.root,l,A),component:u,disabled:c||g,focusRipple:!h,focusVisibleClassName:hs(T.focusVisible,p),ref:e,type:k,id:E,...$,classes:T,children:[P,x!=="end"&&L,i,x==="end"&&L,I]})}),Goe=_s(AM)({textTransform:"none"}),wze=_s(AM)({textTransform:"none",fontWeight:"bold",fontSize:"1.2rem",borderRadius:"10px"}),LR="0123456789";function Hoe(t=8){const e=new Uint32Array(t);return crypto.getRandomValues(e),Array.from(e).map(n=>LR.charAt(n%LR.length)).join("")}const Koe="#444",qoe="#f7f9f5",Xoe="#078092",Yoe="#fd9d32",Zoe="#e04f66",Qoe="#e8f0fe",Joe="#fecb8b",eie="#ff9499",tie="#5f7377",nie="#dee4e8",rie="#dfe5e8",sie="#008297",oie="rgba(0, 130, 151, 0.04)",iie="rgb(174, 37, 174)",aie="#ffcbcb",lie="#a2e4b8",uie="#ddd",cie="#19b1a8",die="rgb(2, 136, 209)",hie={textDark:Koe,textLight:qoe,bgColourful1:Xoe,bgColourful2:Yoe,bgColourful3:Zoe,bgSubdued1:Qoe,bgSubdued2:Joe,bgSubdued3:eie,backgroundDark:tie,backgroundLight:nie,workspaceBg:rie,primary:sie,primaryHover:oie,secondary:iie,bgError:aie,bgOk:lie,borderGrey:uie,borderGreen:cie,borderBrightBlue:die};var FR,MR;const fie=((MR=(FR=globalThis==null?void 0:globalThis.process)==null?void 0:FR.env)==null?void 0:MR.NODE_ENV)==="test",pie=kM({palette:{primary:{main:fie?"#fff":hie.primary},success:{main:"#00972e"}},typography:{fontFamily:["Andika","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}});const mie="#008297",gie="#444",yie="_spinner_18gtf_3",vie="_largeSpinner_18gtf_10 _spinner_18gtf_3",xie="_animated_18gtf_19",bie="_disabled_18gtf_35",Og={primary:mie,textDark:gie,spinner:yie,largeSpinner:vie,animated:xie,"lds-spinner":"_lds-spinner_18gtf_1",disabled:bie};function wie({size:t,disabled:e}){return be.jsxs("div",{className:`${t==="large"?Og.largeSpinner:Og.spinner} ${e?Og.disabled:Og.animated}`,children:[be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{}),be.jsx("div",{})]})}const Sie=Hse(be.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined"),kie="_alert_ur25l_1",Cie="_isolated_ur25l_13",$ie="_none_ur25l_19 _alert_ur25l_1",Iie="_info_ur25l_23 _alert_ur25l_1",zR={alert:kie,isolated:Cie,none:$ie,info:Iie};function Eie({severity:t,children:e,hideIcon:n,isolated:r}){return be.jsxs("p",{className:zR[t]+(r?` ${zR.isolated}`:""),children:[!n&&t==="info"&&be.jsx(Sie,{fontSize:"small"}),e]})}function Tie({loading:t,children:e,message:n}){return t?be.jsxs("div",{className:uR.container,children:[be.jsx(wie,{}),n&&be.jsx("div",{className:uR.message,children:be.jsx(Eie,{severity:"info",children:n})})]}):e}const _ie="_container_sjube_1",Nie={container:_ie};function Rie(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Aie=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Die=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Oie={};function BR(t,e){return((e||Oie).jsx?Die:Aie).test(t)}const Pie=/[ \t\n\f\r]/g;function Lie(t){return typeof t=="object"?t.type==="text"?VR(t.value):!1:VR(t)}function VR(t){return t.replace(Pie,"")===""}class Np{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Np.prototype.property={};Np.prototype.normal={};Np.prototype.space=null;function DM(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new Np(n,r,e)}function fk(t){return t.toLowerCase()}class Co{constructor(e,n){this.property=e,this.attribute=n}}Co.prototype.space=null;Co.prototype.boolean=!1;Co.prototype.booleanish=!1;Co.prototype.overloadedBoolean=!1;Co.prototype.number=!1;Co.prototype.commaSeparated=!1;Co.prototype.spaceSeparated=!1;Co.prototype.commaOrSpaceSeparated=!1;Co.prototype.mustUseProperty=!1;Co.prototype.defined=!1;let Fie=0;const gt=Lu(),Qn=Lu(),OM=Lu(),De=Lu(),ln=Lu(),Hc=Lu(),As=Lu();function Lu(){return 2**++Fie}const pk=Object.freeze(Object.defineProperty({__proto__:null,boolean:gt,booleanish:Qn,commaOrSpaceSeparated:As,commaSeparated:Hc,number:De,overloadedBoolean:OM,spaceSeparated:ln},Symbol.toStringTag,{value:"Module"})),Qb=Object.keys(pk);class n$ extends Co{constructor(e,n,r,s){let o=-1;if(super(e,n),UR(this,"space",s),typeof r=="number")for(;++o<Qb.length;){const i=Qb[o];UR(this,Qb[o],(r&pk[i])===pk[i])}}}n$.prototype.defined=!0;function UR(t,e,n){n&&(t[e]=n)}const Mie={}.hasOwnProperty;function Ld(t){const e={},n={};let r;for(r in t.properties)if(Mie.call(t.properties,r)){const s=t.properties[r],o=new n$(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[fk(r)]=r,n[fk(o.attribute)]=r}return new Np(e,n,t.space)}const PM=Ld({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),LM=Ld({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function FM(t,e){return e in t?t[e]:e}function MM(t,e){return FM(t,e.toLowerCase())}const zM=Ld({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:MM,properties:{xmlns:null,xmlnsXLink:null}}),BM=Ld({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Qn,ariaAutoComplete:null,ariaBusy:Qn,ariaChecked:Qn,ariaColCount:De,ariaColIndex:De,ariaColSpan:De,ariaControls:ln,ariaCurrent:null,ariaDescribedBy:ln,ariaDetails:null,ariaDisabled:Qn,ariaDropEffect:ln,ariaErrorMessage:null,ariaExpanded:Qn,ariaFlowTo:ln,ariaGrabbed:Qn,ariaHasPopup:null,ariaHidden:Qn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ln,ariaLevel:De,ariaLive:null,ariaModal:Qn,ariaMultiLine:Qn,ariaMultiSelectable:Qn,ariaOrientation:null,ariaOwns:ln,ariaPlaceholder:null,ariaPosInSet:De,ariaPressed:Qn,ariaReadOnly:Qn,ariaRelevant:null,ariaRequired:Qn,ariaRoleDescription:ln,ariaRowCount:De,ariaRowIndex:De,ariaRowSpan:De,ariaSelected:Qn,ariaSetSize:De,ariaSort:null,ariaValueMax:De,ariaValueMin:De,ariaValueNow:De,ariaValueText:null,role:null}}),zie=Ld({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:MM,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hc,acceptCharset:ln,accessKey:ln,action:null,allow:null,allowFullScreen:gt,allowPaymentRequest:gt,allowUserMedia:gt,alt:null,as:null,async:gt,autoCapitalize:null,autoComplete:ln,autoFocus:gt,autoPlay:gt,blocking:ln,capture:null,charSet:null,checked:gt,cite:null,className:ln,cols:De,colSpan:null,content:null,contentEditable:Qn,controls:gt,controlsList:ln,coords:De|Hc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:gt,defer:gt,dir:null,dirName:null,disabled:gt,download:OM,draggable:Qn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:gt,formTarget:null,headers:ln,height:De,hidden:gt,high:De,href:null,hrefLang:null,htmlFor:ln,httpEquiv:ln,id:null,imageSizes:null,imageSrcSet:null,inert:gt,inputMode:null,integrity:null,is:null,isMap:gt,itemId:null,itemProp:ln,itemRef:ln,itemScope:gt,itemType:ln,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:gt,low:De,manifest:null,max:null,maxLength:De,media:null,method:null,min:null,minLength:De,multiple:gt,muted:gt,name:null,nonce:null,noModule:gt,noValidate:gt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:gt,optimum:De,pattern:null,ping:ln,placeholder:null,playsInline:gt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:gt,referrerPolicy:null,rel:ln,required:gt,reversed:gt,rows:De,rowSpan:De,sandbox:ln,scope:null,scoped:gt,seamless:gt,selected:gt,shadowRootClonable:gt,shadowRootDelegatesFocus:gt,shadowRootMode:null,shape:null,size:De,sizes:null,slot:null,span:De,spellCheck:Qn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:De,step:null,style:null,tabIndex:De,target:null,title:null,translate:null,type:null,typeMustMatch:gt,useMap:null,value:Qn,width:De,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ln,axis:null,background:null,bgColor:null,border:De,borderColor:null,bottomMargin:De,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:gt,declare:gt,event:null,face:null,frame:null,frameBorder:null,hSpace:De,leftMargin:De,link:null,longDesc:null,lowSrc:null,marginHeight:De,marginWidth:De,noResize:gt,noHref:gt,noShade:gt,noWrap:gt,object:null,profile:null,prompt:null,rev:null,rightMargin:De,rules:null,scheme:null,scrolling:Qn,standby:null,summary:null,text:null,topMargin:De,valueType:null,version:null,vAlign:null,vLink:null,vSpace:De,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:gt,disableRemotePlayback:gt,prefix:null,property:null,results:De,security:null,unselectable:null}}),Bie=Ld({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:FM,properties:{about:As,accentHeight:De,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:De,amplitude:De,arabicForm:null,ascent:De,attributeName:null,attributeType:null,azimuth:De,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:De,by:null,calcMode:null,capHeight:De,className:ln,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:De,diffuseConstant:De,direction:null,display:null,dur:null,divisor:De,dominantBaseline:null,download:gt,dx:null,dy:null,edgeMode:null,editable:null,elevation:De,enableBackground:null,end:null,event:null,exponent:De,externalResourcesRequired:null,fill:null,fillOpacity:De,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Hc,g2:Hc,glyphName:Hc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:De,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:De,horizOriginX:De,horizOriginY:De,id:null,ideographic:De,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:De,k:De,k1:De,k2:De,k3:De,k4:De,kernelMatrix:As,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:De,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:De,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:De,overlineThickness:De,paintOrder:null,panose1:null,path:null,pathLength:De,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ln,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:De,pointsAtY:De,pointsAtZ:De,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:As,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:As,rev:As,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:As,requiredFeatures:As,requiredFonts:As,requiredFormats:As,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:De,specularExponent:De,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:De,strikethroughThickness:De,string:null,stroke:null,strokeDashArray:As,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:De,strokeOpacity:De,strokeWidth:null,style:null,surfaceScale:De,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:As,tabIndex:De,tableValues:null,target:null,targetX:De,targetY:De,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:As,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:De,underlineThickness:De,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:De,values:null,vAlphabetic:De,vMathematical:De,vectorEffect:null,vHanging:De,vIdeographic:De,version:null,vertAdvY:De,vertOriginX:De,vertOriginY:De,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:De,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Vie=/^data[-\w.:]+$/i,WR=/-[a-z]/g,Uie=/[A-Z]/g;function Wie(t,e){const n=fk(e);let r=e,s=Co;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Vie.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(WR,Gie);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!WR.test(o)){let i=o.replace(Uie,jie);i.charAt(0)!=="-"&&(i="-"+i),e="data"+i}}s=n$}return new s(r,e)}function jie(t){return"-"+t.toLowerCase()}function Gie(t){return t.charAt(1).toUpperCase()}const Hie={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Kie=DM([LM,PM,zM,BM,zie],"html"),r$=DM([LM,PM,zM,BM,Bie],"svg");function qie(t){return t.join(" ").trim()}var VM={},jR=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Xie=/\n/g,Yie=/^\s*/,Zie=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Qie=/^:\s*/,Jie=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,eae=/^[;\s]*/,tae=/^\s+|\s+$/g,nae=`
`,GR="/",HR="*",Bl="",rae="comment",sae="declaration",oae=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function s(p){var m=p.match(Xie);m&&(n+=m.length);var y=p.lastIndexOf(nae);r=~y?p.length-y:r+p.length}function o(){var p={line:n,column:r};return function(m){return m.position=new i(p),l(),m}}function i(p){this.start=p,this.end={line:n,column:r},this.source=e.source}i.prototype.content=t;function a(p){var m=new Error(e.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=e.source,m.line=n,m.column=r,m.source=t,!e.silent)throw m}function u(p){var m=p.exec(t);if(m){var y=m[0];return s(y),t=t.slice(y.length),m}}function l(){u(Yie)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=o();if(!(GR!=t.charAt(0)||HR!=t.charAt(1))){for(var m=2;Bl!=t.charAt(m)&&(HR!=t.charAt(m)||GR!=t.charAt(m+1));)++m;if(m+=2,Bl===t.charAt(m-1))return a("End of comment missing");var y=t.slice(2,m-2);return r+=2,s(y),t=t.slice(m),r+=2,p({type:rae,comment:y})}}function h(){var p=o(),m=u(Zie);if(m){if(d(),!u(Qie))return a("property missing ':'");var y=u(Jie),g=p({type:sae,property:KR(m[0].replace(jR,Bl)),value:y?KR(y[0].replace(jR,Bl)):Bl});return u(eae),g}}function f(){var p=[];c(p);for(var m;m=h();)m!==!1&&(p.push(m),c(p));return p}return l(),f()};function KR(t){return t?t.replace(tae,Bl):Bl}var iae=vs&&vs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(VM,"__esModule",{value:!0});var qR=VM.default=lae,aae=iae(oae);function lae(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,aae.default)(t),s=typeof e=="function";return r.forEach(function(o){if(o.type==="declaration"){var i=o.property,a=o.value;s?e(i,a,o):a&&(n=n||{},n[i]=a)}}),n}const uae=qR.default||qR,UM=WM("end"),s$=WM("start");function WM(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function cae(t){const e=s$(t),n=UM(t);if(e&&n)return{start:e,end:n}}function ff(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?XR(t.position):"start"in t||"end"in t?XR(t):"line"in t||"column"in t?mk(t):""}function mk(t){return YR(t&&t.line)+":"+YR(t&&t.column)}function XR(t){return mk(t&&t.start)+"-"+mk(t&&t.end)}function YR(t){return t&&typeof t=="number"?t:1}class Xr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},i=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?s=e:!o.cause&&e&&(i=!0,s=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=a?a.line:void 0,this.name=ff(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=i&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Xr.prototype.file="";Xr.prototype.name="";Xr.prototype.reason="";Xr.prototype.message="";Xr.prototype.stack="";Xr.prototype.column=void 0;Xr.prototype.line=void 0;Xr.prototype.ancestors=void 0;Xr.prototype.cause=void 0;Xr.prototype.fatal=void 0;Xr.prototype.place=void 0;Xr.prototype.ruleId=void 0;Xr.prototype.source=void 0;const o$={}.hasOwnProperty,dae=new Map,hae=/[A-Z]/g,fae=/-([a-z])/g,pae=new Set(["table","tbody","thead","tfoot","tr"]),mae=new Set(["td","th"]),jM="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function gae(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Cae(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=kae(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?r$:Kie,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=GM(s,t,void 0);return o&&typeof o!="string"?o:s.create(t,s.Fragment,{children:o||void 0},void 0)}function GM(t,e,n){if(e.type==="element")return yae(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return vae(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return bae(t,e,n);if(e.type==="mdxjsEsm")return xae(t,e);if(e.type==="root")return wae(t,e,n);if(e.type==="text")return Sae(t,e)}function yae(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=r$,t.schema=s),t.ancestors.push(e);const o=KM(t,e.tagName,!1),i=$ae(t,e);let a=a$(t,e);return pae.has(e.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!Lie(u):!0})),HM(t,i,o,e),i$(i,a),t.ancestors.pop(),t.schema=r,t.create(e,o,i,n)}function vae(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Xf(t,e.position)}function xae(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Xf(t,e.position)}function bae(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=r$,t.schema=s),t.ancestors.push(e);const o=e.name===null?t.Fragment:KM(t,e.name,!0),i=Iae(t,e),a=a$(t,e);return HM(t,i,o,e),i$(i,a),t.ancestors.pop(),t.schema=r,t.create(e,o,i,n)}function wae(t,e,n){const r={};return i$(r,a$(t,e)),t.create(e,t.Fragment,r,n)}function Sae(t,e){return e.value}function HM(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function i$(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function kae(t,e,n){return r;function r(s,o,i,a){const l=Array.isArray(i.children)?n:e;return a?l(o,i,a):l(o,i)}}function Cae(t,e){return n;function n(r,s,o,i){const a=Array.isArray(o.children),u=s$(r);return e(s,o,i,a,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function $ae(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&o$.call(e.properties,s)){const o=Eae(t,s,e.properties[s]);if(o){const[i,a]=o;t.tableCellAlignToStyle&&i==="align"&&typeof a=="string"&&mae.has(e.tagName)?r=a:n[i]=a}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Iae(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const i=o.expression;i.type;const a=i.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Xf(t,e.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,o=t.evaluater.evaluateExpression(a.expression)}else Xf(t,e.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function a$(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:dae;for(;++r<e.children.length;){const o=e.children[r];let i;if(t.passKeys){const u=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(u){const l=s.get(u)||0;i=u+"-"+l,s.set(u,l+1)}}const a=GM(t,o,i);a!==void 0&&n.push(a)}return n}function Eae(t,e,n){const r=Wie(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Rie(n):qie(n)),r.property==="style"){let s=typeof n=="object"?n:Tae(t,String(n));return t.stylePropertyNameCase==="css"&&(s=_ae(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?Hie[r.property]||r.property:r.attribute,n]}}function Tae(t,e){const n={};try{uae(e,r)}catch(s){if(!t.ignoreInvalidStyle){const o=s,i=new Xr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=jM+"#cannot-parse-style-attribute",i}}return n;function r(s,o){let i=s;i.slice(0,2)!=="--"&&(i.slice(0,4)==="-ms-"&&(i="ms-"+i.slice(4)),i=i.replace(fae,Rae)),n[i]=o}}function KM(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let o=-1,i;for(;++o<s.length;){const a=BR(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};i=i?{type:"MemberExpression",object:i,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}r=i}else r=BR(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return o$.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Xf(t)}function Xf(t,e){const n=new Xr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=jM+"#cannot-handle-mdx-estrees-without-createevaluater",n}function _ae(t){const e={};let n;for(n in t)o$.call(t,n)&&(e[Nae(n)]=t[n]);return e}function Nae(t){let e=t.replace(hae,Aae);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Rae(t,e){return e.toUpperCase()}function Aae(t){return"-"+t.toLowerCase()}const Jb={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Dae={};function Oae(t,e){const n=e||Dae,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return qM(t,r,s)}function qM(t,e,n){if(Pae(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return ZR(t.children,e,n)}return Array.isArray(t)?ZR(t,e,n):""}function ZR(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=qM(t[s],e,n);return r.join("")}function Pae(t){return!!(t&&typeof t=="object")}const QR=document.createElement("i");function l$(t){const e="&"+t+";";QR.innerHTML=e;const n=QR.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function sa(t,e,n,r){const s=t.length;let o=0,i;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(e,n),t.splice(...i);else for(n&&t.splice(e,n);o<r.length;)i=r.slice(o,o+1e4),i.unshift(e,0),t.splice(...i),o+=1e4,e+=1e4}function lo(t,e){return t.length>0?(sa(t,t.length,0,e),t):e}const JR={}.hasOwnProperty;function Lae(t){const e={};let n=-1;for(;++n<t.length;)Fae(e,t[n]);return e}function Fae(t,e){let n;for(n in e){const s=(JR.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let i;if(o)for(i in o){JR.call(s,i)||(s[i]=[]);const a=o[i];Mae(s[i],Array.isArray(a)?a:a?[a]:[])}}}function Mae(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);sa(t,0,0,r)}function XM(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Kc(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const hi=pl(/[A-Za-z]/),zs=pl(/[\dA-Za-z]/),zae=pl(/[#-'*+\--9=?A-Z^-~]/);function gk(t){return t!==null&&(t<32||t===127)}const yk=pl(/\d/),Bae=pl(/[\dA-Fa-f]/),Vae=pl(/[!-/:-@[-`{-~]/);function ct(t){return t!==null&&t<-2}function ks(t){return t!==null&&(t<0||t===32)}function Ut(t){return t===-2||t===-1||t===32}const Uae=pl(/\p{P}|\p{S}/u),Wae=pl(/\s/);function pl(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Fd(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const o=t.charCodeAt(n);let i="";if(o===37&&zs(t.charCodeAt(n+1))&&zs(t.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(i=String.fromCharCode(o));else if(o>55295&&o<57344){const a=t.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(i=String.fromCharCode(o,a),s=1):i="�"}else i=String.fromCharCode(o);i&&(e.push(t.slice(r,n),encodeURIComponent(i)),r=n+s+1,i=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function cn(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return i;function i(u){return Ut(u)?(t.enter(n),a(u)):e(u)}function a(u){return Ut(u)&&o++<s?(t.consume(u),a):(t.exit(n),e(u))}}const jae={tokenize:Gae};function Gae(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),cn(t,e,"linePrefix")}function s(a){return t.enter("paragraph"),o(a)}function o(a){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,i(a)}function i(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return ct(a)?(t.consume(a),t.exit("chunkText"),o):(t.consume(a),i)}}const Hae={tokenize:Kae},eA={tokenize:qae};function Kae(t){const e=this,n=[];let r=0,s,o,i;return a;function a(x){if(r<n.length){const b=n[r];return e.containerState=b[1],t.attempt(b[0].continuation,u,l)(x)}return l(x)}function u(x){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&v();const b=e.events.length;let w=b,k;for(;w--;)if(e.events[w][0]==="exit"&&e.events[w][1].type==="chunkFlow"){k=e.events[w][1].end;break}g(r);let C=b;for(;C<e.events.length;)e.events[C][1].end=Object.assign({},k),C++;return sa(e.events,w+1,0,e.events.slice(b)),e.events.length=C,l(x)}return a(x)}function l(x){if(r===n.length){if(!s)return h(x);if(s.currentConstruct&&s.currentConstruct.concrete)return p(x);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(eA,c,d)(x)}function c(x){return s&&v(),g(r),h(x)}function d(x){return e.parser.lazy[e.now().line]=r!==n.length,i=e.now().offset,p(x)}function h(x){return e.containerState={},t.attempt(eA,f,p)(x)}function f(x){return r++,n.push([e.currentConstruct,e.containerState]),h(x)}function p(x){if(x===null){s&&v(),g(0),t.consume(x);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:s}),m(x)}function m(x){if(x===null){y(t.exit("chunkFlow"),!0),g(0),t.consume(x);return}return ct(x)?(t.consume(x),y(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(x),m)}function y(x,b){const w=e.sliceStream(x);if(b&&w.push(null),x.previous=o,o&&(o.next=x),o=x,s.defineSkip(x.start),s.write(w),e.parser.lazy[x.start.line]){let k=s.events.length;for(;k--;)if(s.events[k][1].start.offset<i&&(!s.events[k][1].end||s.events[k][1].end.offset>i))return;const C=e.events.length;let $=C,E,S;for(;$--;)if(e.events[$][0]==="exit"&&e.events[$][1].type==="chunkFlow"){if(E){S=e.events[$][1].end;break}E=!0}for(g(r),k=C;k<e.events.length;)e.events[k][1].end=Object.assign({},S),k++;sa(e.events,$+1,0,e.events.slice(C)),e.events.length=k}}function g(x){let b=n.length;for(;b-- >x;){const w=n[b];e.containerState=w[1],w[0].exit.call(e,t)}n.length=x}function v(){s.write([null]),o=void 0,s=void 0,e.containerState._closeFlow=void 0}}function qae(t,e,n){return cn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tA(t){if(t===null||ks(t)||Wae(t))return 1;if(Uae(t))return 2}function u$(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const o=t[s].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const vk={name:"attention",tokenize:Yae,resolveAll:Xae};function Xae(t,e){let n=-1,r,s,o,i,a,u,l,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d=Object.assign({},t[r][1].end),h=Object.assign({},t[n][1].start);nA(d,-u),nA(h,u),i={type:u>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},t[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[n][1].start),end:h},o={type:u>1?"strongText":"emphasisText",start:Object.assign({},t[r][1].end),end:Object.assign({},t[n][1].start)},s={type:u>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},a.end)},t[r][1].end=Object.assign({},i.start),t[n][1].start=Object.assign({},a.end),l=[],t[r][1].end.offset-t[r][1].start.offset&&(l=lo(l,[["enter",t[r][1],e],["exit",t[r][1],e]])),l=lo(l,[["enter",s,e],["enter",i,e],["exit",i,e],["enter",o,e]]),l=lo(l,u$(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),l=lo(l,[["exit",o,e],["enter",a,e],["exit",a,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,l=lo(l,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,sa(t,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Yae(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=tA(r);let o;return i;function i(u){return o=u,t.enter("attentionSequence"),a(u)}function a(u){if(u===o)return t.consume(u),a;const l=t.exit("attentionSequence"),c=tA(u),d=!c||c===2&&s||n.includes(u),h=!s||s===2&&c||n.includes(r);return l._open=!!(o===42?d:d&&(s||!h)),l._close=!!(o===42?h:h&&(c||!d)),e(u)}}function nA(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Zae={name:"autolink",tokenize:Qae};function Qae(t,e,n){let r=0;return s;function s(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(f){return hi(f)?(t.consume(f),i):f===64?n(f):l(f)}function i(f){return f===43||f===45||f===46||zs(f)?(r=1,a(f)):l(f)}function a(f){return f===58?(t.consume(f),r=0,u):(f===43||f===45||f===46||zs(f))&&r++<32?(t.consume(f),a):(r=0,l(f))}function u(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||gk(f)?n(f):(t.consume(f),u)}function l(f){return f===64?(t.consume(f),c):zae(f)?(t.consume(f),l):n(f)}function c(f){return zs(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),r=0,c):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||zs(f))&&r++<63){const p=f===45?h:d;return t.consume(f),p}return n(f)}}const bv={tokenize:Jae,partial:!0};function Jae(t,e,n){return r;function r(o){return Ut(o)?cn(t,s,"linePrefix")(o):s(o)}function s(o){return o===null||ct(o)?e(o):n(o)}}const YM={name:"blockQuote",tokenize:ele,continuation:{tokenize:tle},exit:nle};function ele(t,e,n){const r=this;return s;function s(i){if(i===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(i),t.exit("blockQuoteMarker"),o}return n(i)}function o(i){return Ut(i)?(t.enter("blockQuotePrefixWhitespace"),t.consume(i),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(i))}}function tle(t,e,n){const r=this;return s;function s(i){return Ut(i)?cn(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i):o(i)}function o(i){return t.attempt(YM,e,n)(i)}}function nle(t){t.exit("blockQuote")}const ZM={name:"characterEscape",tokenize:rle};function rle(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),s}function s(o){return Vae(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const QM={name:"characterReference",tokenize:sle};function sle(t,e,n){const r=this;let s=0,o,i;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),u}function u(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),l):(t.enter("characterReferenceValue"),o=31,i=zs,c(d))}function l(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,i=Bae,c):(t.enter("characterReferenceValue"),o=7,i=yk,c(d))}function c(d){if(d===59&&s){const h=t.exit("characterReferenceValue");return i===zs&&!l$(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return i(d)&&s++<o?(t.consume(d),c):n(d)}}const rA={tokenize:ile,partial:!0},sA={name:"codeFenced",tokenize:ole,concrete:!0};function ole(t,e,n){const r=this,s={tokenize:w,partial:!0};let o=0,i=0,a;return u;function u(k){return l(k)}function l(k){const C=r.events[r.events.length-1];return o=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,a=k,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(k)}function c(k){return k===a?(i++,t.consume(k),c):i<3?n(k):(t.exit("codeFencedFenceSequence"),Ut(k)?cn(t,d,"whitespace")(k):d(k))}function d(k){return k===null||ct(k)?(t.exit("codeFencedFence"),r.interrupt?e(k):t.check(rA,m,b)(k)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===null||ct(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(k)):Ut(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),cn(t,f,"whitespace")(k)):k===96&&k===a?n(k):(t.consume(k),h)}function f(k){return k===null||ct(k)?d(k):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===null||ct(k)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(k)):k===96&&k===a?n(k):(t.consume(k),p)}function m(k){return t.attempt(s,b,y)(k)}function y(k){return t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),g}function g(k){return o>0&&Ut(k)?cn(t,v,"linePrefix",o+1)(k):v(k)}function v(k){return k===null||ct(k)?t.check(rA,m,b)(k):(t.enter("codeFlowValue"),x(k))}function x(k){return k===null||ct(k)?(t.exit("codeFlowValue"),v(k)):(t.consume(k),x)}function b(k){return t.exit("codeFenced"),e(k)}function w(k,C,$){let E=0;return S;function S(A){return k.enter("lineEnding"),k.consume(A),k.exit("lineEnding"),R}function R(A){return k.enter("codeFencedFence"),Ut(A)?cn(k,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):T(A)}function T(A){return A===a?(k.enter("codeFencedFenceSequence"),P(A)):$(A)}function P(A){return A===a?(E++,k.consume(A),P):E>=i?(k.exit("codeFencedFenceSequence"),Ut(A)?cn(k,I,"whitespace")(A):I(A)):$(A)}function I(A){return A===null||ct(A)?(k.exit("codeFencedFence"),C(A)):$(A)}}}function ile(t,e,n){const r=this;return s;function s(i){return i===null?n(i):(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),o)}function o(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}const ew={name:"codeIndented",tokenize:lle},ale={tokenize:ule,partial:!0};function lle(t,e,n){const r=this;return s;function s(l){return t.enter("codeIndented"),cn(t,o,"linePrefix",4+1)(l)}function o(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?i(l):n(l)}function i(l){return l===null?u(l):ct(l)?t.attempt(ale,i,u)(l):(t.enter("codeFlowValue"),a(l))}function a(l){return l===null||ct(l)?(t.exit("codeFlowValue"),i(l)):(t.consume(l),a)}function u(l){return t.exit("codeIndented"),e(l)}}function ule(t,e,n){const r=this;return s;function s(i){return r.parser.lazy[r.now().line]?n(i):ct(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),s):cn(t,o,"linePrefix",4+1)(i)}function o(i){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(i):ct(i)?s(i):n(i)}}const cle={name:"codeText",tokenize:fle,resolve:dle,previous:hle};function dle(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function hle(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fle(t,e,n){let r=0,s,o;return i;function i(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),u(d))}function u(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),u):d===96?(o=t.enter("codeTextSequence"),s=0,c(d)):ct(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),u):(t.enter("codeTextData"),l(d))}function l(d){return d===null||d===32||d===96||ct(d)?(t.exit("codeTextData"),u(d)):(t.consume(d),l)}function c(d){return d===96?(t.consume(d),s++,c):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(o.type="codeTextData",l(d))}}class ple{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Ch(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ch(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ch(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ch(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ch(this.left,n.reverse())}}}function Ch(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function JM(t){const e={};let n=-1,r,s,o,i,a,u,l;const c=new ple(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,mle(c,n)),n=e[n],l=!0);else if(r[1]._container){for(o=n,s=void 0;o--&&(i=c.get(o),i[1].type==="lineEnding"||i[1].type==="lineEndingBlank");)i[0]==="enter"&&(s&&(c.get(s)[1].type="lineEndingBlank"),i[1].type="lineEnding",s=o);s&&(r[1].end=Object.assign({},c.get(s)[1].start),a=c.slice(s,n),a.unshift(r),c.splice(s,n-s+1,a))}}return sa(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function mle(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const o=[],i=n._tokenizer||r.parser[n.contentType](n.start),a=i.events,u=[],l={};let c,d,h=-1,f=n,p=0,m=0;const y=[m];for(;f;){for(;t.get(++s)[1]!==f;);o.push(s),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),d&&i.defineSkip(f.start),f._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(c),f._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,y.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(i.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const g=a.slice(y[h],y[h+1]),v=o.pop();u.push([v,v+g.length-1]),t.splice(v,2,g)}for(u.reverse(),h=-1;++h<u.length;)l[p+u[h][0]]=p+u[h][1],p+=u[h][1]-u[h][0]-1;return l}const gle={tokenize:xle,resolve:vle},yle={tokenize:ble,partial:!0};function vle(t){return JM(t),t}function xle(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?o(a):ct(a)?t.check(yle,i,o)(a):(t.consume(a),s)}function o(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function i(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function ble(t,e,n){const r=this;return s;function s(i){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),cn(t,o,"linePrefix")}function o(i){if(i===null||ct(i))return n(i);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(i):t.interrupt(r.parser.constructs.flow,n,e)(i)}}function ez(t,e,n,r,s,o,i,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return d;function d(g){return g===60?(t.enter(r),t.enter(s),t.enter(o),t.consume(g),t.exit(o),h):g===null||g===32||g===41||gk(g)?n(g):(t.enter(r),t.enter(i),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(g))}function h(g){return g===62?(t.enter(o),t.consume(g),t.exit(o),t.exit(s),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(t.exit("chunkString"),t.exit(a),h(g)):g===null||g===60||ct(g)?n(g):(t.consume(g),g===92?p:f)}function p(g){return g===60||g===62||g===92?(t.consume(g),f):f(g)}function m(g){return!c&&(g===null||g===41||ks(g))?(t.exit("chunkString"),t.exit(a),t.exit(i),t.exit(r),e(g)):c<l&&g===40?(t.consume(g),c++,m):g===41?(t.consume(g),c--,m):g===null||g===32||g===40||gk(g)?n(g):(t.consume(g),g===92?y:m)}function y(g){return g===40||g===41||g===92?(t.consume(g),m):m(g)}}function tz(t,e,n,r,s,o){const i=this;let a=0,u;return l;function l(f){return t.enter(r),t.enter(s),t.consume(f),t.exit(s),t.enter(o),c}function c(f){return a>999||f===null||f===91||f===93&&!u||f===94&&!a&&"_hiddenFootnoteSupport"in i.parser.constructs?n(f):f===93?(t.exit(o),t.enter(s),t.consume(f),t.exit(s),t.exit(r),e):ct(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||ct(f)||a++>999?(t.exit("chunkString"),c(f)):(t.consume(f),u||(u=!Ut(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(t.consume(f),a++,d):d(f)}}function nz(t,e,n,r,s,o){let i;return a;function a(h){return h===34||h===39||h===40?(t.enter(r),t.enter(s),t.consume(h),t.exit(s),i=h===40?41:h,u):n(h)}function u(h){return h===i?(t.enter(s),t.consume(h),t.exit(s),t.exit(r),e):(t.enter(o),l(h))}function l(h){return h===i?(t.exit(o),u(i)):h===null?n(h):ct(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),cn(t,l,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===i||h===null||ct(h)?(t.exit("chunkString"),l(h)):(t.consume(h),h===92?d:c)}function d(h){return h===i||h===92?(t.consume(h),c):c(h)}}function pf(t,e){let n;return r;function r(s){return ct(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):Ut(s)?cn(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const wle={name:"definition",tokenize:kle},Sle={tokenize:Cle,partial:!0};function kle(t,e,n){const r=this;let s;return o;function o(f){return t.enter("definition"),i(f)}function i(f){return tz.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return s=Kc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),u):n(f)}function u(f){return ks(f)?pf(t,l)(f):l(f)}function l(f){return ez(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return t.attempt(Sle,d,d)(f)}function d(f){return Ut(f)?cn(t,h,"whitespace")(f):h(f)}function h(f){return f===null||ct(f)?(t.exit("definition"),r.parser.defined.push(s),e(f)):n(f)}}function Cle(t,e,n){return r;function r(a){return ks(a)?pf(t,s)(a):n(a)}function s(a){return nz(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Ut(a)?cn(t,i,"whitespace")(a):i(a)}function i(a){return a===null||ct(a)?e(a):n(a)}}const $le={name:"hardBreakEscape",tokenize:Ile};function Ile(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),s}function s(o){return ct(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const Ele={name:"headingAtx",tokenize:_le,resolve:Tle};function Tle(t,e){let n=t.length-2,r=3,s,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},sa(t,r,n-r+1,[["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e]])),t}function _le(t,e,n){let r=0;return s;function s(c){return t.enter("atxHeading"),o(c)}function o(c){return t.enter("atxHeadingSequence"),i(c)}function i(c){return c===35&&r++<6?(t.consume(c),i):c===null||ks(c)?(t.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),u(c)):c===null||ct(c)?(t.exit("atxHeading"),e(c)):Ut(c)?cn(t,a,"whitespace")(c):(t.enter("atxHeadingText"),l(c))}function u(c){return c===35?(t.consume(c),u):(t.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ks(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),l)}}const Nle=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],oA=["pre","script","style","textarea"],Rle={name:"htmlFlow",tokenize:Ple,resolveTo:Ole,concrete:!0},Ale={tokenize:Fle,partial:!0},Dle={tokenize:Lle,partial:!0};function Ole(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Ple(t,e,n){const r=this;let s,o,i,a,u;return l;function l(D){return c(D)}function c(D){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(D),d}function d(D){return D===33?(t.consume(D),h):D===47?(t.consume(D),o=!0,m):D===63?(t.consume(D),s=3,r.interrupt?e:_):hi(D)?(t.consume(D),i=String.fromCharCode(D),y):n(D)}function h(D){return D===45?(t.consume(D),s=2,f):D===91?(t.consume(D),s=5,a=0,p):hi(D)?(t.consume(D),s=4,r.interrupt?e:_):n(D)}function f(D){return D===45?(t.consume(D),r.interrupt?e:_):n(D)}function p(D){const j="CDATA[";return D===j.charCodeAt(a++)?(t.consume(D),a===j.length?r.interrupt?e:T:p):n(D)}function m(D){return hi(D)?(t.consume(D),i=String.fromCharCode(D),y):n(D)}function y(D){if(D===null||D===47||D===62||ks(D)){const j=D===47,G=i.toLowerCase();return!j&&!o&&oA.includes(G)?(s=1,r.interrupt?e(D):T(D)):Nle.includes(i.toLowerCase())?(s=6,j?(t.consume(D),g):r.interrupt?e(D):T(D)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(D):o?v(D):x(D))}return D===45||zs(D)?(t.consume(D),i+=String.fromCharCode(D),y):n(D)}function g(D){return D===62?(t.consume(D),r.interrupt?e:T):n(D)}function v(D){return Ut(D)?(t.consume(D),v):S(D)}function x(D){return D===47?(t.consume(D),S):D===58||D===95||hi(D)?(t.consume(D),b):Ut(D)?(t.consume(D),x):S(D)}function b(D){return D===45||D===46||D===58||D===95||zs(D)?(t.consume(D),b):w(D)}function w(D){return D===61?(t.consume(D),k):Ut(D)?(t.consume(D),w):x(D)}function k(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),u=D,C):Ut(D)?(t.consume(D),k):$(D)}function C(D){return D===u?(t.consume(D),u=null,E):D===null||ct(D)?n(D):(t.consume(D),C)}function $(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||ks(D)?w(D):(t.consume(D),$)}function E(D){return D===47||D===62||Ut(D)?x(D):n(D)}function S(D){return D===62?(t.consume(D),R):n(D)}function R(D){return D===null||ct(D)?T(D):Ut(D)?(t.consume(D),R):n(D)}function T(D){return D===45&&s===2?(t.consume(D),L):D===60&&s===1?(t.consume(D),V):D===62&&s===4?(t.consume(D),F):D===63&&s===3?(t.consume(D),_):D===93&&s===5?(t.consume(D),M):ct(D)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(Ale,O,P)(D)):D===null||ct(D)?(t.exit("htmlFlowData"),P(D)):(t.consume(D),T)}function P(D){return t.check(Dle,I,O)(D)}function I(D){return t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),A}function A(D){return D===null||ct(D)?P(D):(t.enter("htmlFlowData"),T(D))}function L(D){return D===45?(t.consume(D),_):T(D)}function V(D){return D===47?(t.consume(D),i="",z):T(D)}function z(D){if(D===62){const j=i.toLowerCase();return oA.includes(j)?(t.consume(D),F):T(D)}return hi(D)&&i.length<8?(t.consume(D),i+=String.fromCharCode(D),z):T(D)}function M(D){return D===93?(t.consume(D),_):T(D)}function _(D){return D===62?(t.consume(D),F):D===45&&s===2?(t.consume(D),_):T(D)}function F(D){return D===null||ct(D)?(t.exit("htmlFlowData"),O(D)):(t.consume(D),F)}function O(D){return t.exit("htmlFlow"),e(D)}}function Lle(t,e,n){const r=this;return s;function s(i){return ct(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),o):n(i)}function o(i){return r.parser.lazy[r.now().line]?n(i):e(i)}}function Fle(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(bv,e,n)}}const Mle={name:"htmlText",tokenize:zle};function zle(t,e,n){const r=this;let s,o,i;return a;function a(_){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(_),u}function u(_){return _===33?(t.consume(_),l):_===47?(t.consume(_),w):_===63?(t.consume(_),x):hi(_)?(t.consume(_),$):n(_)}function l(_){return _===45?(t.consume(_),c):_===91?(t.consume(_),o=0,p):hi(_)?(t.consume(_),v):n(_)}function c(_){return _===45?(t.consume(_),f):n(_)}function d(_){return _===null?n(_):_===45?(t.consume(_),h):ct(_)?(i=d,V(_)):(t.consume(_),d)}function h(_){return _===45?(t.consume(_),f):d(_)}function f(_){return _===62?L(_):_===45?h(_):d(_)}function p(_){const F="CDATA[";return _===F.charCodeAt(o++)?(t.consume(_),o===F.length?m:p):n(_)}function m(_){return _===null?n(_):_===93?(t.consume(_),y):ct(_)?(i=m,V(_)):(t.consume(_),m)}function y(_){return _===93?(t.consume(_),g):m(_)}function g(_){return _===62?L(_):_===93?(t.consume(_),g):m(_)}function v(_){return _===null||_===62?L(_):ct(_)?(i=v,V(_)):(t.consume(_),v)}function x(_){return _===null?n(_):_===63?(t.consume(_),b):ct(_)?(i=x,V(_)):(t.consume(_),x)}function b(_){return _===62?L(_):x(_)}function w(_){return hi(_)?(t.consume(_),k):n(_)}function k(_){return _===45||zs(_)?(t.consume(_),k):C(_)}function C(_){return ct(_)?(i=C,V(_)):Ut(_)?(t.consume(_),C):L(_)}function $(_){return _===45||zs(_)?(t.consume(_),$):_===47||_===62||ks(_)?E(_):n(_)}function E(_){return _===47?(t.consume(_),L):_===58||_===95||hi(_)?(t.consume(_),S):ct(_)?(i=E,V(_)):Ut(_)?(t.consume(_),E):L(_)}function S(_){return _===45||_===46||_===58||_===95||zs(_)?(t.consume(_),S):R(_)}function R(_){return _===61?(t.consume(_),T):ct(_)?(i=R,V(_)):Ut(_)?(t.consume(_),R):E(_)}function T(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(t.consume(_),s=_,P):ct(_)?(i=T,V(_)):Ut(_)?(t.consume(_),T):(t.consume(_),I)}function P(_){return _===s?(t.consume(_),s=void 0,A):_===null?n(_):ct(_)?(i=P,V(_)):(t.consume(_),P)}function I(_){return _===null||_===34||_===39||_===60||_===61||_===96?n(_):_===47||_===62||ks(_)?E(_):(t.consume(_),I)}function A(_){return _===47||_===62||ks(_)?E(_):n(_)}function L(_){return _===62?(t.consume(_),t.exit("htmlTextData"),t.exit("htmlText"),e):n(_)}function V(_){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),z}function z(_){return Ut(_)?cn(t,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):M(_)}function M(_){return t.enter("htmlTextData"),i(_)}}const c$={name:"labelEnd",tokenize:Gle,resolveTo:jle,resolveAll:Wle},Ble={tokenize:Hle},Vle={tokenize:Kle},Ule={tokenize:qle};function Wle(t){let e=-1;for(;++e<t.length;){const n=t[e][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(t.splice(e+1,n.type==="labelImage"?4:2),n.type="data",e++)}return t}function jle(t,e){let n=t.length,r=0,s,o,i,a;for(;n--;)if(s=t[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(i){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(i=n);const u={type:t[o][1].type==="labelLink"?"link":"image",start:Object.assign({},t[o][1].start),end:Object.assign({},t[t.length-1][1].end)},l={type:"label",start:Object.assign({},t[o][1].start),end:Object.assign({},t[i][1].end)},c={type:"labelText",start:Object.assign({},t[o+r+2][1].end),end:Object.assign({},t[i-2][1].start)};return a=[["enter",u,e],["enter",l,e]],a=lo(a,t.slice(o+1,o+r+3)),a=lo(a,[["enter",c,e]]),a=lo(a,u$(e.parser.constructs.insideSpan.null,t.slice(o+r+4,i-3),e)),a=lo(a,[["exit",c,e],t[i-2],t[i-1],["exit",l,e]]),a=lo(a,t.slice(i+1)),a=lo(a,[["exit",u,e]]),sa(t,o,t.length,a),t}function Gle(t,e,n){const r=this;let s=r.events.length,o,i;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return a;function a(h){return o?o._inactive?d(h):(i=r.parser.defined.includes(Kc(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),u):n(h)}function u(h){return h===40?t.attempt(Ble,c,i?c:d)(h):h===91?t.attempt(Vle,c,i?l:d)(h):i?c(h):d(h)}function l(h){return t.attempt(Ule,c,d)(h)}function c(h){return e(h)}function d(h){return o._balanced=!0,n(h)}}function Hle(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),s}function s(d){return ks(d)?pf(t,o)(d):o(d)}function o(d){return d===41?c(d):ez(t,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function i(d){return ks(d)?pf(t,u)(d):c(d)}function a(d){return n(d)}function u(d){return d===34||d===39||d===40?nz(t,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function l(d){return ks(d)?pf(t,c)(d):c(d)}function c(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function Kle(t,e,n){const r=this;return s;function s(a){return tz.call(r,t,o,i,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(Kc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function i(a){return n(a)}}function qle(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),s}function s(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const Xle={name:"labelStartImage",tokenize:Yle,resolveAll:c$.resolveAll};function Yle(t,e,n){const r=this;return s;function s(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),o}function o(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),i):n(a)}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Zle={name:"labelStartLink",tokenize:Qle,resolveAll:c$.resolveAll};function Qle(t,e,n){const r=this;return s;function s(i){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(i),t.exit("labelMarker"),t.exit("labelLink"),o}function o(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):e(i)}}const tw={name:"lineEnding",tokenize:Jle};function Jle(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),cn(t,e,"linePrefix")}}const k0={name:"thematicBreak",tokenize:eue};function eue(t,e,n){let r=0,s;return o;function o(l){return t.enter("thematicBreak"),i(l)}function i(l){return s=l,a(l)}function a(l){return l===s?(t.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||ct(l))?(t.exit("thematicBreak"),e(l)):n(l)}function u(l){return l===s?(t.consume(l),r++,u):(t.exit("thematicBreakSequence"),Ut(l)?cn(t,a,"whitespace")(l):a(l))}}const ds={name:"list",tokenize:rue,continuation:{tokenize:sue},exit:iue},tue={tokenize:aue,partial:!0},nue={tokenize:oue,partial:!0};function rue(t,e,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,i=0;return a;function a(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:yk(f)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(k0,n,l)(f):l(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(f)}return n(f)}function u(f){return yk(f)&&++i<10?(t.consume(f),u):(!r.interrupt||i<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),l(f)):n(f)}function l(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(bv,r.interrupt?n:c,t.attempt(tue,h,d))}function c(f){return r.containerState.initialBlankLine=!0,o++,h(f)}function d(f){return Ut(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function sue(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(bv,s,o);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,cn(t,e,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!Ut(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(nue,e,i)(a))}function i(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,cn(t,t.attempt(ds,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function oue(t,e,n){const r=this;return cn(t,s,"listItemIndent",r.containerState.size+1);function s(o){const i=r.events[r.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?e(o):n(o)}}function iue(t){t.exit(this.containerState.type)}function aue(t,e,n){const r=this;return cn(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function s(o){const i=r.events[r.events.length-1];return!Ut(o)&&i&&i[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const iA={name:"setextUnderline",tokenize:uue,resolveTo:lue};function lue(t,e){let n=t.length,r,s,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const i={type:"setextHeading",start:Object.assign({},t[s][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[s][1].type="setextHeadingText",o?(t.splice(s,0,["enter",i,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end=Object.assign({},t[o][1].end)):t[r][1]=i,t.push(["exit",i,e]),t}function uue(t,e,n){const r=this;let s;return o;function o(l){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),s=l,i(l)):n(l)}function i(l){return t.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===s?(t.consume(l),a):(t.exit("setextHeadingLineSequence"),Ut(l)?cn(t,u,"lineSuffix")(l):u(l))}function u(l){return l===null||ct(l)?(t.exit("setextHeadingLine"),e(l)):n(l)}}const cue={tokenize:due};function due(t){const e=this,n=t.attempt(bv,r,t.attempt(this.parser.constructs.flowInitial,s,cn(t,t.attempt(this.parser.constructs.flow,s,t.attempt(gle,s)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const hue={resolveAll:sz()},fue=rz("string"),pue=rz("text");function rz(t){return{tokenize:e,resolveAll:sz(t==="text"?mue:void 0)};function e(n){const r=this,s=this.parser.constructs[t],o=n.attempt(s,i,a);return i;function i(c){return l(c)?o(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),o(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const d=s[c];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function sz(t){return e;function e(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return t?t(n,r):n}}function mue(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let o=s.length,i=-1,a=0,u;for(;o--;){const l=s[o];if(typeof l=="string"){for(i=l.length;l.charCodeAt(i-1)===32;)a++,i--;if(i)break;i=-1}else if(l===-2)u=!0,a++;else if(l!==-1){o++;break}}if(a){const l={type:n===t.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+o,_bufferIndex:o?i:r.start._bufferIndex+i},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(t.splice(n,0,["enter",l,e],["exit",l,e]),n+=2)}n++}return t}function gue(t,e,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},o=[];let i=[],a=[];const u={consume:v,enter:x,exit:b,attempt:C(w),check:C(k),interrupt:C(k,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:f,sliceSerialize:h,now:p,defineSkip:m,write:d};let c=e.tokenize.call(l,u);return e.resolveAll&&o.push(e),l;function d(R){return i=lo(i,R),y(),i[i.length-1]!==null?[]:($(e,0),l.events=u$(o,l.events,l),l.events)}function h(R,T){return vue(f(R),T)}function f(R){return yue(i,R)}function p(){const{line:R,column:T,offset:P,_index:I,_bufferIndex:A}=r;return{line:R,column:T,offset:P,_index:I,_bufferIndex:A}}function m(R){s[R.line]=R.column,S()}function y(){let R;for(;r._index<i.length;){const T=i[r._index];if(typeof T=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<T.length;)g(T.charCodeAt(r._bufferIndex));else g(T)}}function g(R){c=c(R)}function v(R){ct(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,S()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===i[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function x(R,T){const P=T||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function b(R){const T=a.pop();return T.end=p(),l.events.push(["exit",T,l]),T}function w(R,T){$(R,T.from)}function k(R,T){T.restore()}function C(R,T){return P;function P(I,A,L){let V,z,M,_;return Array.isArray(I)?O(I):"tokenize"in I?O([I]):F(I);function F(J){return me;function me(fe){const he=fe!==null&&J[fe],Te=fe!==null&&J.null,Re=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return O(Re)(fe)}}function O(J){return V=J,z=0,J.length===0?L:D(J[z])}function D(J){return me;function me(fe){return _=E(),M=J,J.partial||(l.currentConstruct=J),J.name&&l.parser.constructs.disable.null.includes(J.name)?G():J.tokenize.call(T?Object.assign(Object.create(l),T):l,u,j,G)(fe)}}function j(J){return R(M,_),A}function G(J){return _.restore(),++z<V.length?D(V[z]):L}}}function $(R,T){R.resolveAll&&!o.includes(R)&&o.push(R),R.resolve&&sa(l.events,T,l.events.length-T,R.resolve(l.events.slice(T),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function E(){const R=p(),T=l.previous,P=l.currentConstruct,I=l.events.length,A=Array.from(a);return{restore:L,from:I};function L(){r=R,l.previous=T,l.currentConstruct=P,l.events.length=I,a=A,S()}}function S(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function yue(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,o=e.end._bufferIndex;let i;if(n===s)i=[t[n].slice(r,o)];else{if(i=t.slice(n,s),r>-1){const a=i[0];typeof a=="string"?i[0]=a.slice(r):i.shift()}o>0&&i.push(t[s].slice(0,o))}return i}function vue(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const o=t[n];let i;if(typeof o=="string")i=o;else switch(o){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=e?" ":"	";break}case-1:{if(!e&&s)continue;i=" ";break}default:i=String.fromCharCode(o)}s=o===-2,r.push(i)}return r.join("")}const xue={42:ds,43:ds,45:ds,48:ds,49:ds,50:ds,51:ds,52:ds,53:ds,54:ds,55:ds,56:ds,57:ds,62:YM},bue={91:wle},wue={[-2]:ew,[-1]:ew,32:ew},Sue={35:Ele,42:k0,45:[iA,k0],60:Rle,61:iA,95:k0,96:sA,126:sA},kue={38:QM,92:ZM},Cue={[-5]:tw,[-4]:tw,[-3]:tw,33:Xle,38:QM,42:vk,60:[Zae,Mle],91:Zle,92:[$le,ZM],93:c$,95:vk,96:cle},$ue={null:[vk,hue]},Iue={null:[42,95]},Eue={null:[]},Tue=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Iue,contentInitial:bue,disable:Eue,document:xue,flow:Sue,flowInitial:wue,insideSpan:$ue,string:kue,text:Cue},Symbol.toStringTag,{value:"Module"}));function _ue(t){const n=Lae([Tue,...(t||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:s(jae),document:s(Hae),flow:s(cue),string:s(fue),text:s(pue)};return r;function s(o){return i;function i(a){return gue(r,o,a)}}}function Nue(t){for(;!JM(t););return t}const aA=/[\0\t\n\r]/g;function Rue(){let t=1,e="",n=!0,r;return s;function s(o,i,a){const u=[];let l,c,d,h,f;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(i||void 0).decode(o)),d=0,e="",n&&(o.charCodeAt(0)===65279&&d++,n=void 0);d<o.length;){if(aA.lastIndex=d,l=aA.exec(o),h=l&&l.index!==void 0?l.index:o.length,f=o.charCodeAt(h),!l){e=o.slice(d);break}if(f===10&&d===h&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<h&&(u.push(o.slice(d,h)),t+=h-d),f){case 0:{u.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,u.push(-2);t++<c;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return a&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const Aue=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Due(t){return t.replace(Aue,Oue)}function Oue(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return XM(n.slice(o?2:1),o?16:10)}return l$(n)||t}const oz={}.hasOwnProperty;function Pue(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Lue(n)(Nue(_ue(n).document().write(Rue()(t,e,!0))))}function Lue(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Z),autolinkProtocol:E,autolinkEmail:E,atxHeading:o(ue),blockQuote:o(Te),characterEscape:E,characterReference:E,codeFenced:o(Re),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:o(Re,i),codeText:o(Me,i),codeTextData:E,data:E,codeFlowValue:E,definition:o(Ve),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:o(N),hardBreakEscape:o(ne),hardBreakTrailing:o(ne),htmlFlow:o(W,i),htmlFlowData:E,htmlText:o(W,i),htmlTextData:E,image:o(U),label:i,link:o(Z),listItem:o(ce),listItemValue:h,listOrdered:o(xe,d),listUnordered:o(xe),paragraph:o(ie),reference:D,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:o(ue),strong:o(_e),thematicBreak:o(Ee)},exit:{atxHeading:u(),atxHeadingSequence:w,autolink:u(),autolinkEmail:he,autolinkProtocol:fe,blockQuote:u(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:J,characterReference:me,codeFenced:u(y),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:S,codeIndented:u(g),codeText:u(A),codeTextData:S,data:S,definition:u(),definitionDestinationString:b,definitionLabelString:v,definitionTitleString:x,emphasis:u(),hardBreakEscape:u(T),hardBreakTrailing:u(T),htmlFlow:u(P),htmlFlowData:S,htmlText:u(I),htmlTextData:S,image:u(V),label:M,labelText:z,lineEnding:R,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:j,resourceDestinationString:_,resourceTitleString:F,resource:O,setextHeading:u($),setextHeadingLineSequence:C,setextHeadingText:k,strong:u(),thematicBreak:u()}};iz(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(te){let ge={type:"root",children:[]};const ke={stack:[ge],tokenStack:[],config:e,enter:a,exit:l,buffer:i,resume:c,data:n},Ue=[];let ot=-1;for(;++ot<te.length;)if(te[ot][1].type==="listOrdered"||te[ot][1].type==="listUnordered")if(te[ot][0]==="enter")Ue.push(ot);else{const lt=Ue.pop();ot=s(te,lt,ot)}for(ot=-1;++ot<te.length;){const lt=e[te[ot][0]];oz.call(lt,te[ot][1].type)&&lt[te[ot][1].type].call(Object.assign({sliceSerialize:te[ot][2].sliceSerialize},ke),te[ot][1])}if(ke.tokenStack.length>0){const lt=ke.tokenStack[ke.tokenStack.length-1];(lt[1]||lA).call(ke,void 0,lt[0])}for(ge.position={start:ba(te.length>0?te[0][1].start:{line:1,column:1,offset:0}),end:ba(te.length>0?te[te.length-2][1].end:{line:1,column:1,offset:0})},ot=-1;++ot<e.transforms.length;)ge=e.transforms[ot](ge)||ge;return ge}function s(te,ge,ke){let Ue=ge-1,ot=-1,lt=!1,Mt,ft,Lr,ae;for(;++Ue<=ke;){const Y=te[Ue];switch(Y[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Y[0]==="enter"?ot++:ot--,ae=void 0;break}case"lineEndingBlank":{Y[0]==="enter"&&(Mt&&!ae&&!ot&&!Lr&&(Lr=Ue),ae=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ae=void 0}if(!ot&&Y[0]==="enter"&&Y[1].type==="listItemPrefix"||ot===-1&&Y[0]==="exit"&&(Y[1].type==="listUnordered"||Y[1].type==="listOrdered")){if(Mt){let Ce=Ue;for(ft=void 0;Ce--;){const Pe=te[Ce];if(Pe[1].type==="lineEnding"||Pe[1].type==="lineEndingBlank"){if(Pe[0]==="exit")continue;ft&&(te[ft][1].type="lineEndingBlank",lt=!0),Pe[1].type="lineEnding",ft=Ce}else if(!(Pe[1].type==="linePrefix"||Pe[1].type==="blockQuotePrefix"||Pe[1].type==="blockQuotePrefixWhitespace"||Pe[1].type==="blockQuoteMarker"||Pe[1].type==="listItemIndent"))break}Lr&&(!ft||Lr<ft)&&(Mt._spread=!0),Mt.end=Object.assign({},ft?te[ft][1].start:Y[1].end),te.splice(ft||Ue,0,["exit",Mt,Y[2]]),Ue++,ke++}if(Y[1].type==="listItemPrefix"){const Ce={type:"listItem",_spread:!1,start:Object.assign({},Y[1].start),end:void 0};Mt=Ce,te.splice(Ue,0,["enter",Ce,Y[2]]),Ue++,ke++,Lr=void 0,ae=!0}}}return te[ge][1]._spread=lt,ke}function o(te,ge){return ke;function ke(Ue){a.call(this,te(Ue),Ue),ge&&ge.call(this,Ue)}}function i(){this.stack.push({type:"fragment",children:[]})}function a(te,ge,ke){this.stack[this.stack.length-1].children.push(te),this.stack.push(te),this.tokenStack.push([ge,ke]),te.position={start:ba(ge.start),end:void 0}}function u(te){return ge;function ge(ke){te&&te.call(this,ke),l.call(this,ke)}}function l(te,ge){const ke=this.stack.pop(),Ue=this.tokenStack.pop();if(Ue)Ue[0].type!==te.type&&(ge?ge.call(this,te,Ue[0]):(Ue[1]||lA).call(this,te,Ue[0]));else throw new Error("Cannot close `"+te.type+"` ("+ff({start:te.start,end:te.end})+"): it’s not open");ke.position.end=ba(te.end)}function c(){return Oae(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(te){if(this.data.expectingFirstListItemValue){const ge=this.stack[this.stack.length-2];ge.start=Number.parseInt(this.sliceSerialize(te),10),this.data.expectingFirstListItemValue=void 0}}function f(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.lang=te}function p(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.meta=te}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.value=te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.value=te.replace(/(\r?\n|\r)$/g,"")}function v(te){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.label=ge,ke.identifier=Kc(this.sliceSerialize(te)).toLowerCase()}function x(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.title=te}function b(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.url=te}function w(te){const ge=this.stack[this.stack.length-1];if(!ge.depth){const ke=this.sliceSerialize(te).length;ge.depth=ke}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function C(te){const ge=this.stack[this.stack.length-1];ge.depth=this.sliceSerialize(te).codePointAt(0)===61?1:2}function $(){this.data.setextHeadingSlurpLineEnding=void 0}function E(te){const ke=this.stack[this.stack.length-1].children;let Ue=ke[ke.length-1];(!Ue||Ue.type!=="text")&&(Ue=Oe(),Ue.position={start:ba(te.start),end:void 0},ke.push(Ue)),this.stack.push(Ue)}function S(te){const ge=this.stack.pop();ge.value+=this.sliceSerialize(te),ge.position.end=ba(te.end)}function R(te){const ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ke=ge.children[ge.children.length-1];ke.position.end=ba(te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ge.type)&&(E.call(this,te),S.call(this,te))}function T(){this.data.atHardBreak=!0}function P(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.value=te}function I(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.value=te}function A(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.value=te}function L(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=ge,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function V(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const ge=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=ge,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function z(te){const ge=this.sliceSerialize(te),ke=this.stack[this.stack.length-2];ke.label=Due(ge),ke.identifier=Kc(ge).toLowerCase()}function M(){const te=this.stack[this.stack.length-1],ge=this.resume(),ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,ke.type==="link"){const Ue=te.children;ke.children=Ue}else ke.alt=ge}function _(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.url=te}function F(){const te=this.resume(),ge=this.stack[this.stack.length-1];ge.title=te}function O(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function j(te){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.label=ge,ke.identifier=Kc(this.sliceSerialize(te)).toLowerCase(),this.data.referenceType="full"}function G(te){this.data.characterReferenceType=te.type}function J(te){const ge=this.sliceSerialize(te),ke=this.data.characterReferenceType;let Ue;ke?(Ue=XM(ge,ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ue=l$(ge);const ot=this.stack[this.stack.length-1];ot.value+=Ue}function me(te){const ge=this.stack.pop();ge.position.end=ba(te.end)}function fe(te){S.call(this,te);const ge=this.stack[this.stack.length-1];ge.url=this.sliceSerialize(te)}function he(te){S.call(this,te);const ge=this.stack[this.stack.length-1];ge.url="mailto:"+this.sliceSerialize(te)}function Te(){return{type:"blockquote",children:[]}}function Re(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function Ve(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function N(){return{type:"emphasis",children:[]}}function ue(){return{type:"heading",depth:0,children:[]}}function ne(){return{type:"break"}}function W(){return{type:"html",value:""}}function U(){return{type:"image",title:null,url:"",alt:null}}function Z(){return{type:"link",title:null,url:"",children:[]}}function xe(te){return{type:"list",ordered:te.type==="listOrdered",start:null,spread:te._spread,children:[]}}function ce(te){return{type:"listItem",spread:te._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function Oe(){return{type:"text",value:""}}function Ee(){return{type:"thematicBreak"}}}function ba(t){return{line:t.line,column:t.column,offset:t.offset}}function iz(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?iz(t,r):Fue(t,r)}}function Fue(t,e){let n;for(n in e)if(oz.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function lA(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+ff({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+ff({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+ff({start:e.start,end:e.end})+") is still open")}function Mue(t){const e=this;e.parser=n;function n(r){return Pue(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function zue(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Bue(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Vue(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function Uue(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Wue(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jue(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Fd(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let i,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),i=t.footnoteOrder.length):i=o+1,a+=1,t.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};t.patch(e,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,l),t.applyData(e,l)}function Gue(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Hue(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function az(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const i=s[s.length-1];return i&&i.type==="text"?i.value+=r:s.push({type:"text",value:r}),s}function Kue(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return az(t,e);const s={src:Fd(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,o),t.applyData(e,o)}function que(t,e){const n={src:Fd(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Xue(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function Yue(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return az(t,e);const s={href:Fd(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function Zue(t,e){const n={href:Fd(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Que(t,e,n){const r=t.all(e),s=n?Jue(n):lz(e),o={},i=[];if(typeof e.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(s||a!==0||c.type!=="element"||c.tagName!=="p")&&i.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!s?i.push(...c.children):i.push(c)}const u=r[r.length-1];u&&(s||u.type!=="element"||u.tagName!=="p")&&i.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:o,children:i};return t.patch(e,l),t.applyData(e,l)}function Jue(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=lz(n[r])}return e}function lz(t){const e=t.spread;return e??t.children.length>1}function ece(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const i=r[s];if(i.type==="element"&&i.tagName==="li"&&i.properties&&Array.isArray(i.properties.className)&&i.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function tce(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nce(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function rce(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sce(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const i={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],i),s.push(i)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=s$(e.children[1]),u=UM(e.children[e.children.length-1]);a&&u&&(i.position={start:a,end:u}),s.push(i)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function oce(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",i=n&&n.type==="table"?n.align:void 0,a=i?i.length:e.children.length;let u=-1;const l=[];for(;++u<a;){const d=e.children[u],h={},f=i?i[u]:void 0;f&&(h.align=f);let p={type:"element",tagName:o,properties:h,children:[]};d&&(p.children=t.all(d),t.patch(d,p),p=t.applyData(d,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(l,!0)};return t.patch(e,c),t.applyData(e,c)}function ice(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const uA=9,cA=32;function ace(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const o=[];for(;r;)o.push(dA(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return o.push(dA(e.slice(s),s>0,!1)),o.join("")}function dA(t,e,n){let r=0,s=t.length;if(e){let o=t.codePointAt(r);for(;o===uA||o===cA;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(s-1);for(;o===uA||o===cA;)s--,o=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function lce(t,e){const n={type:"text",value:ace(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function uce(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const cce={blockquote:zue,break:Bue,code:Vue,delete:Uue,emphasis:Wue,footnoteReference:jue,heading:Gue,html:Hue,imageReference:Kue,image:que,inlineCode:Xue,linkReference:Yue,link:Zue,listItem:Que,list:ece,paragraph:tce,root:nce,strong:rce,table:sce,tableCell:ice,tableRow:oce,text:lce,thematicBreak:uce,toml:Pg,yaml:Pg,definition:Pg,footnoteDefinition:Pg};function Pg(){}const uz=-1,wv=0,my=1,gy=2,d$=3,h$=4,f$=5,p$=6,cz=7,dz=8,hA=typeof self=="object"?self:globalThis,dce=(t,e)=>{const n=(s,o)=>(t.set(o,s),s),r=s=>{if(t.has(s))return t.get(s);const[o,i]=e[s];switch(o){case wv:case uz:return n(i,s);case my:{const a=n([],s);for(const u of i)a.push(r(u));return a}case gy:{const a=n({},s);for(const[u,l]of i)a[r(u)]=r(l);return a}case d$:return n(new Date(i),s);case h$:{const{source:a,flags:u}=i;return n(new RegExp(a,u),s)}case f$:{const a=n(new Map,s);for(const[u,l]of i)a.set(r(u),r(l));return a}case p$:{const a=n(new Set,s);for(const u of i)a.add(r(u));return a}case cz:{const{name:a,message:u}=i;return n(new hA[a](u),s)}case dz:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s)}return n(new hA[o](i),s)};return r},fA=t=>dce(new Map,t)(0),hc="",{toString:hce}={},{keys:fce}=Object,$h=t=>{const e=typeof t;if(e!=="object"||!t)return[wv,e];const n=hce.call(t).slice(8,-1);switch(n){case"Array":return[my,hc];case"Object":return[gy,hc];case"Date":return[d$,hc];case"RegExp":return[h$,hc];case"Map":return[f$,hc];case"Set":return[p$,hc]}return n.includes("Array")?[my,n]:n.includes("Error")?[cz,n]:[gy,n]},Lg=([t,e])=>t===wv&&(e==="function"||e==="symbol"),pce=(t,e,n,r)=>{const s=(i,a)=>{const u=r.push(i)-1;return n.set(a,u),u},o=i=>{if(n.has(i))return n.get(i);let[a,u]=$h(i);switch(a){case wv:{let c=i;switch(u){case"bigint":a=dz,c=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return s([uz],i)}return s([a,c],i)}case my:{if(u)return s([u,[...i]],i);const c=[],d=s([a,c],i);for(const h of i)c.push(o(h));return d}case gy:{if(u)switch(u){case"BigInt":return s([u,i.toString()],i);case"Boolean":case"Number":case"String":return s([u,i.valueOf()],i)}if(e&&"toJSON"in i)return o(i.toJSON());const c=[],d=s([a,c],i);for(const h of fce(i))(t||!Lg($h(i[h])))&&c.push([o(h),o(i[h])]);return d}case d$:return s([a,i.toISOString()],i);case h$:{const{source:c,flags:d}=i;return s([a,{source:c,flags:d}],i)}case f$:{const c=[],d=s([a,c],i);for(const[h,f]of i)(t||!(Lg($h(h))||Lg($h(f))))&&c.push([o(h),o(f)]);return d}case p$:{const c=[],d=s([a,c],i);for(const h of i)(t||!Lg($h(h)))&&c.push(o(h));return d}}const{message:l}=i;return s([a,{name:u,message:l}],i)};return o},pA=(t,{json:e,lossy:n}={})=>{const r=[];return pce(!(e||n),!!e,new Map,r)(t),r},yy=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?fA(pA(t,e)):structuredClone(t):(t,e)=>fA(pA(t,e));function mce(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function gce(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function yce(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||mce,r=t.options.footnoteBackLabel||gce,s=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",i=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<t.footnoteOrder.length;){const l=t.footnoteById.get(t.footnoteOrder[u]);if(!l)continue;const c=t.all(l),d=String(l.identifier).toUpperCase(),h=Fd(d.toLowerCase());let f=0;const p=[],m=t.footnoteCounts.get(d);for(;m!==void 0&&++f<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,f);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const v=y.children[y.children.length-1];v&&v.type==="text"?v.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else c.push(...p);const g={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(c,!0)};t.patch(l,g),a.push(g)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...yy(i),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const hz=function(t){if(t==null)return wce;if(typeof t=="function")return Sv(t);if(typeof t=="object")return Array.isArray(t)?vce(t):xce(t);if(typeof t=="string")return bce(t);throw new Error("Expected function, string, or object as test")};function vce(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=hz(t[n]);return Sv(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function xce(t){const e=t;return Sv(n);function n(r){const s=r;let o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function bce(t){return Sv(e);function e(n){return n&&n.type===t}}function Sv(t){return e;function e(n,r,s){return!!(Sce(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function wce(){return!0}function Sce(t){return t!==null&&typeof t=="object"&&"type"in t}const fz=[],kce=!0,mA=!1,Cce="skip";function $ce(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const o=hz(s),i=r?-1:1;a(t,void 0,[])();function a(u,l,c){const d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(u.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=fz,p,m,y;if((!e||o(u,l,c[c.length-1]||void 0))&&(f=Ice(n(u,c)),f[0]===mA))return f;if("children"in u&&u.children){const g=u;if(g.children&&f[0]!==Cce)for(m=(r?g.children.length:-1)+i,y=c.concat(g);m>-1&&m<g.children.length;){const v=g.children[m];if(p=a(v,m,y)(),p[0]===mA)return p;m=typeof p[1]=="number"?p[1]:m+i}}return f}}}function Ice(t){return Array.isArray(t)?t:typeof t=="number"?[kce,t]:t==null?fz:[t]}function pz(t,e,n,r){let s,o,i;typeof e=="function"&&typeof n!="function"?(o=void 0,i=e,s=n):(o=e,i=n,s=r),$ce(t,o,a,s);function a(u,l){const c=l[l.length-1],d=c?c.children.indexOf(u):void 0;return i(u,d,c)}}const xk={}.hasOwnProperty,Ece={};function Tce(t,e){const n=e||Ece,r=new Map,s=new Map,o=new Map,i={...cce,...n.handlers},a={all:l,applyData:Nce,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:i,one:u,options:n,patch:_ce,wrap:Ace};return pz(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:s,h=String(c.identifier).toUpperCase();d.has(h)||d.set(h,c)}}),a;function u(c,d){const h=c.type,f=a.handlers[h];if(xk.call(a.handlers,h)&&f)return f(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in c){const{children:m,...y}=c,g=yy(y);return g.children=a.all(c),g}return yy(c)}return(a.options.unknownHandler||Rce)(a,c,d)}function l(c){const d=[];if("children"in c){const h=c.children;let f=-1;for(;++f<h.length;){const p=a.one(h[f],c);if(p){if(f&&h[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=gA(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=gA(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function _ce(t,e){t.position&&(e.position=cae(t))}function Nce(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const i="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:i}}n.type==="element"&&o&&Object.assign(n.properties,yy(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Rce(t,e){const n=e.data||{},r="value"in e&&!(xk.call(n,"hProperties")||xk.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Ace(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function gA(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function yA(t,e){const n=Tce(t,e),r=n.one(t,void 0),s=yce(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function Dce(t,e){return t&&"run"in t?async function(n,r){const s=yA(n,{file:r,...e});await t.run(s,r)}:function(n,r){return yA(n,{file:r,...e||t})}}function vA(t){if(t)throw t}var C0=Object.prototype.hasOwnProperty,mz=Object.prototype.toString,xA=Object.defineProperty,bA=Object.getOwnPropertyDescriptor,wA=function(e){return typeof Array.isArray=="function"?Array.isArray(e):mz.call(e)==="[object Array]"},SA=function(e){if(!e||mz.call(e)!=="[object Object]")return!1;var n=C0.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&C0.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var s;for(s in e);return typeof s>"u"||C0.call(e,s)},kA=function(e,n){xA&&n.name==="__proto__"?xA(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},CA=function(e,n){if(n==="__proto__")if(C0.call(e,n)){if(bA)return bA(e,n).value}else return;return e[n]},Oce=function t(){var e,n,r,s,o,i,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(e=arguments[u],e!=null)for(n in e)r=CA(a,n),s=CA(e,n),a!==s&&(c&&s&&(SA(s)||(o=wA(s)))?(o?(o=!1,i=r&&wA(r)?r:[]):i=r&&SA(r)?r:{},kA(a,{name:n,newValue:t(c,i,s)})):typeof s<"u"&&kA(a,{name:n,newValue:s}));return a};const nw=Ed(Oce);function bk(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Pce(){const t=[],e={run:n,use:r};return e;function n(...s){let o=-1;const i=s.pop();if(typeof i!="function")throw new TypeError("Expected function as last argument, not "+i);a(null,...s);function a(u,...l){const c=t[++o];let d=-1;if(u){i(u);return}for(;++d<s.length;)(l[d]===null||l[d]===void 0)&&(l[d]=s[d]);s=l,c?Lce(c,a)(...l):i(null,...l)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function Lce(t,e){let n;return r;function r(...i){const a=t.length>i.length;let u;a&&i.push(s);try{u=t.apply(this,i)}catch(l){const c=l;if(a&&n)throw c;return s(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(o,s):u instanceof Error?s(u):o(u))}function s(i,...a){n||(n=!0,e(i,...a))}function o(i){s(null,i)}}const ri={basename:Fce,dirname:Mce,extname:zce,join:Bce,sep:"/"};function Fce(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Rp(t);let n=0,r=-1,s=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let i=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else i<0&&(o=!0,i=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=i));return n===r?r=i:r<0&&(r=t.length),t.slice(n,r)}function Mce(t){if(Rp(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function zce(t){Rp(t);let e=t.length,n=-1,r=0,s=-1,o=0,i;for(;e--;){const a=t.codePointAt(e);if(a===47){if(i){r=e+1;break}continue}n<0&&(i=!0,n=e+1),a===46?s<0?s=e:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function Bce(...t){let e=-1,n;for(;++e<t.length;)Rp(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Vce(n)}function Vce(t){Rp(t);const e=t.codePointAt(0)===47;let n=Uce(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Uce(t,e){let n="",r=0,s=-1,o=0,i=-1,a,u;for(;++i<=t.length;){if(i<t.length)a=t.codePointAt(i);else{if(a===47)break;a=47}if(a===47){if(!(s===i-1||o===1))if(s!==i-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),s=i,o=0;continue}}else if(n.length>0){n="",r=0,s=i,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,i):n=t.slice(s+1,i),r=i-s-1;s=i,o=0}else a===46&&o>-1?o++:o=-1}return n}function Rp(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Wce={cwd:jce};function jce(){return"/"}function wk(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Gce(t){if(typeof t=="string")t=new URL(t);else if(!wk(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Hce(t)}function Hce(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const rw=["history","path","basename","stem","extname","dirname"];class gz{constructor(e){let n;e?wk(e)?n={path:e}:typeof e=="string"||Kce(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Wce.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<rw.length;){const o=rw[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)rw.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?ri.basename(this.path):void 0}set basename(e){ow(e,"basename"),sw(e,"basename"),this.path=ri.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ri.dirname(this.path):void 0}set dirname(e){$A(this.basename,"dirname"),this.path=ri.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ri.extname(this.path):void 0}set extname(e){if(sw(e,"extname"),$A(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ri.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){wk(e)&&(e=Gce(e)),ow(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ri.basename(this.path,this.extname):void 0}set stem(e){ow(e,"stem"),sw(e,"stem"),this.path=ri.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Xr(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function sw(t,e){if(t&&t.includes(ri.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ri.sep+"`")}function ow(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function $A(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Kce(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const qce=function(t){const r=this.constructor.prototype,s=r[t],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},Xce={}.hasOwnProperty;class m$ extends qce{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Pce()}copy(){const e=new m$;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(nw(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(lw("data",this.frozen),this.namespace[e]=n,this):Xce.call(this.namespace,e)&&this.namespace[e]||void 0:e?(lw("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Fg(e),r=this.parser||this.Parser;return iw("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),iw("process",this.parser||this.Parser),aw("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,i){const a=Fg(e),u=r.parse(a);r.run(u,a,function(c,d,h){if(c||!d||!h)return l(c);const f=d,p=r.stringify(f,h);Qce(p)?h.value=p:h.result=p,l(c,h)});function l(c,d){c||!d?i(c):o?o(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),iw("processSync",this.parser||this.Parser),aw("processSync",this.compiler||this.Compiler),this.process(e,s),EA("processSync","process",n),r;function s(o,i){n=!0,vA(o),r=i}}run(e,n,r){IA(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(i,a){const u=Fg(n);s.run(e,u,l);function l(c,d,h){const f=d||e;c?a(c):i?i(f):r(void 0,f,h)}}}runSync(e,n){let r=!1,s;return this.run(e,n,o),EA("runSync","run",r),s;function o(i,a){vA(i),s=a,r=!0}}stringify(e,n){this.freeze();const r=Fg(n),s=this.compiler||this.Compiler;return aw("stringify",s),IA(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(lw("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):i(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...d]=l;u(c,d)}else i(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function i(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(s.settings=nw(!0,s.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const d=l[c];o(d)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===l){h=d;break}if(h===-1)r.push([l,...c]);else if(c.length>0){let[f,...p]=c;const m=r[h][1];bk(m)&&bk(f)&&(f=nw(!0,m,f)),r[h]=[l,f,...p]}}}}const Yce=new m$().freeze();function iw(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function aw(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function lw(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function IA(t){if(!bk(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function EA(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Fg(t){return Zce(t)?t:new gz(t)}function Zce(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Qce(t){return typeof t=="string"||Jce(t)}function Jce(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ede="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",TA=[],_A={allowDangerousHtml:!0},tde=/^(https?|ircs?|mailto|xmpp)$/i,nde=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function rde(t){const e=t.allowedElements,n=t.allowElement,r=t.children||"",s=t.className,o=t.components,i=t.disallowedElements,a=t.rehypePlugins||TA,u=t.remarkPlugins||TA,l=t.remarkRehypeOptions?{...t.remarkRehypeOptions,..._A}:_A,c=t.skipHtml,d=t.unwrapDisallowed,h=t.urlTransform||sde,f=Yce().use(Mue).use(u).use(Dce,l).use(a),p=new gz;typeof r=="string"&&(p.value=r);for(const v of nde)Object.hasOwn(t,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+ede+v.id,void 0);const m=f.parse(p);let y=f.runSync(m,p);return s&&(y={type:"element",tagName:"div",properties:{className:s},children:y.type==="root"?y.children:[y]}),pz(y,g),gae(y,{Fragment:be.Fragment,components:o,ignoreInvalidStyle:!0,jsx:be.jsx,jsxs:be.jsxs,passKeys:!0,passNode:!0});function g(v,x,b){if(v.type==="raw"&&b&&typeof x=="number")return c?b.children.splice(x,1):b.children[x]={type:"text",value:v.value},x;if(v.type==="element"){let w;for(w in Jb)if(Object.hasOwn(Jb,w)&&Object.hasOwn(v.properties,w)){const k=v.properties[w],C=Jb[w];(C===null||C.includes(v.tagName))&&(v.properties[w]=h(String(k||""),w,v))}}if(v.type==="element"){let w=e?!e.includes(v.tagName):i?i.includes(v.tagName):!1;if(!w&&n&&typeof x=="number"&&(w=!n(v,x,b)),w&&b&&typeof x=="number")return d&&v.children?b.children.splice(x,1,...v.children):b.children.splice(x,1),x}}}function sde(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e<0||s>-1&&e>s||n>-1&&e>n||r>-1&&e>r||tde.test(t.slice(0,e))?t:""}function ode(){const{key:t}=Du(),e=v1(),{t:n}=zG(),r=K.useCallback(()=>{e(-1)},[e]);return be.jsx("div",{className:Nie.container,children:be.jsxs("main",{children:[be.jsxs("header",{children:[be.jsx("img",{src:"/logo192_bw.png",alt:"logo",width:128,height:128}),be.jsx("h1",{children:n("about.title")})]}),be.jsxs("p",{children:["The GenAI Somekone was funded by the"," ",be.jsx("a",{href:"https://www.aka.fi/en/strategic-research/",children:"Strategic Research Council"})," in Finland as a part of the ",be.jsx("a",{href:"https://generation-ai-stn.fi",children:"Generation AI project"}),", grants #352859, #352876, #352971, #353627, #353551, #352871, #352870, #353273, #353078. The application was developed by Dr. Nicolas Pope, as a researcher at the University of Eastern Finland. If you have any enquiries regarding the tool you can send them to nicolas.pope@uef.fi."]}),be.jsx("p",{children:"Copyright © 2023 Nicolas Pope."}),be.jsx("h2",{children:n("about.privacyTitle")}),be.jsx(rde,{children:n("about.privacy",{returnObjects:!0}).join(`

`)}),t!=="default"&&be.jsx("p",{children:be.jsx(Goe,{sx:{fontSize:"14pt"},onClick:r,variant:"contained",children:n("about.back")})})]})})}var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vz={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new s(c,d||u,h),p=n?n+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],f]:u._events[p].push(f):(u._events[p]=f,u._eventsCount++),u}function i(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,c;if(this._eventsCount===0)return u;for(c in l=this._events)e.call(l,c)&&u.push(n?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=n?n+u:u,c=this._events[l];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,h=c.length,f=new Array(h);d<h;d++)f[d]=c[d].fn;return f},a.prototype.listenerCount=function(u){var l=n?n+u:u,c=this._events[l];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,l,c,d,h,f){var p=n?n+u:u;if(!this._events[p])return!1;var m=this._events[p],y=arguments.length,g,v;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,c),!0;case 4:return m.fn.call(m.context,l,c,d),!0;case 5:return m.fn.call(m.context,l,c,d,h),!0;case 6:return m.fn.call(m.context,l,c,d,h,f),!0}for(v=1,g=new Array(y-1);v<y;v++)g[v-1]=arguments[v];m.fn.apply(m.context,g)}else{var x=m.length,b;for(v=0;v<x;v++)switch(m[v].once&&this.removeListener(u,m[v].fn,void 0,!0),y){case 1:m[v].fn.call(m[v].context);break;case 2:m[v].fn.call(m[v].context,l);break;case 3:m[v].fn.call(m[v].context,l,c);break;case 4:m[v].fn.call(m[v].context,l,c,d);break;default:if(!g)for(b=1,g=new Array(y-1);b<y;b++)g[b-1]=arguments[b];m[v].fn.apply(m[v].context,g)}}return!0},a.prototype.on=function(u,l,c){return o(this,u,l,c,!1)},a.prototype.once=function(u,l,c){return o(this,u,l,c,!0)},a.prototype.removeListener=function(u,l,c,d){var h=n?n+u:u;if(!this._events[h])return this;if(!l)return i(this,h),this;var f=this._events[h];if(f.fn)f.fn===l&&(!d||f.once)&&(!c||f.context===c)&&i(this,h);else{for(var p=0,m=[],y=f.length;p<y;p++)(f[p].fn!==l||d&&!f[p].once||c&&f[p].context!==c)&&m.push(f[p]);m.length?this._events[h]=m.length===1?m[0]:m:i(this,h)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=n?n+u:u,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(vz);var ide=vz.exports;const ade=yz(ide);var lde=Object.defineProperty,ude=(t,e,n)=>e in t?lde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cde=(t,e,n)=>ude(t,typeof e!="symbol"?e+"":e,n);let dde=class{constructor(){cde(this,"emitter",new ade)}emit(e,...n){this.emitter.emit(e,...n)}on(e,n){this.emitter.on(e,n)}off(e,n){this.emitter.off(e,n)}},uw;function Md(){return uw||(uw=new dde),uw}const NA=["Emma","Liam","Noah","Ava","Mia","Zoe","Lucy","Jack","Ella","Ryan","Lily","Max","Anna","Leah","Sam","Kate","Luke","John","Jane","Sara","Cole","Ruby","Ivy","Joel","Adam","Rose","Sean","Gail","Finn","Mark","Amy","Alex","Jude","Maya","Owen","Neil","Eve","Troy","Elle","Ray","Tess","Kyle","Ian","Nina","Jade","Hope","Liam","Zara","Tom","Remy"],hde="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Massa ultricies mi quis hendrerit. Aliquam ut porttitor leo a diam sollicitudin tempor. Condimentum mattis pellentesque id nibh tortor id. Viverra accumsan in nisl nisi scelerisque. Venenatis tellus in metus vulputate eu. Arcu vitae elementum curabitur vitae nunc sed. Et molestie ac feugiat sed lectus. Interdum velit euismod in pellentesque massa placerat. Est placerat in egestas erat imperdiet sed. Commodo odio aenean sed adipiscing diam donec adipiscing. Eget aliquet nibh praesent tristique magna sit amet. Curabitur vitae nunc sed velit dignissim sodales ut eu. Odio morbi quis commodo odio. Magna sit amet purus gravida quis blandit turpis cursus. Nibh cras pulvinar mattis nunc sed blandit libero volutpat sed. Neque sodales ut etiam sit amet. Enim nec dui nunc mattis enim. Sit amet nisl purus in mollis. In hendrerit gravida rutrum quisque non tellus orci ac auctor.";function xz(t){return hde.slice(0,t.length)}let cw=0;function fde(){const t=NA[cw];return cw=(cw+1)%NA.length,t}var pde=Object.defineProperty,mde=(t,e,n)=>e in t?pde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dw=(t,e,n)=>mde(t,typeof e!="symbol"?e+"":e,n);let gde=class{constructor(){dw(this,"logs",new Map),dw(this,"logsByType",new Map),dw(this,"engagementRecord",new Map)}reset(){this.logs.clear(),this.logsByType.clear()}deleteLogs(e){this.logs.delete(e),this.logsByType.forEach((n,r)=>{this.logsByType.set(r,n.filter(s=>s.user!==e))})}};function yde(t){return Math.max(0,Math.min(10,(t-2e3)/8e3))}const g$={seen:0,like:.1,unreact:-.1,share_public:.5,dwell:.3,follow:.5,unfollow:-.5,comment:.6,hide:-.5,begin:NaN,end:NaN,engagement:NaN,hide_similar:NaN,inactive:NaN};function bz(t){return yde(t)*g$.dwell}function wz(t){return Math.min(1,t/80)*g$.comment}function $0(t){return g$[t]}function Cze(t){let e=0;return t.forEach(n=>{switch(n.activity){case"engagement":return n.value||0;case"comment":e+=wz(n.value||0);break;case"dwell":e+=bz(n.value||0);break;case"seen":case"like":case"unreact":case"share_public":case"follow":case"unfollow":case"hide":e+=$0(n.activity);break}}),e}var vde=Object.defineProperty,xde=(t,e,n)=>e in t?vde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RA=(t,e,n)=>xde(t,typeof e!="symbol"?e+"":e,n);class bde{constructor(e){RA(this,"broker"),RA(this,"state",new gde),this.broker=e}increaseContentEngagement(e,n,r){const s=`${e}--${n}`,o=this.state.engagementRecord.get(s)||0;this.state.engagementRecord.set(s,o+r)}resetContentEngagement(e,n){const r=`${e}--${n}`;this.state.engagementRecord.delete(r)}dwellActivity(e,n,r,s){const o=bz(r);this.increaseContentEngagement(e,n,o),this.broker.emit("activity","dwell",e,n,o,s),this.broker.emit("activity-dwell",e,n,o,s)}commentActivity(e,n,r,s){const o=wz(r);this.increaseContentEngagement(e,n,o),this.broker.emit("activity","comment",e,n,o,s),this.broker.emit("activity-comment",e,n,o,s)}createEngagementEntry(e,n){const r=`${e}--${n}`,s=this.state.engagementRecord.get(r)||0;this.resetContentEngagement(e,n),this.addLogEntry({id:n,activity:"engagement",value:s,timestamp:Date.now()},e)}processLogEntry(e,n,r){const s=n,o=e.id||"";switch(e.activity){case"dwell":this.dwellActivity(s,o,e.value||0,e.timestamp);break;case"comment":this.commentActivity(s,o,e.value||0,e.timestamp);break;case"engagement":this.broker.emit("activity","engagement",s,o,e.value||0,e.timestamp),this.broker.emit("activity-engagement",s,o,e.value||0,e.timestamp);break;default:this.increaseContentEngagement(s,o,$0(e.activity)),this.broker.emit("activity",e.activity,s,o,$0(e.activity),e.timestamp),this.broker.emit(`activity-${e.activity}`,s,o,$0(e.activity),e.timestamp);break}r||(this.broker.emit(`log-${s}`),this.broker.emit(`logdata-${e.activity}`,s,e))}addLogEntry(e,n,r){const s=n,o=this.state.logs.get(s)||[];o.push(e),this.state.logs.set(s,o);const i=this.state.logsByType.get(e.activity),a=i||[];i||this.state.logsByType.set(e.activity,a),a.push({user:s,entry:e}),this.processLogEntry(e,s,r)}appendActionLog(e,n,r){const s=n;if(r){const o=this.state.logs.get(s)||[];this.state.logs.set(s,[...o,...e])}else e.forEach(o=>{this.addLogEntry(o,s,!0)});this.broker.emit(`log-${s}`),e.forEach(o=>this.broker.emit(`logdata-${o.activity}`,s,o))}getActionLog(e){const n=e;return this.state.logs.get(n)||[]}getActionLogSince(e,n){const r=[],s=this.getActionLog(n);for(let o=s.length-1;o>=0&&s[o].timestamp>e;--o)r.push(s[o]);return r.reverse()}getActionLogTypeSince(e,n){const r=[],s=this.state.logsByType.get(n)||[];for(let o=s.length-1;o>=0&&s[o].entry.timestamp>e;--o)r.push(s[o]);return r.reverse()}removeLogs(e){this.state.deleteLogs(e)}anonLogs(){this.state.logs.forEach(e=>{e.forEach(n=>{n.activity==="comment"&&n.content&&(n.content=xz(n.content))})})}sortLogs(){this.state.logsByType.forEach(e=>{e.sort((n,r)=>n.entry.timestamp-r.entry.timestamp)})}}let hw;function Sz(){return hw||(hw=new bde(Md())),hw}var wde=Object.defineProperty,Sde=(t,e,n)=>e in t?wde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ih=(t,e,n)=>Sde(t,typeof e!="symbol"?e+"":e,n);let kde=class{constructor(){Ih(this,"nodeStore",new Map),Ih(this,"nodeTypeIndex",new Map),Ih(this,"edgeStore",new Map),Ih(this,"edgeSrcIndex",new Map),Ih(this,"edgeTypeSrcIndex",new Map)}reset(){this.nodeStore.clear(),this.nodeTypeIndex.clear(),this.edgeStore.clear(),this.edgeSrcIndex.clear(),this.edgeTypeSrcIndex.clear()}};function kz(t){return{nodes:Array.from(t.nodeStore.values()),edges:Array.from(t.edgeStore.values())}}function Cde(t){return Array.from(t.nodeStore.values())}function Cz(t){return JSON.stringify(kz(t),void 0,4)}const $de=window||global;$de.dumpGraph=Cz;const Ide=new Set(["coengaged","last_engaged","seen","engaged"]);function Ede(t,e,n,r,s,o){var i,a;if(!t.nodeStore.has(n)||!t.nodeStore.has(r))return null;const u=`${r}:${e}:${n}`,l=t.edgeStore.get(u);if(l)return l.weight=s||0,l.timestamp=o||Date.now(),u;const c={type:e,source:n,destination:r,weight:s||0,metadata:{},timestamp:0};c.timestamp=o||Date.now(),t.edgeStore.set(u,c),t.edgeSrcIndex.has(n)||t.edgeSrcIndex.set(n,[]),(i=t.edgeSrcIndex.get(n))==null||i.push(c);const d=`${e}:${n}`;return t.edgeTypeSrcIndex.has(d)||t.edgeTypeSrcIndex.set(d,[]),(a=t.edgeTypeSrcIndex.get(d))==null||a.push(c),u}function Tde(t,e){e.forEach(n=>{const r=`${n.destination}:${n.type}:${n.source}`;if(Ide.has(n.type)&&t.edgeStore.has(r)){const a=t.edgeStore.get(r);a&&(n.weight+=a.weight)}t.edgeStore.set(r,n);const s=t.edgeSrcIndex.get(n.source);s?s.push(n):t.edgeSrcIndex.set(n.source,[n]);const o=`${n.type}:${n.source}`,i=t.edgeTypeSrcIndex.get(o);i?i.push(n):t.edgeTypeSrcIndex.set(o,[n])})}function _de(t,e,n,r,s,o){var i,a;const u=`${r}:${e}:${n}`,l=t.edgeStore.get(u),c=l||{type:e,source:n,destination:r,weight:0,metadata:{},timestamp:0};if(c.timestamp=o||Date.now(),c.weight+=s,!l){t.edgeStore.set(u,c),t.edgeSrcIndex.has(n)||t.edgeSrcIndex.set(n,[]),(i=t.edgeSrcIndex.get(n))==null||i.push(c);const d=`${e}:${n}`;t.edgeTypeSrcIndex.has(d)||t.edgeTypeSrcIndex.set(d,[]),(a=t.edgeTypeSrcIndex.get(d))==null||a.push(c)}}function Nde(t,e,n,r){if(r){if(Array.isArray(r))return r.map(s=>{const o=`${s}:${e}:${n}`,i=t.edgeStore.get(o);return i?i.weight:0});{const s=`${r}:${e}:${n}`,o=t.edgeStore.get(s);return[o?o.weight:0]}}else return $z(t,e,n).map(s=>s.weight)}function Rde(t,e,n,r){const s=`${r}:${e}:${n}`;return t.edgeStore.get(s)}function Ade(t,e,n){if(Array.isArray(e)){const r=[];for(let s=0;s<e.length;++s){const o=e[s],i=t.edgeSrcIndex.get(o);if(i&&r.push(...i),n&&r.length>n)break}return n?r.slice(0,n):r}else{const r=t.edgeSrcIndex.get(e)||[];return n?r.slice(0,n):r}}function $z(t,e,n,r){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;++o){const i=n[o];if(Array.isArray(e))for(let a=0;a<e.length;++a){const u=e[a],l=t.edgeTypeSrcIndex.get(`${u}:${i}`);if(l&&s.push(...l),r&&s.length>r)break}else{const a=t.edgeTypeSrcIndex.get(`${e}:${i}`);a&&s.push(...a)}if(r&&s.length>r)break}return r?s.slice(0,r):s}else if(Array.isArray(e)){const s=[];for(let o=0;o<e.length;++o){const i=e[o],a=t.edgeTypeSrcIndex.get(`${i}:${n}`);if(a&&s.push(...a),r&&s.length>r)break}return r?s.slice(0,r):s}else{const s=t.edgeTypeSrcIndex.get(`${e}:${n}`)||[];return r?s.slice(0,r):s}}var Cr=[];for(var fw=0;fw<256;++fw)Cr.push((fw+256).toString(16).slice(1));function Dde(t,e=0){return(Cr[t[e+0]]+Cr[t[e+1]]+Cr[t[e+2]]+Cr[t[e+3]]+"-"+Cr[t[e+4]]+Cr[t[e+5]]+"-"+Cr[t[e+6]]+Cr[t[e+7]]+"-"+Cr[t[e+8]]+Cr[t[e+9]]+"-"+Cr[t[e+10]]+Cr[t[e+11]]+Cr[t[e+12]]+Cr[t[e+13]]+Cr[t[e+14]]+Cr[t[e+15]]).toLowerCase()}var Mg,Ode=new Uint8Array(16);function Pde(){if(!Mg&&(Mg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Mg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mg(Ode)}var Lde=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const AA={randomUUID:Lde};function Fde(t,e,n){if(AA.randomUUID&&!e&&!t)return AA.randomUUID();t=t||{};var r=t.random||(t.rng||Pde)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Dde(r)}function Mde(t,e){const n=t.edgeSrcIndex.get(e);n&&n.forEach(s=>{const o=`${s.destination}:${s.type}:${s.source}`,i=`${s.type}:${s.source}`;t.edgeStore.delete(o),t.edgeSrcIndex.delete(s.source),t.edgeTypeSrcIndex.delete(i)});const r=t.nodeStore.get(e);if(r){const s=t.nodeTypeIndex.get(r.type);t.nodeTypeIndex.set(r.type,(s||[]).filter(o=>o.id!==e)),t.nodeStore.delete(e)}}function zde(t,e){const n=t.nodeStore.get(e);n&&(n.timestamp=Date.now())}function Iz(t,e,n){const r=t.nodeStore.get(e);r&&(r.data=n,r.timestamp=Date.now())}function Bde(t,e,n,r){const s=n||`${e}:${Fde()}`;if(t.nodeStore.has(s))throw new Error("id_exists");const o={type:e,id:s,data:r,timestamp:Date.now()};t.nodeStore.set(s,o),t.nodeTypeIndex.has(e)||t.nodeTypeIndex.set(e,[]);const i=t.nodeTypeIndex.get(e);return i&&i.push(o),s}function Vde(t,e,n,r){const s=n;if(t.nodeStore.has(s)){if(r){const a=t.nodeStore.get(s);a&&a.data!==r&&Iz(t,s,r)}return}const o={type:e,id:s,data:r,timestamp:Date.now()};t.nodeStore.set(s,o),t.nodeTypeIndex.has(e)||t.nodeTypeIndex.set(e,[]);const i=t.nodeTypeIndex.get(e);return i&&i.push(o),s}function Ude(t,e){const n=e==null?void 0:e.period,r=e==null?void 0:e.strictPeriod,s=(e==null?void 0:e.startTimeOffset)||0,o=e==null?void 0:e.count,i=e==null?void 0:e.timeDecay,a=Date.now(),u=r!==void 0?a-(s||0):t.reduce((d,h)=>Math.max(d,h.timestamp),0)-(s||0),l=r!==void 0?u-r:n===void 0?0:u-n,c=(n===void 0&&r===void 0?t:t.filter(d=>d.timestamp<=u&&d.timestamp>=l)).map(d=>({id:d.destination,weight:e!=null&&e.weightFn?e.weightFn(d):i===void 0?d.weight:d.weight*(1-(1-i)*(1-(d.timestamp-l)/(u-l)))}));return c.sort((d,h)=>h.weight-d.weight),o?c.slice(0,o):c}var Wde=Object.defineProperty,jde=(t,e,n)=>e in t?Wde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DA=(t,e,n)=>jde(t,typeof e!="symbol"?e+"":e,n);let Gde=class{constructor(e){DA(this,"state",new kde),DA(this,"broker"),this.broker=e}reset(){this.state.reset()}addEdge(e,n,r,s,o){const i=Ede(this.state,e,n,r,s,o);return this.broker.emit(`nodeedgetype-${n}-${e}`),this.broker.emit(`edgetype-${e}`,n),i}addEdges(e){Tde(this.state,e),e.forEach(n=>{this.broker.emit(`nodeedgetype-${n.source}-${n.type}`),this.broker.emit(`edgetype-${n.type}`,n.source)})}addOrAccumulateEdge(e,n,r,s,o){_de(this.state,e,n,r,s,o),this.broker.emit(`nodeedgetype-${n}-${e}`),this.broker.emit(`edgetype-${e}`,n)}getEdgeWeights(e,n,r){return Nde(this.state,e,n,r)}getEdge(e,n,r){return Rde(this.state,e,n,r)}getEdges(e,n){return Ade(this.state,e,n)}getEdgesOfType(e,n,r){return $z(this.state,e,n,r)}removeNode(e){const n=this.state.nodeStore.get(e);Mde(this.state,e),n&&(this.broker.emit(`nodetype-${n.type}`,e),this.broker.emit(`node-${e}`))}touchNode(e){zde(this.state,e)}updateNode(e,n){const r=this.state.nodeStore.get(e);Iz(this.state,e,n),r&&(this.broker.emit(`nodetype-${r.type}`,e),this.broker.emit(`node-${e}`))}addNode(e,n,r){const s=Bde(this.state,e,n,r);return this.broker.emit(`nodetype-${e}`,s),this.broker.emit(`node-${s}`),this.broker.emit(`newnodetype-${e}`,s),s}hasNode(e){return this.state.nodeStore.has(e)}addNodeIfNotExists(e,n,r){const s=Vde(this.state,e,n,r);return(!s&&r||s)&&(this.broker.emit(`nodetype-${e}`,s||n),this.broker.emit(`node-${s||n}`)),s&&this.broker.emit(`newnodetype-${e}`,s),s}addNodes(e){e.forEach(n=>{this.addNodeIfNotExists(n.type,n.id,n.data)})}getNodeType(e){const n=this.state.nodeStore.get(e);return n?n.type:null}getNodeData(e){const n=this.state.nodeStore.get(e);return n==null?void 0:n.data}getNodesByType(e){const n=this.state.nodeTypeIndex.get(e);return n?n.map(r=>r.id):[]}getNodesSince(e,n){return(this.state.nodeTypeIndex.get(e)||[]).filter(r=>r.timestamp>n)}getRelated(e,n,r){const s=this.getEdgesOfType(e,n);return Ude(s,r)}dumpNodes(){return Cde(this.state)}dump(){return kz(this.state)}dumpJSON(){return Cz(this.state)}};function Hde(t){return t.startsWith("content:")}function Kde(t){return t.startsWith("user:")}function Eze(t){return t.startsWith("topic:")}let pw;function kv(){return pw||(pw=new Gde(Md())),pw}function qde(t,e){return t.addNode("topic",`topic:${e}`,{label:e})}function zo(t,e){const n=`topic:${e}`;return t.hasNode(n)||qde(t,e),n}function Sa(t){return t.split(":")[1]||""}var Xde=Object.defineProperty,Yde=(t,e,n)=>e in t?Xde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zg=(t,e,n)=>Yde(t,typeof e!="symbol"?e+"":e,n);let Zde=class{constructor(){zg(this,"dataStore",new Map),zg(this,"metaStore",new Map),zg(this,"commentStore",new Map),zg(this,"statsStore",new Map)}reset(){this.dataStore.clear(),this.metaStore.clear(),this.commentStore.clear(),this.statsStore.clear()}};function Qde(t){return Math.sqrt(t.reduce((e,n)=>e+n*n,0))}function mf(t){const e=Math.sqrt(t.reduce((n,r)=>n+r*r,0));return e===0?t:t.map(n=>n/e)}function Jde(t,e){var n;const r=e.reduce((o,i)=>o+i,0),s=new Array(((n=t[0])==null?void 0:n.length)||0);return s.fill(0),t.forEach((o,i)=>{o.forEach((a,u)=>{s[u]+=a*e[i]})}),s.forEach((o,i)=>{s[i]/=r}),s}function ehe(t,e){let n=0,r=0,s=0;for(let o=0;o<t.length;++o)n+=t[o]*e[o],r+=t[o]*t[o],s+=e[o]*e[o];return r=Math.sqrt(r),s=Math.sqrt(s),n/(r*s)}function Cv(t,e){return t.reduce((n,r,s)=>n+r*e[s],0)}function the(t,e){return t.length!==e.length?0:ehe(t,e)}function nhe(t,e){let n=0;for(let r=0;r<t.length;++r)for(let s=0;s<e.length;++s){if(t[r]===e[s])continue;const o=Cv(t[r],e[s]);n=Math.max(n,1-o)}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rhe=1e-7,she=1e-4;class Ez{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class y${refCount(e){return cs("refCount")}incRef(e){return cs("incRef")}timerAvailable(){return!0}time(e){return cs("time")}read(e){return cs("read")}readSync(e){return cs("readSync")}readToGPU(e,n){return cs("readToGPU")}numDataIds(){return cs("numDataIds")}disposeData(e,n){return cs("disposeData")}write(e,n,r){return cs("write")}move(e,n,r,s,o){return cs("move")}createTensorFromGPUData(e,n,r){return cs("createTensorFromGPUData")}memory(){return cs("memory")}floatPrecision(){return cs("floatPrecision")}epsilon(){return this.floatPrecision()===32?rhe:she}dispose(){return cs("dispose")}}function cs(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ohe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,vc(t,e,n)}function gu(t,e,n){return Math.max(t,Math.min(e,n))}function v$(t){return t%2===0?t:t+1}function vc(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ihe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function B(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function x$(t,e,n=""){B(Ft(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function b$(t){B(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ve(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Ft(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function pd(t){return t%1===0}function Sk(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function qc(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function OA(t,e=s=>0,n,r){return new Promise((s,o)=>{let i=0;const a=()=>{if(t()){s();return}i++;const u=e(i);if(n!=null&&i>=n){o();return}r!=null?r(a,u):setTimeout(a,u)};a()})}function Tz(t,e){let n=1,r=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Ct(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),B(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),B(t.every(r=>pd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function ml(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||s?null:Ct(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(o!=null){if(o[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(o[i]==null||o[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),o[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function _r(t,e){return Mn(t,e)}function Mn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function ahe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function lhe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function _z(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function vy(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function uhe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Ap(t){return typeof t=="string"||t instanceof String}function che(t){return typeof t=="boolean"}function kk(t){return typeof t=="number"}function zd(t){return Array.isArray(t)?zd(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":kk(t)?"float32":Ap(t)?"string":che(t)?"bool":"float32"}function Ck(t){return!!(t&&t.constructor&&t.call&&t.apply)}function $k(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Qe(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function Nz(t,e,n,r=!1){const s=new Array;if(e.length===1){const o=e[0]*(r?2:1);for(let i=0;i<o;i++)s[i]=n[t+i]}else{const o=e[0],i=e.slice(1),a=i.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<o;u++)s[u]=Nz(t+u*a,i,n,r)}return s}function Wo(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,o)=>s*o)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return Nz(0,t,e,n)}function dhe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function w$(t,e){const n=Nr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Nr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function Rz(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Wo(t,new Float32Array(n));if(e==="int32")return Wo(t,new Int32Array(n));if(e==="bool")return Wo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function ha(t){t.forEach(e=>{B(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function vi(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Bd(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function S$(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PA="tfjsflags";class hhe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=fhe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(S$(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);PA in e&&e[PA].split(",").forEach(r=>{const[s,o]=r.split(":");this.urlFlags[s]=mhe(s,o)})}}function fhe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(phe(e,r[0],r[1]),r.join("="))),e}function phe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function mhe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function de(){return Az}let Az=null;function ghe(t){Az=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let mw;function Dz(){if(mw==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");mw=t}return mw}function yhe(){const t=Dz();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function k$(t,e){const n=yhe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const $v="Abs",Dp="Acos",Op="Acosh",Vd="Add",C$="AddN",$$="All",I$="Any",Iv="ArgMax",Ev="ArgMin",Pp="Asin",Lp="Asinh",Fp="Atan",Mp="Atanh",zp="Atan2",Tv="AvgPool",E$="AvgPoolGrad",_v="AvgPool3D",T$="AvgPool3DGrad",Nv="BatchMatMul",Rv="BatchToSpaceND",_$="Bincount",N$="BitwiseAnd",vhe="BroadcastTo",Oz="BroadcastArgs",Bp="Cast",Vp="Ceil",Up="ClipByValue",R$="Complex",Av="ComplexAbs",Dv="Concat",Ov="Conv2D",A$="Conv2DBackpropFilter",Pv="Conv2DBackpropInput",Lv="Conv3D",D$="Conv3DBackpropFilterV2",O$="Conv3DBackpropInputV2",Wp="Cos",jp="Cosh",P$="Cumprod",Fv="Cumsum",L$="CropAndResize",F$="DenseBincount",M$="DepthToSpace",Mv="DepthwiseConv2dNative",z$="DepthwiseConv2dNativeBackpropFilter",B$="DepthwiseConv2dNativeBackpropInput",Pz="Diag",zv="Dilation2D",Ik="Dilation2DBackpropInput",Ek="Dilation2DBackpropFilter",xhe="Draw",Gp="RealDiv",V$="Einsum",Hp="Elu",U$="EluGrad",Kp="Erf",Bv="Equal",qp="Exp",Vv="ExpandDims",Xp="Expm1",W$="FFT",j$="Fill",G$="FlipLeftRight",Yp="Floor",Zp="FloorDiv",Uv="FusedBatchNorm",Wv="GatherV2",Lz="GatherNd",jv="Greater",Qp="GreaterEqual",Jp="Identity",H$="IFFT",K$="Imag",em="IsFinite",tm="IsInf",nm="IsNan",Gv="LeakyRelu",Hv="Less",Kv="LessEqual",Fz="LinSpace",rm="Log",sm="Log1p",qv="LogicalAnd",Xv="LogicalNot",Yv="LogicalOr",bhe="LogSoftmax",Zv="LRN",q$="LRNGrad",Qv="Max",om="Maximum",Jv="MaxPool",X$="MaxPoolGrad",ex="MaxPool3D",Y$="MaxPool3DGrad",Mz="MaxPoolWithArgmax",tx="Mean",nx="Min",im="Minimum",rx="MirrorPad",am="Mod",zz="Multinomial",lm="Multiply",sx="Neg",ox="NotEqual",Z$="NonMaxSuppressionV3",Q$="NonMaxSuppressionV4",J$="NonMaxSuppressionV5",ix="OnesLike",ax="OneHot",lx="Pack",ux="PadV2",um="Pow",cx="Prelu",dx="Prod",Bz="RaggedGather",Vz="RaggedRange",Uz="RaggedTensorToTensor",eI="Range",tI="Real",cm="Reciprocal",dm="Relu",hx="Reshape",fx="ResizeNearestNeighbor",nI="ResizeNearestNeighborGrad",px="ResizeBilinear",rI="ResizeBilinearGrad",hm="Relu6",mx="Reverse",fm="Round",pm="Rsqrt",Wz="ScatterNd",jz="TensorScatterUpdate",Gz="SearchSorted",gx="Select",mm="Selu",yx="Slice",gm="Sin",ym="Sinh",vm="Sign",xm="Sigmoid",bm="Softplus",wm="Sqrt",vx="Sum",xx="SpaceToBatchND",bx="SplitV",wx="Softmax",Hz="SparseFillEmptyRows",Kz="SparseReshape",qz="SparseSegmentMean",Xz="SparseSegmentSum",Yz="SparseToDense",Sm="SquaredDifference",sI="Square",oI="StaticRegexReplace",iI="StridedSlice",Zz="StringNGrams",Qz="StringSplit",Jz="StringToHashBucketFast",km="Sub",Cm="Tan",$m="Tanh",Im="Tile",aI="TopK",lI="Transform",Xc="Transpose",uI="Unique",Sx="Unpack",kx="UnsortedSegmentSum",Cx="ZerosLike",Em="Step",Tk="FromPixels",cI="RotateWithOffset",xy="_FusedMatMul",by="FusedConv2D",e4="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fs(...t){de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(...t)}function whe(...t){de().getBool("IS_TEST")||de().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wy=k$("kernelRegistry",()=>new Map),_k=k$("gradRegistry",()=>new Map);function Nk(t,e){const n=n4(t,e);return wy.get(n)}function LA(t){return _k.get(t)}function FA(t){const e=wy.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[o,i]=s,[a]=o.split("_");a===t&&n.push(i)}return n}function t4(t){const{kernelName:e,backendName:n}=t,r=n4(e,n);wy.has(r)&&Fs(`The kernel '${e}' for backend '${n}' is already registered`),wy.set(r,t)}function She(t){const{kernelName:e}=t;_k.has(e)&&de().getBool("DEBUG")&&Fs(`Overriding the gradient for '${e}'`),_k.set(e,t)}function n4(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var s4=hn,ho=null;try{ho=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function hn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}hn.prototype.__isLong__;Object.defineProperty(hn.prototype,"__isLong__",{value:!0});function Ns(t){return(t&&t.__isLong__)===!0}hn.isLong=Ns;var MA={},zA={};function Fu(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=zA[t],r)?r:(n=fn(t,(t|0)<0?-1:0,!0),s&&(zA[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=MA[t],r)?r:(n=fn(t,t<0?-1:0,!1),s&&(MA[t]=n),n))}hn.fromInt=Fu;function fo(t,e){if(isNaN(t))return e?Xl:po;if(e){if(t<0)return Xl;if(t>=o4)return l4}else{if(t<=-VA)return gs;if(t+1>=VA)return a4}return t<0?fo(-t,e).neg():fn(t%md|0,t/md|0,e)}hn.fromNumber=fo;function fn(t,e,n){return new hn(t,e,n)}hn.fromBits=fn;var Sy=Math.pow;function dI(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return po;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return dI(t.substring(1),e,n).neg();for(var s=fo(Sy(n,8)),o=po,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),u=parseInt(t.substring(i,i+a),n);if(a<8){var l=fo(Sy(n,a));o=o.mul(l).add(fo(u))}else o=o.mul(s),o=o.add(fo(u))}return o.unsigned=e,o}hn.fromString=dI;function Yo(t,e){return typeof t=="number"?fo(t,e):typeof t=="string"?dI(t,e):fn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}hn.fromValue=Yo;var BA=65536,khe=1<<24,md=BA*BA,o4=md*md,VA=o4/2,UA=Fu(khe),po=Fu(0);hn.ZERO=po;var Xl=Fu(0,!0);hn.UZERO=Xl;var Oc=Fu(1);hn.ONE=Oc;var i4=Fu(1,!0);hn.UONE=i4;var Rk=Fu(-1);hn.NEG_ONE=Rk;var a4=fn(-1,2147483647,!1);hn.MAX_VALUE=a4;var l4=fn(-1,-1,!0);hn.MAX_UNSIGNED_VALUE=l4;var gs=fn(0,-2147483648,!1);hn.MIN_VALUE=gs;var Fe=hn.prototype;Fe.toInt=function(){return this.unsigned?this.low>>>0:this.low};Fe.toNumber=function(){return this.unsigned?(this.high>>>0)*md+(this.low>>>0):this.high*md+(this.low>>>0)};Fe.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(gs)){var n=fo(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=fo(Sy(e,6),this.unsigned),i=this,a="";;){var u=i.div(o),l=i.sub(u.mul(o)).toInt()>>>0,c=l.toString(e);if(i=u,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};Fe.getHighBits=function(){return this.high};Fe.getHighBitsUnsigned=function(){return this.high>>>0};Fe.getLowBits=function(){return this.low};Fe.getLowBitsUnsigned=function(){return this.low>>>0};Fe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(gs)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Fe.isZero=function(){return this.high===0&&this.low===0};Fe.eqz=Fe.isZero;Fe.isNegative=function(){return!this.unsigned&&this.high<0};Fe.isPositive=function(){return this.unsigned||this.high>=0};Fe.isOdd=function(){return(this.low&1)===1};Fe.isEven=function(){return(this.low&1)===0};Fe.equals=function(e){return Ns(e)||(e=Yo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Fe.eq=Fe.equals;Fe.notEquals=function(e){return!this.eq(e)};Fe.neq=Fe.notEquals;Fe.ne=Fe.notEquals;Fe.lessThan=function(e){return this.comp(e)<0};Fe.lt=Fe.lessThan;Fe.lessThanOrEqual=function(e){return this.comp(e)<=0};Fe.lte=Fe.lessThanOrEqual;Fe.le=Fe.lessThanOrEqual;Fe.greaterThan=function(e){return this.comp(e)>0};Fe.gt=Fe.greaterThan;Fe.greaterThanOrEqual=function(e){return this.comp(e)>=0};Fe.gte=Fe.greaterThanOrEqual;Fe.ge=Fe.greaterThanOrEqual;Fe.compare=function(e){if(Ns(e)||(e=Yo(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Fe.comp=Fe.compare;Fe.negate=function(){return!this.unsigned&&this.eq(gs)?gs:this.not().add(Oc)};Fe.neg=Fe.negate;Fe.add=function(e){Ns(e)||(e=Yo(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,o=this.low&65535,i=e.high>>>16,a=e.high&65535,u=e.low>>>16,l=e.low&65535,c=0,d=0,h=0,f=0;return f+=o+l,h+=f>>>16,f&=65535,h+=s+u,d+=h>>>16,h&=65535,d+=r+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,fn(h<<16|f,c<<16|d,this.unsigned)};Fe.subtract=function(e){return Ns(e)||(e=Yo(e)),this.add(e.neg())};Fe.sub=Fe.subtract;Fe.multiply=function(e){if(this.isZero())return po;if(Ns(e)||(e=Yo(e)),ho){var n=ho.mul(this.low,this.high,e.low,e.high);return fn(n,ho.get_high(),this.unsigned)}if(e.isZero())return po;if(this.eq(gs))return e.isOdd()?gs:po;if(e.eq(gs))return this.isOdd()?gs:po;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(UA)&&e.lt(UA))return fo(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,o=this.low>>>16,i=this.low&65535,a=e.high>>>16,u=e.high&65535,l=e.low>>>16,c=e.low&65535,d=0,h=0,f=0,p=0;return p+=i*c,f+=p>>>16,p&=65535,f+=o*c,h+=f>>>16,f&=65535,f+=i*l,h+=f>>>16,f&=65535,h+=s*c,d+=h>>>16,h&=65535,h+=o*l,d+=h>>>16,h&=65535,h+=i*u,d+=h>>>16,h&=65535,d+=r*c+s*l+o*u+i*a,d&=65535,fn(f<<16|p,d<<16|h,this.unsigned)};Fe.mul=Fe.multiply;Fe.divide=function(e){if(Ns(e)||(e=Yo(e)),e.isZero())throw Error("division by zero");if(ho){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?ho.div_u:ho.div_s)(this.low,this.high,e.low,e.high);return fn(n,ho.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Xl:po;var r,s,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Xl;if(e.gt(this.shru(1)))return i4;o=Xl}else{if(this.eq(gs)){if(e.eq(Oc)||e.eq(Rk))return gs;if(e.eq(gs))return Oc;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(po)?e.isNegative()?Oc:Rk:(s=this.sub(e.mul(r)),o=r.add(s.div(e)),o)}else if(e.eq(gs))return this.unsigned?Xl:po;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=po}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Sy(2,a-48),l=fo(r),c=l.mul(e);c.isNegative()||c.gt(s);)r-=u,l=fo(r,this.unsigned),c=l.mul(e);l.isZero()&&(l=Oc),o=o.add(l),s=s.sub(c)}return o};Fe.div=Fe.divide;Fe.modulo=function(e){if(Ns(e)||(e=Yo(e)),ho){var n=(this.unsigned?ho.rem_u:ho.rem_s)(this.low,this.high,e.low,e.high);return fn(n,ho.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Fe.mod=Fe.modulo;Fe.rem=Fe.modulo;Fe.not=function(){return fn(~this.low,~this.high,this.unsigned)};Fe.and=function(e){return Ns(e)||(e=Yo(e)),fn(this.low&e.low,this.high&e.high,this.unsigned)};Fe.or=function(e){return Ns(e)||(e=Yo(e)),fn(this.low|e.low,this.high|e.high,this.unsigned)};Fe.xor=function(e){return Ns(e)||(e=Yo(e)),fn(this.low^e.low,this.high^e.high,this.unsigned)};Fe.shiftLeft=function(e){return Ns(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fn(0,this.low<<e-32,this.unsigned)};Fe.shl=Fe.shiftLeft;Fe.shiftRight=function(e){return Ns(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Fe.shr=Fe.shiftRight;Fe.shiftRightUnsigned=function(e){if(Ns(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return fn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?fn(n,0,this.unsigned):fn(n>>>e-32,0,this.unsigned)};Fe.shru=Fe.shiftRightUnsigned;Fe.shr_u=Fe.shiftRightUnsigned;Fe.toSigned=function(){return this.unsigned?fn(this.low,this.high,!1):this};Fe.toUnsigned=function(){return this.unsigned?this:fn(this.low,this.high,!0)};Fe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Fe.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Fe.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};hn.fromBytes=function(e,n,r){return r?hn.fromBytesLE(e,n):hn.fromBytesBE(e,n)};hn.fromBytesLE=function(e,n){return new hn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};hn.fromBytesBE=function(e,n){return new hn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const u4=Ed(s4),Che=Xy({__proto__:null,default:u4},[s4]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vl=u4||Che;function $x(t){return Vl.fromString(t,!0,16)}const c4=$x("c3a5c85c97cb3127"),Ll=$x("b492b66fbe98f273"),Wr=$x("9ae16a3b2f90404f");function Ak(t){return t.xor(t.shru(47))}function d4(t,e,n){const r=t.slice(e,e+n);return Vl.fromBytes(Array.from(r),!0,!0)}function rn(t,e){return d4(t,e,8)}function WA(t,e){return d4(t,e,4)}function cr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Ka(t,e,n=$x("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function $he(t,e,n,r,s,o){s=s.add(t),o=cr(o.add(s).add(r),21);const i=s;return s=s.add(e),s=s.add(n),o=o.add(cr(s,44)),[s.add(r),o.add(i)]}function Bg(t,e,n,r){return $he(rn(t,e),rn(t,e+8),rn(t,e+16),rn(t,e+24),n,r)}function Ihe(t,e=t.length){if(e>=8){const n=Wr.add(e*2),r=rn(t,0).add(Wr),s=rn(t,e-8),o=cr(s,37).mul(n).add(r),i=cr(r,25).add(s).mul(n);return Ka(o,i,n)}if(e>=4){const n=Wr.add(e*2),r=WA(t,0);return Ka(r.shl(3).add(e),WA(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],o=n+(r<<8),i=e+(s<<2);return Ak(Wr.mul(o).xor(c4.mul(i))).mul(Wr)}return Wr}function Ehe(t,e=t.length){const n=Wr.add(e*2),r=rn(t,0).mul(Ll),s=rn(t,8),o=rn(t,e-8).mul(n),i=rn(t,e-16).mul(Wr);return Ka(cr(r.add(s),43).add(cr(o,30)).add(i),r.add(cr(s.add(Wr),18)).add(o),n)}function The(t,e=t.length){const n=Wr.add(e*2),r=rn(t,0).mul(Wr),s=rn(t,8),o=rn(t,e-8).mul(n),i=rn(t,e-16).mul(Wr),a=cr(r.add(s),43).add(cr(o,30)).add(i),u=Ka(a,r.add(cr(s.add(Wr),18)).add(o),n),l=rn(t,16).mul(n),c=rn(t,24),d=a.add(rn(t,e-32)).mul(n),h=u.add(rn(t,e-24)).mul(n);return Ka(cr(l.add(c),43).add(cr(d,30)).add(h),l.add(cr(c.add(r),18)).add(d),n)}function _he(t,e=t.length){const n=Vl.fromNumber(81,!0);if(e<=32)return e<=16?Ihe(t,e):Ehe(t,e);if(e<=64)return The(t,e);let r=n,s=n.mul(Ll).add(113),o=Ak(s.mul(Wr).add(113)).mul(Wr),i=[Vl.UZERO,Vl.UZERO],a=[Vl.UZERO,Vl.UZERO];r=r.mul(Wr).add(rn(t,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=cr(r.add(s).add(i[0]).add(rn(t,u+8)),37).mul(Ll),s=cr(s.add(i[1]).add(rn(t,u+48)),42).mul(Ll),r=r.xor(a[1]),s=s.add(i[0]).add(rn(t,u+40)),o=cr(o.add(a[0]),33).mul(Ll),i=Bg(t,u,i[1].mul(Ll),r.add(a[0])),a=Bg(t,u+32,o.add(a[1]),s.add(rn(t,u+16))),[o,r]=[r,o],u+=64;while(u!==l);const d=Ll.add(o.and(255).shl(1));return u=c,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=cr(r.add(s).add(i[0]).add(rn(t,u+8)),37).mul(d),s=cr(s.add(i[1]).add(rn(t,u+48)),42).mul(d),r=r.xor(a[1].mul(9)),s=s.add(i[0].mul(9).add(rn(t,u+40))),o=cr(o.add(a[0]),33).mul(d),i=Bg(t,u,i[1].mul(d),r.add(a[0])),a=Bg(t,u+32,o.add(a[1]),s.add(rn(t,u+16))),[o,r]=[r,o],Ka(Ka(i[0],a[0],d).add(Ak(s).mul(c4)).add(o),Ka(i[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gl(t,e){return e==="string"?qa(t):Mu([t],e)}function Nhe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Mu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=yu(t)),de().getBool("DEBUG")&&ahe(t,e),Nhe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Jr(){return de().platform.now()}function qa(t,e="utf-8"){return e=e||"utf-8",de().platform.encode(t,e)}function tl(t,e="utf-8"){return e=e||"utf-8",de().platform.decode(t,e)}function bo(t){return de().platform.isTypedArray!=null?de().platform.isTypedArray(t):r4(t)}function yu(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||S$(t)||t==null||bo(t)&&n)e.push(t);else if(Array.isArray(t)||bo(t))for(let r=0;r<t.length;++r)yu(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)yu(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rhe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Dhe)}profileKernel(e,n,r){let s;const o=()=>{s=r()};let i;const a=Jr();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();for(const l of s)l.dataSync();i=Promise.resolve({kernelMs:Jr()-a})}if(de().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<s.length;l++){const c=s[l];c.data().then(d=>{Ahe(d,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:i.then(l=>l.kernelMs),extraInfo:i.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:o,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),s,i]).then(u=>{this.logger.logKernelProfile(n,a,u[0],u[1],o,u[2])})})}}function Ahe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class Dhe{logKernelProfile(e,n,r,s,o,i){const a=typeof s=="number"?qc(`${s}ms`,9):s.error,u=qc(e,25),l=n.rank,c=n.size,d=qc(n.shape.toString(),14);let h="";for(const f in o){const p=o[f];if(p!=null){const m=p.shape||n.shape,y=m.length;h+=`${f}: ${y}D ${y>0?m:""} `}}console.log(`%c${u}	%c${a}	%c${l}D ${d}	%c${c}	%c${h}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ohe(t,e,n){const r={},s={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<t.length;u++){const l=t[u],c=l.inputs;for(const d in c){const h=c[d];let f=!1;for(let p=0;p<e.length;p++)if(r[h.id]){l.outputs.forEach(m=>r[m.id]=!0),f=!0,s[l.id]=!0;break}if(f)break}}const o={};o[n.id]=!0;const i={};for(let u=t.length-1;u>=0;u--){const l=t[u],c=l.inputs;for(let d=0;d<l.outputs.length;d++)if(o[l.outputs[d].id]){for(const h in c)o[c[h].id]=!0,i[l.id]=!0;break}}const a=[];for(let u=0;u<t.length;u++){const l=t[u];if(s[l.id]&&i[l.id]){const c={};for(const h in l.inputs){const f=l.inputs[h];r[f.id]&&(c[h]=f)}const d=Object.assign({},l);d.inputs=c,d.outputs=l.outputs,a.push(d)}}return a}function Phe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const o=e[s],i=[];if(o.outputs.forEach(u=>{const l=t[u.id];l!=null?i.push(l):i.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const a=o.gradient(i);for(const u in o.inputs){if(!(u in a))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(a)}.`);const l=n(()=>a[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=o.inputs[u];if(!Ft(l.shape,c.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=l;else{const d=t[c.id];t[c.id]=r(d,l),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jA=20,Eh=3,gw=7;function Lhe(t,e,n,r){const s=Qe(e),o=Fhe(t,e,n,s),i=e.length,a=I0(t,e,n,s,o),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${i}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(a.map(l=>"    "+l).join(`
`)),u.join(`
`)}function Fhe(t,e,n,r){const s=ve(e),o=r[r.length-1],i=new Array(o).fill(0),a=e.length,u=n==="complex64"?Hh(t):t;if(a>1)for(let l=0;l<s/o;l++){const c=l*o;for(let d=0;d<o;d++)i[d]=Math.max(i[d],Gh(u[c+d],0,n).length)}return i}function Gh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(gw))} + ${parseFloat(t[1].toFixed(gw))}j`:Ap(t)?r=`'${t}'`:n==="bool"?r=h4(t):r=parseFloat(t.toFixed(gw)).toString(),qc(r,e)}function h4(t){return t===0?"false":"true"}function I0(t,e,n,r,s,o=!0){const i=n==="complex64"?2:1,a=e[0],u=e.length;if(u===0){if(n==="complex64"){const m=Hh(t);return[Gh(m[0],0,n)]}return n==="bool"?[h4(t[0])]:[t[0].toString()]}if(u===1){if(a>jA){const y=Eh*i;let g=Array.from(t.slice(0,y)),v=Array.from(t.slice((a-Eh)*i,a*i));return n==="complex64"&&(g=Hh(g),v=Hh(v)),["["+g.map((x,b)=>Gh(x,s[b],n)).join(", ")+", ..., "+v.map((x,b)=>Gh(x,s[a-Eh+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?Hh(t):Array.from(t)).map((y,g)=>Gh(y,s[g],n)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),d=r[0]*i,h=[];if(a>jA){for(let m=0;m<Eh;m++){const y=m*d,g=y+d;h.push(...I0(t.slice(y,g),l,n,c,s,!1))}h.push("...");for(let m=a-Eh;m<a;m++){const y=m*d,g=y+d;h.push(...I0(t.slice(y,g),l,n,c,s,m===a-1))}}else for(let m=0;m<a;m++){const y=m*d,g=y+d;h.push(...I0(t.slice(y,g),l,n,c,s,m===a-1))}const f=u===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=`,
`;for(let m=2;m<u;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(o?"":p),h}function Hh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ve(e),r!=null){const s=r.length;B(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Mn(n,this.size),this.strides=Qe(e)}set(e,...n){n.length===0&&(n=[0]),B(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const o=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(o)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Fo().makeTensor(this.values,this.shape,this.dtype)}}let Fo=null,xc=null;function Mhe(t){Fo=t}function zhe(t){xc=t}class er{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ve(e),this.strides=Qe(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return xc.buffer(this.shape,this.dtype,e)}bufferSync(){return xc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Wo(this.shape,e,this.dtype==="complex64")}arraySync(){return Wo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Fo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>tl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Fo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Fo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>tl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Fo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Fo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return xc.print(this,e)}clone(){return this.throwIfDisposed(),xc.clone(this)}toString(e=!1){const n=this.dataSync();return Lhe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),xc.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Fo().makeVariable(this,e,n,r)}}Object.defineProperty(er,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ye(){return k$("Tensor",()=>er)}ye();class ky extends er{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Ft(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Fo().disposeTensor(this),this.dataId=e.dataId,Fo().incRef(this,null)}dispose(){Fo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(ky,Symbol.hasInstance,{value:t=>t instanceof er&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var GA;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(GA||(GA={}));var Dk;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Dk||(Dk={}));var Ok;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Ok||(Ok={}));var Pk;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Pk||(Pk={}));var Lk;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Lk||(Lk={}));const Bhe={float32:Pk,int32:Dk,bool:Ok,complex64:Lk};function $s(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Bhe[t][e]}function hI(t){return $s(t,"int32")}function f4(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function p4(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bn(t,e){if(t.dtype===e.dtype)return[t,e];const n=$s(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function m4(t){const e=[];return g4(t,e,new Set),e}function g4(t,e,n){if(t==null)return;if(t instanceof er){e.push(t);return}if(!Vhe(t))return;const r=t;for(const s in r){const o=r[s];n.has(o)||(n.add(o),g4(o,e,n))}}function Vhe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yw(t){return t.kernelName!=null}class HA{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class gd{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new HA}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Fs(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Rhe(this.backendInstance),!0}setupRegisteredKernels(){FA(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){FA(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof y$)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,o=r.then(i=>s<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Fs(`Initialization of backend ${e} failed`),Fs(i.stack||i.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Fs(`Initialization of backend ${e} failed`),Fs(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:o}=this.initializeBackend(r);if(o||s)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,o=this.readSync(n),i=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,o,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return gd.nextTensorId++}nextVariableId(){return gd.nextVariableId++}clone(e){const n=ee.runKernel(Jp,{x:e}),r={x:e},s=i=>({x:()=>{const a="float32",u={x:i},l={dtype:a};return ee.runKernel(Bp,u,l)}}),o=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,o,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Nk(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let o=0;r.forEach(u=>{o+=u.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-o-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),o=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let u;const l=yw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(yw(e)){const{kernelName:p,inputs:m,attrs:y}=e;this.backendName==null&&this.backend;const g=Nk(p,this.backendName);B(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();u=g.kernelFunc({inputs:m,attrs:y,backend:this.backend});const x=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,x);const b=x.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(s){const w=this.getTensorsForGradient(p,m,b);r=this.saveTensorsForBackwardMode(w)}return b}}else{const{forwardFunc:p}=e,m=y=>{s&&(r=y.map(g=>this.keep(this.clone(g))))};a=()=>{const y=this.backend.numDataIds();u=this.tidy(()=>p(this.backend,m));const g=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,y,g),g}}const{inputs:c,attrs:d}=e,h=yw(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(l,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),s&&this.addTapeNode(l,c,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=LA(e);if(s!=null){const o=s.inputsToSave||[],i=s.outputsToSave||[];let a;s.saveAllInputs?(B(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(l=>n[l])):a=o.map(l=>n[l]);const u=r.filter((l,c)=>i[c]);return a.concat(u)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let o=e;r==="string"&&Ap(e[0])&&(o=e.map(u=>qa(u)));const i=s.write(o,n,r),a=new er(n,r,i,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const u=this.state.tensorInfo.get(i),l=uhe(o);this.state.numBytes+=l-u.bytes,u.bytes=l}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const o={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(o,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:o}=e,i=new er(s,o,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const o=new ky(e,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*vy(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof ky||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*vy(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,o,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:o},u=LA(e);u!=null&&(s=u.gradFunc),s!=null&&(a.gradient=l=>(l=l.map((c,d)=>{if(c==null){const h=r[d],f=Nr(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return c}),s(l.length>1?l:l[0],o,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=m4(e),r=new Set(n.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const i=this.state.activeScope.track[o];!i.kept&&!r.has(i.id)&&i.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(o=>{!o.kept&&o.scopeId===s.id&&this.track(o)})}gradients(e,n,r,s=!1){if(B(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));B(o instanceof er,()=>"The result y returned by f() must be a tensor.");const i=Ohe(this.state.activeTape,n,o);if(!s&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[o.id]=r??Uhe(o.shape),Phe(a,i,l=>this.tidy(l),Whe);const u=n.map(l=>a[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:o,grads:u}})}customGrad(e){return B(Ck(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{B(n.every(a=>a instanceof er),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,u)=>{s[u]=a});const o=(a,u)=>(r=e(...n,u),B(r.value instanceof er,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),B(Ck(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(a,u)=>{const l=r.gradFunc(a,u),c=Array.isArray(l)?l:[l];B(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),B(c.every(h=>h instanceof er),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:o,backwardsFunc:i,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Jr(),r=await this.backend.time(e);return r.wallMs=Jr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new HA;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}gd.nextTensorId=0;gd.nextVariableId=0;function Uhe(t){const e=w$(ve(t),"float32");return ee.makeTensor(e,t,"float32")}function y4(){const t=Dz();if(t._tfengine==null){const e=new hhe(t);t._tfengine=new gd(e)}return ghe(t._tfengine.ENV),Mhe(()=>t._tfengine),t._tfengine}const ee=y4();function Whe(t,e){const n={a:t,b:e};return ee.runKernel(Vd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jhe(){return typeof navigator<"u"&&navigator!=null}function v4(t){if(t||jhe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function x4(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rs=de();rs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});rs.registerFlag("IS_BROWSER",()=>x4());rs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");rs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));rs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));rs.registerFlag("PROD",()=>!1);rs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>rs.getBool("DEBUG"));rs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);rs.registerFlag("IS_TEST",()=>!1);rs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>rs.getBool("DEBUG"));rs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);rs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);rs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tm(t,e){let n=t;if(bo(t))return e==="string"?[]:[t.length];if(f4(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(p4(t))return[t.buffer.size/(e==null?4:vy(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||bo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&de().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&b4(t,r,[]),r}function b4(t,e,n){if(n=n||[],!Array.isArray(t)&&!bo(t)){B(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}B(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),B(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)b4(t[s],r,n.concat(s))}function KA(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function H(t,e,n,r="numeric"){if(t instanceof ye())return KA(r,t.dtype,e,n),t;let s=zd(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),KA(r,s,e,n),t==null||!bo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const u=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const o=Tm(t,s);!bo(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?Mu(t,s):yu(t,[],!0);return ee.makeTensor(a,o,s)}function w4(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((o,i)=>H(o,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ghe="__op";function oe(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Ghe;const s=(...o)=>{ee.startScope(n);try{const i=r(...o);return S$(i)&&console.error("Cannot return a Promise inside of tidy."),ee.endScope(i),i}catch(i){throw ee.endScope(null),i}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hhe(t,e){const n=H(t,"real","complex"),r=H(e,"imag","complex");x$(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return ee.runKernel(R$,s)}const vu=oe({complex_:Hhe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _m(t,e,n,r){if(r==null)r=zd(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(p4(t)||f4(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ee.backend.createTensorFromGPUData(t,e||n,r)}if(!bo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ha(e);const s=ve(e),o=ve(n);B(s===o,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${o}`);for(let i=0;i<n.length;++i){const a=n[i],u=i===n.length-1?a!==ve(e.slice(i)):!0;B(n[i]===e[i]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!bo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Mu(t,r):yu(t,[],!0),ee.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gf(t,e,n){const r=Tm(t,n);return _m(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cy={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class yl{static join(e){return new yl(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>bo(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=n+s.byteLength;this.shards.push({buffer:s,start:n,end:o}),n=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,o=new ArrayBuffer(s),i=new Uint8Array(o);let a=0;for(let u=r;u<this.shards.length;u++){const l=this.shards[u],d=e+a-l.start,h=a,p=Math.min(n,l.end)-l.start,m=new Uint8Array(l.buffer,d,p-d);if(i.set(m,h),a+=m.length,n<l.end)break}return o}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Khe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Khe(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,o=e(t[s]);if(o===0)return s;o<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(){return ee}function Fk(){return ee.memory()}function le(t,e){return ee.tidy(t,e)}function xt(t){m4(t).forEach(n=>n.dispose())}function xi(t){return ee.keep(t)}function S4(t,e,n=1){return ee.registerBackend(t,e,n)}function qhe(){return ee.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yd=4;async function qA(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<s.length;++i){const a=s[i],u=Array.isArray(t)?t[i].tensor:t[a];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${u.dtype}`);const l={name:a,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async d=>{const h=await u.bytes(),f=h.reduce((y,g)=>y+g.length,0)+yd*h.length,p=new Uint8Array(f);let m=0;for(let y=0;y<h.length;y++){const g=h[y],v=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(v,m),m+=yd,p.set(g,m),m+=g.length}d(p)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),n.push(l)}const o=await Promise.all(r);return{data:Qhe(o),specs:n}}function Xhe(t,e){const n=new yl(t),r={};let s=0;for(const o of e){const i=Yhe(o,(a,u)=>n.slice(s+a,s+u));r[o.name]=Zhe(o,n.slice(s,s+i)),s+=i}return r}function Yhe(t,e){const n=ve(t.shape);let r;if("quantization"in t){const s=t.quantization;r=Cy[s.dtype]}else if(t.dtype==="string"){let s=0;for(let o=0;o<n;o++)s+=yd+new Uint32Array(e(s,s+yd))[0];return s}else r=Cy[t.dtype];return n*r}function Zhe(t,e){const n=t.name,r=t.dtype,s=t.shape,o=ve(s);let i,a=0;if("quantization"in t){const u=t.quantization;if(u.dtype==="uint8"||u.dtype==="uint16"){if(!("min"in u&&"scale"in u))throw new Error(`Weight ${t.name} with quantization ${u.dtype} doesn't have corresponding metadata min and scale.`)}else if(u.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${u.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${u.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const l=Cy[u.dtype],c=u.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(u.dtype==="uint8"||u.dtype==="uint16"){i=new Float32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];i[d]=h*u.scale+u.min}}else if(u.dtype==="float16")i=lfe()(c);else throw new Error(`Unsupported quantization type ${u.dtype} for weight type float32.`);else if(r==="int32"){if(u.dtype!=="uint8"&&u.dtype!=="uint16")throw new Error(`Unsupported quantization type ${u.dtype} for weight type int32.`);i=new Int32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];i[d]=Math.round(h*u.scale+u.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=o*l}else if(r==="string"){const u=ve(t.shape);i=[];for(let l=0;l<u;l++){const c=new Uint32Array(e.slice(a,a+yd))[0];a+=yd;const d=new Uint8Array(e.slice(a,a+c));i.push(d),a+=c}}else{const u=Cy[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);const l=new Float32Array(i.length/2),c=new Float32Array(i.length/2);for(let p=0;p<l.length;p++)l[p]=i[p*2],c[p]=i[p*2+1];const d=gf(l,s,"float32"),h=gf(c,s,"float32"),f=vu(d,h);return d.dispose(),h.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=o*u}return gf(i,s,r)}function Qhe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(o=>{if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(o=>{r.set(new Uint8Array(o.buffer),s),s+=o.byteLength}),r.buffer}const fI=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function XA(t){return fI?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Jhe(t){if(fI)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function efe(t){if(fI){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function tfe(t){return yl.join(t)}function nfe(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function rfe(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function sfe(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),rfe(t,n,r)}function pI(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:XA(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:XA(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new yl(t.weightData).byteLength}}function YA(t){const e=[];for(const n of t)e.push(...n.weights);return e}function ofe(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function ife(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function afe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function lfe(){const t=ofe(),e=ife(),n=afe();return r=>{const s=new ArrayBuffer(4*r.length),o=new Uint32Array(s);for(let i=0;i<r.length;i++){const a=r[i],u=t[n[a>>10]+(a&1023)]+e[a>>10];o[i]=u}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return lr.instance==null&&(lr.instance=new lr),lr.instance}static registerSaveRouter(e){lr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){lr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return lr.getHandlers(e,"save")}static getLoadHandlers(e,n){return lr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?lr.getInstance().loadRouters:lr.getInstance().saveRouters).forEach(i=>{const a=i(e,r);a!==null&&s.push(a)}),s}}const ufe=t=>lr.getSaveHandlers(t),cfe=(t,e)=>lr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mk="tensorflowjs",zk=1,Yl="models_store",La="model_info_store";function k4(){if(!de().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Bk(t){const e=t.result;e.createObjectStore(Yl,{keyPath:"modelPath"}),e.createObjectStore(La,{keyPath:"modelPath"})}class xu{constructor(e){if(this.indexedDB=k4(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const o=this.indexedDB.open(Mk,zk);o.onupgradeneeded=()=>Bk(o),o.onsuccess=()=>{const i=o.result;if(n==null){const a=i.transaction(Yl,"readonly"),l=a.objectStore(Yl).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return i.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(i.close(),s(l.error)),a.oncomplete=()=>i.close()}else{n.weightData=yl.join(n.weightData);const a=pI(n),u=i.transaction(La,"readwrite");let l=u.objectStore(La),c;try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return s(h)}let d;c.onsuccess=()=>{d=i.transaction(Yl,"readwrite");const h=d.objectStore(Yl);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return s(p)}f.onsuccess=()=>r({modelArtifactsInfo:a}),f.onerror=p=>{l=u.objectStore(La);const m=l.delete(this.modelPath);m.onsuccess=()=>(i.close(),s(f.error)),m.onerror=y=>(i.close(),s(f.error))}},c.onerror=h=>(i.close(),s(c.error)),u.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},o.onerror=i=>s(o.error)})}}xu.URL_SCHEME="indexeddb://";const C4=t=>de().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(xu.URL_SCHEME)?dfe(t.slice(xu.URL_SCHEME.length)):null;lr.registerSaveRouter(C4);lr.registerLoadRouter(C4);function dfe(t){return new xu(t)}function hfe(t){return t.startsWith(xu.URL_SCHEME)?t.slice(xu.URL_SCHEME.length):t}class ffe{constructor(){this.indexedDB=k4()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Mk,zk);r.onupgradeneeded=()=>Bk(r),r.onsuccess=()=>{const s=r.result,o=s.transaction(La,"readonly"),a=o.objectStore(La).getAll();a.onsuccess=()=>{const u={};for(const l of a.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},a.onerror=u=>(s.close(),n(a.error)),o.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=hfe(e),new Promise((n,r)=>{const s=this.indexedDB.open(Mk,zk);s.onupgradeneeded=()=>Bk(s),s.onsuccess=()=>{const o=s.result,i=o.transaction(La,"readwrite"),a=i.objectStore(La),u=a.get(e);let l;u.onsuccess=()=>{if(u.result==null)return o.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{l=o.transaction(Yl,"readwrite");const f=l.objectStore(Yl).delete(e);f.onsuccess=()=>n(u.result.modelArtifactsInfo),f.onerror=p=>r(u.error)};c.onsuccess=d,c.onerror=h=>(d(),o.close(),r(u.error))}},u.onerror=c=>(o.close(),r(u.error)),i.oncomplete=()=>{l==null?o.close():l.oncomplete=()=>o.close()}},s.onerror=o=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gi="/",bc="tensorflowjs_models",$4="info",pfe="model_topology",mfe="weight_specs",gfe="weight_data",yfe="model_metadata";function I4(t){return{info:[bc,t,$4].join(Gi),topology:[bc,t,pfe].join(Gi),weightSpecs:[bc,t,mfe].join(Gi),weightData:[bc,t,gfe].join(Gi),modelMetadata:[bc,t,yfe].join(Gi)}}function E4(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function vfe(t){const e=t.split(Gi);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Gi)}function xfe(t){return t.startsWith(bu.URL_SCHEME)?t.slice(bu.URL_SCHEME.length):t}class bu{constructor(e){if(!de().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=I4(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=pI(e),o=yl.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Jhe(o));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch{throw E4(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const a=JSON.parse(o);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=efe(i),n}}bu.URL_SCHEME="localstorage://";const T4=t=>de().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(bu.URL_SCHEME)?bfe(t.slice(bu.URL_SCHEME.length)):null;lr.registerSaveRouter(T4);lr.registerLoadRouter(T4);function bfe(t){return new bu(t)}class wfe{constructor(){B(de().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),B(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=bc+Gi,r=Gi+$4;for(let s=0;s<this.LS.length;++s){const o=this.LS.key(s);if(o.startsWith(n)&&o.endsWith(r)){const i=vfe(o);e[i]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){e=xfe(e);const n=I4(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return E4(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZA="://";class oi{constructor(){this.managers={}}static getInstance(){return oi.instance==null&&(oi.instance=new oi),oi.instance}static registerManager(e,n){B(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(ZA)&&(e=e.slice(0,e.indexOf(ZA))),B(e.length>0,()=>"scheme must not be an empty string.");const r=oi.getInstance();B(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=oi.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(oi.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sfe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!de().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return r4(e)}}if(de().get("IS_BROWSER")){de().setPlatform("browser",new Sfe);try{oi.registerManager(bu.URL_SCHEME,new wfe)}catch{}try{oi.registerManager(xu.URL_SCHEME,new ffe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kfe={importFetch:()=>require("node-fetch")};let vw;class Cfe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return de().global.fetch!=null?de().global.fetch(e,n):(vw==null&&(vw=kfe.importFetch()),vw(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}de().get("IS_NODE")&&!de().get("IS_BROWSER")&&de().setPlatform("node",new Cfe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t,e="float32",n){return e=e||"float32",ha(t),new xr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $fe(t,e){const n=H(t,"x","cast");if(!lhe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return ee.runKernel(Bp,r,s)}const je=oe({cast_:$fe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ife(t){const n={x:H(t,"x","clone","string_or_numeric")};return ee.runKernel(Jp,n)}const tu=oe({clone_:Ife});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Efe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */y4();const Tfe={buffer:kt,cast:je,clone:tu,print:Efe};zhe(Tfe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fe(t,e){let n=H(t,"a","add"),r=H(e,"b","add");[n,r]=Bn(n,r);const s={a:n,b:r};return ee.runKernel(Vd,s)}const Ne=oe({add_:_fe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nfe(t,e){let n=H(t,"a","floorDiv"),r=H(e,"b","floorDiv");[n,r]=Bn(n,r);const s={a:n,b:r};return ee.runKernel(Zp,s)}const _4=oe({floorDiv_:Nfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rfe(t,e){let n=H(t,"a","div"),r=H(e,"b","div");if([n,r]=Bn(n,r),n.dtype==="int32"&&r.dtype==="int32")return _4(n,r);const s={a:n,b:r},o={};return ee.runKernel(Gp,s,o)}const st=oe({div_:Rfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Afe(t,e){let n=H(t,"a","mul"),r=H(e,"b","mul");[n,r]=Bn(n,r);const s={a:n,b:r};return ee.runKernel(lm,s)}const Q=oe({mul_:Afe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dfe(t){const e=H(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ee.runKernel(Av,n)}else{const n={x:e};return ee.runKernel($v,n)}}const Vr=oe({abs_:Dfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ofe(t){const n={x:H(t,"x","acos")};return ee.runKernel(Dp,n)}const Pfe=oe({acos_:Ofe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lfe(t){const n={x:H(t,"x","acosh")};return ee.runKernel(Op,n)}const Ffe=oe({acosh_:Lfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mfe(t,e=null,n=!1){const s={x:H(t,"x","all","bool")},o={axis:e,keepDims:n};return ee.runKernel($$,s,o)}const N4=oe({all_:Mfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zfe(t,e=null,n=!1){const s={x:H(t,"x","any","bool")},o={axis:e,keepDims:n};return ee.runKernel(I$,s,o)}const Vk=oe({any_:zfe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bfe(t,e=0){const r={x:H(t,"x","argMax")},s={axis:e};return ee.runKernel(Iv,r,s)}const Yf=oe({argMax_:Bfe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vfe(t,e=0){const r={x:H(t,"x","argMin")},s={axis:e};return ee.runKernel(Ev,r,s)}const Ufe=oe({argMin_:Vfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wfe(t){const n={x:H(t,"x","asin")};return ee.runKernel(Pp,n)}const jfe=oe({asin_:Wfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gfe(t){const n={x:H(t,"x","asinh")};return ee.runKernel(Lp,n)}const Hfe=oe({asinh_:Gfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kfe(t){const n={x:H(t,"x","atan")};return ee.runKernel(Fp,n)}const qfe=oe({atan_:Kfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xfe(t,e){let n=H(t,"a","atan2"),r=H(e,"b","atan2");[n,r]=Bn(n,r);const s={a:n,b:r};return ee.runKernel(zp,s)}const Yfe=oe({atan2_:Xfe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zfe(t){const n={x:H(t,"x","atanh")};return ee.runKernel(Mp,n)}const Qfe=oe({atanh_:Zfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nm(t,e,n,r,s="NHWC",o){const i=t[3],a=[...e,i],u=pa(s);return wr(t,a,n,o,r,null,null,u)}function $o(t,e,n,r,s,o,i="channelsLast"){const[a,u]=Zf(e);let l;if(i==="channelsLast")l=[a,u,t[3],t[3]];else if(i==="channelsFirst")l=[a,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return wr(t,l,n,r,s,o,!1,i)}function fa(t,e,n,r,s,o,i="NDHWC"){const[a,u,l]=Uk(e);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,u,l,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,u,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return vl(t,c,n,r,s,!1,d,o)}function wr(t,e,n,r,s,o,i=!1,a="channelsLast"){let[u,l,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[u,l,c,d]=t;else if(a==="channelsFirst")[u,d,l,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,f,,p]=e,[m,y]=Zf(n),[g,v]=Zf(r),x=Yc(h,g),b=Yc(f,v),{padInfo:w,outHeight:k,outWidth:C}=tpe(s,l,c,m,y,x,b,o,a),$=i?p*d:p;let E;return a==="channelsFirst"?E=[u,$,k,C]:a==="channelsLast"&&(E=[u,k,C,$]),{batchSize:u,dataFormat:a,inHeight:l,inWidth:c,inChannels:d,outHeight:k,outWidth:C,outChannels:$,padInfo:w,strideHeight:m,strideWidth:y,filterHeight:h,filterWidth:f,effectiveFilterHeight:x,effectiveFilterWidth:b,dilationHeight:g,dilationWidth:v,inShape:t,outShape:E,filterShape:e}}function vl(t,e,n,r,s,o=!1,i="channelsLast",a){let[u,l,c,d,h]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[u,l,c,d,h]=t;else if(i==="channelsFirst")[u,h,l,c,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[f,p,m,,y]=e,[g,v,x]=Uk(n),[b,w,k]=Uk(r),C=Yc(f,b),$=Yc(p,w),E=Yc(m,k),{padInfo:S,outDepth:R,outHeight:T,outWidth:P}=npe(s,l,c,d,g,v,x,C,$,E,a),I=o?y*h:y;let A;return i==="channelsFirst"?A=[u,I,R,T,P]:i==="channelsLast"&&(A=[u,R,T,P,I]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:c,inWidth:d,inChannels:h,outDepth:R,outHeight:T,outWidth:P,outChannels:I,padInfo:S,strideDepth:g,strideHeight:v,strideWidth:x,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:$,effectiveFilterWidth:E,dilationDepth:b,dilationHeight:w,dilationWidth:k,inShape:t,outShape:A,filterShape:e}}function Jfe(t,e,n,r,s){r==null&&(r=mI(t,e,n));const o=t[0],i=t[1],a=Qf((o-e+2*r)/n+1,s),u=Qf((i-e+2*r)/n+1,s);return[a,u]}function epe(t,e,n,r,s,o){s==null&&(s=mI(t,e[0],r[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(i[a]=Qf((t[a]-e[a]+2*s)/r[a]+1,o));return i}function mI(t,e,n,r=1){const s=Yc(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Zf(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Uk(t){return typeof t=="number"?[t,t,t]:t}function Yc(t,e){return e<=1?t:t+(t-1)*(e-1)}function tpe(t,e,n,r,s,o,i,a,u){let l,c,d;if(typeof t=="number"){l={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=Jfe([e,n],o,r,t,a);c=f[0],d=f[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/s);const h=Math.max(0,(c-1)*r+o-e),f=Math.max(0,(d-1)*s+i-n),p=Math.floor(h/2),m=h-p,y=Math.floor(f/2),g=f-y;l={top:p,bottom:m,left:y,right:g,type:"SAME"}}else if(t==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-o+1)/r),d=Math.ceil((n-i+1)/s);else if(typeof t=="object"){const h=u==="channelsLast"?t[1][0]:t[2][0],f=u==="channelsLast"?t[1][1]:t[2][1],p=u==="channelsLast"?t[2][0]:t[3][0],m=u==="channelsLast"?t[2][1]:t[3][1];l={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=Qf((e-o+h+f)/r+1,a),d=Qf((n-i+p+m)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:l,outHeight:c,outWidth:d}}function npe(t,e,n,r,s,o,i,a,u,l,c){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=epe([e,n,r,1],[a,u,l],1,[s,o,i],t,c);h=y[0],f=y[1],p=y[2]}else if(t==="same"){h=Math.ceil(e/s),f=Math.ceil(n/o),p=Math.ceil(r/i);const m=(h-1)*s+a-e,y=(f-1)*o+u-n,g=(p-1)*i+l-r,v=Math.floor(m/2),x=m-v,b=Math.floor(y/2),w=y-b,k=Math.floor(g/2),C=g-k;d={top:b,bottom:w,left:k,right:C,front:v,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function Qf(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function wu(t){const[e,n,r]=Zf(t);return e===1&&n===1&&r===1}function Dr(t,e){return wu(t)||wu(e)}function Su(t){return Zf(t).every(e=>e>0)}function pa(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function as(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")B(pd(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{B(pd(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rpe(t,e){const r={x:H(t,"x","reshape","string_or_numeric")},s={shape:e};return ee.runKernel(hx,r,s)}const se=oe({reshape_:rpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spe(t,e,n,r,s){const o=H(t,"x","avgPool","float32"),i=1;B(Dr(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=o,u=!1;o.rank===3&&(u=!0,a=se(o,[1,o.shape[0],o.shape[1],o.shape[2]])),B(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),as("avgPool",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=ee.runKernel(Tv,l,c);return d=je(d,o.dtype),u?se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const gI=oe({avgPool_:spe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ope(t,e,n,r,s,o="NDHWC"){const i=H(t,"x","avgPool3d","float32");let a=i,u=!1;i.rank===4&&(u=!0,a=se(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),B(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),B(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),B(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),as("avgPool3d",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:o};let d=ee.runKernel(_v,l,c);return d=je(d,a.dtype),u?se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const ipe=oe({avgPool3d_:ope});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ape(t,e=0){B(t.length>=1,()=>"Pass at least one tensor to concat");const n=w4(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),n.length===1)return tu(n[0]);const r=n,s={axis:e};return ee.runKernel(Dv,r,s)}const ns=oe({concat_:ape});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lpe(t,e,n=!1,r=!1){let s=H(t,"a","matMul"),o=H(e,"b","matMul");[s,o]=Bn(s,o);const i={a:s,b:o},a={transposeA:n,transposeB:r};return ee.runKernel(Nv,i,a)}const Pt=oe({matMul_:lpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function upe(t){const n={x:H(t,"x","sigmoid","float32")};return ee.runKernel(xm,n)}const Ud=oe({sigmoid_:upe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cpe(t,e,n){const r=H(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},o={begin:e,size:n};return ee.runKernel(yx,s,o)}const sn=oe({slice_:cpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dpe(t){const n={x:H(t,"x","tanh","float32")};return ee.runKernel($m,n)}const Ix=oe({tanh_:dpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hpe(t,e,n){const r=H(t,"x","batchToSpaceND"),s=e.reduce((a,u)=>a*u);B(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),B(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),B(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const o={x:r},i={blockShape:e,crops:n};return ee.runKernel(Rv,o,i)}const yI=oe({batchToSpaceND_:hpe});function fpe(t){let e;return t.rank===0||t.rank===1?e=se(t,[1,1,1,t.size]):t.rank===2?e=se(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=se(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ppe(t,e,n,r,s,o){o==null&&(o=.001);const i=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),u=H(n,"variance","batchNorm");let l;s!=null&&(l=H(s,"scale","batchNorm"));let c;r!=null&&(c=H(r,"offset","batchNorm")),B(a.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(l==null||a.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:fpe(i),scale:l,offset:c,mean:a,variance:u},f={varianceEpsilon:o},p=ee.runKernel(Uv,h,f);return se(p,i.shape)}const Ex=oe({batchNorm_:ppe});function mpe(t,e,n,r,s,o){const i=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),u=H(n,"variance","batchNorm");let l;s!=null&&(l=H(s,"scale","batchNorm"));let c;return r!=null&&(c=H(r,"offset","batchNorm")),B(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),B(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),B(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&B(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Ex(i,a,u,c,l,o)}const gpe=oe({batchNorm2d_:mpe});function ype(t,e,n,r,s,o){const i=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),u=H(n,"variance","batchNorm");let l;s!=null&&(l=H(s,"scale","batchNorm"));let c;return r!=null&&(c=H(r,"offset","batchNorm")),B(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),B(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),B(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&B(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Ex(i,a,u,c,l,o)}const vpe=oe({batchNorm3d_:ype});function xpe(t,e,n,r,s,o){const i=H(t,"x","batchNorm"),a=H(e,"mean","batchNorm"),u=H(n,"variance","batchNorm");let l;s!=null&&(l=H(s,"scale","batchNorm"));let c;return r!=null&&(c=H(r,"offset","batchNorm")),B(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),B(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),B(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&B(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&B(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Ex(i,a,u,c,l,o)}const bpe=oe({batchNorm4d_:xpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wpe(t,e,n){const r=H(t,"x","bincount"),s=H(e,"weights","bincount");B(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),B(n>=0,()=>`size must be non-negative, but got ${n}.`),B(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const o={x:r,weights:s},i={size:n};return ee.runKernel(_$,o,i)}const Spe=oe({bincount_:wpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kpe(t,e){let n=H(t,"broadcastTo","x");const r=n.shape;if(ha(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const l=n.shape.slice();for(;l.length<e.length;)l.unshift(1);n=se(n,l)}const s=n.shape,o=Array.from(e);for(let l=e.length-1;l>=0;l--)if(s[l]===e[l])o[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(o.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return tu(n);const a={x:n},u={reps:o};return ee.runKernel(Im,a,u)}const yf=oe({broadcastTo_:kpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cpe(t){const n={x:H(t,"x","ceil","float32")};return ee.runKernel(Vp,n)}const $pe=oe({ceil_:Cpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tx(t,e,n){ha(t),n=n||zd(e);const r={shape:t,value:e,dtype:n};return ee.runKernel(j$,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ipe(t,e,n){const r=H(t,"x","clipByValue");if(B(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Tx(r.shape,e,r.dtype);const s={x:r},o={clipValueMin:e,clipValueMax:n};return ee.runKernel(Up,s,o)}const Ks=oe({clipByValue_:Ipe});function Epe(t){return ns(t,0)}const Tpe=oe({concat1d_:Epe});function _pe(t,e){return ns(t,e)}const Npe=oe({concat2d_:_pe});function Rpe(t,e){return ns(t,e)}const Ape=oe({concat3d_:Rpe});function Dpe(t,e){return ns(t,e)}const Ope=oe({concat4d_:Dpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ppe(t,e,n,r,s="NHWC",o=[1,1],i){const a=H(t,"x","conv2d","float32"),u=H(e,"filter","conv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=se(a,[1,a.shape[0],a.shape[1],a.shape[2]])),B(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),B(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),as("conv2d",r,i);const d=s==="NHWC"?l.shape[3]:l.shape[1];B(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),B(Dr(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),B(Su(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),B(Su(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:l,filter:u},f={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i},p=ee.runKernel(Ov,h,f);return c?se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ku=oe({conv2d_:Ppe});function Lpe(t,e,n,r,s="NWC",o=1,i){const a=H(t,"x","conv1d"),u=H(e,"filter","conv1d");let l=a,c=!1;a.rank===2&&(c=!0,l=se(a,[1,a.shape[0],a.shape[1]])),B(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),B(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),as("conv1d",r,i),B(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),B(Dr(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),B(Su(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),B(Su(n),()=>"Error in conv1D: Stride should be larger than 0."),B(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=se(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=se(l,[l.shape[0],1,l.shape[1],l.shape[2]]),y=ku(h,d,[1,n],r,"NHWC",[1,o],i);return c?se(y,[y.shape[2],y.shape[3]]):se(y,[y.shape[0],y.shape[2],y.shape[3]])}const R4=oe({conv1d_:Lpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpe(t,e,n,r,s,o="NHWC",i){B(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,u=e,l=!1;e.rank===3&&(l=!0,u=se(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),B(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),B(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),B(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=o==="NHWC"?a[3]:a[1],d=o==="NHWC"?u.shape[3]:u.shape[1];B(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),B(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),as("conv2dDerInput",s,i);const h={dy:u,filter:n},f={strides:r,pad:s,dataFormat:o,dimRoundingMode:i,inputShape:a},p=ee.runKernel(Pv,h,f);return l?se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const vI=oe({conv2DBackpropInput_:Fpe});function Mpe(t,e,n,r,s,o){const i=H(t,"x","conv2dTranspose"),a=H(e,"filter","conv2dTranspose");return vI(n,i,a,r,s,"NHWC",o)}const A4=oe({conv2dTranspose_:Mpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpe(t,e,n,r,s="NDHWC",o=[1,1,1]){const i=H(t,"x","conv3d"),a=H(e,"filter","conv3d");let u=i,l=!1;i.rank===4&&(l=!0,u=se(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),B(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),B(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),B(u.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${a.shape[3]}.`),B(Dr(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),B(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),B(Su(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),B(Su(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:a},d={strides:n,pad:r,dataFormat:s,dilations:o},h=ee.runKernel(Lv,c,d);return l?se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Bpe=oe({conv3d_:zpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vpe(t,e,n,r,s){B(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,i=e,a=!1;e.rank===4&&(a=!0,i=se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);const u=o[4],l=i.shape[4];B(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),B(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),B(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),B(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),B(l===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:s,strides:r,inputShape:o},h=ee.runKernel(O$,c,d);return a?se(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const D4=oe({conv3DBackpropInput_:Vpe});function Upe(t,e,n,r,s){const o=H(t,"x","conv3dTranspose"),i=H(e,"filter","conv3dTranspose");return D4(n,o,i,r,s)}const Wpe=oe({conv3dTranspose_:Upe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jpe(t){const n={x:H(t,"x","cos","float32")};return ee.runKernel(Wp,n)}const xI=oe({cos_:jpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gpe(t){const n={x:H(t,"x","cosh","float32")};return ee.runKernel(jp,n)}const O4=oe({cosh_:Gpe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpe(t,e=0,n=!1,r=!1){const o={x:H(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return ee.runKernel(P$,o,i)}const Wk=oe({cumprod_:Hpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kpe(t,e=0,n=!1,r=!1){const o={x:H(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return ee.runKernel(Fv,o,i)}const P4=oe({cumsum_:Kpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qpe(t,e,n,r=!1){const s=H(t,"x","denseBincount"),o=H(e,"weights","denseBincount");B(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),B(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),B(n>=0,()=>`size must be non-negative, but got ${n}.`),B(o.size===s.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${o.shape}.`);const i={x:s,weights:o},a={size:n,binaryOutput:r};return ee.runKernel(F$,i,a)}const QA=oe({denseBincount_:qpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(t,e,n="NHWC"){const r=H(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];B(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),B(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),B(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e} for depthToSpace with input shape
        ${r.shape}`),B(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const a={x:r},u={blockSize:e,dataFormat:n};return ee.runKernel(M$,a,u)}const Ype=oe({depthToSpace_:Xpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zpe(t,e,n,r,s="NHWC",o=[1,1],i){const a=H(t,"x","depthwiseConv2d","float32"),u=H(e,"filter","depthwiseConv2d","float32");let l=a,c=!1;a.rank===3&&(c=!0,l=se(a,[1,a.shape[0],a.shape[1],a.shape[2]])),B(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),B(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const d=s==="NHWC"?l.shape[3]:l.shape[1];B(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),as("depthwiseConv2d",r,i);const h={x:l,filter:u},f={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i},p=ee.runKernel(Mv,h,f);return c?se(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const bI=oe({depthwiseConv2d_:Zpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qpe(t,e,n,r,s=[1,1],o="NHWC"){const i=H(t,"x","dilation2d"),a=H(e,"filter","dilation2d");B(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),B(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),B(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let u=i,l=!1;i.rank===3&&(u=se(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=!0),B(u.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${a.shape[2]}`);const c={x:u,filter:a},d={strides:n,pad:r,dilations:s},h=ee.runKernel(zv,c,d);return l?se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Jpe=oe({dilation2d_:Qpe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vd(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const o=n-1-s,i=t[o]||1;(e[e.length-1-s]||1)>1&&i===1&&r.unshift(o)}return r}function ir(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],o=e.length-r-1,i=e[o];(s==null||s===1&&i>1)&&n.unshift(o)}return n}function ht(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let o=t[t.length-s-1];o==null&&(o=1);let i=e[e.length-s-1];if(i==null&&(i=1),o===1)r[n-s-1]=i;else if(i===1)r[n-s-1]=o;else if(o!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=o}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eme(t,e){let n=H(t,"a","equal","string_or_numeric"),r=H(e,"b","equal","string_or_numeric");[n,r]=Bn(n,r),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(Bv,s)}const Ci=oe({equal_:eme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tme(t,e,n){const r=H(e,"a","where"),s=H(n,"b","where"),o=H(t,"condition","where","bool"),i=ht(ht(o.shape,r.shape),s.shape),a=yf(o,i),u=yf(r,i),l=yf(s,i),c={condition:a,t:u,e:l};return ee.runKernel(gx,c)}const Hr=oe({where_:tme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nme(t){const n={x:H(t,"x","zerosLike")};return ee.runKernel(Cx,n)}const Tt=oe({zerosLike_:nme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rme(t,e){let n=H(t,"a","div"),r=H(e,"b","div");[n,r]=Bn(n,r);const s=st(n,r),o=Tt(s),i=Ci(r,o);return Hr(i,o,s)}const sme=oe({divNoNan_:rme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ome(t,e){const n=H(t,"t1","dot"),r=H(e,"t2","dot");B((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];if(B(s===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${o}.`),n.rank===1&&r.rank===1){const i=se(n,[1,-1]),a=se(r,[-1,1]),u=Pt(i,a);return se(u,[])}else if(n.rank===1&&r.rank===2){const i=se(n,[1,-1]),a=se(r,[r.shape[0],r.shape[1]]),u=Pt(i,a);return se(u,[u.size])}else if(n.rank===2&&r.rank===1){const i=se(r,[-1,1]),a=Pt(n,i);return se(a,[a.size])}else{const i=se(r,[r.shape[0],r.shape[1]]);return Pt(n,i)}}const ime=oe({dot_:ome});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ame(t,...e){const n=e.map((s,o)=>H(s,`tensors${o}`,"einsum")),r={equation:t};return ee.runKernel(V$,n,r)}const Th=oe({einsum_:ame});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lme(t){const n={x:H(t,"x","elu","float32")};return ee.runKernel(Hp,n)}const _x=oe({elu_:lme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ume(t){let e=H(t,"x","erf");B(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=je(e,"float32"));const n={x:e};return ee.runKernel(Kp,n)}const L4=oe({erf_:ume});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wI(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function F4(t,e,n){const r=t.length+e.length,s=[];let o=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[o++]):s.push(e[i++]);return s}function pr(t,e){const n=[],r=t.length;for(let o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);const s=e.map(o=>t[o]);return[n,s]}function qn(t,e){const n=e.map(r=>1);return F4(t,n,e)}function Sr(t,e,n){B(wI(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function In(t,e){if(wI(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function xl(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Vn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cme(t,e=null,n=!1){const s={x:H(t,"x","max")},o={reductionIndices:e,keepDims:n};return ee.runKernel(Qv,s,o)}const jo=oe({max_:cme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dme(t,e=null,n=!1){const s={x:H(t,"x","min")},o={axis:e,keepDims:n};return ee.runKernel(nx,s,o)}const $y=oe({min_:dme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hme(t,e){let n=H(t,"base","pow"),r=H(e,"exp","pow");[n,r]=Bn(n,r);const s={a:n,b:r};return ee.runKernel(um,s)}const Cu=oe({pow_:hme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nt(t,e){if((bo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&bo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _m(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fme(t){const n={x:H(t,"x","sqrt","float32")};return ee.runKernel(wm,n)}const Rr=oe({sqrt_:fme});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pme(t){const e=H(t,"x","square"),n={};return ee.runKernel("Square",{x:e},n)}const dn=oe({square_:pme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mme(t,e=null,n=!1){let r=H(t,"x","sum");r.dtype==="bool"&&(r=je(r,"int32"));const s={x:r},o={axis:e,keepDims:n};return ee.runKernel(vx,s,o)}const tt=oe({sum_:mme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gme(t,e="euclidean",n=null,r=!1){t=H(t,"x","norm");const s=M4(t,e,n);let o=s.shape;if(r){const i=Ct(n,t.shape);o=qn(s.shape,i)}return se(s,o)}function M4(t,e,n=null){if(t.rank===0)return Vr(t);if(t.rank!==1&&n===null)return M4(se(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return tt(Vr(t),n);if(e===1/0)return jo(Vr(t),n);if(e===-1/0)return $y(Vr(t),n);if(e==="euclidean"||e===2)return Rr(tt(Cu(Vr(t),Nt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return jo(tt(Vr(t),n[0]),n[1]-1);if(e===1/0)return jo(tt(Vr(t),n[1]),n[0]);if(e===-1/0)return $y(tt(Vr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Rr(tt(dn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Nx=oe({norm_:gme});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yme(t,e=null,n=!1){return Nx(t,"euclidean",e,n)}const vme=oe({euclideanNorm_:yme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xme(t){const n={x:H(t,"x","exp")};return ee.runKernel(qp,n)}const $i=oe({exp_:xme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bme(t,e=0){const n=H(t,"x","expandDims","string_or_numeric");B(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return ee.runKernel(Vv,r,s)}const jr=oe({expandDims_:bme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wme(t){const n={x:H(t,"x","expm1")};return ee.runKernel(Xp,n)}const Sme=oe({expm1_:wme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kme(t,e){const n=H(t,"x","tile","string_or_numeric");B(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return ee.runKernel(Im,r,s)}const Bo=oe({tile_:kme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cme(t,e,n,r="float32"){e==null&&(e=t);const s=kt([t,e],r),o=t<=e?t:e;for(let a=0;a<o;++a)s.set(1,a,a);const i=se(s.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Bo(jr(i,0),[n[0],1,1]);if(n.length===2)return Bo(jr(jr(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Bo(jr(jr(jr(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const z4=oe({eye_:Cme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $me(t){const n={x:H(t,"x","floor","float32")};return ee.runKernel(Yp,n)}const Rx=oe({floor_:$me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t,e,n=0,r=0){const s=H(t,"x","gather"),o=H(e,"indices","gather","int32"),i={x:s,indices:o},a={axis:n,batchDims:r};return ee.runKernel(Wv,i,a)}const SI=oe({gather_:Ime});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eme(t,e){let n=H(t,"a","greater","string_or_numeric"),r=H(e,"b","greater","string_or_numeric");[n,r]=Bn(n,r),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(jv,s)}const Zs=oe({greater_:Eme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tme(t,e){let n=H(t,"a","greaterEqual","string_or_numeric"),r=H(e,"b","greaterEqual","string_or_numeric");[n,r]=Bn(n,r),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(Qp,s)}const zu=oe({greaterEqual_:Tme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(t){const n={input:H(t,"input","imag")};return ee.runKernel(K$,n)}const kI=oe({imag_:_me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nme(t){const n={x:H(t,"x","isFinite")};return ee.runKernel(em,n)}const Rme=oe({isFinite_:Nme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ame(t){const n={x:H(t,"x","isInf")};return ee.runKernel(tm,n)}const Dme=oe({isInf_:Ame});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ome(t){const n={x:H(t,"x","isNaN")};return ee.runKernel(nm,n)}const Pme=oe({isNaN_:Ome});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lme(t,e=.2){const r={x:H(t,"x","leakyRelu")},s={alpha:e};return ee.runKernel(Gv,r,s)}const CI=oe({leakyRelu_:Lme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fme(t,e){let n=H(t,"a","less","string_or_numeric"),r=H(e,"b","less","string_or_numeric");[n,r]=Bn(n,r),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(Hv,s)}const Iy=oe({less_:Fme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mme(t,e){let n=H(t,"a","lessEqual","string_or_numeric"),r=H(e,"b","lessEqual","string_or_numeric");[n,r]=Bn(n,r),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(Kv,s)}const Wd=oe({lessEqual_:Mme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zme(t,e=5,n=1,r=1,s=.5){const o=H(t,"x","localResponseNormalization");B(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),B(pd(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=o,a=!1;o.rank===3&&(a=!0,i=se(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const u={x:i},l={depthRadius:e,bias:n,alpha:r,beta:s},c=ee.runKernel(Zv,u,l);return a?se(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Bme=oe({localResponseNormalization_:zme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vme(t){const n={x:H(t,"x","log","float32")};return ee.runKernel(rm,n)}const Ii=oe({log_:Vme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ume(t){const n={x:H(t,"x","log1p")};return ee.runKernel(sm,n)}const B4=oe({log1p_:Ume});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wme(t,e){B(Ck(t),()=>"The f passed in variableGrads(f) must be a function"),B(e==null||Array.isArray(e)&&e.every(l=>l instanceof ky),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const l in ee.registeredVariables)e.push(ee.registeredVariables[l])}const r=n?e.filter(l=>!l.trainable):null,s=e.length;e=e.filter(l=>l.trainable),B(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const o=!0,{value:i,grads:a}=ee.gradients(t,e,null,o);B(a.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),B(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const u={};return e.forEach((l,c)=>{a[c]!=null&&(u[l.name]=a[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:i,grads:u}}function xd(t){return ee.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jme(t){const n={x:H(t,"x","neg")};return ee.runKernel(sx,n)}const zn=oe({neg_:jme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gme(t){const n={x:H(t,"x","softplus")};return ee.runKernel(bm,n)}const Rm=oe({softplus_:Gme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hme(t){const e=H(t,"x","logSigmoid");return xd(r=>({value:zn(Rm(zn(r))),gradFunc:i=>Q(i,Ud(zn(r)))}))(e)}const Kme=oe({logSigmoid_:Hme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t,e){let n=H(t,"a","sub"),r=H(e,"b","sub");[n,r]=Bn(n,r);const s={a:n,b:r};return ee.runKernel(km,s)}const at=oe({sub_:qme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xme(t,e=-1){const n=H(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return xd((s,o)=>{const a=jo(s,e,!0),u=at(s,a),l=at(je(u,"float32"),Ii(tt($i(u),e,!0)));return o([l]),{value:l,gradFunc:(d,h)=>{const[f]=h,p=!0,m=$i(f);return at(d,Q(tt(d,e,p),m))}}})(n)}const V4=oe({logSoftmax_:Xme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yme(t,e=null,n=!1){const r=H(t,"x","logSumExp"),s=Ct(e,r.shape),o=jo(r,s,!0),i=at(r,o),a=$i(i),u=tt(a,s),l=Ii(u),c=Ne(se(o,l.shape),l);if(n){const d=qn(c.shape,s);return se(c,d)}return c}const U4=oe({logSumExp_:Yme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zme(t,e){const n=H(t,"a","logicalAnd","bool"),r=H(e,"b","logicalAnd","bool");ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(qv,s)}const oa=oe({logicalAnd_:Zme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qme(t){const n={x:H(t,"x","logicalNot","bool")};return ee.runKernel(Xv,n)}const $I=oe({logicalNot_:Qme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jme(t,e){const n=H(t,"a","logicalOr","bool"),r=H(e,"b","logicalOr","bool");ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(Yv,s)}const W4=oe({logicalOr_:Jme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ege(t,e){const n=H(t,"a","logicalXor","bool"),r=H(e,"b","logicalXor","bool");return ht(n.shape,r.shape),oa(W4(t,e),$I(oa(t,e)))}const tge=oe({logicalXor_:ege});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nge(t,e,n,r,s){const o=H(t,"x","maxPool"),i=1;let a=o,u=!1;o.rank===3&&(u=!0,a=se(o,[1,o.shape[0],o.shape[1],o.shape[2]])),B(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),B(Dr(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),as("maxPool",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=ee.runKernel(Jv,l,c);return u?se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const II=oe({maxPool_:nge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rge(t,e=[1,1,1],n,r,s,o="NDHWC"){const i=H(t,"x","maxPool3d");let a=i,u=!1;i.rank===4&&(u=!0,a=se(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),B(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),B(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),as("maxPool3d",r,s);const l={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:o},d=ee.runKernel(ex,l,c);return u?se(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const sge=oe({maxPool3d_:rge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oge(t,e){let n=H(t,"a","maximum"),r=H(e,"b","maximum");[n,r]=Bn(n,r),n.dtype==="bool"&&(n=je(n,"int32"),r=je(r,"int32")),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(om,s)}const bl=oe({maximum_:oge});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ige(t,e=null,n=!1){const s={x:H(t,"x","mean")},o={axis:e,keepDims:n};return ee.runKernel(tx,s,o)}const Kn=oe({mean_:ige});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dr(t,e="float32"){if(ha(t),e==="complex64"){const r=dr(t,"float32"),s=dr(t,"float32");return vu(r,s)}const n=Nr(ve(t),e);return ee.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wl(t,e="float32"){if(ha(t),e==="complex64"){const r=wl(t,"float32"),s=dr(t,"float32");return vu(r,s)}const n=w$(ve(t),e);return ee.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function age(t,e){let n=H(t,"a","minimum"),r=H(e,"b","minimum");[n,r]=Bn(n,r),n.dtype==="bool"&&(n=je(n,"int32"),r=je(r,"int32")),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(im,s)}const Jf=oe({minimum_:age});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lge(t,e,n){B(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=H(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");B(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)B(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),B(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const o={paddings:e,mode:n},i={x:r};return ee.runKernel(rx,i,o)}const uge=oe({mirrorPad_:lge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(t,e){let n=H(t,"a","mod"),r=H(e,"b","mod");[n,r]=Bn(n,r);const s={a:n,b:r};return ee.runKernel(am,s)}const dge=oe({mod_:cge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hge(t,e=null,n=!1){t=H(t,"x","moments");const r=Ct(e,t.shape),s=Kn(t,r,n);let o=s.shape;n||(o=qn(s.shape,r));const i=dn(at(je(t,"float32"),se(s,o))),a=Kn(i,r,n);return{mean:s,variance:a}}const EI=oe({moments_:hge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fge(t,e){let n=H(t,"a","notEqual","string_or_numeric"),r=H(e,"b","notEqual","string_or_numeric");[n,r]=Bn(n,r),ht(n.shape,r.shape);const s={a:n,b:r};return ee.runKernel(ox,s)}const Ey=oe({notEqual_:fge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pge(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:H(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return ee.runKernel(ax,i,a)}const j4=oe({oneHot_:pge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(t){const n={x:H(t,"x","onesLike")};return ee.runKernel(ix,n)}const wo=oe({onesLike_:mge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gge(t,e,n=0){const r=H(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},o={x:r};return ee.runKernel(ux,o,s)}const TI=oe({pad_:gge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yge(t,e,n){const r=H(t,"x","spaceToBatchND");B(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),B(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),B(r.shape.reduce((i,a,u)=>u>0&&u<=e.length?i&&(a+n[u-1][0]+n[u-1][1])%e[u-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},o={blockShape:e,paddings:n};return ee.runKernel(xx,s,o)}const _I=oe({spaceToBatchND_:yge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vge(t,e,n,r,s,o,i){s==null&&(s=[1,1]),o==null&&(o=1),r===0&&(r="valid");const a=H(t,"x","maxPool");let u=a,l=!1;a.rank===3&&(l=!0,u=se(a,[1,a.shape[0],a.shape[1],a.shape[2]])),B(Dr(o,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const c=$o(u.shape,e,o,s,r),d=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=bge([c.filterHeight,c.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=xge([c.inHeight,c.inWidth],d,h),y=f?r:"valid",g=f?u:_I(u,d,p),x=(n==="avg"?()=>gI(g,e,o,y,i):()=>II(g,e,o,y,i))(),b=f?x:yI(x,d,m);return l?se(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function xge(t,e,n){const r=n.map(c=>c[0]),s=n.map(c=>c[1]),o=t.concat(r,s),i=e.map((c,d)=>(c-o[d]%c)%c),a=s.map((c,d)=>c+i[d]),u=e.map((c,d)=>[r[d],a[d]]),l=e.map((c,d)=>[0,i[d]]);return[u,l]}function bge(t,e){const r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),s=r.map(i=>Math.floor(i/2)),o=r.map((i,a)=>i-s[a]);return r.map((i,a)=>[s[a],o[a]])}const wge=oe({pool_:vge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sge(t,e){const n=H(t,"x","prelu"),r=H(e,"alpha","prelu"),s={x:n,alpha:r};return ee.runKernel(cx,s)}const NI=oe({prelu_:Sge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kge(t,e=null,n=!1){let r=H(t,"x","prod");r.dtype==="bool"&&(r=je(r,"int32"));const s={x:r},o={axis:e,keepDims:n};return ee.runKernel(dx,s,o)}const Cge=oe({prod_:kge});var RI={exports:{}};RI.exports;(function(t){(function(e,n,r){function s(u){var l=this,c=a();l.next=function(){var d=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=d|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function o(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function i(u,l){var c=new s(u),d=l&&l.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&o(d,c),h.state=function(){return o(c,{})}),h}function a(){var u=4022871197,l=function(c){c=String(c);for(var d=0;d<c.length;d++){u+=c.charCodeAt(d);var h=.02519603282416938*u;u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.alea=i})(vs,t,!1)})(RI);var $ge=RI.exports,AI={exports:{}};AI.exports;(function(t){(function(e,n,r){function s(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function i(a,u){var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xor128=i})(vs,t,!1)})(AI);var Ige=AI.exports,DI={exports:{}};DI.exports;(function(t){(function(e,n,r){function s(a){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(d^d<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function i(a,u){var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xorwow=i})(vs,t,!1)})(DI);var Ege=DI.exports,OI={exports:{}};OI.exports;(function(t){(function(e,n,r){function s(a){var u=this;u.next=function(){var c=u.x,d=u.i,h,f;return h=c[d],h^=h>>>7,f=h^h<<24,h=c[d+1&7],f^=h^h>>>10,h=c[d+3&7],f^=h^h>>>3,h=c[d+4&7],f^=h^h<<7,h=c[d+7&7],h=h^h<<13,f^=h^h<<9,c[d]=f,u.i=d+1&7,f};function l(c,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],c.x=f,c.i=0,h=256;h>0;--h)c.next()}l(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function i(a,u){a==null&&(a=+new Date);var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(c.x&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xorshift7=i})(vs,t,!1)})(OI);var Tge=OI.exports,PI={exports:{}};PI.exports;(function(t){(function(e,n,r){function s(a){var u=this;u.next=function(){var c=u.w,d=u.X,h=u.i,f,p;return u.w=c=c+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,u.i=h,p+(c^c>>>16)|0};function l(c,d){var h,f,p,m,y,g=[],v=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,v=Math.max(v,d.length)),p=0,m=-32;m<v;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(y=y+1640531527|0,h=g[m&127]^=f+y,p=h==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=g[p+34&127],h=g[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,g[p]=f^h;c.w=y,c.X=g,c.i=p}l(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function i(a,u){a==null&&(a=+new Date);var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(c.X&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.xor4096=i})(vs,t,!1)})(PI);var _ge=PI.exports,LI={exports:{}};LI.exports;(function(t){(function(e,n,r){function s(a){var u=this,l="";u.next=function(){var d=u.b,h=u.c,f=u.d,p=u.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,u.b=d=d<<20^d>>>12^h,u.c=h=h-f|0,u.d=f<<16^h>>>16^p,u.a=p-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function i(a,u){var l=new s(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=l.next()>>>11,f=(l.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=i:r&&r.amd?r(function(){return i}):this.tychei=i})(vs,t,!1)})(LI);var Nge=LI.exports,G4={exports:{}};const Rge={},Age=Object.freeze(Object.defineProperty({__proto__:null,default:Rge},Symbol.toStringTag,{value:"Module"})),Dge=$W(Age);(function(t){(function(e,n,r){var s=256,o=6,i=52,a="random",u=r.pow(s,o),l=r.pow(2,i),c=l*2,d=s-1,h;function f(b,w,k){var C=[];w=w==!0?{entropy:!0}:w||{};var $=g(y(w.entropy?[b,x(n)]:b??v(),3),C),E=new p(C),S=function(){for(var R=E.g(o),T=u,P=0;R<l;)R=(R+P)*s,T*=s,P=E.g(1);for(;R>=c;)R/=2,T/=2,P>>>=1;return(R+P)/T};return S.int32=function(){return E.g(4)|0},S.quick=function(){return E.g(4)/4294967296},S.double=S,g(x(E.S),n),(w.pass||k||function(R,T,P,I){return I&&(I.S&&m(I,E),R.state=function(){return m(E,{})}),P?(r[a]=R,T):R})(S,$,"global"in w?w.global:this==r,w.state)}function p(b){var w,k=b.length,C=this,$=0,E=C.i=C.j=0,S=C.S=[];for(k||(b=[k++]);$<s;)S[$]=$++;for($=0;$<s;$++)S[$]=S[E=d&E+b[$%k]+(w=S[$])],S[E]=w;(C.g=function(R){for(var T,P=0,I=C.i,A=C.j,L=C.S;R--;)T=L[I=d&I+1],P=P*s+L[d&(L[I]=L[A=d&A+T])+(L[A]=T)];return C.i=I,C.j=A,P})(s)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function y(b,w){var k=[],C=typeof b,$;if(w&&C=="object")for($ in b)try{k.push(y(b[$],w-1))}catch{}return k.length?k:C=="string"?b:b+"\0"}function g(b,w){for(var k=b+"",C,$=0;$<k.length;)w[d&$]=d&(C^=w[d&$]*19)+k.charCodeAt($++);return x(w)}function v(){try{var b;return h&&(b=h.randomBytes)?b=b(s):(b=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var w=e.navigator,k=w&&w.plugins;return[+new Date,e,k,e.screen,x(n)]}}function x(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),t.exports){t.exports=f;try{h=Dge}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:vs,[],Math)})(G4);var Oge=G4.exports,Pge=$ge,Lge=Ige,Fge=Ege,Mge=Tge,zge=_ge,Bge=Nge,Bu=Oge;Bu.alea=Pge;Bu.xor128=Lge;Bu.xorwow=Fge;Bu.xorshift7=Mge;Bu.xor4096=zge;Bu.tychei=Bge;var FI=Bu;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H4{constructor(e,n,r,s,o){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=o||Math.random();this.random=FI.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,o,i;do s=2*this.random()-1,o=2*this.random()-1,i=s*s+o*o;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Vge{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=FI.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uge(t,e=0,n=1,r,s){if(ha(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const o=new H4(e,n,r,!1,s),i=kt(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const Wge=oe({randomNormal_:Uge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jge(t,e=0,n=1,r="float32",s){ha(t);const o=kt(t,r),i=new Vge(e,n,null,s);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const Am=oe({randomUniform_:jge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ep(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return ee.runKernel(eI,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gge(t){const n={input:H(t,"input","real")};return ee.runKernel(tI,n)}const Ty=oe({real_:Gge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hge(t){const n={x:H(t,"x","reciprocal")};return ee.runKernel(cm,n)}const Kge=oe({reciprocal_:Hge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(t){const n={x:H(t,"x","relu")};return ee.runKernel(dm,n)}const Vu=oe({relu_:qge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xge(t){const n={x:H(t,"x","relu6")};return ee.runKernel(hm,n)}const K4=oe({relu6_:Xge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yge(t,e){const r={x:H(t,"x","reverse")},s={dims:e};return ee.runKernel(mx,r,s)}const $u=oe({reverse_:Yge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zge(t){const n={x:H(t,"x","round")};return ee.runKernel(fm,n)}const q4=oe({round_:Zge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qge(t){const n={x:H(t,"x","rsqrt","float32")};return ee.runKernel(pm,n)}const X4=oe({rsqrt_:Qge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jge(t){const n={x:H(t,"x","selu")};return ee.runKernel(mm,n)}const Y4=oe({selu_:Jge});function e0e(t,e,n,r,s,o=[1,1],i="NHWC"){const a=H(t,"x","separableConv2d"),u=H(e,"depthwiseFilter","separableConv2d"),l=H(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=se(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");B(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),B(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),B(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),B(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),B(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const h=u.shape[2],f=u.shape[3];B(l.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${l.shape[2]}.`);const p=bI(c,u,r,s,i,o),y=ku(p,l,1,"valid",i);return d?se(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Z4=oe({separableConv2d_:e0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t0e(t){const n={x:H(t,"x","sign")};return ee.runKernel(vm,n)}const n0e=oe({sign_:t0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r0e(t){const n={x:H(t,"x","sin","float32")};return ee.runKernel(gm,n)}const Q4=oe({sin_:r0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0e(t){const n={x:H(t,"x","sinh")};return ee.runKernel(ym,n)}const J4=oe({sinh_:s0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o0e(t,e,n){const r=H(t,"x","slice1d");return B(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),sn(r,[e],[n])}const MI=oe({slice1d_:o0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0e(t,e,n){const r=H(t,"x","slice2d");return B(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),sn(r,e,n)}const eB=oe({slice2d_:i0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a0e(t,e,n){const r=H(t,"x","slice3d");return B(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),sn(r,e,n)}const zI=oe({slice3d_:a0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0e(t,e,n){const r=H(t,"x","slice4d");return B(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),sn(r,e,n)}const _y=oe({slice4d_:l0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0e(t,e=-1){const n=H(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return ee.runKernel(wx,r,s)}const BI=oe({softmax_:u0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0e(t){B(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ee.runKernel(W$,e)}const tB=oe({fft_:c0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d0e(t){B(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ee.runKernel(H$,e)}const jk=oe({ifft_:d0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0e(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=se(t,[n,e]);r=jk(s)}else{const s=[n,2*(e-1)],o=se(Ty(t),[n,e]),i=se(kI(t),[n,e]),a=$u(sn(o,[0,1],[n,e-2]),1),u=Q($u(sn(i,[0,1],[n,e-2]),1),Nt(-1)),l=ns([o,a],1),c=ns([i,u],1),d=se(vu(l,c),[s[0],s[1]]);r=jk(d)}if(r=Ty(r),t.rank===3&&t.shape[0]!==0){const s=r,o=t.shape[0];r=se(r,[o,r.shape[0]/o,r.shape[1]]),s.dispose()}return r}const f0e=oe({irfft_:h0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0e(t,e,n=0){const s={x:H(t,"x","split")},o={numOrSizeSplits:e,axis:n};return ee.runKernel(bx,s,o)}const Gs=oe({split_:p0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0e(t,e){B(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(y=>0),m=t.shape.map(y=>y);m[t.shape.length-1]=e,s=sn(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,s=ns([t,dr(p)],t.shape.length-1),n=e}else s=t;const o=Tt(s),i=se(vu(s,o),[r,n]),a=tB(i),u=Math.floor(n/2)+1,l=Ty(a),c=kI(a),d=Gs(l,[u,n-u],l.shape.length-1),h=Gs(c,[u,n-u],c.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=u,se(vu(d[0],h[0]),f)}const g0e=oe({rfft_:m0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y0e(t,e){let n=H(t,"a","squaredDifference"),r=H(e,"b","squaredDifference");[n,r]=Bn(n,r),ht(n.shape,r.shape);const s={a:n,b:r},o={};return ee.runKernel(Sm,s,o)}const v0e=oe({squaredDifference_:y0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0e(t,e){const n=H(t,"x","squeeze","string_or_numeric");return se(n,ml(n.shape,e).newShape)}const Dm=oe({squeeze_:x0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b0e(t,e=0){const n=w4(t,"tensors","stack","string_or_numeric");B(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&B(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return ee.runKernel(lx,r,s)}const ia=oe({stack_:b0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0e(t,e=0){const r={x:H(t,"x","step")},s={alpha:e};return ee.runKernel(Em,r,s)}const Om=oe({step_:w0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0e(t,e,n,r,s=0,o=0,i=0,a=0,u=0){const c={x:H(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:u};return ee.runKernel(iI,c,d)}const k0e=oe({stridedSlice_:S0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C0e(t){const n={x:H(t,"x","tan","float32")};return ee.runKernel(Cm,n)}const $0e=oe({tan_:C0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ys(t,e){b$(t);const n=Tm(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _m(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vf(t,e,n){if(b$(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Tm(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _m(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0e(t,e,n){if(b$(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Tm(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return _m(t,e,r,n)}function nB(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(o+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(o+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(o+` update.rank != ${s+t.length-r}`);for(let i=0;i<s;++i)if(n.shape[i]!==e.shape[i])throw new Error(o+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-s;++i)if(n.shape[i+s]!==t[i+r])throw new Error(o+` updates.shape[${i+s}] (${n.shape[i+s]}) != shape[${i+s}] (${t[i+s]})`)}function E0e(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}nB(n,e,t)}function Uu(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,o=n.length;let i=1;for(let d=s;d<o;++d)i*=n[d];const a=s<1?1:s,u=ve(e.shape)/a,l=[...Qe(n.slice(0,s)),1],c=ve(n);return{sliceRank:s,numUpdates:u,sliceSize:i,strides:l,outputSize:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0e(t,e=1,n=!0){const r=H(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const o={x:r},i={k:e,sorted:n},[a,u]=ee.runKernel(aI,o,i);return{values:a,indices:u}}const _0e=oe({topk_:T0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0e(t,e=0,n=1,r,s){if(ha(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const o=new H4(e,n,r,!0,s),i=kt(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const rB=oe({truncatedNormal_:N0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0e(t,e=0){const n=H(t,"x","unique","string_or_numeric");B(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[o,i]=ee.runKernel(uI,r,s);return{values:o,indices:i}}const A0e=oe({unique_:R0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D0e(t,e,n){const r=H(t,"x","unsortedSegmentSum"),s=H(e,"segmentIds","unsortedSegmentSum","int32");B(pd(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:s},i={numSegments:n};return ee.runKernel(kx,o,i)}const sB=oe({unsortedSegmentSum_:D0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O0e(t,e=0){const n=H(t,"x","unstack","string_or_numeric");B(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return ee.runKernel(Sx,r,s)}const Iu=oe({unstack_:O0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0e(t,e=!0,n,r){return ee.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oB(t,e){const n=[];for(let o=0;o<e.length;o++)e[o]&&n.push(o);const r=kt(t,"int32"),s=kt([n.length,t.length],"int32");for(let o=0;o<n.length;o++){const i=r.indexToLoc(n[o]),a=o*t.length;s.values.set(i,a)}return s.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0e(t,e,n){const r=H(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),B(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{B(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},o={perm:e};return r.dtype==="complex64"?le(()=>{let i=Ty(r),a=kI(r);return i=ee.runKernel(Xc,{x:i},o),a=ee.runKernel(Xc,{x:a},o),n&&(a=zn(a)),vu(i,a)}):ee.runKernel(Xc,s,o)}const Et=oe({transpose_:L0e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0e(t,e){if(e==null)return t.shape.slice();if(Ft(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(t,e,n,r){const s=H(t,"x","dropout");if(B(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),B(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof er?s.clone():s;const o=F0e(s,n),i=1-e,a=st(Rx(Ne(Am(o,0,1,"float32",r),i)),i);return Q(s,a)}const z0e=oe({dropout_:M0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0e(t,e,n,r,s,o="NHWC",i){let a=t;t.rank===3&&(a=se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=se(e,[1,e.shape[0],e.shape[1],e.shape[2]])),B(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),B(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),B(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const l=o==="NHWC"?a.shape[3]:a.shape[1],c=o==="NHWC"?u.shape[3]:u.shape[1];B(l===n[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${n[2]}.`),B(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),as("conv2dDerFilter",s,i);const d={x:a,dy:u},h={strides:r,pad:s,dataFormat:o,dimRoundingMode:i,filterShape:n};return ee.runKernel(A$,d,h)}const VI=oe({conv2DBackpropFilter_:B0e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UI(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Q(t,Om(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function WI(t,e){let n=e;const r=ir(t.shape,e.shape);return r.length>0&&(n=tt(n,r)),se(n,t.shape)}function jI(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Vu(t);if(e==="elu")return _x(t);if(e==="relu6")return K4(t);if(e==="prelu")return NI(t,n);if(e==="leakyrelu")return CI(t,r);if(e==="sigmoid")return Ud(t);throw new Error(`Unknown fused activation ${e}.`)}const GI=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V0e({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:i,bias:a,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",GI(ee.state.gradientDepth,u)===!1){B(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let k=ku(t,e,n,r,s,o,i);return a!=null&&(k=Ne(k,a)),jI(k,u,l,c)}const d=H(t,"x","conv2d","float32"),h=H(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=se(d,[1,d.shape[0],d.shape[1],d.shape[2]])),B(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),B(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),as("fused conv2d",r,i);const m=s==="NHWC"?f.shape[3]:f.shape[1];B(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),B(Dr(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const y=wr(f.shape,h.shape,n,o,r,i);let g;a!=null&&(g=H(a,"bias","fused conv2d"),[g]=Bn(g,d),s==="NHWC"?ht(y.outShape,g.shape):(B(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),B(g.shape.length===0||g.shape[0]===y.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let v;if(l!=null){const k=l.shape;if(B(k.length<=1||k.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${k.length}.`),k.length===1)B(k[0]===1||k[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the number of output channels (${y.outChannels}).`);else if(k.length===3)try{ht(k,y.outShape)}catch{const $=`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error($)}v=H(l,"prelu weights","fused conv2d")}const x=(k,C)=>{B(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[$,E,S,R]=C,T=UI(k,S,u);B(wu(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const P=vI(E.shape,T,$,n,r),I=VI(E,T,$.shape,n,r),A=[P,I];if(R!=null){const L=WI(R,T);A.push(L)}return A},b={x:f,filter:h,bias:g,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:i,activation:u,leakyreluAlpha:c};return a==null?xd((C,$,E)=>{let S=ee.runKernel(by,b,w);return E([$,C,S]),p&&(S=se(S,[S.shape[1],S.shape[2],S.shape[3]])),{value:S,gradFunc:x}})(f,h):xd((C,$,E,S)=>{let R=ee.runKernel(by,b,w);return S([$,C,R,E]),p&&(R=se(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:x}})(f,h,g)}const U0e=oe({fusedConv2d_:V0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W0e(t,e,n,r,s,o=[1,1],i){let a=t;t.rank===3&&(a=se(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u=e;u.rank===3&&(u=se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:a,dy:u},c={strides:r,pad:s,dimRoundingMode:i,dilations:o,filterShape:n};return ee.runKernel(z$,l,c)}const j0e=oe({depthwiseConv2dNativeBackpropFilter_:W0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G0e(t,e,n,r,s,o=[1,1],i){let a=e,u=!1;e.rank===3&&(u=!0,a=se(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:a,filter:n},c={strides:r,pad:s,dimRoundingMode:i,dilations:o,inputShape:t},d=ee.runKernel(B$,l,c);return u?se(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const H0e=oe({depthwiseConv2dNativeBackpropInput_:G0e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K0e({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:o="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(GI(ee.state.gradientDepth,o)===!1){let R=Pt(t,e,n,r);return s!=null&&(R=Ne(R,s)),jI(R,o,i,a)}let u=H(t,"a","fused matMul"),l=H(e,"b","fused matMul");[u,l]=Bn(u,l);const c=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=n?u.shape[u.rank-1]:u.shape[u.rank-2],f=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=u.shape.slice(0,-2),m=l.shape.slice(0,-2),y=ve(p),g=ve(m);B(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=ht(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([h,f]),b=n?se(u,[y,c,h]):se(u,[y,h,c]),w=r?se(l,[g,f,d]):se(l,[g,d,f]);let k;s!=null&&(k=H(s,"bias","fused matMul"),[k]=Bn(k,u),ht(x,k.shape));let C;i!=null&&(C=H(i,"prelu weights","fused matMul"));const $=(R,T)=>{const[P,I,A,L]=T,V=UI(se(R,A.shape),A,o);let z,M;if(!n&&!r?(z=Pt(V,I,!1,!0),M=Pt(P,V,!0,!1)):!n&&r?(z=Pt(V,I,!1,!1),M=Pt(V,P,!0,!1)):n&&!r?(z=Pt(I,V,!1,!0),M=Pt(P,V,!1,!1)):(z=Pt(I,V,!0,!0),M=Pt(V,P,!0,!0)),s!=null){const _=WI(L,V);return[z,M,_]}else return[z,M]},E={a:b,b:w,bias:k,preluActivationWeights:C},S={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:a};return s==null?xd((T,P,I)=>{const A=ee.runKernel(xy,E,S);return I([T,P,A]),{value:se(A,x),gradFunc:$}})(b,w):xd((T,P,I,A)=>{const L=ee.runKernel(xy,E,S);return A([T,P,L,I]),{value:se(L,x),gradFunc:$}})(b,w,k)}const JA=oe({fusedMatMul_:K0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0e(t,e,n,r,s="bilinear",o=0){const i=H(t,"image","cropAndResize"),a=H(e,"boxes","cropAndResize","float32"),u=H(n,"boxInd","cropAndResize","int32"),l=a.shape[0];B(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),B(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${a.shape}.`),B(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${a.shape}.`),B(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),B(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),B(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const c={image:i,boxes:a,boxInd:u},d={method:s,extrapolationValue:o,cropSize:r};return ee.runKernel(L$,c,d)}const X0e=oe({cropAndResize_:q0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y0e(t){const e=H(t,"image","flipLeftRight","float32");B(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ee.runKernel(G$,n,{})}const Z0e=oe({flipLeftRight_:Y0e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0e(t){const e=H(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];B(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),B(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Bo(e,s)}const J0e=oe({grayscaleToRGB_:Q0e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye(t){const e=H(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];B(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),B(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,o=je(e,"float32"),i=ys([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Th("ij,j->i",o,i);break;case 3:a=Th("ijk,k->ij",o,i);break;case 4:a=Th("ijkl,l->ijk",o,i);break;case 5:a=Th("ijklm,m->ijkl",o,i);break;case 6:a=Th("ijklmn,n->ijklm",o,i);break;default:throw new Error("Not a valid tensor rank.")}return a=jr(a,-1),je(a,s)}const tye=oe({rgbToGrayscale_:eye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t,e,n=0,r=.5){const s=H(t,"image","rotateWithOffset","float32");B(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const o={image:s},i={radians:e,fillValue:n,center:r};return ee.runKernel(cI,o,i)}const rye=oe({rotateWithOffset_:nye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jd(t,e,n,r,s,o){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),o==null&&(o=0);const i=t.shape[0];return n=Math.min(n,i),B(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),B(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),B(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),B(e.rank===1,()=>"scores must be a 1D tensor"),B(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),B(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sye(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=H(t,"boxes","nonMaxSuppression","float32"),i=H(e,"scores","nonMaxSuppression","float32"),a=jd(o,i,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return ee.runKernel(Z$,{boxes:o,scores:i},u)}const oye=oe({nonMaxSuppression_:sye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(t,e,n){const r=aye(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function aye(t,e,n){return uye(t,e,n||lye)}function lye(t,e){return t>e?1:t<e?-1:0}function uye(t,e,n){let r=0,s=t.length,o=0,i=!1;for(;r<s;){o=r+(s-r>>>1);const a=n(e,t[o]);a>0?r=o+1:(s=o,i=!a)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HI(t,e,n,r,s){return XI(t,e,n,r,s,0)}function KI(t,e,n,r,s,o){return XI(t,e,n,r,s,0,!1,o,!0)}function qI(t,e,n,r,s,o){return XI(t,e,n,r,s,o,!0)}function XI(t,e,n,r,s,o,i=!1,a=!1,u=!1){const l=[];for(let y=0;y<e.length;y++)e[y]>s&&l.push({score:e[y],boxIndex:y,suppressBeginIndex:0});l.sort(eD);const c=o>0?-.5/o:0,d=[],h=[];for(;d.length<n&&l.length>0;){const y=l.pop(),{score:g,boxIndex:v,suppressBeginIndex:x}=y;if(g<s)break;let b=!1;for(let w=d.length-1;w>=x;--w){const k=cye(t,v,d[w]);if(k>=r){b=!0;break}if(y.score=y.score*dye(r,c,k),y.score<=s)break}y.suppressBeginIndex=d.length,b||(y.score===g?(d.push(v),h.push(y.score)):y.score>s&&iye(l,y,eD))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=h),u&&(m.validOutputs=f),m}function cye(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),f=(a-o)*(u-i),p=(d-l)*(h-c);if(f<=0||p<=0)return 0;const m=Math.max(o,l),y=Math.max(i,c),g=Math.min(a,d),v=Math.min(u,h),x=Math.max(g-m,0)*Math.max(v-y,0);return x/(f+p-x)}function dye(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function eD(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hye(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=H(t,"boxes","nonMaxSuppressionAsync"),i=H(e,"scores","nonMaxSuppressionAsync"),a=jd(o,i,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const u=await Promise.all([o.data(),i.data()]),l=u[0],c=u[1],{selectedIndices:d}=HI(l,c,n,r,s);return o!==t&&o.dispose(),i!==e&&i.dispose(),ys(d,"int32")}const fye=hye;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const i=H(t,"boxes","nonMaxSuppression"),a=H(e,"scores","nonMaxSuppression"),u=jd(i,a,n,r,s,o);n=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold,o=u.softNmsSigma;const l={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o},d=ee.runKernel(J$,l,c);return{selectedIndices:d[0],selectedScores:d[1]}}const mye=oe({nonMaxSuppressionWithScore_:pye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gye(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const i=H(t,"boxes","nonMaxSuppressionAsync"),a=H(e,"scores","nonMaxSuppressionAsync"),u=jd(i,a,n,r,s,o);n=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold,o=u.softNmsSigma;const l=await Promise.all([i.data(),a.data()]),c=l[0],d=l[1],{selectedIndices:h,selectedScores:f}=qI(c,d,n,r,s,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:ys(h,"int32"),selectedScores:ys(f)}}const yye=gye;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const i=H(t,"boxes","nonMaxSuppression"),a=H(e,"scores","nonMaxSuppression"),u=jd(i,a,n,r,s,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,h={boxes:i,scores:a},f={maxOutputSize:l,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:o},p=ee.runKernel(Q$,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const xye=oe({nonMaxSuppressionPadded_:vye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function bye(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const i=H(t,"boxes","nonMaxSuppressionAsync"),a=H(e,"scores","nonMaxSuppressionAsync"),u=jd(i,a,n,r,s,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,[h,f]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=KI(h,f,l,c,d,o);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:ys(p,"int32"),validOutputs:Nt(m,"int32")}}const wye=bye;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t,e,n=!1,r=!1){const s=H(t,"images","resizeBilinear");B(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),B(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),B(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=s,i=!1;s.rank===3&&(i=!0,o=se(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:o},u={alignCorners:n,halfPixelCenters:r,size:e},l=ee.runKernel(px,a,u);return i?se(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const iB=oe({resizeBilinear_:Sye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(t,e,n=!1,r=!1){const s=H(t,"images","resizeNearestNeighbor");B(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),B(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),B(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),B(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=s,i=!1;s.rank===3&&(i=!0,o=se(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:o},u={alignCorners:n,halfPixelCenters:r,size:e},l=ee.runKernel(fx,a,u);return i?se(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const aB=oe({resizeNearestNeighbor_:kye});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(t,e="binary",n=!1,r=.5){const s=H(t,"image","threshold"),o=.2989,i=.587,a=.114,u=s.shape[0]*s.shape[1];let l=Q(ys([r]),255),c,d,h,f;if(B(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),B(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),B(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),B(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[c,d,h]=Gs(s,[1,1,1],-1);const y=Q(c,o),g=Q(d,i),v=Q(h,a);f=Ne(Ne(y,g),v)}else f=t;if(e==="otsu"){const y=Spe(je(q4(f),"int32"),gf([]),256);l=$ye(y,u)}const p=n?Wd(f,l):Zs(f,l);return je(Q(p,255),"int32")}function $ye(t,e){let n=ys([-1]),r=ys([0]),s=ys([0]),o,i,a,u,l,c;for(let d=0;d<t.size-1;d++){o=sn(t,0,d+1),i=sn(t,d+1),l=st(tt(o),e),c=st(tt(i),e);const h=tt(Q(o,ep(0,o.size)));a=st(h,tt(o));const f=Tx(i.shape,o.size),p=Ne(ep(0,i.size),f),m=Q(i,p);u=st(tt(m),tt(i));const y=at(a,u),g=at(a,u),v=Q(l,c);s=Q(Q(v,y),g);const x=Zs(s,r);r=Hr(x,s,r),n=Hr(x,ys([d]),n)}return n}const Iye=oe({threshold_:Cye});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eye(t,e,n="nearest",r="constant",s=0,o){const i=H(t,"image","transform","float32"),a=H(e,"transforms","transform","float32");B(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),B(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),B(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);const u={image:i,transforms:a},l={interpolation:n,fillMode:r,fillValue:s,outputShape:o};return ee.runKernel(lI,u,l)}const Tye=oe({transform_:Eye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ye(t,e,n){const r=H(t,"a","bandPart");B(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[o,i]=r.shape.slice(-2);let a,u;typeof e=="number"?(B(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),B(e<=o,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${o}).`),a=H(e<0?o:e,"numLower","bandPart")):(B(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Hr(Iy(e,0),o,Jf(e,o))),typeof n=="number"?(B(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),B(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),u=H(n<0?i:n,"numUpper","bandPart")):(B(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=Hr(Iy(n,0),i,Jf(n,i)));const l=se(ep(0,o,1,"int32"),[-1,1]),c=ep(0,i,1,"int32"),d=at(l,c),h=oa(Wd(d,a),zu(d,zn(u))),f=dr([o,i],r.dtype);return se(ia(Iu(se(r,[-1,o,i])).map(p=>Hr(h,p,f))),s)}const Nye=oe({bandPart_:_ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(t){let e;if(Array.isArray(t)){e=!1,B(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let o=1;o<t.length;++o)B(t[o].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[o].shape[0]} vs. ${s})`)}else e=!0,t=Gs(t,t.shape[0],0).map(s=>Dm(s,[0]));B(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(ee.tidy(()=>{let o=r[s];if(s>0)for(let i=0;i<s;++i){const a=Q(tt(Q(n[i],o)),n[i]);o=at(o,a)}return st(o,Nx(o,"euclidean"))}));return e?ia(n,0):n}const Aye=oe({gramSchmidt_:Rye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t,e=!1){if(B(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return tD(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((u,l)=>u*l),r=Iu(se(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],o=[];r.forEach(u=>{const[l,c]=tD(u,e);s.push(l),o.push(c)});const i=se(ia(s,0),t.shape),a=se(ia(o,0),t.shape);return[i,a]}}function tD(t,e=!1){return ee.tidy(()=>{B(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=z4(n),o=tu(t);const i=vf([[1]],[1,1]);let a=tu(i);const u=n>=r?r:n;for(let l=0;l<u;++l){const c=o,d=a,h=s;[a,o,s]=ee.tidy(()=>{const f=sn(o,[l,l],[n-l,1]),p=Nx(f),m=sn(o,[l,l],[1,1]),y=Hr(Zs(m,0),vf([[-1]]),vf([[1]])),g=at(m,Q(y,p)),v=st(f,g);v.shape[0]===1?a=tu(i):a=ns([i,sn(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const x=zn(st(Pt(y,g),p)),b=sn(o,[l,0],[n-l,r]),w=Q(x,a),k=Et(a);if(l===0)o=at(b,Pt(w,Pt(k,b)));else{const E=at(b,Pt(w,Pt(k,b)));o=ns([sn(o,[0,0],[l,r]),E],0)}const C=Et(w),$=sn(s,[0,l],[n,s.shape[1]-l]);if(l===0)s=at($,Pt(Pt($,a),C));else{const E=at($,Pt(Pt($,a),C));s=ns([sn(s,[0,0],[n,l]),E],1)}return[a,o,s]}),xt([c,d,h])}return!e&&n>r&&(s=sn(s,[0,0],[n,r]),o=sn(o,[0,0],[r,r])),[s,o]})}const Oye=oe({qr_:Dye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qi={flipLeftRight:Z0e,grayscaleToRGB:J0e,resizeNearestNeighbor:aB,resizeBilinear:iB,rgbToGrayscale:tye,rotateWithOffset:rye,cropAndResize:X0e,nonMaxSuppression:oye,nonMaxSuppressionAsync:fye,nonMaxSuppressionWithScore:mye,nonMaxSuppressionWithScoreAsync:yye,nonMaxSuppressionPadded:xye,nonMaxSuppressionPaddedAsync:wye,threshold:Iye,transform:Tye},Pye={bandPart:Nye,gramSchmidt:Aye,qr:Oye};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lye=new Map,Fye=new Map;class Gd{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class uo{constructor(){this.classNameMap={}}static getMap(){return uo.instance==null&&(uo.instance=new uo),uo.instance}static register(e){uo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function $e(t,e,n){B(t.className!=null,()=>"Class being registered does not have the static className property defined."),B(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),B(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return uo.register(t),Lye.set(s,t),Fye.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sl extends Gd{minimize(e,n=!1,r){const{value:s,grads:o}=this.computeGradients(e,r);if(r!=null){const i=r.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(i)}else this.applyGradients(o);return xt(o),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Wme(e,n)}dispose(){this.iterations_!=null&&xt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Nt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Sl,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lB extends Sl{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ee.registeredVariables[r],i=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:le(()=>Tt(o).variable(i))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:le(()=>Tt(o).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const u=this.accumulatedGrads[s].variable,l=this.accumulatedUpdates[s].variable;le(()=>{const c=Ne(Q(u,this.rho),Q(dn(a),1-this.rho)),d=Q(st(Rr(Ne(l,this.epsilon)),Rr(Ne(u,this.epsilon))),a),h=Ne(Q(l,this.rho),Q(dn(d),1-this.rho));u.assign(c),l.assign(h);const f=Ne(Q(d,-this.learningRate),o);o.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(xt(this.accumulatedGrads.map(e=>e.variable)),xt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uB extends Sl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ee.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:le(()=>Tx(o.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=this.accumulatedGrads[s].variable;le(()=>{const u=Ne(a,dn(i));a.assign(u);const l=Ne(Q(st(i,Rr(Ne(u,ee.backend.epsilon()))),-this.learningRate),o);o.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&xt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cB extends Sl{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],le(()=>{this.accBeta1=Nt(n).variable(),this.accBeta2=Nt(r).variable()}),s==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=at(1,this.accBeta1),s=at(1,this.accBeta2);n.forEach((o,i)=>{const a=ee.registeredVariables[o],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:le(()=>Tt(a).variable(u))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${o}/v`,variable:le(()=>Tt(a).variable(u))});const l=Array.isArray(e)?e[i].tensor:e[o];if(l==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,h=Ne(Q(c,this.beta1),Q(l,1-this.beta1)),f=Ne(Q(d,this.beta2),Q(dn(l),1-this.beta2)),p=st(h,r),m=st(f,s);c.assign(h),d.assign(f);const y=Ne(Q(st(p,Ne(Rr(m),this.epsilon)),-this.learningRate),a);a.assign(y)}),this.accBeta1.assign(Q(this.accBeta1,this.beta1)),this.accBeta2.assign(Q(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&xt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&xt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),le(()=>{this.accBeta1.assign(Cu(this.beta1,this.iterations_+1)),this.accBeta2.assign(Cu(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dB extends Sl{static get className(){return"Adamax"}constructor(e,n,r,s=null,o=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],le(()=>{this.iteration=Nt(0).variable(),this.accBeta1=Nt(n).variable()}),s==null&&(this.epsilon=ee.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);le(()=>{const r=at(1,this.accBeta1),s=st(-this.learningRate,Ne(Q(this.iteration,this.decay),1));n.forEach((o,i)=>{const a=ee.registeredVariables[o],u=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${o}/m`,variable:Tt(a).variable(u)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${o}/v`,variable:Tt(a).variable(u)});const l=Array.isArray(e)?e[i].tensor:e[o];if(l==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,h=Ne(Q(c,this.beta1),Q(l,1-this.beta1)),f=Q(d,this.beta2),p=Vr(l),m=bl(f,p);c.assign(h),d.assign(m);const y=Ne(Q(st(s,r),st(h,Ne(m,this.epsilon))),a);a.assign(y)}),this.iteration.assign(Ne(this.iteration,1)),this.accBeta1.assign(Q(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&xt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&xt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YI extends Sl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const i=ee.registeredVariables[r];le(()=>{const a=Ne(Q(this.c,o),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=xi(Nt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hB extends YI{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Nt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ee.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:le(()=>Tt(o).variable(!1))});const i=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&le(()=>{let u;const l=Ne(Q(this.m,i),a);this.useNesterov?u=Ne(Q(this.c,Ne(a,Q(l,this.m))),o):u=Ne(Q(this.c,l),o),i.assign(l),o.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&xt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fB extends Sl{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,o=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,s==null&&(this.epsilon=ee.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const o=ee.registeredVariables[r],i=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:le(()=>Tt(o).variable(i))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:le(()=>Tt(o).variable(i))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:le(()=>Tt(o).variable(i))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const u=this.accumulatedMeanSquares[s].variable,l=this.accumulatedMoments[s].variable;le(()=>{const c=Ne(Q(u,this.decay),Q(dn(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=Ne(Q(d,this.decay),Q(a,1-this.decay)),f=st(Q(a,this.learningRate),Rr(at(c,Ne(dn(h),this.epsilon)))),p=Ne(Q(l,this.momentum),f);u.assign(c),d.assign(h),l.assign(p);const m=at(o,p);o.assign(m)}else{const d=Ne(Q(u,this.decay),Q(dn(a),1-this.decay)),h=Ne(Q(l,this.momentum),st(Q(a,this.learningRate),Rr(Ne(d,this.epsilon))));u.assign(d),l.assign(h);const f=at(o,h);o.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&xt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&xt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&xt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mye=[lB,uB,cB,dB,hB,fB,YI];function zye(){for(const t of Mye)$e(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nD(t,e,n,r){i(t),n=n??0,r=r??1,a(n,r);let s=0;const o=u=>(u.then(l=>{const c=n+ ++s/t.length*(r-n);return e(c),l}),u);function i(u){B(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function a(u,l){B(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),B(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),B(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(t.map(o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Bye(t,e){e==null&&(e={});const n=e.fetchFunc==null?de().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),s=0,o=.5,a=(e.onProgress==null?await Promise.all(r):await nD(r,e.onProgress,s,o)).map(d=>d.arrayBuffer()),u=.5,l=1;return e.onProgress==null?await Promise.all(a):await nD(a,e.onProgress,u,l)}function Vye(t,e){var n;const r=e.fetchFunc==null?de().platform.fetch:e.fetchFunc;let s=0,o;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var a;s<t.length;){o||(o=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:u,value:l}=await o.read();if(u){s++,o=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}i.enqueue(l);return}i.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uye="application/octet-stream",Wye="application/json";class ZI{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(B(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=de().platform.fetch,B(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&B(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=nfe(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:Wye}),"model.json"),e.weightData!=null){const i=yl.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:Uye}),"model.weights.bin")}const o=await this.fetch(this.path,n);if(o.ok)return{modelArtifactsInfo:pI(e),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return sfe(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=YA(e.weightsManifest),s=()=>Vye(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=jye(n),o=this.weightPathPrefix||r,i=[],a=[];for(const u of e)for(const l of u.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(l)):i.push(o+l+s);return this.weightUrlConverter&&i.push(...await Promise.all(a)),i}async loadWeights(e){const n=await this.getWeightUrls(e),r=YA(e),s=await Bye(n,this.loadOptions);return[r,s]}}ZI.URL_SCHEME_REGEX=/^https?:\/\//;function jye(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function rD(t){return t.match(ZI.URL_SCHEME_REGEX)!=null}const pB=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>rD(r)):n=rD(t),n)return mB(t,e)}return null};lr.registerSaveRouter(pB);lr.registerLoadRouter(pB);function mB(t,e){return new ZI(t,e)}function Gye(t,e){return mB(t,e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Tl;function Hye(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,o=!1,i=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else if(t.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(Nk(Tk,ee.backendName)!=null){const p={pixels:t},m={numChannels:e};return ee.runKernel(Tk,p,m)}const[l,c]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(i)d=t.getContext("2d").getImageData(0,0,l,c).data;else if(r||n)d=t.data;else if(o||s||a){if(Tl==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Tl=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Tl=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Tl.canvas.width=l,Tl.canvas.height=c,Tl.drawImage(t,0,0,l,c),d=Tl.getImageData(0,0,l,c).data}let h;if(e===4)h=new Int32Array(d);else{const p=l*c;h=new Int32Array(p*e);for(let m=0;m<p;m++)for(let y=0;y<e;++y)h[m*e+y]=d[m*4+y]}return I0e(h,[c,l,e],"int32")}const Kye=oe({fromPixels_:Hye});function QI(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ve(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,o=s[s.length-1];let i=1;for(let d=0;d<s.length-1;++d)i*=s[d];const a=t.shape,u=s.slice();u.pop();let l=1;for(let d=o;d<n;++d)l*=a[d],u.push(a[d]);const c=[...Qe(t.shape).map(d=>d/l),1].slice(0,o);return[u,i,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gk=-2,qye=-1;function JI(t,e,n){const r=t.shape.length;B(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),B(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)B(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Xye(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function eE(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function gB(t,e,n,r){const s=[...t];for(let o=s.length;o<r.length;o++)s.push(1);for(let o=0;o<n;o++)o===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function yB(t,e,n){return n<=t?n:n-(e-1)}function vB(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Yye(t,e,n,r,s,o,i,a,u){const l=t.length;let c=new Array(l),d=new Array(l),h=new Array(l);if(e.length&&n>0){const f=e[0],p=n+1;c=xB(i,f,p,r,t),d=bB(a,f,p,s,t),h=gB(o,f,p,t)}else for(let f=0;f<l;f++)c[f]=SB(i,r,o,t,f,u),d[f]=kB(a,s,o,t,f,u),h[f]=wB(o,f,u);return{begin:c,end:d,strides:h}}function xB(t,e,n,r,s){const o=[...s],i=vB(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=0;else{const u=yB(e,n,a);let l=r[u];t&1<<u&&(l=0),o[a]=l}return o}function bB(t,e,n,r,s){const o=[...s],i=vB(n,e);for(let a=0;a<o.length;a++)if(i.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{const u=yB(e,n,a);let l=r[u];t&1<<u&&(l=Number.MAX_SAFE_INTEGER),o[a]=l}for(let a=0;a<o.length;a++){const u=s[a];o[a]<0&&(o[a]+=u),o[a]=gu(0,o[a],s[a])}return o}function wB(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function SB(t,e,n,r,s,o){let i=e[s];const a=n[s]||1;(t&1<<s||o&1<<s||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const u=r[s];return i<0&&(i+=u),i=gu(0,i,u-1),i}function kB(t,e,n,r,s,o){let i=e[s];const a=n[s]||1;(t&1<<s||o&1<<s||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const u=r[s];return i<0&&(i+=u),a>0?i=gu(0,i,u):i=gu(-1,i,u-1),i}function tE(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function nE(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Ax(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(i=>{B(i!==-1,()=>"slice() does not support negative begin indexing.")});let o;return n==null?o=new Array(s).fill(-1):typeof n=="number"?o=[n,...new Array(s-1).fill(-1)]:n.length<s?o=n.concat(new Array(s-n.length).fill(-1)):o=n,o=o.map((i,a)=>i>=0?i:(B(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,o]}function rE(t,e,n,r,s,o,i,a,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:l.slice(),beginMask:s,endMask:o,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:u};for(let x=0;x<d.dims;x++)c&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Zye(d,h);let f=!0,p=!0,m=!0;const y=[],g=[];for(let x=0;x<t.length;++x){if(h.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const b=!!(h.shrinkAxisMask&1<<x),w=t[x];if(w===-1){y.push(b?1:-1);continue}const k=[h.beginMask&1<<x,h.endMask&1<<x],C=[h.strides[x]>0?0:-1,h.strides[x]>0?w:w-1];if(b&&h.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[x]===1;const $=!!(h.beginMask&1<<x&&h.endMask&1<<x);if(h.beginValid&&h.endValid){if(b){const T=h.begin[x]<0?w+h.begin[x]:h.begin[x];if(h.begin[x]=T,h.end[x]=h.begin[x]+1,T<0||T>=w)throw Error(`slice index ${h.begin[x]} of dimension ${x} out of bounds.`)}else h.begin[x]=sD(h.begin[x],0,h.strides[x],w,k,C),h.end[x]=sD(h.end[x],1,h.strides[x],w,k,C);const R=h.strides[x]===1&&h.begin[x]===0&&h.end[x]===w;f=f&&R,p=p&&(x===0&&h.strides[x]===1||R)}else f=f&&h.strides[x]===1&&$,p=p&&(x===0&&h.strides[x]===1||$);let E,S=!1;if(h.beginValid&&h.endValid?(E=h.end[x]-h.begin[x],S=!0):b?(E=1,S=!0):$&&w>=0&&(h.strides[x]<0?E=-w:E=w,S=!0),S){let R;E===0||E<0!=h.strides[x]<0?R=0:R=Math.trunc(E/h.strides[x])+(E%h.strides[x]!==0?1:0),y.push(R)}else y.push(-1)}for(let x=0;x<h.finalShapeGatherIndices.length;++x){const b=h.finalShapeGatherIndices[x];b>=0?g.push(y[b]):b===Gk&&g.push(1)}return{finalShapeSparse:g.filter((x,b)=>h.finalShapeGatherIndices[b]!==Gk),finalShape:g,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function Zye(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(Gk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(qye),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function sD(t,e,n,r,s,o){if(s[e])return n>0?o[e]:o[e+1&1];{const i=t<0?r+t:t;return i<o[0]?o[0]:i>o[1]?o[1]:i}}const Qye=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:JI,computeFlatOffset:nE,computeOutShape:eE,getNormalizedAxes:Yye,isSliceContinous:tE,maskToAxes:Xye,parseSliceParams:Ax,sliceInfo:rE,startForAxis:SB,startIndicesWithElidedDims:xB,stopForAxis:kB,stopIndicesWithElidedDims:bB,stridesForAxis:wB,stridesWithElidedDims:gB},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jye{static sgd(e){return new YI(e)}static momentum(e,n,r=!1){return new hB(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,o=!1){return new fB(e,n,r,s,o)}static adam(e=.001,n=.9,r=.999,s=null){return new cB(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new lB(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,o=0){return new dB(e,n,r,s,o)}static adagrad(e,n=.1){return new uB(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fl=Jye;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e1e=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function CB(){return new Promise(t=>e1e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sE(t,e){const n=t[0].length;t.forEach((s,o)=>{B(s.length===n,()=>`Error in concat${n}D: rank of tensors[${o}] must be the same as the rank of the rest (${n})`)}),B(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,o)=>{for(let i=0;i<n;i++)B(i===e||s[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${o}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`)})}function bi(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Mo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Mo||(Mo={}));function $B(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const o=n[s],i=r[r.length-n.length+s],a=r[i];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${o} but shape[${s+t}] = ${a}`)}else r[i]=o}return r}function IB(t){const e={FIRST_DIM_SIZE:Mo.FIRST_DIM_SIZE,VALUE_ROWIDS:Mo.VALUE_ROWIDS,ROW_LENGTHS:Mo.ROW_LENGTHS,ROW_SPLITS:Mo.ROW_SPLITS,ROW_LIMITS:Mo.ROW_LIMITS,ROW_STARTS:Mo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function EB(t){return t.length===0?0:t[0]===Mo.FIRST_DIM_SIZE?t.length-1:t.length}function TB(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const o=t[s],i=e[s+1];if(o>=0&&i>=0&&o!==1&&o!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${o} but ragged tensor input.flatValues.shape[${s-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oE=30;function Dx(t){return t<=oE?t:$k(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iE(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pm(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const o=e.length;for(let i=0;i<o;++i)s=s.concat([t[i+1]/e[i],e[i]]);s=s.concat(t.slice(o+1))}return s}function Lm(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],o=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?o.push(i):s.push(i);r.push(...s),r.push(0),r.push(...o)}return r}function Fm(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let o=1;o<t.length;++o)o<=e.length?r?s.push(e[o-1]*t[o]):s.push(t[o]/e[o-1]):s.push(t[o]);return s}function aE(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function lE(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ox=1.7580993408473768,Px=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uE=.3275911,cE=.254829592,dE=-.284496736,hE=1.421413741,fE=-1.453152027,pE=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aa(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function _B(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function NB(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function RB(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function mE(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function AB(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function DB(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const o=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(o),r[s]=Math.sin(o)}return{real:n,imag:r}}function OB(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),o=Math.sin(r);return{real:s,imag:o}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xw="->",t1e=/->/g,oD=",",iD="...";function gE(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(t1e,"").length)/xw.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${xw}").`);const[r,s]=t.split(xw);B(r.indexOf(iD)===-1,()=>`The ellipsis notation ("${iD}") is not supported yet.`);const o=r.split(oD),i=o.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const f=s[h];if(!o.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<r.length;++h){const f=r[h];a.indexOf(f)===-1&&f!==oD&&a.push(f)}const u=new Array(o.length);for(let h=0;h<i;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error(`Found duplicate axes in input component ${o[h]}. Support for duplicate axes in input is not implemented yet.`);u[h]=[];for(let f=0;f<o[h].length;++f)u[h].push(a.indexOf(o[h][f]))}const l=a.length,c=s.length,d=[];for(let h=c;h<l;++h)d.push(h);return{allDims:a,summedDims:d,idDims:u}}function yE(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function vE(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const o=n[s].shape;for(let i=0;i<e[s].length;++i)r[e[s][i]]===void 0?r[e[s][i]]=o[i]:B(r[e[s][i]]===o[i],()=>`Expected dimension ${r[e[s][i]]} at axis ${i} of input shaped ${JSON.stringify(o)}, but got dimension ${o[i]}`)}}function xE(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let i=0;i<s;++i)r.push([]);const o=[];for(let i=0;i<n.length;++i){const a=n[i],u=n1e(e,a);for(const l of u)o.indexOf(l)===-1&&(r[i].push(l),o.push(l))}return{path:n,steps:r}}function bE(t){return t.every((e,n)=>e===n)}function n1e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function wE(t,e,n=0){let r=[];if(typeof e=="number")B(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);B(s<=1,()=>"There should be only one negative value in split array.");const o=e.indexOf(-1);if(o!==-1){const i=e.reduce((a,u)=>u>0?a+u:a);e[o]=t.shape[n]-i}B(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PB(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function LB(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function FB(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MB(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function zB(t,e){return`size ${t} must be non-negative, not ${e}`}function BB(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function VB(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function UB(t,e){const n=ve(t),r=ve(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hk(){return"segment ids must be >= 0"}function WB(){return"segment ids are not increasing"}function jB(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function GB(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HB(t,e){let n=!1,r;for(t<=oE?(r=t,n=!0):r=$k(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=$k(t,r+1);return r}function KB(t,e,n){const r=[],s=t.length;for(let o=0;o<s;o++)o!==e?r.push(t[o]):r.push(n);return r}function SE(t,e,n,r){const s=e.shape.length,o=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let u=1,l=1,c=1;for(let d=0;d<r;++d)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<s;d++)a.push(e.shape[d]);for(let d=n+1;d<o;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:i,outputShape:a}}const r1e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:SE,computeOutShape:KB,segOpComputeOptimalWindowSize:HB},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function la(t){try{return t.map(e=>tl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function qB(t){return t.map(e=>qa(e))}const s1e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:cE,ERF_A2:dE,ERF_A3:hE,ERF_A4:fE,ERF_A5:pE,ERF_P:uE,PARALLELIZE_THRESHOLD:oE,get RowPartitionType(){return Mo},SELU_SCALE:Px,SELU_SCALEALPHA:Ox,applyActivation:jI,assertAndGetBroadcastShape:ht,assertAxesAreInnerMostDims:Sr,assertParamsConsistent:sE,assignToTypedArray:AB,axesAreInnerMostDims:wI,calculateShapes:Uu,checkEinsumDimSizes:vE,checkPadOnDimRoundingMode:as,combineLocations:F4,combineRaggedTensorToTensorShapes:$B,complexWithEvenIndex:NB,complexWithOddIndex:RB,computeConv2DInfo:wr,computeConv3DInfo:vl,computeDefaultPad:mI,computeDilation2DInfo:Nm,computeOptimalWindowSize:Dx,computeOutAndReduceShapes:pr,computeOutShape:bi,computePool2DInfo:$o,computePool3DInfo:fa,convertConv2DDataFormat:pa,decodeEinsumEquation:gE,eitherStridesOrDilationsAreOne:Dr,expandShapeToKeepDim:qn,exponent:OB,exponents:DB,fromStringArrayToUint8:qB,fromUint8ToStringArray:la,getAxesPermutation:In,getBroadcastDims:vd,getComplexWithIndex:mE,getEinsumComputePath:xE,getEinsumPermutation:yE,getFusedBiasGradient:WI,getFusedDyActivation:UI,getImageCenter:iE,getInnerMostAxes:Vn,getPermuted:Lm,getRaggedRank:EB,getReductionAxes:ir,getReshaped:Pm,getReshapedPermuted:Fm,getRowPartitionTypesHelper:IB,getSliceBeginCoords:aE,getSliceSize:lE,getSparseFillEmptyRowsIndicesDenseShapeMismatch:PB,getSparseFillEmptyRowsNegativeIndexErrorMessage:LB,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:FB,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:BB,getSparseReshapeInputOutputMismatchErrorMessage:UB,getSparseReshapeInputOutputMultipleErrorMessage:VB,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:MB,getSparseReshapeNegativeOutputDimErrorMessage:zB,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:GB,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Hk,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:WB,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:jB,getUndoAxesPermutation:xl,isIdentityPermutation:bE,log:whe,mergeRealAndImagArrays:aa,prepareAndValidate:QI,prepareSplitSize:wE,segment_util:r1e,shouldFuse:GI,slice_util:Qye,splitRealAndImagArrays:_B,stridesOrDilationsArePositive:Su,tupleValuesAreOne:wu,upcastType:$s,validateDefaultValueShape:TB,validateInput:E0e,validateUpdateShape:nB,warn:Fs},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */zye();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XB={kernelName:$v,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,Om(je(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o1e={kernelName:Dp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=dn(je(n,"float32")),s=Rr(at(Nt(1),r));return zn(st(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i1e={kernelName:Op,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Rr(at(dn(je(n,"float32")),1));return st(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a1e={kernelName:Vd,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ht(n.shape,r.shape);return{a:()=>{let a=t;const u=ir(n.shape,s);return u.length>0&&(a=tt(a,u)),se(a,n.shape)},b:()=>{let a=t;const u=ir(r.shape,s);return u.length>0&&(a=tt(a,u)),se(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l1e={kernelName:C$,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u1e={kernelName:Iv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Tt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c1e={kernelName:Ev,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Tt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d1e={kernelName:Pp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,Rr(at(Nt(1),dn(je(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h1e={kernelName:Lp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Rr(Ne(Nt(1),dn(je(n,"float32"))));return st(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f1e={kernelName:zp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ht(n.shape,r.shape);return{a:()=>{const a=Ne(dn(n),dn(r));let u=Q(t,st(r,a));const l=ir(n.shape,s);return l.length>0&&(u=tt(u,l)),se(u,n.shape)},b:()=>{const a=Ne(dn(n),dn(r));let u=zn(Q(t,st(n,a)));const l=ir(r.shape,s);return l.length>0&&(u=tt(u,l)),se(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1e={kernelName:Fp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,Ne(dn(je(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e={kernelName:Mp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,at(Nt(1),dn(je(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g1e(t,e,n,r,s,o){const i=H(t,"dy","avgPool3dGrad"),a=H(e,"input","avgPool3dGrad");let u=i,l=a,c=!1;a.rank===4&&(c=!0,u=se(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),l=se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),B(u.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),B(l.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),as("avgPool3dGrad",s,o);const d={dy:u,input:l},h={filterSize:n,strides:r,pad:s,dimRoundingMode:o},f=ee.runKernel(T$,d,h);return c?se(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const y1e=oe({avgPool3dGrad_:g1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v1e={kernelName:_v,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:o,pad:i,dimRoundingMode:a}=n;return{x:()=>y1e(t,r,s,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(t,e,n,r,s){const o=H(t,"dy","avgPoolGrad"),i=H(e,"input","avgPoolGrad");B(i.rank===o.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${o.rank})`);let a=i,u=o,l=!1;i.rank===3&&(l=!0,a=se(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=se(o,[1,o.shape[0],o.shape[1],o.shape[2]])),B(u.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),B(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:u,input:a},d={filterSize:n,strides:r,pad:s},h=ee.runKernel(E$,c,d);return l?se(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const b1e=oe({avgPoolGrad_:x1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w1e={kernelName:Tv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:o,pad:i}=n;return{x:()=>b1e(t,r,s,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S1e={kernelName:Nv,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:o,transposeB:i}=n;return!o&&!i?{a:()=>Pt(t,s,!1,!0),b:()=>Pt(r,t,!0,!1)}:!o&&i?{a:()=>Pt(t,s,!1,!1),b:()=>Pt(t,r,!0,!1)}:o&&!i?{a:()=>Pt(s,t,!1,!0),b:()=>Pt(r,t,!1,!1)}:{a:()=>Pt(s,t,!0,!0),b:()=>Pt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k1e={kernelName:Rv,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>_I(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C1e={kernelName:vhe,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,o=r.shape,i=Array.from(o);for(let u=s.length-1;u>=0;u--)if(s[u]===o[u])i[u]=1;else if(s[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${o}].`);const a=[];for(let u=0;u<i.length;u++)i[u]>1&&a.push(u);return{x:()=>tt(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $1e={kernelName:Bp,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I1e={kernelName:Vp,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E1e={kernelName:Up,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:o}=n;return{x:()=>Hr(oa(zu(r,s),Wd(r,o)),t,Tt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T1e={kernelName:Av,inputsToSave:["x"],gradFunc:XB.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _1e={kernelName:Dv,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(u=>u.shape),{axis:s}=n,o=Ct(s,e[0].shape)[0],i=r.map(u=>u[o]);return Gs(t,i,o).map(u=>()=>u)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N1e={kernelName:Ov,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:o,strides:i,pad:a,dataFormat:u}=n;return B(wu(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>vI(r.shape,t,s,i,a,u),filter:()=>VI(r,t,s.shape,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R1e={kernelName:Pv,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:o,pad:i,dataFormat:a,dimRoundingMode:u}=n;return{dy:()=>ku(t,s,o,i,a,1,u),filter:()=>VI(t,r,s.shape,o,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t,e,n,r,s){let o=t;t.rank===4&&(o=se(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=se(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),B(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),B(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),B(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),B(o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`),B(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:o,dy:i},u={strides:r,pad:s,filterShape:n};return ee.runKernel(D$,a,u)}const D1e=oe({conv3DBackpropFilter_:A1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O1e={kernelName:Lv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:o}=n;B(wu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,a]=e;return{x:()=>D4(i.shape,t,a,s,o),filter:()=>D1e(i,t,a.shape,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P1e={kernelName:Wp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(zn(Q4(je(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1e={kernelName:jp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(J4(je(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1e={kernelName:Fv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:o,reverse:i}=n;return{x:()=>{const a=In([s],r.rank);let u=P4(t,s,o,!i);return a!=null&&(u=Et(u,a)),u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M1e={kernelName:Mv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:o,dimRoundingMode:i}=n,a=r??[1,1];B(wu(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[u,l]=e;return B(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),B(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),B(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),B(Dr(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),as("depthwiseConv2d",o,i),{x:()=>H0e(u.shape,t,l,s,o,a,i),filter:()=>j0e(u,t,l.shape,s,o,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z1e={kernelName:zv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,o={x:r,filter:s,dy:t},i={x:r,filter:s,dy:t};return{x:()=>ee.runKernel(Ik,o,n),filter:()=>ee.runKernel(Ek,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B1e={kernelName:Hp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ee.runKernel(U$,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V1e={kernelName:Kp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Q($i(zn(dn(n))),2/Math.sqrt(Math.PI));return{x:()=>Q(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U1e={kernelName:qp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W1e={kernelName:Vv,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>se(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j1e={kernelName:Xp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,$i(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G1e={kernelName:Yp,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H1e={kernelName:Zp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ht(n.shape,r.shape);return{a:()=>{const a=st(t,je(r,"float32")),u=ir(n.shape,s);return u.length>0?se(tt(a,u),n.shape):a},b:()=>{let a=Q(t,je(n,"float32"));const u=ir(r.shape,s);u.length>0&&(a=se(tt(a,u),r.shape));const l=dn(r);return zn(st(a,je(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1e={kernelName:Uv,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,o,i,a]=e,u=a??Nt(1),l=ir(o.shape,s.shape),c=[];if(o.rank===1){for(let b=0;b<s.shape.length-1;++b)c.push(s.shape[b]);c.push(1)}const d=at(s,o),h=Q(t,u),f=X4(Ne(i,Nt(r))),p=Q(Q(Q(f,f),f),Nt(-.5));return{x:()=>o.rank===1?se(Q(Q(t,Bo(se(f,[1,1,1,o.shape[0]]),c)),u),s.shape):se(Q(Q(t,f),u),s.shape),mean:()=>{let b=Q(Q(f,Nt(-1)),h);return o.rank===1&&(b=tt(b,l)),se(b,o.shape)},variance:()=>{let b=Q(Q(p,d),h);return o.rank===1&&(b=tt(b,l)),se(b,o.shape)},scale:()=>{const b=Q(d,f);let w=Q(t,b);return o.rank===1&&(w=tt(w,l)),se(w,o.shape)},offset:()=>{let b=t;return o.rank===1&&(b=tt(b,l)),se(b,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q1e={kernelName:Wv,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:o,batchDims:i}=n,a=Ct(o,r.shape)[0],u=(l,c,d)=>()=>{const h=l.shape,f=c.size,p=h.slice(0,a),m=p.length,y=h.slice(o,h.length).slice(1),g=y.length,v=aD(0,m),x=aD(m+1,m+1+g),b=lD([p,[f],y]),w=se(d,b),k=se(c,[f]),C=lD([[m],v,x]),$=Et(w,C);let E=sB($,k,l.shape[a]);const S=xl(C);return E=Et(E,S),E};if(i===1){const l=r.shape[0],c=r.split(l,0);return{x:()=>ia(c.map((f,p)=>u(f,s.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>s}}else return{x:u(r,s,t),indices:()=>s}}};function aD(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function lD(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X1e={kernelName:Qp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Tt(n),b:()=>Tt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y1e={kernelName:Jp,gradFunc:t=>({x:()=>je(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z1e={kernelName:em,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q1e={kernelName:tm,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J1e={kernelName:nm,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eve={kernelName:Gv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,o=Zs(r,0);return{x:()=>Hr(o,t,Q(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tve={kernelName:sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,Ne(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nve={kernelName:rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,je(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rve={kernelName:bhe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const i=$i(r);return at(t,Q(tt(t,s,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t,e,n,r=5,s=1,o=1,i=.5){const a={x:t,y:e,dy:n},u={depthRadius:r,bias:s,alpha:o,beta:i};return ee.runKernel(q$,a,u)}const ove=oe({localResponseNormalizationBackprop_:sve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ive={kernelName:Zv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:o,bias:i,alpha:a,beta:u}=n;return{x:()=>ove(r,s,t,o,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YB(t,e,n,r){return e.rank<n.rank&&(e=se(e,qn(e.shape,r))),t.rank<n.rank&&(t=se(t,qn(t.shape,r))),{x:()=>Q(t,je(Ci(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uD={kernelName:Qv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,o=e[0],i=e[1],a=Ct(s,o.shape),u=YB(t,i,o,a);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ave={kernelName:om,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Q(t,je(zu(n,r),"float32")),b:()=>Q(t,je(Iy(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t,e,n,r,s,o,i){const a=H(t,"dy","maxPool3dGrad"),u=H(e,"input","maxPool3dGrad"),l=H(n,"output","maxPool3dGrad");let c=a,d=u,h=l,f=!1;u.rank===4&&(f=!0,c=se(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=se(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=se(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),B(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),B(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),B(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),as("maxPool3dGrad",o,i);const p={dy:c,input:d,output:h},m={filterSize:r,strides:s,pad:o,dimRoundingMode:i},y=ee.runKernel(Y$,p,m);return f?se(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const uve=oe({maxPool3dGrad_:lve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cve={kernelName:ex,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:u}=n;return{x:()=>uve(t,r,s,o,i,a,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dve(t,e,n,r,s,o,i){const a=H(t,"dy","maxPoolGrad"),u=H(e,"input","maxPoolGrad"),l=H(n,"output","maxPoolGrad");B(u.rank===a.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${a.rank})`),B(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),B(u.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),as("maxPoolGrad",o,i);const c={dy:a,input:u,output:l},d={filterSize:r,strides:s,pad:o,dimRoundingMode:i};return ee.runKernel(X$,c,d)}const hve=oe({maxPoolGrad_:dve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fve={kernelName:Jv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:o,strides:i,pad:a}=n;return{x:()=>hve(t,r,s,o,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pve={kernelName:tx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,o=Ct(s,r.shape),a=pr(r.shape,o)[1],u=ve(a);return{x:()=>{const c=r.shape.slice();o.forEach(f=>{c[f]=1});const d=se(t,c);return st(Q(d,wl(r.shape,"float32")),u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mve={kernelName:nx,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[o,i]=e,a=Ct(s,o.shape),u=YB(t,i,o,a);return{x:()=>u.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gve={kernelName:im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Q(t,je(Wd(n,r),"float32")),b:()=>Q(t,je(Zs(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yve={kernelName:rx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,o=s.map(i=>i[0]);return{x:()=>sn(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vve={kernelName:am,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ht(n.shape,r.shape);return{a:()=>{const a=ir(n.shape,s);return a.length>0?se(tt(t,a),n.shape):t},b:()=>{const a=Q(t,zn(Rx(st(n,r)))),u=ir(r.shape,s);return u.length>0?se(tt(a,u),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xve={kernelName:lm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ht(n.shape,r.shape);return{a:()=>{const a=Q(t,je(r,"float32")),u=ir(n.shape,s);return u.length>0?se(tt(a,u),n.shape):a},b:()=>{const a=Q(t,je(n,"float32")),u=ir(r.shape,s);return u.length>0?se(tt(a,u),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bve={kernelName:sx,gradFunc:t=>({x:()=>zn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wve={kernelName:ax,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>dr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sve={kernelName:ix,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kve={kernelName:lx,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Iu(t,r).map(o=>()=>o)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cD={kernelName:ux,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,o=s.map(i=>i[0]);return{x:()=>sn(t,o,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cve={kernelName:um,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,o=n,i=r,a=ht(o.shape,i.shape);return{a:()=>{const c=je(i,"float32");let d=Q(t,Q(c,Cu(o,at(c,Nt(1)))));const h=ir(o.shape,a);return h.length>0&&(d=tt(d,h)),se(d,o.shape)},b:()=>{const c=Zs(o,0),d=Hr(c,Ii(o),Tt(o));let h=Q(t,Q(s,d));const f=ir(i.shape,a);return f.length>0&&(h=tt(h,f)),se(h,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ve={kernelName:cx,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Zs(n,0);return{x:()=>Hr(s,t,Q(t,r)),alpha:()=>{let o=Hr(s,Tt(t),Q(t,n));const i=ir(r.shape,t.shape);return i.length>0&&(o=tt(o,i)),se(o,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ive(t,e,n){const r=t.shape.slice();r[n]=1;const s=se(e,r),o=Wk(t,n,!0,!1),i=Wk(t,n,!0,!0),a=Q(o,i);return Q(s,a)}function Eve(t,e,n){const r=t.shape.length,s=r-n.length,o=In(n,r);let i=t;o!=null&&(i=Et(t,o));const a=i.shape.slice(),l=a.splice(r-n.length,n.length).reduce((h,f)=>h*f,1);a.push(l);const c=i.reshape(a);let d=Ive(c,e,s);if(d=d.reshape(i.shape),o!=null){const h=xl(o);d=Et(d,h)}return d}const Tve={kernelName:dx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let o=[];return s==null?o=r.shape.map((i,a)=>a):typeof s=="number"?o=[s]:o=s,{x:()=>Eve(r,t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ve={kernelName:Gp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ht(n.shape,r.shape);return{a:()=>{const a=st(t,je(r,"float32")),u=ir(n.shape,s);return u.length>0?se(tt(a,u),n.shape):a},b:()=>{let a=Q(t,je(n,"float32"));const u=ir(r.shape,s);u.length>0&&(a=se(tt(a,u),r.shape));const l=dn(r);return zn(st(a,je(l,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nve={kernelName:cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,zn(dn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rve={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Q(Wd(n,6),Om(n));return{x:()=>Q(t,je(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ave={kernelName:dm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,je(Om(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dve={kernelName:hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>se(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ove={kernelName:px,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ee.runKernel(rI,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pve={kernelName:fx,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ee.runKernel(nI,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lve={kernelName:mx,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Ct(r,t.shape);return{x:()=>$u(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fve={kernelName:fm,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mve={kernelName:pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>zn(st(t,Q(Cu(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zve={kernelName:gx,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>je(Tt(n),"float32"),t:()=>Q(t,je(n,t.dtype)),e:()=>Q(t,je($I(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bve={kernelName:mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Zs(n,Nt(0)),s=Nt(Ox),o=Nt(Px),i=Q(t,o),a=Q(Q(t,s),$i(je(n,"float32")));return Hr(r,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vve={kernelName:xm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,Q(n,at(Nt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uve={kernelName:vm,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wve={kernelName:gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(xI(je(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jve={kernelName:ym,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(O4(je(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gve={kernelName:yx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:o}=n,i=r.shape,[a,u]=Ax(r,s,o),l=[];for(let c=0;c<t.rank;c++)l.push([a[c],i[c]-a[c]-u[c]]);return{x:()=>TI(t,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hve={kernelName:wx,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,o=!0,i=Q(t,r);return{logits:()=>at(i,Q(tt(i,[s],o),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kve={kernelName:bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,Ud(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dD={kernelName:xx,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>yI(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hD={kernelName:bx,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>ns(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qve={kernelName:wm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,Q(Rr(je(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xve={kernelName:sI,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,Q(je(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yve={kernelName:Sm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(2);return{a:()=>Q(t,Q(s,at(n,r))),b:()=>Q(t,Q(s,at(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zve={kernelName:Em,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qve={kernelName:km,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=ht(n.shape,r.shape);return{a:()=>{let a=t;const u=ir(n.shape,s);return u.length>0&&(a=tt(a,u)),se(a,n.shape)},b:()=>{let a=t;const u=ir(r.shape,s);return u.length>0&&(a=tt(a,u)),se(zn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jve={kernelName:vx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:o}=n;Ct(o,r.shape).forEach(l=>{s[l]=1});const a=se(t,s),u=Q(a,wl(r.shape,"float32"));return{x:()=>u}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const exe={kernelName:Cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>st(t,dn(xI(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const txe={kernelName:$m,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(at(Nt(1),dn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nxe={kernelName:Im,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let i=Tt(r);if(r.rank===1)for(let a=0;a<s[0];++a)i=Ne(i,sn(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let u=0;u<s[1];++u)i=Ne(i,sn(t,[a*r.shape[0],u*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let u=0;u<s[1];++u)for(let l=0;l<s[2];++l)i=Ne(i,sn(t,[a*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let u=0;u<s[1];++u)for(let l=0;l<s[2];++l)for(let c=0;c<s[3];++c)i=Ne(i,sn(t,[a*r.shape[0],u*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rxe={kernelName:Xc,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,o=xl(s);return{x:()=>Et(t,o)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sxe={kernelName:Sx,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>ia(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oxe={kernelName:kx,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ixe(t,n)}}};function ixe(t,e){const n=bl(e,Tt(e)),r=SI(t,n);let s=zu(e,Nt(0,"int32"));const o=r.rank-s.rank;for(let a=0;a<o;++a)s=jr(s,a+1);s=oa(s,wl(r.shape,"bool"));const i=Tt(r);return Hr(s,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const axe={kernelName:Cx,gradFunc:t=>({x:()=>Tt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lxe=[XB,o1e,i1e,a1e,l1e,u1e,c1e,d1e,h1e,f1e,p1e,m1e,v1e,w1e,S1e,k1e,C1e,$1e,I1e,E1e,T1e,_1e,R1e,N1e,O1e,P1e,L1e,F1e,M1e,z1e,_ve,B1e,V1e,U1e,W1e,j1e,H1e,G1e,K1e,q1e,X1e,Y1e,Z1e,Q1e,J1e,eve,tve,nve,rve,ive,uD,uD,ave,cve,fve,pve,mve,gve,yve,vve,xve,bve,wve,Sve,kve,cD,cD,Cve,$ve,Tve,Nve,Rve,Ave,Dve,Ove,Pve,Lve,Fve,Mve,zve,Bve,Vve,Uve,Wve,jve,Gve,Hve,Kve,dD,dD,hD,hD,qve,Yve,Xve,Zve,Qve,Jve,exe,txe,nxe,rxe,sxe,oxe,axe];for(const t of lxe)She(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.abs=function(){return this.throwIfDisposed(),Vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.acos=function(){return this.throwIfDisposed(),Pfe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.acosh=function(){return this.throwIfDisposed(),Ffe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.add=function(t){return this.throwIfDisposed(),Ne(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.all=function(t,e){return this.throwIfDisposed(),N4(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.any=function(t,e){return this.throwIfDisposed(),Vk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.argMax=function(t){return this.throwIfDisposed(),Yf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.argMin=function(t){return this.throwIfDisposed(),Ufe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.asScalar=function(){return this.throwIfDisposed(),B(this.size===1,()=>"The array must have only 1 element."),se(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.asType=function(t){return this.throwIfDisposed(),je(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.as1D=function(){return this.throwIfDisposed(),se(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.as2D=function(t,e){return this.throwIfDisposed(),se(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),se(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),se(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),se(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.asin=function(){return this.throwIfDisposed(),jfe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.asinh=function(){return this.throwIfDisposed(),Hfe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.atan=function(){return this.throwIfDisposed(),qfe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.atan2=function(t){return this.throwIfDisposed(),Yfe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.atanh=function(){return this.throwIfDisposed(),Qfe(this)};ye().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),gI(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),yI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Ex(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.broadcastTo=function(t){return this.throwIfDisposed(),yf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.cast=function(t){return this.throwIfDisposed(),je(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.ceil=function(){return this.throwIfDisposed(),$pe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Ks(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof er&&(t=[t]),ns([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.conv1d=function(t,e,n,r,s,o){return this.throwIfDisposed(),R4(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),A4(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.conv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),ku(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.cos=function(){return this.throwIfDisposed(),xI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.cosh=function(){return this.throwIfDisposed(),O4(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Wk(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),P4(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Ype(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.depthwiseConv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),bI(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),Jpe(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.divNoNan=function(t){return this.throwIfDisposed(),sme(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.div=function(t){return this.throwIfDisposed(),st(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.dot=function(t){return this.throwIfDisposed(),ime(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.elu=function(){return this.throwIfDisposed(),_x(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.equal=function(t){return this.throwIfDisposed(),Ci(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.erf=function(){return this.throwIfDisposed(),L4(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),vme(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.exp=function(){return this.throwIfDisposed(),$i(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.expandDims=function(t){return this.throwIfDisposed(),jr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.expm1=function(){return this.throwIfDisposed(),Sme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.fft=function(){return this.throwIfDisposed(),tB(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.flatten=function(){return this.throwIfDisposed(),se(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.floor=function(){return this.throwIfDisposed(),Rx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.floorDiv=function(t){return this.throwIfDisposed(),_4(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.gather=function(t,e,n){return this.throwIfDisposed(),SI(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.greaterEqual=function(t){return this.throwIfDisposed(),zu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.greater=function(t){return this.throwIfDisposed(),Zs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.ifft=function(){return this.throwIfDisposed(),jk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.irfft=function(){return this.throwIfDisposed(),f0e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.isFinite=function(){return this.throwIfDisposed(),Rme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.isInf=function(){return this.throwIfDisposed(),Dme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.isNaN=function(){return this.throwIfDisposed(),Pme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.leakyRelu=function(t){return this.throwIfDisposed(),CI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.lessEqual=function(t){return this.throwIfDisposed(),Wd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.less=function(t){return this.throwIfDisposed(),Iy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Bme(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.logSigmoid=function(){return this.throwIfDisposed(),Kme(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.logSoftmax=function(t){return this.throwIfDisposed(),V4(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),U4(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.log=function(){return this.throwIfDisposed(),Ii(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.log1p=function(){return this.throwIfDisposed(),B4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.logicalAnd=function(t){return this.throwIfDisposed(),oa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.logicalNot=function(){return this.throwIfDisposed(),$I(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.logicalOr=function(t){return this.throwIfDisposed(),W4(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.logicalXor=function(t){return this.throwIfDisposed(),tge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Pt(this,t,e,n)};ye().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),II(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.max=function(t,e){return this.throwIfDisposed(),jo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.maximum=function(t){return this.throwIfDisposed(),bl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.mean=function(t,e){return this.throwIfDisposed(),Kn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.min=function(t,e){return this.throwIfDisposed(),$y(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.minimum=function(t){return this.throwIfDisposed(),Jf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),uge(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.mod=function(t){return this.throwIfDisposed(),dge(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.mul=function(t){return this.throwIfDisposed(),Q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.neg=function(){return this.throwIfDisposed(),zn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Nx(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.notEqual=function(t){return this.throwIfDisposed(),Ey(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),j4(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.onesLike=function(){return this.throwIfDisposed(),wo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.pad=function(t,e){return this.throwIfDisposed(),TI(this,t,e)};ye().prototype.pool=function(t,e,n,r,s,o){return this.throwIfDisposed(),wge(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.pow=function(t){return this.throwIfDisposed(),Cu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.prelu=function(t){return this.throwIfDisposed(),NI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.prod=function(t,e){return this.throwIfDisposed(),Cge(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.reciprocal=function(){return this.throwIfDisposed(),Kge(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.relu=function(){return this.throwIfDisposed(),Vu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.relu6=function(){return this.throwIfDisposed(),K4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.reshapeAs=function(t){return this.throwIfDisposed(),se(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.reshape=function(t){return this.throwIfDisposed(),se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),iB(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),aB(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.reverse=function(t){return this.throwIfDisposed(),$u(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.rfft=function(){return this.throwIfDisposed(),g0e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.round=function(){return this.throwIfDisposed(),q4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.rsqrt=function(){return this.throwIfDisposed(),X4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.selu=function(){return this.throwIfDisposed(),Y4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.separableConv2d=function(t,e,n,r,s,o){return this.throwIfDisposed(),Z4(this,t,e,n,r,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.sigmoid=function(){return this.throwIfDisposed(),Ud(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.sign=function(){return this.throwIfDisposed(),n0e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.sin=function(){return this.throwIfDisposed(),Q4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.sinh=function(){return this.throwIfDisposed(),J4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.slice=function(t,e){return this.throwIfDisposed(),sn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.softmax=function(t){return this.throwIfDisposed(),BI(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.softplus=function(){return this.throwIfDisposed(),Rm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),_I(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.split=function(t,e){return this.throwIfDisposed(),Gs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.sqrt=function(){return this.throwIfDisposed(),Rr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.square=function(){return this.throwIfDisposed(),dn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.squaredDifference=function(t){return this.throwIfDisposed(),v0e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.squeeze=function(t){return this.throwIfDisposed(),Dm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof er?[this,t]:[this,...t];return ia(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.step=function(t){return this.throwIfDisposed(),Om(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.stridedSlice=function(t,e,n,r,s,o,i,a){return this.throwIfDisposed(),k0e(this,t,e,n,r,s,o,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.sub=function(t){return this.throwIfDisposed(),at(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.sum=function(t,e){return this.throwIfDisposed(),tt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.tan=function(){return this.throwIfDisposed(),$0e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.tanh=function(){return this.throwIfDisposed(),Ix(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.tile=function(t){return this.throwIfDisposed(),Bo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.toBool=function(){return this.throwIfDisposed(),je(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.toFloat=function(){return this.throwIfDisposed(),je(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.toInt=function(){return this.throwIfDisposed(),je(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.topk=function(t,e){return this.throwIfDisposed(),_0e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.transpose=function(t){return this.throwIfDisposed(),Et(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.unique=function(t){return this.throwIfDisposed(),A0e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),sB(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.unstack=function(t){return this.throwIfDisposed(),Iu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.where=function(t,e){return this.throwIfDisposed(),Hr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ye().prototype.zerosLike=function(){return this.throwIfDisposed(),Tt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class li extends Error{constructor(e){super(e),Object.setPrototypeOf(this,li.prototype)}}class mo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,mo.prototype)}}class X extends Error{constructor(e){super(e),Object.setPrototypeOf(this,X.prototype)}}class mt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,mt.prototype)}}class kE extends Error{constructor(e){super(e),Object.setPrototypeOf(this,kE.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ZB{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Eu(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function ui(t,e){if(!t)throw new kE(e)}function fD(t,e){let n=0;for(const r of t)r===e&&n++;return n}function es(t){return t.length===1?t[0]:t}function Wt(t){return Array.isArray(t)?t:[t]}function Wi(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Ul(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Js={};function CE(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function Kk(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>Kk(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:Kk(r))}}}function Mm(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const o=t;let i;if(o in n)i=n[o];else if(o in Js)i=Js[o];else if(i=e[o],i==null)throw new X(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const o=t;if(o.className==null||o.config==null)throw new X(`${r}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);const i=o.className;let a,u;if(i in n?[a,u]=n[i]:i in Js?[a,u]=Js.className:i in e&&([a,u]=e[i]),a==null)throw new X(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(u!=null){const l={};for(const f of Object.keys(Js))l[f]=Js[f];for(const f of Object.keys(n))l[f]=n[f];const c=o.config;c.customObjects=l;const d=Object.assign({},Js);for(const f of Object.keys(n))Js[f]=n[f];Kk(o.config);const h=u(a,o.config,n,s);return Js=Object.assign({},d),h}else{const l=Object.assign({},Js);for(const d of Object.keys(n))Js[d]=n[d];const c=new a(o.config);return Js=Object.assign({},l),c}}}function uxe(t,e){return t<e?-1:t>e?1:0}function Vg(t,e){return-1*uxe(t,e)}function Xa(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function cxe(t){if(t==null)throw new X(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Wu(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new X(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function $E(t,e,n=0,r=1/0){return ui(n>=0),ui(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function fr(t,e){Array.isArray(t)?(B(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>fr(n,`element ${r+1} of ${e}`))):B(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${QB(t)}.`)}function QB(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>QB(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function dxe(t,e,n){let r=n!=null?n():Jr(),s;return(...i)=>{const a=n!=null?n():Jr();return a-r<e||(r=a,s=t(...i)),s}}function JB(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let hxe=0;function e5(){return hxe++}const Ug={};function Lx(t=""){return t in Ug||(Ug[t]=0),Ug[t]+=1,t+Ug[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const fxe=["channelsFirst","channelsLast"],pxe=["nearest","bilinear"],mxe=["valid","same","causal"],gxe=["max","avg"],yxe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const fc=new Map;function Un(t){Wu(fxe,"DataFormat",t)}function vxe(t){Wu(pxe,"InterpolationFormat",t)}function Qs(t){Wu(mxe,"PaddingMode",t)}function t5(t){Wu(gxe,"PoolMode",t)}const xf=[],pD="/";function nu(t,e){xf.push(t);try{const n=e();return xf.pop(),n}catch(n){throw xf.pop(),n}}function xxe(){return xf.length===0?"":xf.join(pD)+pD}function n5(t){if(!s5(t))throw new Error("Not a valid tensor name: '"+t+"'");return xxe()+t}function r5(t){if(!s5(t))throw new Error("Not a valid tensor name: '"+t+"'");fc.has(t)||fc.set(t,0);const e=fc.get(t);if(fc.set(t,fc.get(t)+1),e>0){const n=`${t}_${e}`;return fc.set(n,1),n}else return t}const bxe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function s5(t){return!!t.match(bxe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wxe(t){return t===parseInt(t.toString(),10)}function Ya(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function bd(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function nl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Ko(t,e){if(e<t)throw new X(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let bw;function nr(){return bw==null&&(bw=qhe().epsilon()),bw}function qo(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wi(t,e){return je(t,e)}function zm(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),se(t,n)}function Sxe(t,e){return le(()=>{if(t.shape.length!==2)throw new X(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=zm(t,1);return qk(n,[1,e,1])})}function kxe(t){const e=[Ya(t.shape)];return se(t,e)}function Cxe(t){if(t.rank<=1)throw new X(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],Ya(t.shape,1)];return se(t,e)}function ru(t,e,n){return le(()=>{switch(t.rank){case 1:return MI(t,e,n);case 2:return eB(t,[e,0],[n,t.shape[1]]);case 3:return zI(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return _y(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return sn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return sn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new X(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ww(t,e,n){return le(()=>{switch(t.rank){case 1:return MI(t,e,n);case 2:return eB(t,[0,e],[t.shape[0],n]);case 3:return zI(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return _y(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Wg(t,e,n,r){return le(()=>{switch(t.rank){case 1:return MI(t,e,n);case 2:switch(r){case 1:return ru(t,e,n);case 2:return ww(t,e,n);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return ru(t,e,n);case 2:return zI(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return ww(t,e,n);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return ru(t,e,n);case 2:return _y(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return _y(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return ww(t,e,n);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function IE(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),ns(t,e)}function mD(t,e){switch(t.rank){case 1:return Tpe([t,e]);case 2:return Npe([t,e],0);case 3:return Ape([t,e],0);case 4:return Ope([t,e],0);default:throw new X(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function qk(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new X(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Bo(t,e)}function Fx(t,e=0,n=1,r,s){return Wge(t,e,n,r,s)}function Si(t,e,n,r){if(t.rank<2||e.rank<2)throw new mt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],o=e.shape.slice(-2)[0];if(s!==o)throw new mt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return JA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Xk(t.rank,r,qo()):null,activation:n});{const s=t.shape.slice(),o=s.pop();t=se(t,[-1,o]);const i=e.shape.slice(),a=i.pop(),u=i.pop(),l=[...i,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=se(Et(e,c),[u,-1]);const d=[...s,...l];return se(JA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Xk(t.rank,r,qo()):null,activation:n}),d)}}function o5(t,e,n){return le(()=>(Array.isArray(e)?e=ys(e,"int32"):e=je(e,"int32"),SI(t,e,n)))}function Bm(t){return Q(t,t)}function Xk(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new X(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?se(e,[1,r[0],1,1,1]):se(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?se(e,[1,1,1,1,r[0]]):se(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?se(e,[1,r[0],1,1]):se(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?se(e,[1,1,1,r[0]]):se(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?se(e,[1,r[0],1]):se(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?se(e,[1,1,r[0]]):se(e,[1].concat(r))}else if(t<3)return e;throw new X(`Unsupported input rank by biasAdd: ${e.rank}`)}function Zo(t,e,n){return le(()=>(n==null&&(n=qo()),Un(n),Ne(t,Xk(t.rank,e,n))))}function $xe(t,e=1){if(e!==1)throw new mt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return _x(t)}function Ixe(t){return le(()=>st(t,Ne(Vr(t),1)))}function i5(t,e,n,r){return le(()=>z0e(t,e,n,r))}function Exe(t){return le(()=>{const e=Ne(.5,Q(.2,t));return Ks(e,0,1)})}function Vm(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Txe=["fanIn","fanOut","fanAvg"],_xe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nxe(t){Wu(Txe,"FanMode",t)}function Rxe(t){Wu(_xe,"Distribution",t)}class Io extends Gd{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class a5 extends Io{apply(e,n){return dr(e,n)}}a5.className="Zeros";$e(a5);class EE extends Io{apply(e,n){return wl(e,n)}}EE.className="Ones";$e(EE);class l5 extends Io{constructor(e){if(super(),typeof e!="object")throw new X(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new X(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return le(()=>Q(Nt(this.value),wl(e,n)))}getConfig(){return{value:this.value}}}l5.className="Constant";$e(l5);class u5 extends Io{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Am(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}u5.className="RandomUniform";$e(u5);class c5 extends Io{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new mt(`randomNormal does not support dType ${n}.`);return Fx(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}c5.className="RandomNormal";$e(c5);class d5 extends Io{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new mt(`truncatedNormal does not support dType ${n}.`);return rB(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}d5.className="TruncatedNormal";$e(d5);class h5 extends Io{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return le(()=>{if(e.length!==2||e[0]!==e[1])throw new X("Identity matrix initializer can only be used for 2D square matrices.");return Q(this.gain,z4(e[0]))})}getConfig(){return{gain:this.gain}}}h5.className="Identity";$e(h5);function Axe(t,e="channelsLast"){let n,r;if(Un(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=Ya(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=Ya(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=Ya(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Is extends Io{constructor(e){if(super(),e.scale<0)throw new X(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Nxe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Rxe(this.distribution),this.seed=e.seed}apply(e,n){const r=Axe(e),s=r[0],o=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,s):this.mode==="fanOut"?i/=Math.max(1,o):i/=Math.max(1,(s+o)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new mt(`${this.getClassName()} does not support dType ${n}.`);return rB(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Am(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Is.className="VarianceScaling";$e(Is);class TE extends Is{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Is.className}}TE.className="GlorotUniform";$e(TE);class _E extends Is{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Is.className}}_E.className="GlorotNormal";$e(_E);class NE extends Is{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Is.className}}NE.className="HeNormal";$e(NE);class RE extends Is{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Is.className}}RE.className="HeUniform";$e(RE);class AE extends Is{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Is.className}}AE.className="LeCunNormal";$e(AE);class DE extends Is{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Is.className}}DE.className="LeCunUniform";$e(DE);class f5 extends Io{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return le(()=>{if(e.length<2)throw new mt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ve(e.slice(0,-1)),s=e[e.length-1],o=r*s;o>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${o}) elements: Slowness may result.`);const i=[Math.max(s,r),Math.min(s,r)],a=Fx(i,0,1,n,this.seed),u=Pye.qr(a,!1);let l=u[0];const d=u[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return l=Q(l,d.sign()),r<s&&(l=l.transpose()),Q(Nt(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}f5.className="Orthogonal";$e(f5);const gD={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function yD(t,e={}){return Mm(t,uo.getMap().classNameMap,e,"initializer")}function $n(t){return CE(t)}function vn(t){if(typeof t=="string"){const e=t in gD?gD[t]:t;if(e==="GlorotNormal")return new _E;if(e==="GlorotUniform")return new TE;if(e==="HeNormal")return new NE;if(e==="HeUniform")return new RE;if(e==="LeCunNormal")return new AE;if(e==="LeCunUniform")return new DE;{const n={};return n.className=e,n.config={},yD(n)}}else return t instanceof Io?t:yD(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yk(t){return Array.isArray(t)&&Array.isArray(t[0])}function Ny(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function ut(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new X(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Rt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new X(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ry(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const vD="Variable";class Dxe{constructor(e,n="float32",r=vD,s=!0,o=null){this.dtype=n??"float32",this.shape=e.shape,this.id=e5(),r=r??vD,this.originalName=n5(r),this.name=r5(this.originalName),this.trainable_=s,this.constraint=o,this.val=P0e(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Oxe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Oxe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function Zk(t){return t.map(e=>e.read())}function OE(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Ei{constructor(e,n,r,s,o,i,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=o,this.outputTensorIndex=a,this.id=e5(),i!=null&&(this.originalName=n5(i),this.name=r5(this.originalName)),this.rank=n.length}}let Pxe=0;class Mx{constructor(e,n){this.callArgs=n,this.id=Pxe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Lxe=0;class $t extends Gd{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Lxe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Wi(r)+"_"+Lx(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let o=null;e.batchSize!=null&&(o=e.batchSize),r=[o].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new mo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new X(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return es(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return es(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new li(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new li(`Layer ${this.name} is not connected, no input to return.`);return es(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new li(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new li(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return es(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Wt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Wt(this.inputSpec);if(n.length!==r.length)throw new X(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const o=n[s],i=r[s];if(i==null)continue;const a=o.rank;if(i.ndim!=null&&a!==i.ndim)throw new X(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new X(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new X(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&o.dtype!==i.dtype)throw new X(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${o.dtype}.`);if(i.axes){const u=o.shape;for(const l in i.axes){const c=Number(l),d=i.axes[l],h=c>=0?u[c]:u[u.length+c];if(d!=null&&[d,null].indexOf(h)===-1)throw new X(`Input ${s} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${u}.`)}}if(i.shape!=null)for(let u=0;u<i.shape.length;++u){const l=i.shape[u],c=o.shape[u];if(l!=null&&c!=null&&l!==c)throw new X(`Input ${s} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${o.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Wt(e),s=zxe(e),o=Bxe(e);if(s===o)throw new X("Arguments to apply() must be all SymbolicTensors or all Tensors");return nu(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of Wt(e))i.push(a.shape);this.build(es(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(e),o){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=Wt(i),u=[];for(let l of a)r.indexOf(l)!==-1&&(l=l.clone()),u.push(l);if(i=es(u),this.activityRegularizer!=null)throw new mt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=Fxe(e),a=this.computeOutputShape(i);let u;const l=Mxe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?u=a.map((c,d)=>new Ei(l,c,this,Wt(e),n,this.name,d)):u=new Ei(l,a,this,Wt(e),n,this.name),this.addInboundNode(e,u,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new mt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return u}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new li(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new li(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new mo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Ry(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Zk(e?this.trainableWeights:this.weights)}setWeights(e){le(()=>{const n=this.weights;if(n.length!==e.length)throw new X(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=Zk(n);for(let o=0;o<s.length;++o){const i=s[o],a=n[o],u=e[o];if(!Ft(i.shape,u.shape))throw new X(`Layer weight shape ${i.shape} not compatible with provided weight shape ${u.shape}`);r.push([a,u])}OE(r)})}addWeight(e,n,r,s,o,i,a,u){if(this._addedWeightNames.indexOf(e)!==-1)throw new X(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=u!=null?u():vn("zeros"));const l=s.apply(n,r),c=new Dxe(l,r,e,i,a);return l.dispose(),o!=null&&this.addLoss(()=>o.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Wt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),o=Wt(n),i=Wt(s);if(o.length!==i.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let a=0;a<o.length;a++)o[a].kerasMask=i[a]}addInboundNode(e,n,r,s,o,i,a=null){const u=Wt(e);n=Wt(n),r=Wt(r),s=Wt(s),o=Ny(o),i=Ny(i);const l=[],c=[],d=[];for(const h of u)l.push(h.sourceLayer),c.push(h.nodeIndex),d.push(h.tensorIndex);new Mx({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:d,inputTensors:u,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:o,outputShapes:i},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Fxe(t){t=Wt(t);const e=[];for(const n of t)e.push(n.shape);return es(e)}function Mxe(t){return"float32"}function p5(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let o=0;o<r.inboundLayers.length;o++){const i=r.inputTensors[o],a=r.inboundLayers[o],u=r.nodeIndices[o],l=p5(i,a,u);for(const c of l)s.indexOf(c)===-1&&s.push(c)}return s}}}function zxe(t){let e=!0;for(const n of Wt(t))if(!(n instanceof Ei)){e=!1;break}return e}function Bxe(t){let e=!0;for(const n of Wt(t))if(n instanceof Ei){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Um extends $t{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Lx("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new X("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new X("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new X("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new Ei(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new Mx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new X(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Um.className="InputLayer";$e(Um);function Vxe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new X("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Um({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Uxe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return je(e,t.dtype)}catch{throw new X(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Fa{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Fa)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Uxe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new X(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Ei){if(this.id2Value[e.id]==null)throw new X(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new X(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Ei){if(this.id2Value[e.id]==null)throw new X(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new X(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&xt(this.id2Mask)}}const Ay=new ZB,Dy=new ZB;function Wxe(t){Ay!=null&&Ay.setMaxEntries(t),Dy!=null&&Dy.setMaxEntries(t)}function Kh(t,e,n,r){const s=n==null?!1:n.training,o=Array.isArray(t),i=o?t:[t],a=i.map(p=>p.name),u=[],l=e.names();for(const p of a)l.indexOf(p)!==-1?u.push(e.getValue(p)):u.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=a.join(",")+"|"+e.names().sort().join(",");let d=Ay.get(c),h;if(d==null){const p=jxe(i,e);d=p.sorted,h=p.recipientCounts,Ay.put(c,d),Dy.put(c,h)}h={},s||Object.assign(h,Dy.get(c));const f=new Fa(e);for(let p=0;p<d.length;++p){if(r!=null){const E=Fk().numTensors;E>r.maxNumTensors&&(r.maxNumTensors=E),E<r.minNumTensors&&(r.minNumTensors=E)}const m=d[p],y=m.sourceLayer;if(y instanceof Um)continue;const g=[],v=[],x=[];let b=!1;for(const E of m.inputs){const S=f.getValue(E),R=f.getMask(E);g.push(S),v.push(R),R!=null&&(b=!0),s||(h[E.name]--,h[E.name]===0&&!e.hasKey(E)&&a.indexOf(E.name)===-1&&!S.isDisposed&&E.sourceLayer.stateful!==!0&&x.push(S))}b&&(n=n||{},n.mask=v[0]);const w=Wt(y.apply(g,n));let k=null;y.supportsMasking&&(k=y.computeMask(g,v));const C=Hxe(m),$=Array.isArray(C)?C:[C];for(let E=0;E<$.length;++E){f.hasKey($[E])||f.add($[E],w[E],Array.isArray(k)?k[0]:k);const S=a.indexOf($[E].name);S!==-1&&(u[S]=w[E])}s||xt(x)}return f.disposeMasks(),o?u:u[0]}function jxe(t,e){B(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=xD(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const o of t){const{sorted:i,recipientMap:a}=xD(o,e);for(const u of i)s.has(u.name)||(n.push(u),s.add(u.name));for(const u in a)r[u]==null&&(r[u]=new Set),a[u].forEach(l=>r[u].add(l))}}return{sorted:n,recipientCounts:Gxe(r)}}function Gxe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function xD(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const o=[],i=[];for(o.push(t);o.length>0;){const a=o[o.length-1];if(n.has(a.name)){o.pop();continue}const u=i[i.length-1]===o.length-1;if(a.inputs.length===0||u)o.pop(),r.push(a),n.add(a.name),u&&i.pop();else{i.push(o.length-1);for(const l of a.inputs)s[l.name]==null&&(s[l.name]=new Set),s[l.name].add(a.name),!n.has(l.name)&&o.push(l)}}return{sorted:r,recipientMap:s}}function Hxe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kxe=de();Kxe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Wxe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PE(t,e){return le(()=>Rr(tt(Q(t,t),e,!0)))}class Wm extends Gd{getConfig(){return{}}}class m5 extends Wm{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=PE(e,this.axis),r=Ks(n,0,this.maxValue);return Q(e,st(r,Ne(nr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}m5.className="MaxNorm";$e(m5);class g5 extends Wm{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>st(e,Ne(nr(),PE(e,this.axis))))}getConfig(){return{axis:this.axis}}}g5.className="UnitNorm";$e(g5);class y5 extends Wm{apply(e){return Vu(e)}}y5.className="NonNeg";$e(y5);class v5 extends Wm{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return le(()=>{const n=PE(e,this.axis),r=Ne(Q(this.rate,Ks(n,this.minValue,this.maxValue)),Q(1-this.rate,n));return Q(e,st(r,Ne(nr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}v5.className="MinMaxNorm";$e(v5);const bD={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function sr(t){return CE(t)}function wD(t,e={}){return Mm(t,uo.getMap().classNameMap,e,"constraint")}function or(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in bD?bD[t]:t,config:{}};return wD(n)}else return t instanceof Wm?t:wD(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function _l(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const o=t[s];if(typeof o!="number"){const i=o;e.push(i.data()),n.push(s),r.push(i)}}if(e.length>0){const s=await Promise.all(e);for(let o=0;o<s.length;++o)t[n[o]]=s[o][0];xt(r)}}function x5(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var SD;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(SD||(SD={}));const qxe=125;class tp{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Xxe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Yxe extends tp{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const o=n[s];if(typeof o=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+o*r;else{let i;s in this.totals?i=this.totals[s]:this.totals[s]=0;const a=le(()=>Ne(this.totals[s],Q(o,r)));this.totals[s]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:le(()=>{const s=Q(st(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),xi(n[r])}))}}class Zxe extends tp{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const o in this.history){const i=this.history[o];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const u=i[a];e.push(u.data()),n.push(o),r.push(a)}}const s=await Promise.all(e);for(let o=0;o<s.length;++o)this.history[n[o]][r[o]].dispose(),this.history[n[o]][r[o]]=s[o][0]}}class Qxe extends tp{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||CB,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=qxe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");kk(this.yieldEvery)&&(this.maybeWait=dxe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await _l(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await _l(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await _l(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await _l(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await _l(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):kk(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await _l(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await _l(e),await this.trainEnd(e))}}function b5(t,e){return t==null&&(t={}),t instanceof tp?[t]:Array.isArray(t)&&t[0]instanceof tp?t:Wt(t).map(r=>new Qxe(r,e))}class no{constructor(){}static registerCallbackConstructor(e,n){B(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),no.checkForDuplicate(n),no.constructors[e]==null&&(no.constructors[e]=[]),no.constructors[e].push(n)}static checkForDuplicate(e){for(const n in no.constructors)no.constructors[+n].forEach(s=>{if(s===e)throw new X("Duplicate callback constructor.")})}static clear(){no.constructors={}}static createCallbacks(e){const n=[];for(const r in no.constructors){const s=+r;e>=s&&n.push(...no.constructors[s])}return n.map(r=>new r)}}no.constructors={};function w5(t,e,n,r,s,o,i,a,u){const l=new Zxe,c=[new Yxe,...no.createCallbacks(e)];t!=null&&c.push(...t),c.push(l);const d=new Xxe(c);return d.setParams({epochs:n,initialEpoch:r,samples:s,steps:o,batchSize:i,verbose:e,doValidation:a,metrics:u}),{callbackList:d,history:l}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ki(t,e={},n=!1){return Mm(t,uo.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Oy(t,e){return le(()=>{t.dtype!=="float32"&&(t=je(t,"float32"));const n=tt(Bm(t),e,!0),r=Tx(n.shape,nr()),s=Rr(bl(n,r));return st(t,s)})}function zx(t,e){return le(()=>Kn(Bm(at(e,t)),-1))}function LE(t,e){return le(()=>Kn(Vr(at(e,t)),-1))}function FE(t,e){return le(()=>{const n=at(t,e),r=Ks(Vr(t),nr(),Number.MAX_VALUE),s=Vr(st(n,r));return Q(100,Kn(s,-1))})}function Jxe(t,e){return le(()=>{const n=Ks(e,nr(),Number.MAX_VALUE),r=Ii(Ne(1,n)),s=Ks(t,nr(),Number.MAX_VALUE),o=Ii(Ne(1,s));return Kn(Bm(at(r,o)),-1)})}function ebe(t,e){return le(()=>{const n=bl(0,at(1,Q(t,e)));return Kn(Bm(n),-1)})}function tbe(t,e){return le(()=>{const n=bl(0,at(1,Q(t,e)));return Kn(n,-1)})}function nbe(t,e){return le(()=>{const n=tt(Q(t,e),-1),r=jo(Q(at(1,t),e),-1);return bl(0,Ne(1,at(r,n)))})}function rbe(t,e){return le(()=>{const n=Math.log(2),r=at(e,t),s=at(Ne(r,Rm(Q(-2,r))),n);return Kn(s,-1)})}function np(t,e,n=!1){return le(()=>{if(n)e=BI(e);else{const r=tt(e,e.shape.length-1,!0);e=st(e,r)}return e=Ks(e,nr(),1-nr()),zn(tt(Q(je(t,"float32"),Ii(e)),e.shape.length-1))})}function Py(t,e,n=!1){return le(()=>{const r=je(Rx(kxe(t)),"int32");e=Ks(e,nr(),1-nr());const s=e.shape,o=se(j4(r,s[s.length-1]),s);return np(o,e,n)})}function sbe(t,e){if(!Ft(t.shape,e.shape))throw new X(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return le(()=>{const n=Vu(e),r=zn(Vr(e));return Ne(at(n,Q(e,t)),B4($i(r)))})}function Bx(t,e){return le(()=>{let n;return n=Ks(e,nr(),1-nr()),n=Ii(st(n,at(1,n))),Kn(sbe(t,n),-1)})}function obe(t,e){return le(()=>{const n=Ks(t,nr(),1),r=Ks(e,nr(),1);return tt(Q(t,Ii(st(n,r))),-1)})}function ibe(t,e){return le(()=>{const n=Ii(Ne(nr(),e));return Kn(at(e,Q(t,n)),-1)})}function S5(t,e){return le(()=>{const n=Oy(t,-1),r=Oy(e,-1),s=Q(n,r);return zn(tt(s,-1))})}const Ly={meanSquaredError:zx,meanAbsoluteError:LE,meanAbsolutePercentageError:FE,meanSquaredLogarithmicError:Jxe,squaredHinge:ebe,hinge:tbe,categoricalHinge:nbe,logcosh:rbe,categoricalCrossentropy:np,sparseCategoricalCrossentropy:Py,binaryCrossentropy:Bx,kullbackLeiblerDivergence:obe,poisson:ibe,cosineProximity:S5};function Sw(t){if(typeof t=="string"){if(t in Ly)return Ly[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new X(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function k5(t,e){return le(()=>{const n=Q(.5,wo(e)),r=wi(Zs(e,n),t.dtype);return Kn(Ci(t,r),-1)})}function C5(t,e){return le(()=>wi(Ci(Yf(t,-1),Yf(e,-1)),"float32"))}function abe(t,e){return le(()=>je(tt(oa(Ci(t,1),Ci(e,1))),"float32"))}function lbe(t,e){return le(()=>je(tt(oa(Ci(t,0),Ci(e,1))),"float32"))}function ube(t,e){return le(()=>{const n=abe(t,e),r=lbe(t,e),s=Ne(n,r);return je(Hr(Zs(s,0),st(n,s),0),"float32")})}function cbe(t,e){return Bx(t,e)}function dbe(t,e){return t.rank===e.rank&&(t=Dm(t,[t.rank-1])),e=Yf(e,-1),e.dtype!==t.dtype&&(e=je(e,t.dtype)),je(Ci(t,e),"float32")}const hbe=zx,fbe=zx,pbe=LE,mbe=LE,gbe=FE,ybe=FE,$5=np,vbe=S5,I5=Py,Fy={binaryAccuracy:k5,categoricalAccuracy:C5,precision:ube,categoricalCrossentropy:$5,sparseCategoricalCrossentropy:I5,mse:hbe,MSE:fbe,mae:pbe,MAE:mbe,mape:gbe,MAPE:ybe,cosine:vbe};function xbe(t){if(typeof t=="string"&&t in Fy)return Fy[t];if(typeof t!="string"&&t!=null)return t;throw new X(`Unknown metric ${t}`)}function jg(t){if(ui(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Ly))if(Ly[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Fy))if(Fy[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bbe(t){const e={Adagrad:()=>Fl.adagrad(.01),Adadelta:()=>Fl.adadelta(1,.95,nr()),Adam:()=>Fl.adam(.001,.9,.999,nr()),Adamax:()=>Fl.adamax(.002,.9,.999,nr(),0),RMSProp:()=>Fl.rmsprop(.001,.9,0,nr()),SGD:()=>Fl.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new X(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kD=1*1024*1024;function CD(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!Qk(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>kD&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${kD}.`)}}function Qk(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!Qk(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!Qk(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wbe(t,e,n,r=console.log){const s=kbe(t),o=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let i;if(!s){o.push("Receives inputs"),i=[];for(const c in t.nodesByDepth)i.push(...t.nodesByDepth[c])}r("_".repeat(e)),My(o,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)s?Cbe(a[c],n,r):$be(a[c],n,i,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const u=Sbe(t),l=Ry(t.nonTrainableWeights);r(`Total params: ${u+l}`),r(`Trainable params: ${u}`),r(`Non-trainable params: ${l}`),r("_".repeat(e))}function Sbe(t){let e;return t.collectedTrainableWeights!=null?e=Ry(t.collectedTrainableWeights):e=Ry(t.trainableWeights),e}function kbe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let o=!1;for(const i of s.inboundNodes)if(r.indexOf(i)!==-1)if(o){e=!1;break}else o=!0;if(!e)break}return e}function My(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function Cbe(t,e,n){let r,s;try{s=t.inboundNodes.map(u=>JSON.stringify(u.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const o=t.name,i=t.getClassName(),a=[`${o} (${i})`,s,r,t.countParams().toString()];My(a,e,n)}function $be(t,e,n,r){let s,o;try{o=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{o="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];i.push(`${f}[${p}][${m}]`)}const a=t.name,u=t.getClassName(),l=i.length===0?"":i[0],c=[`${a} (${u})`,o,s,t.countParams().toString(),l];My(c,e,r);for(let d=1;d<i.length;++d)My(["","","","",i[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E5(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function zy(t,e){if(t===null)return null;if(typeof t=="string")return Ul(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const o=t[s];E5(e,s,o)?n.push(o):n.push(zy(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const o=Ul(r);n[o]=zy(s,o)}}return n}}function Jk(t,e){if(t==null)return null;if(typeof t=="string")return Wi(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const o=t[s];E5(e,s,o)?n.push(o):n.push(Jk(o,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],o=Wi(r);(r==="name"||r==="className")&&typeof s=="string"?n[o]=s:n[o]=Jk(s,r)}return n}}/** @license See the LICENSE file. */const T5="4.21.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ibe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ao extends $t{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=Lx(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Xa(this.inputs).length!==this.inputs.length)throw new X(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);Xa(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;ui(b===0,"input layer has >1 nodes"),ui(w===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const x=this.inputLayers[v];if(!(x instanceof Um))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},s={},o={},i={},a=[],u=(v,x,b,w,k,C)=>{(w==null||k==null||C==null)&&(w=v.sourceLayer,k=v.nodeIndex,C=v.tensorIndex);const $=w.inboundNodes[k];if(b.indexOf($)!==-1)throw new mo(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(x.indexOf($)!==-1)return;this.containerNodes.add(Ao.nodeKey(w,k)),w.id in i||(i[w.id]=Object.keys(i).length),b.indexOf($)===-1&&b.push($);const E=$.inboundLayers.length;for(let S=0;S<E;S++){const R=$.inputTensors[S],T=$.inboundLayers[S],P=$.nodeIndices[S],I=$.tensorIndices[S];u(R,x,b,T,P,I)}for(x.push($);b.indexOf($)>=0;)b.splice(b.indexOf($),1);a.push($)},l=[],c=[];for(const v of this.outputs)u(v,l,c);const d=a.slice().reverse();for(const v of d){r[v.id]=v,v.id in n||(n[v.id]=0);let x=n[v.id];const b=s[v.outboundLayer.id]==null?0:s[v.outboundLayer.id];x=Math.max(x,b),s[v.outboundLayer.id]=x,o[v.outboundLayer.id]=v.outboundLayer,n[v.id]=x;for(let w=0;w<v.inboundLayers.length;w++){const k=v.inboundLayers[w],C=v.nodeIndices[w],$=k.inboundNodes[C],E=n[$.id]==null?0:n[$.id];n[$.id]=Math.max(x+1,E),r[$.id]=$}}const h={};for(const v in n){const x=n[v];x in h||(h[x]=[]),h[x].push(r[v])}const f={};for(const v in s){const x=s[v];x in f||(f[x]=[]),f[x].push(o[v])}let p=Object.keys(f).map(v=>parseInt(v,10)).sort(Vg);this.layers=[];for(const v of p){const x=f[v];x.sort((b,w)=>{const k=i[b.id],C=i[w.id];return k<C?-1:k>C?1:0});for(const b of x)b instanceof Ao&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=f,p=Object.keys(h).map(v=>parseInt(v,10)).sort(Vg);const m=this.inputs.slice(),y=[];for(const v of p)for(const x of h[v]){const b=x.outboundLayer;if(b!=null){for(const w of x.inputTensors)if(m.indexOf(w)===-1)throw new mo(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${b.name}". The following previous layers were accessed without issue: ${y}`);for(const w of x.outputTensors)m.push(w);y.push(b.name)}}this.nodesByDepth=h;const g=this.layers.map(v=>v.name);for(const v of g){const x=g.filter(b=>b===v).length;if(x!==1)throw new mo(`The name "${v}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Mx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new X("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const o=Ibe(e);o&&this.parseWeights(e);for(const a of this.layers)for(const[u,l]of a.weights.entries()){const c=o?`${l.name.split("/").slice(0,-1).join("/")+"/"}${u}`:l.originalName;if(r[c]!=null)throw new X(`Duplicate weight name: ${c}`);r[c]=l,s++}const i=[];for(const a in e){let u=a;if(r[a]==null){const l=a.split("/");u=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(r[u]!=null)i.push([r[u],e[a]]);else if(n)throw new X(`Provided weight data has no target variable: ${a}`);delete r[u]}if(n){const a=[];for(const u in r)a.push(u);if(a.length>0)throw new X(`${a.length} of ${s} weights are not set: ${a}`)}OE(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],o=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!s.includes(i)).join("/");o!==n&&(e[o]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${T5}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=Jk(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return le(()=>{e=Wt(e);const r=new Fa;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return Kh(this.outputs,r,n)})}computeMask(e,n){return le(()=>{e=Wt(e);let r;return n==null?r=Eu(null,e.length):r=Wt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Ny(e);if(n.length!==this.inputLayers.length)throw new X(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const u=this.inputLayers[a],l=n[a],c=u.name+"_0_0";r[c]=l}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Vg);if(s.length>1)for(const a of s){const u=this.nodesByDepth[a];for(const l of u){const c=l.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<l.inboundLayers.length;m++){const y=l.inboundLayers[m],g=l.nodeIndices[m],v=l.tensorIndices[m],x=`${y.name}_${g}_${v}`,b=r[x];d.push(b)}const h=c.computeOutputShape(es(d)),f=Ny(h),p=c.inboundNodes.indexOf(l);for(let m=0;m<f.length;m++){const y=`${c.name}_${p}_${m}`;r[y]=f[m]}}}const o=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const u=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${u.name}_${l}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const u=i[a];ui(u in r),o.push(r[u])}return es(o)}runInternalGraph(e,n){n==null&&(n=Eu(null,e.length));const r={};for(let u=0;u<this.inputs.length;++u){const l=this.inputs[u],c=e[u],d=n[u];r[l.id]=[c,d]}const s=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(Vg);for(const u of s){const l=this.nodesByDepth[u];for(const c of l){const d=c.outboundLayer,h=c.inputTensors,f=c.outputTensors,p=new Array;for(const m of h)m.id in r&&p.push(r[m.id]);if(p.length===h.length){let m={},y,g,v,x;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[b,w]=p[0];m.mask==null&&(m.mask=w),v=Wt(d.call(b,m)),x=Wt(d.computeMask(b,w)),y=[b],g=[w]}else y=p.map(b=>b[0]),g=p.map(b=>b[1]),m.mask==null&&(m.mask=g),v=Wt(d.call(y,m)),x=Wt(d.computeMask(y,g));if(d.activityRegularizer)throw new mt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<f.length;++b){const w=f[b],k=v[b],C=x[b];r[w.id]=[k,C]}}}}const o=[],i=[],a=[];for(const u of this.outputs){ui(u.id in r,`Could not compute output ${u.name} : ${u.id}`);const[l,c]=r[u.id];a.push(l.shape),o.push(l),i.push(c)}return[o,i,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof Ao?1:0;for(let o=0;o<s.inboundNodes.length;o++){const i=Ao.nodeKey(s,o);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new X("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new X(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new X(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return le(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=Ao.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const a=i.getClassName(),u=i.getConfig(),l=[];for(let d=0;d<i.inboundNodes.length;d++){const h=i.inboundNodes[d],f=Ao.nodeKey(i,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let y=0;y<h.inboundLayers.length;y++){const g=h.inboundLayers[y],v=h.nodeIndices[y],x=h.tensorIndices[y],b=Ao.nodeKey(g,v);let w=n[b];w==null&&(w=0),m.push([g.name,w,x,p])}l.push(m)}}}const c={};c.name=i.name,c.className=a,c.config=u,c.inboundNodes=l,r.push(c)}e.layers=r;const s=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],u=this.inputLayersNodeIndices[i],l=Ao.nodeKey(a,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];s.push([a.name,c,d])}e.inputLayers=s;const o=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],u=this.outputLayersNodeIndices[i],l=Ao.nodeKey(a,u);if(!this.containerNodes.has(l))continue;let c=n[l];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];o.push([a.name,c,d])}return e.outputLayers=o,e}static fromConfig(e,n,r={},s=!1){const o={},i={};function a(y,g){y.name in i?i[y.name].push(g):i[y.name]=[g]}function u(y,g){const v=[];let x;for(const b of g){const w=b[0],k=b[1],C=b[2];if(x=b[3]==null?{}:b[3],!(w in o)){a(y,g);return}const $=o[w];if($.inboundNodes.length<=k){a(y,g);return}const E=$.inboundNodes[k];v.push(E.outputTensors[C])}v.length>0&&y.apply(es(v),x)}function l(y){const g=y.name,v=ki(y,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(s),o[g]=v,y.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new X(`Corrupted configuration, expected array for nodeData: ${b}`);a(v,b)})}const c=n.name,d=n.layers;for(const y of d)l(y);for(;!cxe(i);)for(const y of d){const g=o[y.name];if(g.name in i){const v=i[g.name];delete i[g.name];for(const x of v)u(g,x)}}const h=[],f=[],p=n.inputLayers;for(const y of p){const g=y[0],v=y[1],x=y[2];ui(g in o);const w=o[g].inboundNodes[v].outputTensors;h.push(w[x])}const m=n.outputLayers;for(const y of m){const g=y[0],v=y[1],x=y[2];ui(g in o);const w=o[g].inboundNodes[v].outputTensors;f.push(w[x])}return new e({inputs:h,outputs:f,name:c})}get stateful(){if(this._stateful)throw new X("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){le(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ebe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(o=>{o in t?s.push(t[o]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function _5(t,e){return Ebe(t,e,"classWeight")}async function N5(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const s=le(()=>{if(t.shape.length===1)return tu(t);if(t.shape.length===2){if(t.shape[1]>1)return Yf(t,1);if(t.shape[1]===1)return se(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(await s.data());xt(s);const i=[];return o.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),ys(i,"float32")}else return null}function Tbe(t,e){return Q(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _be=32;function R5(t,e){let n,r;const s=e;n=s.xs,r=s.ys,B(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const o=$D("input",t.inputNames,n),i=$D("output",t.outputNames,r),a=o[0].shape[0];B(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),B(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let u=0;u<o.length;u++)B(o[u].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[u]} has ${o[u].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let u=0;u<i.length;u++)B(i[u].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[u]} has ${i[u].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:o,ys:i}}function $D(t,e,n){if(n instanceof er)return[n];if(Array.isArray(n))return B(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new X(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function Nbe(t){if(t.length===3)throw new mt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Rbe(t,e,n){const r=n.batchesPerEpoch!=null;if(B(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),B(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),B(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),B(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),B(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let o,i;if(s)if(ID(n.validationData))B(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=Nbe(n.validationData);o=y.xs,i=y.ys}const a=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let l;s?l=u.slice().concat(u.map(y=>"val_"+y)):l=u.slice();const c=b5(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=w5(c,d,n.epochs,null,null,Abe(e,n),null,s,l);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const y={};await h.onEpochBegin(p);let g=0,v=0;for(r||(m=await e.iterator());!r||g<n.batchesPerEpoch;){const x=await m.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:b,ys:w}=R5(t,x.value),k={};k.batch=v,k.size=b[0].shape[0],await h.onBatchBegin(v,k);const C=[];if(n.classWeight!=null){const S=_5(n.classWeight,t.outputNames);for(let R=0;R<S.length;++R)C.push(await N5(w[R],null,S[R]))}const $=b.concat(w).concat(C),E=a($);xt($);for(let S=0;S<u.length;++S){const R=u[S],T=E[S];k[R]=T,xi(T)}await h.onBatchEnd(v,k),x5(k),v++,g++}if(r?g>=n.batchesPerEpoch:x.done){if(s){let b;ID(n.validationData)?b=Wt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=Wt(t.evaluate(o,i,{batchSize:n.validationBatchSize==null?_be:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)y[`val_${t.metricsNames[w]}`]=b[w]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,y),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Abe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function ID(t){return typeof t.iterator=="function"}function Dbe(t){return typeof t.next=="function"}async function Obe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let o=[];if(n.verbose>0)throw new mt("Verbose mode is not implemented yet.");B(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=Dbe(e)?e:await e.iterator();let a=0,u=0;for(;!r||u<n.batches;){const l=await i.next();if(o=le(()=>{if(l.value){const{xs:c,ys:d}=R5(t,l.value),h=c.concat(d),f=le(()=>s(h));if(xt(h),u===0)for(let m=0;m<f.length;++m)o.push(Nt(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const y=f[m],g=o[m];o[m]=le(()=>Ne(o[m],Q(p,y))),u>0&&xt(g)}xt(f),a+=p,++u}return o}),l.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let l=0;l<o.length;++l){const c=o[l];o[l]=st(o[l],a),xt(c)}return es(o)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kw(t){B(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function _h(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>ru(r,e,n-e)):ru(t,e,n-e)}function eC(t,e){return le(()=>t==null?null:Array.isArray(t)?t.map(n=>eC(n,e)):o5(t,e.dtype==="int32"?e:je(e,"int32")))}function Cw(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function A5(t){const e=[];t instanceof er&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(zm(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function No(t,e){if(t==null)return;const n=[];if(e instanceof er)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const o=e[s];n.push(o.id)}const r=[];if(t instanceof er)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const o=t[s];n.indexOf(o.id)===-1&&r.push(o)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pbe(t){return t instanceof er}function tC(t){return Array.isArray(t)}function ED(t){return!Pbe(t)&&!tC(t)}function TD(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(tC(t)&&t.length>0)i=!0;else if(ED(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new X(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let o;if(ED(t)){t=t,o=[];for(const i of e){if(t[i]==null)throw new X(`No data provided for "${i}". Need data for each key in: ${e}`);o.push(t[i])}}else if(tC(t)){if(t=t,t.length!==e.length)throw new X(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);o=t}else{if(t=t,e.length>1)throw new X(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);o=[t]}if(o=A5(o),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new X(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let u=0;u<n[i].length;++u){if(u===0&&!r)continue;const l=a.shape[u],c=n[i][u];if(c!=null&&c>=0&&l!==c)throw new X(`${s} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function Lbe(t,e,n){const r=Xa(t.map(o=>o.shape[0]));r.sort();const s=Xa(e.map(o=>o.shape[0]));if(s.sort(),r.length>1)throw new X(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(o=>o.shape))}`);if(s.length>1)throw new X(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(o=>o.shape))}`);if(r.length>0&&s.length>0&&!Ft(r,s))throw new X(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function Fbe(t,e,n){const r=[zx,Bx,np];for(let s=0;s<t.length;++s){const o=t[s],i=e[s],a=n[s];if(i!=null){if(i===np&&o.shape[o.shape.length-1]===1)throw new X(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const u=o.shape.slice(1),l=a.slice(1);for(let c=0;c<u.length;++c){const d=u[c],h=l[c];if(h!=null&&d!==h)throw new X(`A target Tensor with shape ${o.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function _D(t,e,n,r=!0,s=""){let o;if(Array.isArray(t)){if(t.length!==e.length)throw new X(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(e.length>1)throw new X(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);o=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=o[i];if(a.shape.length!==n[i].length)throw new X(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let u=0;u<n[i].length;++u){if(u===0&&!r)continue;const l=a.shape[u],c=n[i][u];if(c!=null&&c!==l)throw new X(`Error when checking ${s}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Mbe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let o=n.hasOwnProperty(s)?n[s]:[];Array.isArray(o)||(o=[o]),r.push(o)}return r}}const zbe="layers-model";class su extends Ao{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new X("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");wbe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=bbe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Sl))throw new X("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new X(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(Sw(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new X(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>Sw(a))}else{const i=Sw(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],u=this.outputNames[i];this.feedOutputNames.push(u),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nu("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const s=Mbe(e.metrics,this.outputNames),o=(i,a,u)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([u,i])};nu("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=s[i];(l=>{const c="";let d,h,f;for(const p of l){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const y=this.internalOutputShapes[i];y[y.length-1]===1||this.lossFunctions[i]===Bx?["accuracy","acc"].indexOf(p)!==-1?h=k5:["crossentropy","ce"].indexOf(p)!==-1&&(h=cbe):this.lossFunctions[i]===Py?["accuracy","acc"].indexOf(p)!==-1?h=dbe:["crossentropy","ce"].indexOf(p)!==-1&&(h=I5):["accuracy","acc"].indexOf(p)!==-1?h=C5:["crossentropy","ce"].indexOf(p)!==-1&&(h=$5);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),f=h,d=c+g}else f=xbe(p),d=c+jg(p);let m;nu(d,()=>{m=f}),o(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;kw(s);const o=!0,i=this.standardizeUserDataXY(e,n,o,s);try{const a=i[0].concat(i[1]);this.makeTestFunction();const u=this.testFunction,l=this.testLoop(u,a,s,r.verbose,r.steps);return es(l)}finally{No(i[0],e),No(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Obe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let o;if(r!=null){if(o=null,n!=null)throw new X(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?o=e[0].shape[0]:o=e.shape[0];else throw new X(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return o}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new X("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],o=this.retrieveSymbolicTensors(s),i=new Fa;if(e instanceof er&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new X(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let u=0;u<this.inputs.length;++u)i.add(this.inputs[u],e[u])}else for(const u of this.inputs){const l=e[u.name];if(l==null)throw new X(`No value is provided for the model's input ${u.name}`);i.add(u,l)}const a=Kh(o,i);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Eu(null,e.length);let r=e.length;for(const s of this.layers){const o=Array.isArray(s.output)?s.output:[s.output],i=o.map(a=>a.name);for(let a=0;a<e.length;++a){const u=i.indexOf(e[a]);if(u!==-1&&(n[a]=o[u],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((o,i)=>{o==null&&s.push(e[i])}),new X(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return le(()=>{const s=this.checkNumSamples(e);if(r)throw new mt("Verbose predictLoop() is not implemented yet.");const o=Cw(s,n),i=this.outputs.map(a=>[]);for(let a=0;a<o.length;++a)le(()=>{const l=o[a][0],c=o[a][1],d=_h(e,l,c),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new Fa(h);return Kh(this.outputs,f)}).forEach((l,c)=>i[c].push(l));return es(i.map(a=>ns(a,0)))})}predict(e,n={}){const r=A5(e);_D(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return kw(s),this.predictLoop(r,s)}finally{No(r,e)}}predictOnBatch(e){_D(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new mo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Py?o.push(a.slice(0,a.length-1).concat([1])):o.push(a)}if(e=TD(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=TD(n,this.feedOutputNames,o,!1,"target"),Lbe(e,n),Fbe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new X(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,o=!0,i){const[a,u]=this.standardizeUserDataXY(e,n,o,i);if(r!=null)throw new Error("sample weight is not supported yet.");let l=null;if(s!=null){const c=_5(s,this.outputNames);l=[];for(let d=0;d<c.length;++d)l.push(await N5(u[d],null,c[d]))}return[a,u,l]}testLoop(e,n,r,s=0,o){return le(()=>{const i=this.checkNumSamples(n,r,o,"steps"),a=[];if(s>0)throw new mt("Verbose mode is not implemented yet.");if(o!=null)throw new mt("steps mode in testLoop() is not implemented yet");{const u=Cw(i,r),l=ys(Ko(0,i));for(let c=0;c<u.length;++c){const d=u[c][0],h=u[c][1],f=ru(l,d,h-d),p=eC(n,f),m=e(p);if(c===0)for(let y=0;y<m.length;++y)a.push(Nt(0));for(let y=0;y<m.length;++y){const g=m[y];a[y]=Ne(a[y],Q(h-d,g))}}for(let c=0;c<a.length;++c)a[c]=st(a[c],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let o=s;if(fD(e,s)>1){const i=fD(e.slice(0,r),s);o+=`_${i}`}n.push(o)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const h=new Fa(d),f=Kh(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const y=this.lossFunctions[m];let g=y(s[m],f[m]);o[m]!=null&&(g=Tbe(g,o[m]));const v=Kn(g);n.push(v),m===0?p=g:p=Ne(p,g)}for(let m=0;m<this.metricsTensors.length;++m){let y;if(this.outputs.length>1&&m<this.outputs.length)y=n[m];else{const g=this.metricsTensors[m][0],v=this.metricsTensors[m][1];y=Kn(g(s[v],f[v]))}xi(y),i.push(y)}return p=Kn(p),this.calculateLosses().forEach(m=>{p=Ne(p,m)}),p},u=this.collectedTrainableWeights.map(d=>d.read()),l=!0;return[this.optimizer_.minimize(a,l,u)].concat(i)}}makeTestFunction(){this.testFunction=e=>le(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let l=0;l<this.inputs.length;++l)i.push({key:this.inputs[l],value:s[l]});const a=new Fa(i),u=Kh(this.outputs,a);for(let l=0;l<this.lossFunctions.length;++l){const c=this.lossFunctions[l],d=Kn(c(o[l],u[l]));l===0?r=d:r=Ne(r,d),n.push(r)}for(let l=0;l<this.metricsTensors.length;++l){const c=this.metricsTensors[l][0],d=this.metricsTensors[l][1],h=Kn(c(o[d],u[d]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,o,i,a,u,l,c,d,h;try{const f=r.batchSize==null?32:r.batchSize;kw(f);const p=!1,m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,f);s=m[0],o=m[1],h=m[2];let y=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)u=r.validationData[0],l=r.validationData[1];else throw r.validationData.length===3?new mt("validationData including sample weights is not supported yet."):new X(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const E=!0,S=await this.standardizeUserData(u,l,null,null,E,f);c=S[0],d=S[1],g=c.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const E=Math.floor(s[0].shape[0]*(1-r.validationSplit)),S=s[0].shape[0];c=_h(s,E,S),i=s,s=_h(s,0,E),d=_h(o,E,S),a=o,o=_h(o,0,E),g=c.concat(d)}else r.validationSteps!=null&&(y=!0);const v=s.concat(o).concat(h);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,k;y?(this.makeTestFunction(),w=this.testFunction,k=b.slice().concat(b.map(E=>"val_"+E))):(w=null,g=[],k=b.slice());const C=b5(r.callbacks,r.yieldEvery);return await this.fitLoop(x,v,b,f,r.epochs,r.verbose,C,w,g,r.shuffle,k,r.initialEpoch,null,null)}finally{this.isTraining=!1,No(s,e),No(o,n),No(i,e),No(a,n),No(c,u),No(d,l),h!=null&&xt(h)}}async fitLoop(e,n,r,s,o,i,a,u,l,c,d,h,f,p){s==null&&(s=32),o==null&&(o=1),c==null&&(c=!0),h==null&&(h=0);let m=!1;if(u!=null&&l!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new X("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,s,f,"steps_per_epoch");let g;y!=null&&(g=Ko(0,y)),i==null&&(i=1);const{callbackList:v,history:x}=w5(a,i,o,h,y,f,s,m,d);v.setModel(this),this.history=x,await v.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<o;++b){await v.onEpochBegin(b);const w={};if(f!=null)throw new mt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new mt("batch shuffling is not implemneted yet");c&&ohe(g);const k=ys(g),C=Cw(y,s);for(let $=0;$<C.length;++$){const E={};if(await v.onBatchBegin($,E),le(()=>{const S=C[$][0],R=C[$][1],T=ru(k,S,R-S);E.batch=$,E.size=R-S;const P=eC(n,T),I=e(P);for(let A=0;A<r.length;++A){const L=r[A],V=I[A];E[L]=V,xi(V)}if($===C.length-1&&m){const A=this.testLoop(u,l,s);for(let L=0;L<r.length;++L){const V=r[L],z=A[L];xi(z),w["val_"+V]=z}}}),await v.onBatchEnd($,E),x5(E),this.stopTraining_)break}k.dispose()}if(await v.onEpochEnd(b,w),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Rbe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],o=r[1],a=this.makeTrainFunction()(s.concat(o)),u=[];for(const l of a){const c=await l.data();u.push(c[0])}return xt(a),No(r[0],e),No(r[1],n),es(u)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,o=this.getWeights(r);for(let i=0;i<s.length;++i)r&&!s[i].trainable||n.push({name:s[i].originalName,tensor:o[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=Fk().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Fk().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Wi(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Wi(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Wi(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Wi(jg(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Wi(jg(e)));{const e={};for(const n in this.metrics)e[n]=Wi(jg(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=zy(e.optimizer_config),r=ki(n);let s;if(typeof e.loss=="string")s=Ul(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(i=>Ul(i));else if(e.loss!=null){s={};for(const i in e.loss)s[i]=Ul(e.loss[i])}let o;if(Array.isArray(e.metrics))o=e.metrics.map(i=>Ul(i));else if(e.metrics!=null){o={};for(const i in e.metrics)o[i]=Ul(e.metrics[i])}this.compile({loss:s,metrics:o,optimizer:r})}async save(e,n){if(typeof e=="string"){const l=ufe(e);if(l.length===0)throw new X(`Cannot find any save handlers for URL '${e}'`);if(l.length>1)throw new X(`Found more than one (${l.length}) save handlers for URL '${e}'`);e=l[0]}if(e.save==null)throw new X("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await qA(this.getNamedWeights(n)),s=!1,o=null,a={modelTopology:this.toJSON(o,s),format:zbe,generatedBy:`TensorFlow.js tfjs-layers v${T5}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const l="optimizer",{data:c,specs:d}=await qA(await this.optimizer.getWeights(),l);r.specs.push(...d),r.data=tfe([r.data,c])}return this.userDefinedMetadata!=null&&(CD(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){CD(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}su.className="Model";$e(su);class D5 extends su{}D5.className="Functional";$e(D5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function O5(t,e){if(e==null&&(e={}),typeof t=="string"){const n=cfe(t,e);if(n.length===0)n.push(Gye(t,e));else if(n.length>1)throw new X(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return Bbe(t,void 0,e)}async function Bbe(t,e,n){if(n==null&&(n={}),t.load==null)throw new X("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let s=r.modelTopology;s.model_config!=null&&(s=s.model_config);const o=n.strict==null?!0:n.strict,i=r.weightData!=null&&r.weightSpecs!=null&&o,a=ki(zy(s),e,i),u=r.trainingConfig;if(u!=null&&a.loadTrainingConfig(u),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new X("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:l,optimizerWeights:c}=Vbe(r.weightData,r.weightSpecs);a.loadWeights(l,o),a.optimizer!=null&&c.length>0&&await a.optimizer.setWeights(c),xt(l),xt(c.map(d=>d.tensor))}return a}function Vbe(t,e){const n=Xhe(t,e),r={},s=[];return e.forEach(o=>{o.group==="optimizer"?s.push({name:o.name,tensor:n[o.name]}):r[o.name]=n[o.name]}),{modelWeights:r,optimizerWeights:s}}class wd extends su{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Lx("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new X(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof wd||e instanceof su;let r;if(n){if(r=e,r.outputs.length!==1)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new X("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new X("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=Vxe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new X(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=p5(this.outputs[0])}this.inboundNodes=[],new Mx({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Eu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Rt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new su({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new mo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let o,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new X("Legacy serialization format not supported yet.");o=n}else B(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof wd))throw new mt(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const u of o){const c=ki(u,void 0,s);s&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new X("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new X("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}wd.className="Sequential";$e(wd);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ube(t){return new su(t)}function nC(t){return new wd(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Or=class extends Gd{getConfig(){return{}}};class P5 extends Or{apply(e,n=1){return $xe(e,n)}}P5.className="elu";$e(P5);class L5 extends Or{apply(e){return Y4(e)}}L5.className="selu";$e(L5);class F5 extends Or{apply(e){return Vu(e)}}F5.className="relu";$e(F5);class M5 extends Or{apply(e){return le(()=>Jf(6,Vu(e)))}}M5.className="relu6";$e(M5);class z5 extends Or{apply(e){return e}}z5.className="linear";$e(z5);class B5 extends Or{apply(e){return Ud(e)}}B5.className="sigmoid";$e(B5);class V5 extends Or{apply(e){return Exe(e)}}V5.className="hardSigmoid";$e(V5);class U5 extends Or{apply(e){return Rm(e)}}U5.className="softplus";$e(U5);class W5 extends Or{apply(e){return Ixe(e)}}W5.className="softsign";$e(W5);class j5 extends Or{apply(e){return Ix(e)}}j5.className="tanh";$e(j5);let ME=class extends Or{apply(e,n=-1){return BI(e,n)}};ME.className="softmax";$e(ME);class G5 extends Or{apply(e,n=-1){return V4(e,n)}}G5.className="logSoftmax";$e(G5);class H5 extends Or{apply(e){return le(()=>le(()=>{const n=Math.sqrt(2),r=Q(.5,Ne(1,L4(st(e,n))));return Q(e,r)}))}}H5.className="gelu";$e(H5);class K5 extends Or{apply(e){return le(()=>Q(.5,Q(e,Ne(1,Ix(Q(Rr(st(2,Math.PI)),Ne(e,Q(.044715,Cu(e,3)))))))))}}K5.className="gelu_new";$e(K5);class q5 extends Or{apply(e){return le(()=>Q(e,Ix(Rm(e))))}}q5.className="mish";$e(q5);class X5 extends Or{apply(e,n=1){return le(()=>Q(Ud(Q(e,n)),e))}}X5.className="swish";$e(X5);function rl(t){return t.getClassName()}function $w(t,e={}){return Mm(t,uo.getMap().classNameMap,e,"activation")}function sl(t){if(t==null){const e={};return e.className="linear",e.config={},$w(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},$w(e)}else return t instanceof Or?t:$w(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Y5(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Z5 extends Gd{}class zE extends Z5{constructor(e){super(),Y5(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return le(()=>{let n=dr([1]);return this.hasL1&&(n=Ne(n,tt(Q(this.l1,Vr(e))))),this.hasL2&&(n=Ne(n,tt(Q(this.l2,Bm(e))))),se(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}zE.className="L1L2";$e(zE);function Wbe(t){return Y5(t),new zE({l1:t!=null?t.l1:null,l2:0})}const ND={l1l2:"L1L2"};function Qt(t){return CE(t)}function RD(t,e={}){return Mm(t,uo.getMap().classNameMap,e,"regularizer")}function xn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in ND?ND[t]:t,config:{}};return RD(n)}else return t instanceof Z5?t:RD(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Q5 extends $t{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=ut(e);let r=Vu(e);return this.maxValue!=null&&(r=Ks(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Q5.className="ReLU";$e(Q5);class J5 extends $t{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=ut(e);return CI(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}J5.className="LeakyReLU";$e(J5);class eV extends $t{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=vn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=xn(e.alphaRegularizer),this.alphaConstraint=or(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new X(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Rt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new rr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=ut(e),NI(e,this.alpha.read())}getConfig(){const e={alphaInitializer:$n(this.alphaInitializer),alphaRegularizer:Qt(this.alphaRegularizer),alphaConstraint:sr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}eV.className="PReLU";$e(eV);let tV=class extends $t{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new mt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=ut(e);return _x(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};tV.className="ELU";$e(tV);class nV extends $t{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=ut(e);return Q(r,je(Zs(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}nV.className="ThresholdedReLU";$e(nV);class rV extends $t{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new ME().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return le(()=>{let r=ut(e);const s=n.mask;if(s!=null){const o=Q(at(wl(r.shape),je(s,r.dtype)),Nt(-1e9));r=Ne(r,o)}return this.axis instanceof Array?this.axis.length>1?$i(at(r,U4(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}rV.className="Softmax";$e(rV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zc(t,e,n){if(typeof t=="number")return Eu(t,e);if(t.length!==e)throw new X(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!wxe(s))throw new X(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Go(t,e,n,r,s=1){if(t==null)return t;const o=e+(e-1)*(s-1);let i;return n==="same"?i=t:i=t-o+1,Math.floor((i+r-1)/r)}function ci(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+nl([n-e,0]);else if(r==="same")t=t*e;else throw new X(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BE(t,e){return le(()=>(Un(e),e==="channelsFirst"?Et(t,[0,2,3,1]):t))}function sV(t,e){return le(()=>(Un(e),e==="channelsFirst"?Et(t,[0,2,3,4,1]):t))}function jbe(t,e,n,r=1,s="valid",o,i=1){return le(()=>{if(o==null&&(o=qo()),Un(o),t.shape.length!==3)throw new X(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new X(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new X(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(o==="channelsFirst"&&(t=Et(t,[0,2,1])),s==="causal")throw new mt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=R4(t,e,r,s==="same"?"same":"valid","NWC",i);return n!=null&&(a=Zo(a,n)),a})}function AD(t,e,n,r=[1,1],s="valid",o,i,a=null){return le(()=>{if(o==null&&(o=qo()),Un(o),t.rank!==3&&t.rank!==4)throw new X(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new X(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let u=BE(t,o);if(s==="causal")throw new mt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=U0e({x:u,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),o==="channelsFirst"&&(u=Et(u,[0,3,1,2])),u})}function Gbe(t,e,n,r=[1,1,1],s="valid",o,i){return le(()=>{if(o==null&&(o=qo()),Un(o),t.rank!==4&&t.rank!==5)throw new X(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new X(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=sV(t,o);if(s==="causal")throw new mt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Bpe(a,e,r,s==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Zo(a,n)),o==="channelsFirst"&&(a=Et(a,[0,4,1,2,3])),a})}class Vx extends $t{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Vx.verifyArgs(n),this.rank=e,fr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new mt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Zc(n.kernelSize,e,"kernelSize"),this.strides=Zc(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,Qs(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Un(this.dataFormat),this.activation=sl(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=vn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=or(n.biasConstraint),this.biasRegularizer=xn(n.biasRegularizer),this.activityRegularizer=xn(n.activityRegularizer),this.dilationRate=Zc(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new X(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new X(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new X(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(ui("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!$E(e.kernelSize,"number",1,3))throw new X(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:rl(this.activation),useBias:this.useBias,biasInitializer:$n(this.biasInitializer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),biasConstraint:sr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Hd extends Vx{constructor(e,n){super(e,n),this.kernel=null,Hd.verifyArgs(n),this.filters=n.filters,fr(this.filters,"filters"),this.kernelInitializer=vn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=or(n.kernelConstraint),this.kernelRegularizer=xn(n.kernelRegularizer)}build(e){e=Rt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new X(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return le(()=>{e=ut(e);let r;const s=this.bias==null?null:this.bias.read(),o=JB(this.activation.getClassName());if(o!=null&&this.rank===2)r=AD(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)r=jbe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=AD(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Gbe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new mt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Rt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let o=0;o<r.length;++o){const i=Go(r[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);n.push(i)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:$n(this.kernelInitializer),kernelRegularizer:Qt(this.kernelRegularizer),kernelConstraint:sr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new X(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class jm extends Hd{constructor(e){super(2,e),jm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!$E(e.kernelSize,"number",1,2))throw new X(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}jm.className="Conv2D";$e(jm);class Gm extends Hd{constructor(e){super(3,e),Gm.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new X(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Gm.className="Conv3D";$e(Gm);class oV extends jm{constructor(e){if(super(e),this.inputSpec=[new rr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new X(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Rt(e),e.length!==4)throw new X("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new X("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new rr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=ut(e);if(r.shape.length!==4)throw new X(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,o=s[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const u=s[i],l=s[a],c=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=ci(u,h,c,this.padding),m=ci(l,f,d,this.padding),y=[o,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=Et(r,[0,2,3,1]));let g=A4(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=Et(g,[0,3,1,2])),this.bias!=null&&(g=Zo(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=Rt(e);const n=e.slice();let r,s,o;this.dataFormat==="channelsFirst"?(r=1,s=2,o=3):(r=3,s=1,o=2);const i=this.kernelSize[0],a=this.kernelSize[1],u=this.strides[0],l=this.strides[1];return n[r]=this.filters,n[s]=ci(n[s],u,i,this.padding),n[o]=ci(n[o],l,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}oV.className="Conv2DTranspose";$e(oV);class iV extends Gm{constructor(e){if(super(e),this.inputSpec=[new rr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new X(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Rt(e),e.length!==5)throw new X("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new X("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new rr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{let r=ut(e);if(r.shape.length!==5)throw new X(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,o=s[0];let i,a,u;this.dataFormat==="channelsFirst"?(u=2,i=3,a=4):(u=1,i=2,a=3);const l=s[u],c=s[i],d=s[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],y=this.strides[1],g=this.strides[2],v=ci(l,m,h,this.padding),x=ci(c,y,f,this.padding),b=ci(d,g,p,this.padding),w=[o,v,x,b,this.filters];this.dataFormat!=="channelsLast"&&(r=Et(r,[0,2,3,4,1]));let k=Wpe(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(k=Et(k,[0,4,1,2,3])),this.bias!==null&&(k=Zo(k,this.bias.read(),this.dataFormat)),this.activation!==null&&(k=this.activation.apply(k)),k})}computeOutputShape(e){e=Rt(e);const n=e.slice();let r,s,o,i;this.dataFormat==="channelsFirst"?(r=1,s=2,o=3,i=4):(r=4,s=1,o=2,i=3);const a=this.kernelSize[0],u=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],d=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[s]=ci(n[s],c,a,this.padding),n[o]=ci(n[o],d,u,this.padding),n[i]=ci(n[i],h,l,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}iV.className="Conv3DTranspose";$e(iV);class aV extends Hd{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new X("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new X("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new X(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=vn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=xn(n.depthwiseRegularizer),this.depthwiseConstraint=or(n.depthwiseConstraint),this.pointwiseInitializer=vn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=xn(n.pointwiseRegularizer),this.pointwiseConstraint=or(n.pointwiseConstraint)}build(e){if(e=Rt(e),e.length<this.rank+2)throw new X(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new X(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),o=[];for(let a=0;a<this.rank;++a)o.push(1);o.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",o,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new rr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return le(()=>{e=ut(e);let r;if(this.rank===1)throw new mt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Et(e,[0,2,3,1])),r=Z4(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Zo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Et(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=$n(this.depthwiseInitializer),e.pointwiseInitializer=$n(this.pointwiseInitializer),e.depthwiseRegularizer=Qt(this.depthwiseRegularizer),e.pointwiseRegularizer=Qt(this.pointwiseRegularizer),e.depthwiseConstraint=sr(this.depthwiseConstraint),e.pointwiseConstraint=sr(this.pointwiseConstraint),e}}aV.className="SeparableConv";class lV extends aV{constructor(e){super(2,e)}}lV.className="SeparableConv2D";$e(lV);class Ux extends Hd{constructor(e){super(1,e),Ux.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!$E(e.kernelSize,"number",1,1))throw new X(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}Ux.className="Conv1D";$e(Ux);class uV extends $t{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return le(()=>{if(e=ut(e),this.dataFormat==="channelsLast"){const r=Wg(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Wg(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Wg(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Wg(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}uV.className="Cropping2D";$e(uV);class cV extends $t{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,vxe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return le(()=>{let r=ut(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Et(r,[0,2,3,1]);const o=this.size[0]*s[2],i=this.size[1]*s[3],a=this.interpolation==="nearest"?qi.resizeNearestNeighbor(r,[o,i]):qi.resizeBilinear(r,[o,i]);return Et(a,[0,3,1,2])}else{const o=this.size[0]*s[1],i=this.size[1]*s[2];return this.interpolation==="nearest"?qi.resizeNearestNeighbor(r,[o,i]):qi.resizeBilinear(r,[o,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}cV.className="UpSampling2D";$e(cV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hbe(t,e,n=[1,1],r="valid",s,o){return le(()=>{s==null&&(s=qo()),Un(s);let i=BE(t,s);if(t.rank!==4)throw new X(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new X(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=bI(i,e,n,r==="same"?"same":"valid","NHWC",o),s==="channelsFirst"&&(i=Et(i,[0,3,1,2])),i})}class dV extends Vx{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=vn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=or(e.depthwiseConstraint),this.depthwiseRegularizer=xn(e.depthwiseRegularizer)}build(e){if(e=Rt(e),e.length<4)throw new X(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new X(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{e=ut(e);let r=Hbe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Zo(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Rt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,o=Go(n,this.kernelSize[0],this.padding,this.strides[0]),i=Go(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,o,i]:[e[0],o,i,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=$n(this.depthwiseInitializer),e.depthwiseRegularizer=Qt(this.depthwiseRegularizer),e.depthwiseConstraint=sr(this.depthwiseRegularizer),e}}dV.className="DepthwiseConv2D";$e(dV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hV(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new X("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(o){return o==null||Array.isArray(o)?o:[o]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function fV(t,e,n,r=!1,s,o,i=!1,a=!1){return le(()=>{const u=e.shape.length;if(u<3)throw new X(`Input should be at least 3D, but is ${u}D.`);const l=[1,0].concat(Ko(2,u));if(e=Et(e,l),o!=null)throw new mt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=je(je(s,"bool"),"float32"),s.rank===u-1&&(s=jr(s,-1)),s=Et(s,l)),r&&(e=$u(e,0),s!=null&&(s=$u(s,0)));const c=[];let d,h=n;const f=e.shape[0],p=Iu(e);let m;s!=null&&(m=Iu(s));for(let g=0;g<f;++g){const v=p[g],x=le(()=>t(v,h));if(s==null)d=x[0],h=x[1];else{const b=le(()=>{const w=m[g],k=at(wo(w),w),C=Ne(Q(x[0],w),Q(h[0],k)),$=h.map((E,S)=>Ne(Q(x[1][S],w),Q(E,k)));return{output:C,newStates:$}});d=b.output,h=b.newStates}a&&c.push(d)}let y;return a&&(y=ia(c,1)),[d,y,h]})}class kl extends $t{constructor(e){super(e);let n;if(e.cell==null)throw new X("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new WE({cells:e.cell}):n=e.cell,n.stateSize==null)throw new X("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new rr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ko(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Yk(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const o=[];for(const i of n)o.push([e[0],i]);return[s].concat(o)}else return s}computeMask(e,n){return le(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(o=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new mt("Constants support is not implemented in RNN yet.");Yk(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new rr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let o;if(Array.isArray(this.cell.stateSize)?o=this.cell.stateSize:o=[this.cell.stateSize],this.stateSpec!=null){if(!Ft(this.stateSpec.map(i=>i.shape[i.shape.length-1]),o))throw new X(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=o.map(i=>new rr({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new li("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>dr([r,s])):this.states_=[dr([r,this.cell.stateSize])];else if(e==null)xt(this.states_),this.keptStates!=null&&(xt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>dr([r,s])):this.states_[0]=dr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):xt(this.states_);for(let s=0;s<this.states_.length;++s){const o=e[s],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,i];if(!Ft(o.shape,a))throw new X(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${o.shape}`);this.states_[s]=o}}this.states_=this.states_.map(s=>xi(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const o=hV(e,r,s,this.numConstants);e=o.inputs,r=o.initialState,s=o.constants;let i=[],a=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const l of r)this.stateSpec.push(new rr({shape:l.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,i=i.concat(s),this.numConstants=s.length),i[0]instanceof Ei){const l=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const h=super.apply(l,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let o=n==null?null:n.initialState;e=ut(e),o==null&&(this.stateful?o=this.states_:o=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(o.length!==i)throw new X(`RNN Layer has ${i} state(s) but was passed ${o.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},l=fV((p,m)=>{const y=this.cell.call([p].concat(m),a);return[y[0],y.slice(1)]},e,o,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],d=l[1],h=l[2];this.stateful&&this.resetStates(h,s);const f=this.returnSequences?d:c;return this.returnState?[f].concat(h):f})}getInitialState(e){return le(()=>{let n=dr(e.shape);return n=tt(n,[1,2]),n=zm(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?qk(n,[1,r]):n):this.cell.stateSize>1?[qk(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===kl.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,o=ki(s,r);return new e(Object.assign(n,{cell:o}))}}kl.className="RNN";$e(kl);class Wx extends $t{}class VE extends Wx{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,fr(this.units,"units"),this.activation=sl(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=xn(e.kernelRegularizer),this.recurrentRegularizer=xn(e.recurrentRegularizer),this.biasRegularizer=xn(e.biasRegularizer),this.kernelConstraint=or(e.kernelConstraint),this.recurrentConstraint=or(e.recurrentConstraint),this.biasConstraint=or(e.biasConstraint),this.dropout=bd([1,nl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=bd([1,nl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Rt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new X(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ol({ones:()=>wo(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ol({ones:()=>wo(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let o;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?o=Si(Q(e,i),this.kernel.read()):o=Si(e,this.kernel.read()),this.bias!=null&&(o=Zo(o,this.bias.read())),a!=null&&(r=Q(r,a));let u=Ne(o,Si(r,this.recurrentKernel.read()));return this.activation!=null&&(u=this.activation.apply(u)),[u,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:rl(this.activation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:Qt(this.kernelRegularizer),recurrentRegularizer:Qt(this.recurrentRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:sr(this.kernelConstraint),recurrentConstraint:sr(this.recurrentConstraint),biasConstraint:sr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}VE.className="SimpleRNNCell";$e(VE);class pV extends kl{constructor(e){e.cell=new VE(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return new e(n)}}pV.className="SimpleRNN";$e(pV);class UE extends Wx{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new X("GRUCell does not support reset_after parameter set to true.");this.units=e.units,fr(this.units,"units"),this.activation=sl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=xn(e.kernelRegularizer),this.recurrentRegularizer=xn(e.recurrentRegularizer),this.biasRegularizer=xn(e.biasRegularizer),this.kernelConstraint=or(e.kernelConstraint),this.recurrentConstraint=or(e.recurrentConstraint),this.biasConstraint=or(e.biasConstraint),this.dropout=bd([1,nl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=bd([1,nl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Rt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return le(()=>{if(e=e,e.length!==2)throw new X(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ol({ones:()=>wo(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ol({ones:()=>wo(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,i=this.recurrentDropoutMask;let a,u,l;0<this.dropout&&this.dropout<1&&(e=Q(e,o[0]));let c=Si(e,this.kernel.read());this.useBias&&(c=Zo(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Q(s,i[0]));const d=this.recurrentKernel.read(),[h,f]=Gs(d,[2*this.units,this.units],d.rank-1),p=Si(s,h),[m,y,g]=Gs(c,3,c.rank-1),[v,x]=Gs(p,2,p.rank-1);a=this.recurrentActivation.apply(Ne(m,v)),u=this.recurrentActivation.apply(Ne(y,x));const b=Si(Q(u,s),f);l=this.activation.apply(Ne(g,b));const w=Ne(Q(a,s),Q(Ne(1,zn(a)),l));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:rl(this.activation),recurrentActivation:rl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:Qt(this.kernelRegularizer),recurrentRegularizer:Qt(this.recurrentRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:sr(this.kernelConstraint),recurrentConstraint:sr(this.recurrentConstraint),biasConstraint:sr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}UE.className="GRUCell";$e(UE);class mV extends kl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new UE(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}mV.className="GRU";$e(mV);class jx extends Wx{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,fr(this.units,"units"),this.activation=sl(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sl(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=vn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=vn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=vn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=xn(e.kernelRegularizer),this.recurrentRegularizer=xn(e.recurrentRegularizer),this.biasRegularizer=xn(e.biasRegularizer),this.kernelConstraint=or(e.kernelConstraint),this.recurrentConstraint=or(e.recurrentConstraint),this.biasConstraint=or(e.biasConstraint),this.dropout=bd([1,nl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=bd([1,nl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Rt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const o=this.biasInitializer,i=this.units;s=new(n=class extends Io{apply(u,l){const c=o.apply([i]),d=new EE().apply([i]),h=o.apply([i*2]);return mD(mD(c,d),h)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new X(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const o=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ol({ones:()=>wo(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ol({ones:()=>wo(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let u,l,c,d;0<this.dropout&&this.dropout<1&&(e=Q(e,i[0]));let h=Si(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Q(s,a[0])),h=Ne(h,Si(s,this.recurrentKernel.read())),this.useBias&&(h=Zo(h,this.bias.read()));const[f,p,m,y]=Gs(h,4,h.rank-1);u=this.recurrentActivation.apply(f),l=this.recurrentActivation.apply(p),c=Ne(Q(l,o),Q(u,this.activation.apply(m))),d=this.recurrentActivation.apply(y);const g=Q(d,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:rl(this.activation),recurrentActivation:rl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),recurrentInitializer:$n(this.recurrentInitializer),biasInitializer:$n(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Qt(this.kernelRegularizer),recurrentRegularizer:Qt(this.recurrentRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:sr(this.kernelConstraint),recurrentConstraint:sr(this.recurrentConstraint),biasConstraint:sr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}jx.className="LSTMCell";$e(jx);class gV extends kl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new jx(e),super(e)}call(e,n){return le(()=>{this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}gV.className="LSTM";$e(gV);class WE extends Wx{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return le(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const o=[];let i;for(let a=0;a<this.cells.length;++a){const u=this.cells[a];r=s[a],a===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=u.call(i,n),o.push(i.slice(1))}r=[];for(const a of o.slice().reverse())r.push(...a);return[i[0]].concat(r)})}build(e){Yk(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{nu(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=o=>({className:o.getClassName(),config:o.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const o of n.cells)s.push(ki(o,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return Zk(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,o=e.splice(s);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],o[i]])}OE(n)}}WE.className="StackedRNNCells";$e(WE);function ol(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:o}=t,i=()=>o!=null?o(e(),n):i5(e(),n),a=()=>Vm(i,e,r);return!s||s<=1?xi(a().clone()):Array(s).fill(void 0).map(a).map(l=>xi(l.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Kbe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class yV extends kl{constructor(e){if(e.unroll)throw new mt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new mt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new rr({ndim:5})]}call(e,n){return le(()=>{if(this.cell.dropoutMask!=null&&(xt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(xt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new X("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,o=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:o})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return le(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),o=[s[0],...s.slice(2)],i=dr(o);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){le(()=>{if(!this.stateful)throw new li("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),o=[s[0],...s.slice(2)];if(r[0]==null)throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>dr(o)):this.states_=[dr(o)];else if(e==null)xt(this.states_),this.keptStates!=null&&(xt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>dr(o)):this.states_[0]=dr(o);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):xt(this.states_);for(let a=0;a<this.states_.length;++a){const u=e[a],l=o;if(!Ft(u.shape,l))throw new X(`State ${a} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${u.shape}`);this.states_[a]=u}}this.states_=this.states_.map(a=>xi(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:o,strides:i,dilationRate:a}=this.cell,u=n==="channelsFirst",l=e[u?3:2],c=e[u?4:3],d=Go(l,s[0],o,i[0],a[0]),h=Go(c,s[1],o,i[1],a[1]);return[...e.slice(0,2),...u?[r,d,h]:[d,h,r]]}}yV.className="ConvRNN2D";class jE extends jx{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:o,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,fr(this.filters,"filters"),this.kernelSize=Zc(r,2,"kernelSize"),this.kernelSize.forEach(u=>fr(u,"kernelSize")),this.strides=Zc(s||1,2,"strides"),this.strides.forEach(u=>fr(u,"strides")),this.padding=o||"valid",Qs(this.padding),this.dataFormat=i||"channelsLast",Un(this.dataFormat),this.dilationRate=Zc(a||1,2,"dilationRate"),this.dilationRate.forEach(u=>fr(u,"dilationRate"))}build(e){var n;e=Rt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new X(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],o=4,i=this.kernelSize.concat([s,this.filters*o]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*o]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let u;if(this.unitForgetBias){const l=this.biasInitializer,c=this.filters;u=new(n=class extends Io{apply(h,f){const p=l.apply([c]),m=wl([c]),y=l.apply([c*2]);return IE([p,m,y])}},n.className="CustomInit",n)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*o],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return le(()=>{if(e.length!==3)throw new X(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],o=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ol({ones:()=>wo(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const u=this.dropoutMask,l=(_,F,O)=>!F||!F[O]?_:Q(F[O],_);let c=l(s,u,0),d=l(s,u,1),h=l(s,u,2),f=l(s,u,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ol({ones:()=>wo(o),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=l(o,p,0),y=l(o,p,1),g=l(o,p,2),v=l(o,p,3);const x=3,[b,w,k,C]=Gs(this.kernel.read(),a,x),[$,E,S,R]=this.useBias?Gs(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,b,$,this.padding),d=this.inputConv(d,w,E,this.padding),h=this.inputConv(h,k,S,this.padding),f=this.inputConv(f,C,R,this.padding);const[T,P,I,A]=Gs(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,T),y=this.recurrentConv(y,P),g=this.recurrentConv(g,I),v=this.recurrentConv(v,A);const L=this.recurrentActivation.apply(Ne(c,m)),V=this.recurrentActivation.apply(Ne(d,y)),z=Ne(Q(V,i),Q(L,this.activation.apply(Ne(h,g)))),M=Q(this.recurrentActivation.apply(Ne(f,v)),this.activation.apply(z));return[M,M,z]})}getConfig(){const e=super.getConfig(),n=Kbe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,s){const o=ku(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Zo(o,r,this.dataFormat):o}recurrentConv(e,n){return ku(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}jE.className="ConvLSTM2DCell";$e(jE);class vV extends yV{constructor(e){const n=new jE(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}vV.className="ConvLSTM2D";$e(vV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GE extends $t{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=ut(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,o=this.getNoiseShape(r);return Vm(()=>i5(r,this.rate,o,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}GE.className="Dropout";$e(GE);class xV extends GE{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}xV.className="SpatialDropout1D";$e(xV);class HE extends $t{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,fr(this.units,"units"),this.activation=sl(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=vn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=vn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=or(e.kernelConstraint),this.biasConstraint=or(e.biasConstraint),this.kernelRegularizer=xn(e.kernelRegularizer),this.biasRegularizer=xn(e.biasRegularizer),this.activityRegularizer=xn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Rt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Rt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=ut(e),s=JB(this.activation.getClassName());let o;return s!=null?o=Si(r,this.kernel.read(),s,this.bias?this.bias.read():null):(o=Si(r,this.kernel.read()),this.bias!=null&&(o=Zo(o,this.bias.read())),this.activation!=null&&(o=this.activation.apply(o))),o})}getConfig(){const e={units:this.units,activation:rl(this.activation),useBias:this.useBias,kernelInitializer:$n(this.kernelInitializer),biasInitializer:$n(this.biasInitializer),kernelRegularizer:Qt(this.kernelRegularizer),biasRegularizer:Qt(this.biasRegularizer),activityRegularizer:Qt(this.activityRegularizer),kernelConstraint:sr(this.kernelConstraint),biasConstraint:sr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}HE.className="Dense";$e(HE);class bV extends $t{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Rt(e);for(const n of e.slice(1))if(n==null)throw new X(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ya(e,1)]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=ut(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let o=2;o<r.rank;++o)s.push(o);s.push(1),r=Et(r,s)}return Cxe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}bV.className="Flatten";$e(bV);class wV extends $t{constructor(e){super(e),this.supportsMasking=!0,this.activation=sl(e.activation)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=ut(e);return this.activation.apply(r)})}getConfig(){const e={activation:rl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}wV.className="Activation";$e(wV);class SV extends $t{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return le(()=>(e=ut(e),Sxe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}SV.className="RepeatVector";$e(SV);class kV extends $t{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let o=1,i=null;for(let u=0;u<s.length;++u){const l=s[u];if(this.isUnknown(l))if(i===null)i=u;else throw new X("Can only specifiy one unknown dimension.");else o*=l}const a=Ya(e);if(i!==null){if(o===0||a%o!==0)throw new X(r);s[i]=a/o}else if(a!==o)throw new X(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=ut(e),s=r.shape,o=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return se(r,o)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}kV.className="Reshape";$e(kV);class CV extends $t{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Ko(1,e.dims.length+1);if(!Ft(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new rr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Rt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Et(ut(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}CV.className="Permute";$e(CV);class $V extends $t{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=ut(e),s=-1;return Vk(Ey(r,this.maskValue),s)}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=ut(e),s=-1,o=!0,i=Vk(Ey(r,this.maskValue),s,o);return Q(r,je(i,r.dtype))})}}$V.className="Masking";$e($V);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IV extends $t{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Wt(e.inputLength))}this.inputDim=e.inputDim,fr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,fr(this.outputDim,"outputDim"),this.embeddingsInitializer=vn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=xn(e.embeddingsRegularizer),this.activityRegularizer=xn(e.activityRegularizer),this.embeddingsConstraint=or(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return le(()=>this.maskZero?(e=ut(e),Ey(e,Tt(e))):null)}computeOutputShape(e){if(e=Rt(e),this.inputLength==null)return[...e,this.outputDim];const n=Wt(this.inputLength);if(n.length!==e.length-1)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const o=n[s],i=e[s+1];if(o!=null&&i!=null&&o!==i)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);o==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return le(()=>{this.invokeCallHook(e,n);let r=ut(e);r.dtype!=="int32"&&(r=wi(r,"int32"));const s=o5(this.embeddings.read(),se(r,[r.size]));return se(s,Rt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:$n(this.embeddingsInitializer),embeddingsRegularizer:Qt(this.embeddingsRegularizer),activityRegularizer:Qt(this.activityRegularizer),embeddingsConstraint:sr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}IV.className="Embedding";$e(IV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ju extends $t{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new mt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const o=e[e.length-n.length+s],i=n[s];if(o==null||i==null||o<0||i<0)r.push(null);else if(o===1)r.push(i);else if(i===1)r.push(o);else{if(o!==i)throw new X("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(o)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Rt(e)]),e=e,e.length<2)throw new X(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const o of e)o!=null&&o[0]!==null&&n.push(o[0]);if(n=Xa(n),n.length>1)throw new X(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let o=1;o<e.length;++o){const i=e[o]==null?null:e[o].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const s=e.map(o=>o.length);e.indexOf(null)===-1&&Xa(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return le(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(o=>o.rank);if(s.indexOf(null)===-1){const o=nl(s);for(let i of e){const a=i.rank;for(let u=0;u<o-a;++u)i=zm(i,1);r.push(i)}return this.mergeFunction(r)}else{let o=!1;for(const u of e){const l=u.rank;if(l==null){const c=u.shape,d=c[0],h=c.slice(1).concat([d]);let f=se(u,[d].concat(Ya(c.slice(1))));f=Et(f,[1,0]),f=se(f,h),r.push(f),o=!0}else if(l>1){const c=Ko(1,l).concat([0]);r.push(Et(u,c)),o=!0}else r.push(u)}let i=this.mergeFunction(r);const a=i.rank;if(o){if(a==null){const u=i.shape,l=u.length,c=u[l-1],d=[c].concat(u.slice(0,u.length-1));i=se(Et(se(i,[-1,c]),[1,0]),d)}else if(a>1){const u=[a-1].concat(Ko(0,a-1));i=Et(i,u)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,o)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Xa(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return le(()=>{if(n==null)return null;if(!Array.isArray(n))throw new X("`mask` should be an Array");if(!Array.isArray(e))throw new X("`inputs` should be an Array");if(n.length!==e.length)throw new X(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:jr(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=oa(r,n[s]);return r})}}class EV extends ju{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ne(n,e[r]);return n})}}EV.className="Add";$e(EV);class TV extends ju{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Q(n,e[r]);return n})}}TV.className="Multiply";$e(TV);class _V extends ju{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ne(n,e[r]);return Q(1/e.length,n)})}}_V.className="Average";$e(_V);class NV extends ju{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=bl(n,e[r]);return n})}}NV.className="Maximum";$e(NV);class RV extends ju{constructor(e){super(e)}mergeFunction(e){return le(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Jf(n,e[r]);return n})}}RV.className="Minimum";$e(RV);class AV extends ju{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new X("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const o=e[s].slice();o.splice(this.axis,1);let i=!1;for(const a of r)if(Ft(a,o)){i=!0;break}i||r.push(o)}if(r.length>1)throw new X("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return le(()=>IE(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new X("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const o of n.slice(1)){if(r[s]==null||o[s]==null){r[s]=null;break}r[s]+=o[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new X("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new X("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new X(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return le(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const s=[];for(let i=0;i<e.length;++i)n[i]==null?s.push(je(wo(e[i]),"bool")):n[i].rank<e[i].rank?s.push(jr(n[i],-1)):s.push(n[i]);const o=ns(s,this.axis);return N4(o,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}AV.className="Concatenate";$e(AV);function Nh(t,e){for(;t<0;)t+=e;return t}function qbe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new mt("batchDot is not implemented for tensors of 4D or higher rank yet");if(B(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),B(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new mt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const o=n;return le(()=>{let i;if(r>s){i=r-s;const u=[];for(let l=0;l<i;++l)u.push(1);e=se(e,e.shape.concat(u))}else if(s>r){i=s-r;const u=[];for(let l=0;l<i;++l)u.push(1);t=se(t,t.shape.concat(u))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)o[0]===o[1]?a=tt(Q(t,e),o[0]):a=tt(Q(Et(t,[1,0]),e),o[1]);else{const u=o[0]!==t.shape.length-1,l=o[1]===e.shape.length-1;a=Pt(t,e,u,l)}if(i>0){let u;r>s?u=r+s-3:u=r-1;const l=[];for(let c=u;c<u+i;++c)l.push(c);a=Dm(a,l)}return a.shape.length===1&&(a=jr(a,1)),a})}class DV extends ju{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){B(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new mt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new X(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new X(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((o,i)=>Nh(o,e[i].shape.length)):s=[Nh(this.axes,n.shape.length),Nh(this.axes,r.shape.length)],this.normalize&&(n=Oy(n,s[0]),r=Oy(r,s[1])),qbe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Nh(this.axes,e.length),Nh(this.axes,n.length)],r}computeOutputShape(e){B(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new mt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const o=n.concat(r);return o.length===1&&o.push(1),o}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}DV.className="Dot";$e(DV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OV extends $t{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=ut(e);return Vm(()=>Ne(Fx(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}OV.className="GaussianNoise";$e(OV);class PV extends $t{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{this.invokeCallHook(e,n);const r=ut(e);return this.rate>0&&this.rate<1?Vm(()=>{const o=Math.sqrt(this.rate/(1-this.rate));return Q(r,Fx(r.shape,1,o))},()=>r,n.training||!1):r})}}PV.className="GaussianDropout";$e(PV);class LV extends $t{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||ut(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return le(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Vm(()=>{const o=ut(e),i=1.6732632423543772,a=1.0507009873554805,u=-i*a;let l=zu(Am(r),this.rate);l=wi(l,"float32");const c=((1-this.rate)*(1+this.rate*u**2))**-.5,d=-c*u*this.rate,h=Ne(Q(o,l),Q(Ne(l,-1),u));return Ne(Q(h,c),d)},()=>ut(e),n.training||!1)}return e})}}LV.className="AlphaDropout";$e(LV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rp(t,e,n,r,s,o=.001){let i;if(t.rank===2)i=gpe(t,e,n,r,s,o);else if(t.rank===3)i=vpe(t,e,n,r,s,o);else if(t.rank===4)i=bpe(t,e,n,r,s,o);else throw new mt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function Xbe(t,e,n,r,s=.001){return le(()=>{const o=EI(t,r),i=o.mean,a=o.variance;return[rp(t,i,a,n,e,s),i,a]})}function Ybe(t,e,n,r,s=.001){return le(()=>{const o=EI(t,r),i=o.mean,a=o.variance,u=[];for(const p of Ko(0,t.rank))r.indexOf(p)!==-1?u.push(1):u.push(t.shape[p]);const l=se(i,u),c=se(a,u),d=e==null?null:se(e,u),h=n==null?null:se(n,u);return[rp(t,l,c,h,d,s),i,a]})}function Zbe(t,e,n,r,s=.001){return Ft(r.slice().sort(),Ko(0,t.rank-1))?Xbe(t,e,n,r,s):Ybe(t,e,n,r,s)}class FV extends $t{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=vn(e.betaInitializer||"zeros"),this.gammaInitializer=vn(e.gammaInitializer||"ones"),this.movingMeanInitializer=vn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=vn(e.movingVarianceInitializer||"ones"),this.betaConstraint=or(e.betaConstraint),this.gammaConstraint=or(e.gammaConstraint),this.betaRegularizer=xn(e.betaRegularizer),this.gammaRegularizer=xn(e.gammaRegularizer)}build(e){e=Rt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new X(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new rr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return le(()=>{const r=n.training==null?!1:n.training,s=ut(e),o=s.shape,i=o.length,a=Ko(0,i),u=this.axis>=0?this.axis:this.axis+i;a.splice(u,1);const l=Eu(1,i);l[u]=o[u];const c=a.slice();c.sort();const d=!Ft(c,Ko(0,i).slice(0,i-1)),h=()=>{if(d){const v=se(this.movingMean.read(),l),x=se(this.movingVariance.read(),l),b=this.center?se(this.beta.read(),l):null,w=this.scale?se(this.gamma.read(),l):null;return rp(s,v,x,b,w,this.epsilon)}else return rp(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[f,p,m]=Zbe(s,this.gamma.read(),this.beta.read(),a,this.epsilon),y=(v,x,b)=>{le(()=>{const w=1-b,k=v.read(),C=Q(at(k,x),w);v.write(at(k,C))})};return(()=>{y(this.movingMean,p,this.momentum),y(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$n(this.betaInitializer),gammaInitializer:$n(this.gammaInitializer),movingMeanInitializer:$n(this.movingMeanInitializer),movingVarianceInitializer:$n(this.movingVarianceInitializer),betaRegularizer:Qt(this.betaRegularizer),gammaRegularizer:Qt(this.gammaRegularizer),betaConstraint:sr(this.betaConstraint),gammaConstraint:sr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}FV.className="BatchNormalization";$e(FV);class MV extends $t{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=vn(e.betaInitializer||"zeros"),this.gammaInitializer=vn(e.gammaInitializer||"ones"),this.betaRegularizer=xn(e.betaRegularizer),this.gammaRegularizer=xn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Rt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let o=0;o<this.axis.length;++o)this.axis[o]<0&&(this.axis[o]+=n);for(const o of this.axis)if(o<0||o>=n)throw new Error(`Invalid axis: ${o}`);if(this.axis.length!==Xa(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(o=>e[o]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=ut(e),s=r.shape,o=s.length;return le(()=>{let{mean:a,variance:u}=EI(r,this.axis,!0);const l=Eu(1,o);for(const m of this.axis)l[m]=s[m];const c=m=>m!=null&&m.shape.length!==o?se(m,l):m;let d=this.scale?c(this.gamma.read()):null,h=this.center?c(this.beta.read()):null;const f=[],p=[];for(let m=0;m<o;++m)this.axis.indexOf(m)!==-1?(f.push(s[m]),p.push(1)):(f.push(1),p.push(s[m]));return a=Bo(a,f),u=Bo(u,f),d!=null&&(d=Bo(d,p)),h!=null&&(h=Bo(h,p)),rp(r,a,u,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:$n(this.betaInitializer),gammaInitializer:$n(this.gammaInitializer),betaRegularizer:Qt(this.betaRegularizer),gammaRegularizer:Qt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}MV.className="LayerNormalization";$e(MV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qbe(t,e,n){return le(()=>{if(t.rank!==4)throw new X(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new X("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=qo()),n!=="channelsLast"&&n!=="channelsFirst")throw new X(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],TI(t,r)})}class zV extends $t{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?qo():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new X(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new X(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new X(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new rr({ndim:4})]}computeOutputShape(e){e=Rt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return le(()=>Qbe(ut(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}zV.className="ZeroPadding2D";$e(zV);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gx(t,e,n,r,s,o){return le(()=>{Un(s),t5(o),Qs(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=qo()),o==null&&(o="max"),t=BE(t,s);let i;const a=r==="same"?"same":"valid";return o==="max"?i=II(t,e,n,a):i=gI(t,e,n,a),s==="channelsFirst"&&(i=Et(i,[0,3,1,2])),i})}function BV(t,e,n,r,s,o){return le(()=>{Un(s),t5(o),Qs(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=qo()),o==null&&(o="max"),t=sV(t,s);let i;const a=r==="same"?"same":"valid";return o==="max"?i=sge(t,e,n,a):i=ipe(t,e,n,a),s==="channelsFirst"&&(i=Et(i,[0,4,1,2,3])),i})}class VV extends $t{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new X(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(fr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new X(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);fr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,Qs(this.padding),this.inputSpec=[new rr({ndim:3})]}computeOutputShape(e){e=Rt(e);const n=Go(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return le(()=>{this.invokeCallHook(e,n),e=zm(ut(e),2);const r=this.poolingFunction(ut(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Dm(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class UV extends VV{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Un(o),Qs(s),Gx(e,n,r,s,o,"max")}}UV.className="MaxPooling1D";$e(UV);class WV extends VV{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Un(o),Qs(s),Gx(e,n,r,s,o,"avg")}}WV.className="AveragePooling1D";$e(WV);class jV extends $t{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new X(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];fr(this.poolSize,"poolSize"),fr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),Qs(this.padding),this.inputSpec=[new rr({ndim:4})]}computeOutputShape(e){e=Rt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Go(n,this.poolSize[0],this.padding,this.strides[0]),r=Go(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(ut(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class GV extends jV{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Un(o),Qs(s),Gx(e,n,r,s,o,"max")}}GV.className="MaxPooling2D";$e(GV);class HV extends jV{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Un(o),Qs(s),Gx(e,n,r,s,o,"avg")}}HV.className="AveragePooling2D";$e(HV);class KV extends $t{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new X(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];fr(this.poolSize,"poolSize"),fr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),Qs(this.padding),this.inputSpec=[new rr({ndim:5})]}computeOutputShape(e){e=Rt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Go(n,this.poolSize[0],this.padding,this.strides[0]),r=Go(r,this.poolSize[1],this.padding,this.strides[1]),s=Go(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return le(()=>(this.invokeCallHook(e,n),this.poolingFunction(ut(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class qV extends KV{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Un(o),Qs(s),BV(e,n,r,s,o,"max")}}qV.className="MaxPooling3D";$e(qV);class XV extends KV{constructor(e){super(e)}poolingFunction(e,n,r,s,o){return Un(o),Qs(s),BV(e,n,r,s,o,"avg")}}XV.className="AveragePooling3D";$e(XV);class YV extends $t{constructor(e){super(e),this.inputSpec=[new rr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new mt}}class ZV extends YV{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=ut(e);return Kn(r,1)})}}ZV.className="GlobalAveragePooling1D";$e(ZV);class QV extends YV{constructor(e){super(e||{})}call(e,n){return le(()=>{const r=ut(e);return jo(r,1)})}}QV.className="GlobalMaxPooling1D";$e(QV);class JV extends $t{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Un(this.dataFormat),this.inputSpec=[new rr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new mt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class KE extends JV{call(e,n){return le(()=>{const r=ut(e);return this.dataFormat==="channelsLast"?Kn(r,[1,2]):Kn(r,[2,3])})}}KE.className="GlobalAveragePooling2D";$e(KE);class eU extends JV{call(e,n){return le(()=>{const r=ut(e);return this.dataFormat==="channelsLast"?jo(r,[1,2]):jo(r,[2,3])})}}eU.className="GlobalMaxPooling2D";$e(eU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tU extends $t{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,o=ki(s,r);delete n.layer;const i={layer:o};return Object.assign(i,n),new e(i)}}class nU extends tU{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Rt(e),e.length<3)throw new X(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Rt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return le(()=>(e=ut(e),fV((i,a)=>[ut(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}nU.className="TimeDistributed";$e(nU);function Jbe(t){Wu(yxe,"BidirectionalMergeMode",t)}const ewe="concat";class rU extends tU{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=ki(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=ki(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?ewe:e.mergeMode,Jbe(this.mergeMode),e.weights)throw new mt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,o;return this.returnState&&(o=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(o).concat(o.slice()):[r].concat(o).concat(o.slice()):es(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const o=hV(e,r,s,this.numConstants);if(e=o.inputs,r=o.initialState,s=o.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const i=[],a=[];if(r!=null){const l=r.length;if(l%2>0)throw new X("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const c=r.map(d=>new rr({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),a.push(...c)}if(s!=null)throw new mt("Support for constants in Bidirectional layers is not implemented yet.");const u=i[0]instanceof Ei;for(const l of i)if(l instanceof Ei!==u)throw new X("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const l=[e].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const h=super.apply(l,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return le(()=>{const r=n.initialState;let s,o;if(r==null)s=this.forwardLayer.call(e,n),o=this.backwardLayer.call(e,n);else{const u=r.slice(0,r.length/2),l=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:u})),o=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}let i;this.returnState&&(Array.isArray(s)&&(i=s.slice(1).concat(o.slice(1))),s=s[0],o=o[0]),this.returnSequences&&(o=$u(o,1));let a;return this.mergeMode==="concat"?a=IE([s,o]):this.mergeMode==="sum"?a=Ne(s,o):this.mergeMode==="ave"?a=Q(.5,Ne(s,o)):this.mergeMode==="mul"?a=Q(s,o):this.mergeMode==null&&(a=[s,o]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){nu(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),nu(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const o=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(o).concat(o):[r].concat(o).concat(o)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=ki(n.layer);if(delete n.layer,n.numConstants!=null)throw new mt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}rU.className="Bidirectional";$e(rU);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class sU extends $t{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>(e=ut(e),e.dtype!=="float32"&&(e=wi(e,"float32")),Ne(Q(e,this.scale),this.offset)))}}sU.className="Rescaling";$e(sU);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:twe,cropAndResize:nwe}=qi;class oU extends $t{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,o,i,a,u){return le(()=>{let l,c=!1;const d=n/i,h=r/a,f=(s+n)/i,p=(o+r)/a,m=[d,h,f,p],y=[];e.rank===3?(c=!0,l=ia([e])):l=e;for(let w=0;w<l.shape[0];w++)y.push(m);const g=gf(y,[y.length,4]),v=ep(0,y.length,1,"int32"),b=nwe(l,g,v,[s,o],"nearest");return wi(c?ut(Iu(b)):b,u)})}upsize(e,n,r,s){return le(()=>{const o=twe(e,[n,r]);return wi(o,s)})}call(e,n){return le(()=>{const r=ut(e),s=r.dtype,o=r.shape,i=o[o.length-3],a=o[o.length-2];let u=0;i!==this.height&&(u=Math.floor((i-this.height)/2));let l=0;return a!==this.width&&(l=Math.floor((a-this.width)/2),l===0&&(l=1)),u>=0&&l>=0?this.centerCrop(r,u,l,this.height,this.width,i,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Rt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}oU.className="CenterCrop";$e(oU);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rwe(t,e,n,r){let s=ut(t);if(s.dtype!=="int32"&&(s=wi(s,"int32")),e==="int")return s;const o=s.shape;if(s.rank===0&&(s=jr(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=jr(s,-1)),s.rank>2)throw new X(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${o} which would result in output rank ${s.rank}.`);const i=["multiHot","oneHot"].includes(e),a=s;let u;if(typeof r<"u"&&e==="count"?u=QA(a,r,n,i):u=QA(a,[],n,i),e!=="tfIdf")return u;if(r)return Q(u,r);throw new X("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iU extends $t{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Rt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return le(()=>{e=ut(e),e.dtype!=="int32"&&(e=wi(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new X(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=ut(n.countWeights)}const s=jo(e),o=$y(e),i=Zs(this.numTokens,s).bufferSync().get(0),a=zu(o,0).bufferSync().get(0);if(!(i&&a))throw new X(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return rwe(e,this.outputMode,this.numTokens,r)})}}iU.className="CategoryEncoding";$e(iU);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const swe=["bilinear","nearest"],DD=new Set(swe);class aU extends $t{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(DD.has(e.interpolation))this.interpolation=e.interpolation;else throw new X(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Rt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return le(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return qi.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return qi.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...DD]} are supported`)})}}aU.className="Resizing";$e(aU);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lU{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}lU.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class uU extends $t{constructor(e){super(e),this.randomGenerator=new lU(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}uU.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const owe=["bilinear","nearest"],OD=new Set(owe);class cU extends uU{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new X(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new X(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new X(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(OD.has(r))this.interpolation=r;else throw new X(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Rt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return le(()=>{const r=ut(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Am([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let o=this.widthFactor.dataSync()[0]*s;o=Math.round(o);const i=[this.imgHeight,o];switch(this.interpolation){case"bilinear":return qi.resizeBilinear(e,i);case"nearest":return qi.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...OD]} are supported`)}})}}cU.className="RandomWidth";$e(cU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rh(t){return new HE(t)}function iwe(t){return new KE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PD(t){return Wbe(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const awe=de();awe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var LD;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(LD||(LD={}));var FD;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(FD||(FD={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var MD;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(MD||(MD={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qe(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&B(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lwe=oB;class Hx extends y${nextDataId(){return Hx.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Ez(this,si())}write(e,n,r){this.firstUse&&(this.firstUse=!1,de().get("IS_NODE")&&Fs(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Ap(r[0])){const o=r.map(i=>qa(i));s=this.write(o,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,o){this.data.set(e,{values:n,dtype:s,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return aa(s,o)}return dhe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>tl(s));return kt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return kt(e.shape,e.dtype,n)}makeOutput(e,n,r){return si().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Jr();return e(),{kernelMs:Jr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){qe([e],"where");const n=this.readSync(e.dataId);return lwe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Hx.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dU(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const uwe=t=>{const{x:e}=t.inputs,n=t.backend;qe(e,"abs");let r=new Float32Array(ve(e.shape));const s=n.data.get(e.dataId).values;return r=dU(s),n.makeOutput(r,e.shape,e.dtype)},cwe={kernelName:$v,backendName:"cpu",kernelFunc:uwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(t){return(e,n,r,s,o)=>{const i=ht(e,n),a=i.length,u=Qe(i),l=ve(i),c=_r(o,l),d=e.length,h=n.length,f=Qe(e),p=Qe(n),m=vd(e,i),y=vd(n,i);if(m.length+y.length===0)for(let g=0;g<c.length;++g)c[g]=t(r[g%r.length],s[g%s.length]);else for(let g=0;g<c.length;++g){const v=Bd(g,a,u),x=v.slice(-d);m.forEach(C=>x[C]=0);const b=vi(x,d,f),w=v.slice(-h);y.forEach(C=>w[C]=0);const k=vi(w,h,p);c[g]=t(r[b],s[k])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ps(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(a.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(s.shape,"float32",i)},a}const dwe={kernelName:R$,backendName:"cpu",kernelFunc:ps};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function By(t,e,n="float32"){if(n==="complex64"){const s=By(t,e,"float32"),o=By(t,e,"float32");return ps({inputs:{real:s,imag:o},backend:t})}const r=Nr(ve(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ti(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const hwe={kernelName:Jp,backendName:"cpu",kernelFunc:Ti};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tu(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const fwe={kernelName:tI,backendName:"cpu",kernelFunc:Tu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hU(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Mu([0],n),[o,i]=Wn((a,u)=>a!==u?1:0)(e,[],t,s,"bool");return[i,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function il(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return Ti({inputs:{x:s},backend:n});const c=By(n,s.shape,s.dtype),d=il({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),h=ps({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),h}if(s.dtype==="complex64"){const c=Tu({inputs:{input:s},backend:n}),d=il({inputs:{x:c},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(c),d}if(!_z(s.dtype,o)){const c=Ti({inputs:{x:s},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:o}}const i=n.data.get(s.dataId).values,[a,u,l]=hU(i,s.shape,s.dtype,o);return n.makeTensorInfo(a,u,l)}const pwe={kernelName:Bp,backendName:"cpu",kernelFunc:il};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(t,e,n,r){return n==null?({inputs:s,backend:o})=>{const{a:i,b:a}=s,u=o;qe([i,a],t);const l=u.data.get(i.dataId).values,c=u.data.get(a.dataId).values,d=i.dtype==="string"?la(l):l,h=i.dtype==="string"?la(c):c,f=r||i.dtype,[p,m]=e(i.shape,a.shape,d,h,f);return u.makeTensorInfo(m,f,p)}:({inputs:s,backend:o})=>{const{a:i,b:a}=s,u=o;if(i.dtype==="complex64"||a.dtype==="complex64"){const l=il({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,f=u.data.get(d.dataId).values,p=u.data.get(h.dataId).values,m=il({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(m.dataId),g=y.complexTensorInfos.real,v=y.complexTensorInfos.imag,x=u.data.get(g.dataId).values,b=u.data.get(v.dataId).values,[w,k,C]=n(i.shape,a.shape,f,p,x,b),$=u.makeTensorInfo(C,"float32",w),E=u.makeTensorInfo(C,"float32",k),S=ps({inputs:{real:$,imag:E},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo($),u.disposeIntermediateTensorInfo(E),S}else{const l=u.data.get(i.dataId).values,c=u.data.get(a.dataId).values,d=r||i.dtype,[h,f]=e(i.shape,a.shape,l,c,d);return u.makeTensorInfo(f,d,h)}}}function qE(t){return(e,n,r,s,o,i)=>{const a=ht(e,n),u=ve(a),l=a.length,c=Qe(a),d=_r("float32",u),h=_r("float32",u),f=vd(e,a),p=vd(n,a),m=aa(r,s),y=aa(o,i),g=e.length,v=Qe(e),x=n.length,b=Qe(n);if(f.length+p.length===0)for(let w=0;w<d.length;w++){const k=w%m.length,C=w%y.length,$=t(m[k*2],m[k*2+1],y[C*2],y[C*2+1]);d[w]=$.real,h[w]=$.imag}else for(let w=0;w<d.length;w++){const k=Bd(w,l,c),C=k.slice(-g);f.forEach(T=>C[T]=0);const $=vi(C,g,v),E=k.slice(-x);p.forEach(T=>E[T]=0);const S=vi(E,x,b),R=t(m[$*2],m[$*2+1],y[S*2],y[S*2+1]);d[w]=R.real,h[w]=R.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fU=Wn((t,e)=>t+e),mwe=qE((t,e,n,r)=>({real:t+n,imag:e+r})),Sd=ar(Vd,fU,mwe),gwe={kernelName:Vd,backendName:"cpu",kernelFunc:Sd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XE(t,e,n,r,s){const o=ve(r),i=Nr(s,n);for(let a=0;a<t.length;a++){const u=t[a];if(u<0)throw new Error("Input x must be non-negative!");u>=s||(o>0?i[u]+=e[a]:i[u]+=1)}return i}function pU(t,e,n,r=!1){const s=t.shape[0],o=t.shape[1],i=kt([s,n],e.dtype);for(let a=0;a<s;a++)for(let u=0;u<o;u++){const l=t.get(a,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?i.set(1,a,l):e.size>0?i.set(i.get(a,l)+e.get(a,u),a,l):i.set(i.get(a,l)+1,a,l))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mU=Wn((t,e)=>t&e),ywe=ar(N$,mU),vwe={kernelName:N$,backendName:"cpu",kernelFunc:ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ai(t){return(e,n,r)=>{const s=Mn(n,e.length);for(let o=0;o<e.length;++o)s[o]=t(e[o],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jt(t,e,n){const r=Ai(e);return Cl(t,r,n)}function Cl(t,e,n){return({inputs:r,attrs:s,backend:o})=>{const{x:i}=r;qe(i,t);const a=o,u=a.data.get(i.dataId).values;let l;if(i.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=la(u)}else l=u;const c=n||i.dtype,d=e(l,c,s);return a.makeTensorInfo(i.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gU=Ai(t=>Math.ceil(t)),xwe=Cl(Vp,gU),bwe={kernelName:Vp,backendName:"cpu",kernelFunc:xwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yU(t,e,n,r){const s=Mn(n,ve(e));if(r&&n!=="string"){let o=0;t.forEach(i=>{const a=ve(i.shape);s.set(i.vals,o),o+=a})}else{let o=0;t.forEach(i=>{const a=n==="string"?la(i.vals):i.vals;let u=0;for(let l=0;l<i.shape[0];++l){const c=l*e[1]+o;for(let d=0;d<i.shape[1];++d)s[c+d]=a[u++]}o+=i.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vU=Wn((t,e)=>t===e?1:0),xU=ar(Bv,vU,null,"bool"),wwe={kernelName:Bv,backendName:"cpu",kernelFunc:xU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bU=Ai(t=>Math.exp(t)),wU=Cl(qp,bU,"float32"),Swe={kernelName:qp,backendName:"cpu",kernelFunc:wU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SU=Ai(t=>Math.expm1(t)),kwe=Cl(Xp,SU),Cwe={kernelName:Xp,backendName:"cpu",kernelFunc:kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kU=Ai(t=>Math.floor(t)),$we=Cl(Yp,kU),Iwe={kernelName:Yp,backendName:"cpu",kernelFunc:$we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CU=Wn((t,e)=>Math.floor(t/e)),Ewe=ar(Zp,CU,null,"int32"),Twe={kernelName:Zp,backendName:"cpu",kernelFunc:Ewe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $U(t,e,n,r,s,o,i,a,u){const l=kt([r,o],n);for(let c=0;c<r;c++){const d=[];let h=0;for(let f=0;f<s;f++){const p=t[c*s+f];h+=p*i[f],d.push(p)}if(h<0||h>=u/o)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<o;f++)l.values[c*o+f]=e.get(...e.indexToLoc(h*o+f))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IU(t,e,n){const r=kt(n,t.dtype);for(let s=0;s<r.size;++s){const i=r.indexToLoc(s).slice(),a=i[0],u=i[2],l=e.locToIndex([a,u]);i[2]=e.values[l];const c=t.locToIndex(i);0<=c&&c<t.values.length&&(r.values[s]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EU=Wn((t,e)=>t>e?1:0),_we=ar(jv,EU,null,"bool"),Nwe={kernelName:jv,backendName:"cpu",kernelFunc:_we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TU=Wn((t,e)=>t>=e?1:0),Rwe=ar(Qp,TU,null,"bool"),Awe={kernelName:Qp,backendName:"cpu",kernelFunc:Rwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _U=Wn((t,e)=>t<e?1:0),Dwe=ar(Hv,_U,null,"bool"),Owe={kernelName:Hv,backendName:"cpu",kernelFunc:Dwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NU=Wn((t,e)=>t<=e?1:0),Pwe=ar(Kv,NU,null,"bool"),Lwe={kernelName:Kv,backendName:"cpu",kernelFunc:Pwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RU(t,e,n){const r=(e-t)/(n-1),s=Nr(n,"float32");s[0]=t;for(let o=1;o<s.length;o++)s[o]=s[o-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AU=Ai(t=>Math.log(t)),Fwe=Cl(rm,AU),Mwe={kernelName:rm,backendName:"cpu",kernelFunc:Fwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DU(t,e,n,r){const s=_r(r,ve(n));for(let o=0;o<s.length;++o){const i=o*e;let a=t[i];for(let u=0;u<e;++u){const l=t[i+u];(Number.isNaN(l)||l>a)&&(a=l)}s[o]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OU=Wn((t,e)=>Math.max(t,e)),zwe=ar(om,OU),Bwe={kernelName:om,backendName:"cpu",kernelFunc:zwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PU=Wn((t,e)=>Math.min(t,e)),Vwe=ar(im,PU),Uwe={kernelName:im,backendName:"cpu",kernelFunc:Vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YE=Wn((t,e)=>t*e),Wwe=qE((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),Kx=ar(lm,YE,Wwe),jwe={kernelName:lm,backendName:"cpu",kernelFunc:Kx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LU(t,e,n){const r=gl(-1,n);return YE([],e,r,t,n)}function Gwe(t){const{inputs:e,backend:n}=t,{x:r}=e;qe(r,"neg");const s=n.data.get(r.dataId).values,[o,i]=LU(s,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,o)}const Hwe={kernelName:sx,backendName:"cpu",kernelFunc:Gwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FU=Wn((t,e)=>t!==e?1:0),Kwe=ar(ox,FU,null,"bool"),qwe={kernelName:ox,backendName:"cpu",kernelFunc:Kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZE(t,e,n,r,s){const o=e.length,i=ve(e),a=Qe(e),u=Qe(s),l=_r(n,ve(s));for(let c=0;c<i;++c){const d=Bd(c,o,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[r[p]];const f=vi(h,o,u);l[f]=t[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:o}=n;qe(s,"transpose");const i=s.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=s.shape[o[d]];const u=r.data.get(s.dataId).values,l=ZE(u,s.shape,s.dtype,o,a);return{dataId:r.write(l,a,s.dtype),shape:a,dtype:s.dtype}}const Xwe={kernelName:Xc,backendName:"cpu",kernelFunc:ss};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MU(t,e,n,r){const[s,o]=pr(t,r),i=$s(e,"int32"),a=Nr(ve(s),i),u=ve(o);for(let l=0;l<a.length;++l){const c=l*u;let d=1;for(let h=0;h<u;++h)d*=n[c+h];a[l]=d}return{outVals:a,outShape:s,outDtype:i}}function Ywe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;qe(s,"prod");const a=s.shape.length,u=Ct(o,s.shape),l=In(u,a);let c=u,d=s;const h=[];l!=null&&(d=ss({inputs:{x:s},backend:n,attrs:{perm:l}}),h.push(d),c=Vn(c.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:y}=MU(d.shape,d.dtype,f,c);let g=m;return i&&(g=qn(m,u)),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(g,y,p)}const Zwe={kernelName:dx,backendName:"cpu",kernelFunc:Ywe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const o=Bd(s,e.length,Qe(e)).join(",");throw new Error(`indices[${o}] = ${r} is not in [0, ${n})`)}})}function Jwe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}function eSe(t,e,n,r){const s=[];let o=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);Jwe(n,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let d=1;d<u+1;++d)a[l].push(d*c)}for(let l=0;l<t.length;++l){let c=t[l],d=t[l]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],y=m[m.length-1]-f[c];for(let g=c;g<d;++g)a[p].push(f[g+1]+y)}c=f[c],d=f[d]}d!==c&&(s.push([c,d]),o+=d-c)}return{outSplits:a,valueSlices:s,numValues:o}}function tSe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Mn("int32",r);e.push(s),t[n].forEach((o,i)=>s[i]=o)}return e}function zD(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function nSe(t,e,n,r,s,o){const i=zD(e,2)[1],a=zD(o,2)[1];let u=0;for(const l of n)for(let c=l[0];c<l[1];++c){for(let d=0;d<r;++d)s[u*a+d]=t[c*i+d];++u}}function rSe(t,e,n,r,s){const o=e.slice();o[0]=s;const i=Mn(n,ve(o)),a=t.length,u=a===0?0:a/e[0];return nSe(t,e,r,u,i,o),[i,o]}function zU(t,e,n,r,s,o,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(Qwe(o,i,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:d,numValues:h}=eSe(o,i,t,l),f=tSe(c),p=rSe(n,r,s,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BD=2147483647;function BU(t,e,n,r,s,o,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,u=s.length===0,l=i.length===0,c=[];a||c.push(e[0]),u||c.push(s[0]),l||c.push(i[0]);for(let y=1;y<c.length;++y)if(c[y]!==c[y-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],h=Mn("int32",d+1);h[0]=0;for(let y=0;y<d;++y){const g=a?t[0]:t[y],v=u?r[0]:r[y],x=l?o[0]:o[y];if(x===0)throw new Error("Requires delta != 0");let b;if(x>0&&v<g||x<0&&v>g)b=0;else if(b=Math.ceil(Math.abs((v-g)/x)),b>BD)throw new Error(`Requires ((limit - start) / delta) <= ${BD}`);h[y+1]=h[y]+b}const f=h[d],p=Mn(n,f);let m=0;for(let y=0;y<d;++y){const g=h[y+1]-h[y];let v=a?t[0]:t[y];const x=l?o[0]:o[y];for(let b=0;b<g;++b)p[m++]=v,v+=x}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var eo=Mo;class Vy{constructor(e,n,r,s,o,i,a,u,l,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=o,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=IB(c),this.raggedRank=EB(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===eo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===eo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case eo.VALUE_ROWIDS:return Vy.getMaxWidthValueRowID(n);case eo.ROW_SPLITS:return Vy.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${eo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const o=e[s+1]-e[s];o>r&&(r=o)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],o=0;for(let i=1;i<n;++i){const a=e[i];a!==s&&(s=a,o=Math.max(i-r,o),r=i)}return Math.max(n-r,o)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return UD(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;TB(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=$B(this.raggedRank,s,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),o=[];let i=0;for(let a=0;a<s;++a,i+=n)o.push(i);for(let a=s;a<e;++a)o.push(-1);return B(o.length===e,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(e,n,r,s){const o=e.length,i=[];for(let a=0;a<o-1;++a){const u=e[a+1]-e[a];let l=Math.min(s,u),c=n[a];c===-1&&(l=0);for(let d=0;d<l;++d)i.push(c),c+=r;for(let d=0;d<u-l;++d)i.push(-1)}if(o>0&&i.length!==e[o-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,s){const o=e.length,i=[];if(o===0)return[];let a=0,u=e[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let l=n[u];i.push(l);for(let c=1;c<o;++c){const d=e[c];if(d===u)l>=0&&(++a,a<s?l+=r:l=-1);else{if(a=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);l=n[d]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,s){const o=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case eo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,n,r,s);case eo.ROW_SPLITS:if(o.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(o,n,r,s);default:throw new Error(`Unsupported partition type: ${eo[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case eo.FIRST_DIM_SIZE:return e[0];case eo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case eo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${eo[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let u=s.length-2;u>=0;--u)s[u]=s[u+1]*r[u+1];const o=UD(r,!1),i=Mn(this.valuesDType,ve(o));if(s[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,s[l],r[l]);this.setOutput(this.raggedRank,u,i,o)}return[o,i]}setOutput(e,n,r,s){if(r.length===0)return;const o=this.values,i=r;let a=s.slice();a=a.slice(e+1);const u=ve(a),l=n.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const p=this.defaultValueShape;le(()=>{const m=se(c,p);c=yf(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=l;++p){let m=p<l?n[p]:-1;if(m===f){++f;continue}if(h<f){const y=o.subarray(d*u),g=i.subarray(h*u),v=(f-h)*u;VD(g,y,v)}if(p>=l){const y=r.length;m=Math.floor(y/u)}if(m>f)if(this.defaultValue.length===1)i.subarray(f*u,m*u).fill(this.defaultValue[0]),f=m;else for(;m>f;){const y=i.slice(f*u);VD(y,c,u),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function VD(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function UD(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function VU(t,e,n,r,s,o,i,a,u,l){return new Vy(t,e,n,r,s,o,i,a,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UU(t,e,n,r){const s=t===e,o=t<e&&n<0,i=e<t&&n>1;if(s||o||i)return Nr(0,r);const a=Math.abs(Math.ceil((e-t)/n)),u=Nr(a,r);e<t&&n===1&&(n=-1),u[0]=t;for(let l=1;l<u.length;l++)u[l]=u[l-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WU=Ai(t=>1/Math.sqrt(t)),sSe=Cl(pm,WU),oSe={kernelName:pm,backendName:"cpu",kernelFunc:sSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zl(t,e,n,r,s,o,i,a,u,l){const c=[r/s,s],d=t.values,h=e.values;if(r===0)return kt(n,e.dtype);const f=u instanceof xr?u:kt(c,e.dtype);typeof u=="string"||typeof u=="number"?f.values.fill(u):typeof u=="boolean"&&f.values.fill(+u);for(let p=0;p<o;p++){const m=[];let y=0;for(let g=0;g<i;g++){const v=d[p*i+g];m.push(v),y+=v*a[g]}if(y<0||y>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let g=0;g<s;g++)l?f.values[y*s+g]+=h[p*s+g]:f.values[y*s+g]=e.rank===0?h[0]:h[p*s+g]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iSe=Ai(t=>1/(1+Math.exp(-t))),jU=jt(xm,t=>1/(1+Math.exp(-t))),aSe={kernelName:xm,backendName:"cpu",kernelFunc:jU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GU(t,e,n,r,s){const o=tE(r,e,n),i=ve(n),a=Qe(r);if(o){const d=nE(e,a);return s==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const u=s==="string"?la(t):t,l=kt(r,s,u),c=kt(n,s);for(let d=0;d<c.size;++d){const h=c.indexToLoc(d),f=h.map((p,m)=>p+e[m]);c.set(l.get(...f),...h)}return s==="string"?qB(c.values):c.values}function _u(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,size:i}=r;qe(s,"slice");const[a,u]=Ax(s,o,i);JI(s,a,u);const l=n.data.get(s.dataId).values,c=GU(l,a,u,s.shape,s.dtype);return n.makeTensorInfo(u,s.dtype,c)}const lSe={kernelName:yx,backendName:"cpu",kernelFunc:_u};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HU(t,e,n,r,s,o,i){const a=e[0],u=o[0],l=new Array(u),c=new Array(a),d=e[1];if(u===0){if(a!==0)throw new Error(PB(a));const y=Mn(n,0),g=Mn(s,0);return[y,[0,d],g,l,c]}let h=!0,f=0;const p=new Array(u).fill(0);for(let y=0;y<a;++y){const g=t[y*d];if(g<0)throw new Error(LB(y,g));if(g>=u)throw new Error(FB(y,g,u));++p[g],h=h&&g>=f,f=g}let m=!0;for(let y=0;y<u;++y){const g=p[y]===0;l[y]=g,m=m&&!g,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(m&&h){const y=t,g=r;for(let v=0;v<a;++v)c[v]=v;return[y,[a,d],g,l,c]}else{const y=p[u-1],g=Mn(n,y*d),v=Mn(s,y),x=new Array(u).fill(0);for(let b=0;b<a;++b){const w=t[b*d],k=x[w],C=(w===0?0:p[w-1])+k;x[w]++;for(let $=0;$<d;++$)g[C*d+$]=t[b*d+$];v[C]=r[b],c[b]=C}for(let b=0;b<u;++b)if(x[b]===0){const k=b===0?0:p[b-1];g[k*d+0]=b;for(let C=1;C<d;++C)g[k*d+C]=0;v[k]=i}return[g,[y,d],v,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KU(t,e,n,r,s){const o=ve(r),i=e[0],a=s.length,u=[];let l=1,c=-1;for(let y=0;y<a;++y){const g=s[y];if(g===-1){if(c!==-1)throw new Error(MB(c,y));c=y,u.push(1)}else{if(g<0)throw new Error(zB(y,g));l*=g,u.push(g)}}if(c!==-1){if(l<=0)throw new Error(BB());const y=Math.trunc(o/l);if(l*y!==o)throw new Error(VB(r,u));u[c]=y}if(ve(u)!==o)throw new Error(UB(r,u));const h=r.length,f=[];if(h>0){f[h-1]=1;for(let y=h-2;y>=0;--y)f[y]=f[y+1]*r[y+1]}const p=[];if(a>0){p[a-1]=1;for(let y=a-2;y>=0;--y)p[y]=p[y+1]*u[y+1]}const m=Mn(n,i*a);for(let y=0;y<i;++y){let g=0;for(let v=0;v<h;++v)g+=t[y*h+v]*f[v];for(let v=0;v<a;++v)m[y*a+v]=Math.trunc(g/p[v]),g%=p[v]}return[m,[i,a],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QE(t,e,n,r,s,o=!1,i=0){const a=r.length,u=[e[0],t.length/e[0]],l=u[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error(Hk());const h=e.slice();h[0]=d;const f=h.reduce((x,b)=>x*b,1),p=Mn(n,f);if(a===0)return d>0&&p.fill(i),[p,h];if(d<=0)throw new Error(Hk());let m=0,y=1,g=0,v=s[m];for(;;){let x=0;if(y<a){if(x=s[y],v===x){++y;continue}if(v>=x)throw new Error(WB())}if(v<0||v>=d)throw new Error(jB(v,d));v>g&&p.fill(i,g*l,v*l);for(let b=m;b<y;++b){const w=r[b];if(w<0||w>=u[0])throw new Error(GB(b,r[b],u[0]));for(let k=0;k<l;k++)p[v*l+k]+=t[w*l+k]}if(o)for(let b=0;b<l;b++)p[v*l+b]/=y-m;if(m=y,++y,g=v+1,v=x,y>a)break}return g<d&&p.fill(i,g*l,d*l),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uSe=Ai(t=>Math.sqrt(t)),cSe=jt(wm,t=>Math.sqrt(t)),dSe={kernelName:wm,backendName:"cpu",kernelFunc:cSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qU=Wn((t,e)=>{const n=t-e;return n*n}),hSe=ar(Sm,qU),fSe={kernelName:Sm,backendName:"cpu",kernelFunc:hSe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XU=Ai((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),pSe=Cl(oI,XU),mSe={kernelName:oI,backendName:"cpu",kernelFunc:pSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YU(t,e,n,r){const s=kt(t,e.dtype);for(let o=0;o<s.size;o++){const i=s.indexToLoc(o),a=new Array(i.length);for(let u=0;u<a.length;u++)a[u]=i[u]*n[u]+r[u];s.set(e.get(...a),...i)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gSe{constructor(e,n,r,s,o,i){this.separator=qa(e),this.nGramWidths=n,this.leftPad=qa(r),this.rightPad=qa(s),this.padWidth=o,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,o,i){for(let a=0;a<o;++a){const u=this.getPadWidth(i),l=Math.max(0,u-a),c=Math.max(0,u-(o-(a+1))),d=i-(l+c),h=n+(l>0?0:a-u);let f=0;f+=l*this.leftPad.length;for(let v=0;v<d;++v)f+=e[h+v].length;f+=c*this.rightPad.length;const p=l+c+d-1;f+=p*this.separator.length,r[s+a]=new Uint8Array(f);const m=r[s+a];let y=0;const g=v=>v.forEach(x=>m[y++]=x);for(let v=0;v<l;++v)g(this.leftPad),g(this.separator);for(let v=0;v<d-1;++v)g(e[h+v]),g(this.separator);if(d>0){g(e[h+d-1]);for(let v=0;v<c;++v)g(this.separator),g(this.rightPad)}else{for(let v=0;v<c-1;++v)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<s;++l){let c=n[l]>=u;if(c=c&&n[l]<=r,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${u}, ${r}]`);u=n[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const o=s-1,i=Mn("int32",s);if(r===0||s===0){const u=new Array(r);for(let l=0;l<=o;++l)i[l]=0;return[u,i]}i[0]=0;for(let u=1;u<=o;++u){const l=n[u]-n[u-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(l,d)}),this.preserveShort&&l>0&&c===0&&(c=1),i[u]=i[u-1]+c}const a=new Array(i[o]);for(let u=0;u<o;++u){const l=n[u];let c=i[u];if(this.nGramWidths.forEach(d=>{const h=n[u+1]-n[u],f=this.getNumNGrams(h,d);this.createNGrams(e,l,a,c,f,d),c+=f}),this.preserveShort&&c===i[u]){const d=n[u+1]-n[u];if(d===0)continue;const h=d+2*this.padWidth,f=1;this.createNGrams(e,l,a,c,f,h)}}return[a,i]}}function ZU(t,e,n,r,s,o,i,a){return new gSe(n,r,s,o,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let o=0;o<t.length;++o)r.push(t.subarray(o,o+1));return}if(e.length===1){const o=e[0];let i=t.indexOf(o);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&r.push(a),t=t.subarray(i+1),i=t.indexOf(o)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let o=0;o<t.length+1;o++)if(o===t.length||e.indexOf(t[o])!==-1){const i=t.subarray(s,o);(!n||i.length!==0)&&r.push(i),s=o+1}}function QU(t,e,n){const r=t.length,s=[];let o=0,i=0;const a=new Array(r);for(let h=0;h<r;++h){const f=s.length;ySe(t[h],e,n,s);const p=s.length-f;a[h]=p,o+=p,i=Math.max(i,p)}const u=Mn("int32",o*2),l=new Array(o),c=[r,i];let d=0;for(let h=0;h<r;++h)for(let f=0;f<a[h];++f)u[d*2]=h,u[d*2+1]=f,l[d]=s[d],++d;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JU(t,e){const n=Mn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=_he(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e6=Wn((t,e)=>t-e),vSe=qE((t,e,n,r)=>({real:t-n,imag:e-r})),JE=ar(km,e6,vSe),xSe={kernelName:km,backendName:"cpu",kernelFunc:JE};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=kt(n,t.dtype);for(let s=0;s<r.values.length;++s){const o=r.indexToLoc(s),i=new Array(t.rank);for(let u=0;u<i.length;u++)i[u]=o[u]%t.shape[u];const a=t.locToIndex(i);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function n6(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,u=e-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(a-c)/a)*Math.sign(u-a/2),h=Math.max(n,Math.floor(e-u*c/a+d)),f=Math.min(r,Math.floor(e+(a-u)*c/a+d));n6(t,e,h,f)}const s=t[e];let o=n,i=r;for(vc(t,n,e),qh(t[r],s)>0&&vc(t,n,r);o<i;){for(vc(t,o,i),o++,i--;qh(t[o],s)<0;)o=o+1;for(;qh(t[i],s)>0;)i=i-1}qh(t[n],s)===0?vc(t,n,i):(i=i+1,vc(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function r6(t,e,n,r,s){const o=e[e.length-1],[i,a]=[t.length/o,o],u=_r(n,i*r),l=_r("int32",i*r);for(let d=0;d<i;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((v,x)=>p[x]={value:v,index:x}),r<p.length&&(n6(p,r),p=p.slice(0,r)),s&&p.sort(qh);const m=d*r,y=u.subarray(m,m+r),g=l.subarray(m,m+r);for(let v=0;v<r;v++)y[v]=p[v].value,g[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[kt(c,n,u),kt(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6(t,e,n,r){const s=Ct(e,n)[0],o=[1,n[0],1];for(let p=0;p<s;p++)o[0]*=n[p];o[1]=n[s];for(let p=s+1;p<n.length;p++)o[2]*=n[p];const i=new Map,a=new Int32Array(n[s]),u=new xr(o,r,t),l=[],c=o[0]===1&&o[2]===1;for(let p=0;p<n[s];p++){let m;if(c)m=t[p].toString();else{const g=[];for(let v=0;v<o[0];v++)for(let x=0;x<o[2];x++)g.push(u.get(v,p,x));m=g.join(",")}const y=i.get(m);if(y!=null)a[p]=y;else{const g=i.size;i.set(m,g),a[p]=g,l.push(p)}}const d=o.slice();d[1]=i.size;const h=new xr(d,r);l.forEach((p,m)=>{for(let y=0;y<o[0];y++)for(let g=0;g<o[2];g++)h.set(u.get(y,p,g),y,m,g)});const f=n.slice();return f[s]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bSe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:fU,bincountImpl:XE,bincountReduceImpl:pU,bitwiseAndImpl:mU,castImpl:hU,ceilImpl:gU,concatImpl:yU,equalImpl:vU,expImpl:bU,expm1Impl:SU,floorDivImpl:CU,floorImpl:kU,gatherNdImpl:$U,gatherV2Impl:IU,greaterEqualImpl:TU,greaterImpl:EU,lessEqualImpl:NU,lessImpl:_U,linSpaceImpl:RU,logImpl:AU,maxImpl:DU,maximumImpl:OU,minimumImpl:PU,multiplyImpl:YE,negImpl:LU,notEqualImpl:FU,prodImpl:MU,raggedGatherImpl:zU,raggedRangeImpl:BU,raggedTensorToTensorImpl:VU,rangeImpl:UU,rsqrtImpl:WU,scatterImpl:Zl,sigmoidImpl:iSe,simpleAbsImpl:dU,sliceImpl:GU,sparseFillEmptyRowsImpl:HU,sparseReshapeImpl:KU,sparseSegmentReductionImpl:QE,sqrtImpl:uSe,squaredDifferenceImpl:qU,staticRegexReplaceImpl:XU,stridedSliceImpl:YU,stringNGramsImpl:ZU,stringSplitImpl:QU,stringToHashBucketFastImpl:JU,subImpl:e6,tileImpl:t6,topKImpl:r6,transposeImpl:ZE,uniqueImpl:s6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */S4("cpu",()=>new Hx,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o6=jt(Hp,t=>t>=0?t:Math.exp(t)-1),wSe={kernelName:Hp,backendName:"cpu",kernelFunc:o6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:o}=r;qe([s],"leakyRelu");const i=ve(s.shape),a=n.data.get(s.dataId).values,u=_r("float32",i);for(let l=0;l<a.length;l++)u[l]=a[l]<0?o*a[l]:a[l];return n.makeTensorInfo(s.shape,"float32",u)}const SSe={kernelName:Gv,backendName:"cpu",kernelFunc:i6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kSe=Wn((t,e)=>t<0?e*t:t);function a6(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;qe([r,s],"prelu");const o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,[a,u]=kSe(r.shape,s.shape,o,i,"float32");return n.makeTensorInfo(u,"float32",a)}const CSe={kernelName:cx,backendName:"cpu",kernelFunc:a6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6=jt(dm,t=>Math.max(0,t)),$Se={kernelName:dm,backendName:"cpu",kernelFunc:l6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u6=jt(hm,t=>Math.min(Math.max(0,t),6)),ISe={kernelName:hm,backendName:"cpu",kernelFunc:u6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uy(t,e,n,r,s){if(n==="linear")return Ti({inputs:{x:e},backend:t});if(n==="relu")return l6({inputs:{x:e},backend:t});if(n==="elu")return o6({inputs:{x:e},backend:t});if(n==="relu6")return u6({inputs:{x:e},backend:t});if(n==="prelu")return a6({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return i6({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return jU({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function an(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:o}=r,i=ve(s.shape),a=Tz(o,i),u=ve(a);B(i===u,()=>`The new shape (${a}) has ${u} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const l=n.data.get(s.dataId);if(l.complexTensorInfos!=null){const c=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const ESe={kernelName:hx,backendName:"cpu",kernelFunc:an};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c6(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o}=e,{transposeA:i,transposeB:a}=r;qe([s,o],"matMul");const u=s.shape.length,l=o.shape.length,c=i?s.shape[u-2]:s.shape[u-1],d=a?o.shape[l-1]:o.shape[l-2],h=i?s.shape[u-1]:s.shape[u-2],f=a?o.shape[l-2]:o.shape[l-1],p=s.shape.slice(0,-2),m=o.shape.slice(0,-2),y=ve(p),g=ve(m),x=ht(s.shape.slice(0,-2),o.shape.slice(0,-2)).concat([h,f]);B(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${s.shape} and ${o.shape} and transposeA=${i} and transposeB=${a} must match.`);const b=i?[y,c,h]:[y,h,c],w=a?[g,f,d]:[g,d,f],k=an({inputs:{x:s},backend:n,attrs:{shape:b}}),C=an({inputs:{x:o},backend:n,attrs:{shape:w}}),$=i?k.shape[1]:k.shape[2],E=i?k.shape[2]:k.shape[1],S=a?C.shape[1]:C.shape[2],R=Math.max(y,g),T=n.data.get(k.dataId).values,P=n.data.get(C.dataId).values,I=Qe(k.shape),A=Qe(C.shape),[L,V,z]=i?[I[0],1,I[1]]:[I[0],I[1],1],[M,_,F]=a?[1,A[1],A[0]]:[A[1],1,A[0]],O=E*S,D=kt([R,E,S],k.dtype),j=D.values,G=n.blockSize;for(let J=0;J<R;J++){const me=J%y,fe=J%g;for(let he=0;he<E;he+=G){const Te=Math.min(he+G,E);for(let Re=0;Re<S;Re+=G){const Me=Math.min(Re+G,S);for(let Ve=0;Ve<$;Ve+=G){const N=Math.min(Ve+G,$);for(let ue=he;ue<Te;ue++)for(let ne=Re;ne<Me;ne++){let W=0;for(let U=Ve;U<N;U++){const Z=T[me*L+ue*V+U*z],xe=P[U*M+ne*_+fe*F];W+=Z*xe}j[J*O+(ue*S+ne)]+=W}}}}}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(x,D.dtype,D.values)}const TSe={kernelName:Nv,backendName:"cpu",kernelFunc:c6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:d}=r;let h,f,p;const m=[];h=c6({inputs:{a:s,b:o},attrs:{transposeA:u,transposeB:l},backend:n}),i&&(f=Sd({inputs:{a:h,b:i},backend:n}),m.push(h),h=f),c&&(p=Uy(n,h,c,a,d),m.push(h),h=p);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}const NSe={kernelName:xy,backendName:"cpu",kernelFunc:_Se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSe=jt(Dp,t=>Math.acos(t)),ASe={kernelName:Dp,backendName:"cpu",kernelFunc:RSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DSe=jt(Op,t=>Math.acosh(t)),OSe={kernelName:Op,backendName:"cpu",kernelFunc:DSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSe(t){const{inputs:e,backend:n}=t,r=e;qe(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),o=kt(r[0].shape,r[0].dtype),i=o.values;for(let a=0;a<r.length;a++){const u=s[a];for(let l=0;l<i.length;l++)i[l]+=u[l]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}const LSe={kernelName:C$,backendName:"cpu",kernelFunc:PSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;qe(s,"all");const a=Ct(o,s.shape);let u=a;const l=In(u,s.shape.length);let c=s;l!=null&&(c=ss({inputs:{x:s},backend:n,attrs:{perm:l}}),u=Vn(u.length,s.shape.length)),Sr("all",u,c.shape.length);const[d,h]=pr(c.shape,u),f=ve(h),p=Nr(ve(d),c.dtype),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let x=m[v];for(let b=0;b<f;++b){const w=m[v+b];x=x&&w}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(d,c.dtype,p);if(i){const g=qn(d,a),v=an({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const MSe={kernelName:$$,backendName:"cpu",kernelFunc:FSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;qe(s,"any");const a=Ct(o,s.shape);let u=a;const l=In(u,s.shape.length);let c=s;l!=null&&(c=ss({inputs:{x:s},backend:n,attrs:{perm:l}}),u=Vn(u.length,s.shape.length)),Sr("any",u,c.shape.length);const[d,h]=pr(c.shape,u),f=ve(h),p=Nr(ve(d),c.dtype),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let x=m[v];for(let b=0;b<f;++b){const w=m[v+b];x=x||w}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(d,c.dtype,p);if(i){const g=qn(d,a),v=an({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const BSe={kernelName:I$,backendName:"cpu",kernelFunc:zSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;qe(s,"argMax");let i=Ct(o,s.shape);const a=In(i,s.shape.length);let u=s;const l=[];a!=null&&(u=ss({inputs:{x:s},backend:n,attrs:{perm:a}}),l.push(u),i=Vn(i.length,u.shape.length)),i=[i[0]],Sr("argMax",i,u.shape.length);const[c,d]=pr(u.shape,i),h=ve(c),f=Nr(h,"int32"),p=ve(d),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],x=0;for(let b=0;b<p;++b){const w=m[g+b];w>v&&(v=w,x=b)}f[y]=x}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",f)}const USe={kernelName:Iv,backendName:"cpu",kernelFunc:VSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;qe(s,"argMin");let i=Ct(o,s.shape);const a=In(i,s.shape.length);let u=s;const l=[];a!=null&&(u=ss({inputs:{x:s},backend:n,attrs:{perm:a}}),l.push(u),i=Vn(i.length,u.shape.length)),i=[i[0]],Sr("argMin",i,u.shape.length);const[c,d]=pr(u.shape,i),h=ve(c),f=Nr(h,"int32"),p=ve(d),m=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],x=0;for(let b=0;b<p;++b){const w=m[g+b];w<v&&(v=w,x=b)}f[y]=x}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",f)}const jSe={kernelName:Ev,backendName:"cpu",kernelFunc:WSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GSe=jt(Pp,t=>Math.asin(t)),HSe={kernelName:Pp,backendName:"cpu",kernelFunc:GSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KSe=jt(Lp,t=>Math.asinh(t)),qSe={kernelName:Lp,backendName:"cpu",kernelFunc:KSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSe=jt(Fp,t=>Math.atan(t)),YSe={kernelName:Fp,backendName:"cpu",kernelFunc:XSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZSe=Wn((t,e)=>Math.atan2(t,e)),QSe=ar(zp,ZSe),JSe={kernelName:zp,backendName:"cpu",kernelFunc:QSe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke=jt(Mp,t=>Math.atanh(t)),tke={kernelName:Mp,backendName:"cpu",kernelFunc:eke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(t,e,n,r,s,o){const i=s.strideHeight,a=s.strideWidth,u=s.dilationHeight,l=s.dilationWidth,c=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,f=s.padInfo.left,p=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=kt(s.outShape,n),y=m.values,g=s.outShape[1]*s.outShape[2]*s.outShape[3],v=s.outShape[2]*s.outShape[3],x=s.outShape[3];for(let b=0;b<s.batchSize;++b){const w=b*g,k=b*r[0];for(let C=0;C<s.inChannels;++C)for(let $=0;$<s.outHeight;++$){const E=$*i-h,S=Math.max(0,E),R=Math.min(s.inHeight,c+E),T=w+$*v;for(let P=0;P<s.outWidth;++P){const I=P*a-f,A=Math.max(0,I),L=Math.min(s.inWidth,d+I);let V=p,z=0,M=0;for(let F=S;F<R;F+=u){const O=k+F*r[1];for(let D=A;D<L;D+=l){const j=O+D*r[2],G=t[j+C];o==="max"&&G>V?V=G:o==="avg"&&(z+=G,M++)}if(isNaN(V))break}const _=T+P*x+C;y[_]=o==="avg"?z/M:V}}}return m}function d6(t,e,n,r,s=!1,o=!1){const i=kt(r.outShape,"int32"),a=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,m=kt(e,n,t);for(let y=0;y<r.batchSize;++y)for(let g=0;g<r.inChannels;++g)for(let v=0;v<r.outHeight;++v){const x=v*a-f;let b=x;for(;b<0;)b+=l;const w=Math.min(r.inHeight,d+x);for(let k=0;k<r.outWidth;++k){const C=k*u-p;let $=C;for(;$<0;)$+=c;const E=Math.min(r.inWidth,h+C);let S=Number.NEGATIVE_INFINITY,R=-1;for(let T=b;T<w;T+=l){const P=T-x;for(let I=$;I<E;I+=c){const A=I-C,L=m.get(y,T,I,g);L>S&&(S=L,s?R=o?((y*r.inHeight+T)*r.inWidth+I)*r.inChannels+g:(T*r.inWidth+I)*r.inChannels+g:R=P*h+A)}}i.set(R,y,v,k,g)}}return i}function h6(t,e,n,r,s,o){const i=s.strideDepth,a=s.strideHeight,u=s.strideWidth,l=s.dilationDepth,c=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,f=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.front,y=s.padInfo.top,g=s.padInfo.left,v=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=kt(s.outShape,n),b=x.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],k=s.outShape[2]*s.outShape[3]*s.outShape[4],C=s.outShape[3]*s.outShape[4],$=s.outShape[4];for(let E=0;E<s.batchSize;++E){const S=E*w,R=E*r[0];for(let T=0;T<s.inChannels;++T)for(let P=0;P<s.outDepth;++P){const I=P*i-m;let A=I;for(;A<0;)A+=l;const L=Math.min(s.inDepth,h+I),V=S+P*k;for(let z=0;z<s.outHeight;++z){const M=z*a-y;let _=M;for(;_<0;)_+=c;const F=Math.min(s.inHeight,f+M),O=V+z*C;for(let D=0;D<s.outWidth;++D){const j=D*u-g;let G=j;for(;G<0;)G+=d;const J=Math.min(s.inWidth,p+j),me=O+D*$;let fe=v,he=0,Te=0;for(let Me=A;Me<L;Me+=l){const Ve=R+Me*r[1];for(let N=_;N<F;N+=c){const ue=Ve+N*r[2];for(let ne=G;ne<J;ne+=d){const W=ue+ne*r[3],U=t[W+T];if(o==="max"&&U>fe?fe=U:o==="avg"&&(he+=U,Te++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}const Re=me+T;b[Re]=o==="avg"?he/Math.max(Te,1):fe}}}}return x}function nke(t,e){const n=kt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,o=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,u=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let y=0;y<e.inChannels;++y)for(let g=0;g<e.outDepth;++g){const v=g*r-h;let x=v;for(;x<0;)x+=i;const b=Math.min(e.inDepth,l+v);for(let w=0;w<e.outHeight;++w){const k=w*s-f;let C=k;for(;C<0;)C+=a;const $=Math.min(e.inHeight,c+k);for(let E=0;E<e.outWidth;++E){const S=E*o-p;let R=S;for(;R<0;)R+=u;const T=Math.min(e.inWidth,d+S);let P=Number.NEGATIVE_INFINITY,I=-1;for(let A=x;A<b;A+=i){const L=A-v;for(let V=C;V<$;V+=a){const z=V-k;for(let M=R;M<T;M+=u){const _=M-S,F=t.get(m,A,V,M,y);F>=P&&(P=F,I=L*c*d+z*c+_)}}}n.set(I,m,g,w,E,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;qe(s,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:u}=r,l=1;B(Dr(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=$o(s.shape,o,i,l,a,u);let d;if(c.filterWidth===1&&c.filterHeight===1&&Ft(c.inShape,c.outShape))d=Ti({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=Qe(s.shape),p=eT(h,s.shape,s.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return d}const ske={kernelName:Tv,backendName:"cpu",kernelFunc:rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:u,dataFormat:l}=r;qe(s,"avgPool3d");const c=fa(s.shape,o,i,1,a,u,l),d=n.data.get(s.dataId).values,h=h6(d,s.shape,s.dtype,Qe(s.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const ike={kernelName:_v,backendName:"cpu",kernelFunc:oke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ake(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,{filterSize:i,strides:a,pad:u,dimRoundingMode:l}=r;qe([s,o],"avgPool3DGrad");const c=fa(o.shape,i,a,1,u,l),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,p=c.filterDepth,m=c.filterHeight,y=c.filterWidth,g=c.dilationDepth,v=c.dilationHeight,x=c.dilationWidth,b=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,C=b-1-c.padInfo.front,$=k-1-c.padInfo.left,E=w-1-c.padInfo.top,S=kt(o.shape,"float32"),R=1/(p*m*y),T=n.bufferSync(s);for(let P=0;P<c.batchSize;++P)for(let I=0;I<c.inChannels;++I)for(let A=0;A<c.inDepth;++A)for(let L=0;L<c.inHeight;++L)for(let V=0;V<c.inWidth;++V){const z=A-C,M=L-E,_=V-$;let F=0;for(let O=0;O<b;O+=g){const D=(z+O)/d;if(!(D<0||D>=c.outDepth||Math.floor(D)!==D))for(let j=0;j<w;j+=v){const G=(M+j)/h;if(!(G<0||G>=c.outHeight||Math.floor(G)!==G))for(let J=0;J<k;J+=x){const me=(_+J)/f;if(me<0||me>=c.outWidth||Math.floor(me)!==me)continue;const fe=T.get(P,D,G,me,I);F+=fe}}}S.set(F*R,P,A,L,V,I)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const lke={kernelName:T$,backendName:"cpu",kernelFunc:ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o;qe([s,o],"avgPoolGrad");const{filterSize:a,strides:u,pad:l}=r,c=$o(i.shape,a,u,1,l),d=c.strideHeight,h=c.strideWidth,f=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,y=c.dilationWidth,g=c.effectiveFilterHeight,v=c.effectiveFilterWidth,x=v-1-c.padInfo.left,b=g-1-c.padInfo.top,w=kt(i.shape,"float32"),k=1/(f*p),C=n.data.get(s.dataId).values,$=kt(s.shape,"float32",C);for(let E=0;E<c.batchSize;++E)for(let S=0;S<c.inChannels;++S)for(let R=0;R<c.inHeight;++R)for(let T=0;T<c.inWidth;++T){const P=R-b,I=T-x;let A=0;for(let L=0;L<g;L+=m){const V=(P+L)/d;if(!(V<0||V>=c.outHeight||Math.floor(V)!==V))for(let z=0;z<v;z+=y){const M=(I+z)/h;if(M<0||M>=c.outWidth||Math.floor(M)!==M)continue;const _=$.get(E,V,M,S);A+=_}}w.set(A*k,E,R,T,S)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const cke={kernelName:E$,backendName:"cpu",kernelFunc:uke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:o,offset:i,mean:a,variance:u}=e;B(a.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),qe([s,a,u,o,i],"batchNorm");let{varianceEpsilon:l}=r;l==null&&(l=.001);const c=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(u.dataId).values,f=o?n.data.get(o.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),y=p.length,g=f.length,v=h.length,x=d.length;let b=0,w=0,k=0,C=0;for(let $=0;$<c.length;++$)m[$]=p[b++]+(c[$]-d[w++])*f[k++]/Math.sqrt(h[C++]+l),b>=y&&(b=0),w>=x&&(w=0),k>=g&&(k=0),C>=v&&(C=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const hke={kernelName:Uv,backendName:"cpu",kernelFunc:dke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,crops:i}=r;qe([s],"batchToSpaceND");const a=o.reduce((g,v)=>g*v),u=Pm(s.shape,o,a),l=Lm(u.length,o.length),c=Fm(s.shape,o,a),d=aE(i,o.length),h=lE(c,i,o.length),f=an({inputs:{x:s},backend:n,attrs:{shape:u}}),p=ss({inputs:{x:f},backend:n,attrs:{perm:l}}),m=an({inputs:{x:p},backend:n,attrs:{shape:c}}),y=_u({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}const pke={kernelName:Rv,backendName:"cpu",kernelFunc:fke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i}=r,a=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,l=XE(a,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}const gke={kernelName:_$,backendName:"cpu",kernelFunc:mke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,o=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,a=ht(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const vke={kernelName:Oz,backendName:"cpu",kernelFunc:yke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xke=jt(Up,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),bke={kernelName:Up,backendName:"cpu",kernelFunc:xke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wke=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ve(e.shape)),s=n.data.get(e.dataId),o=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,a=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values;for(let l=0;l<a.length;l++){const c=a[l],d=u[l];r[l]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},Ske={kernelName:Av,backendName:"cpu",kernelFunc:wke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kd(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const kke={kernelName:K$,backendName:"cpu",kernelFunc:kd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cd(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,o=Ct(s,e[0].shape)[0],i=e.map(m=>m.shape);sE(i,o);let a=bi(e.map(m=>m.shape),o);if(ve(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const u=e.filter(m=>ve(m.shape)>0);if(u.length===1)return Ti({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const m=u.map(b=>Tu({inputs:{input:b},backend:n})),y=u.map(b=>kd({inputs:{input:b},backend:n})),g=Cd({inputs:m,backend:n,attrs:{axis:o}}),v=Cd({inputs:y,backend:n,attrs:{axis:o}}),x=ps({inputs:{real:g,imag:v},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),y.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),x}const l=u.map(m=>{const g=[-1,ve(m.shape.slice(o))];return an({inputs:{x:m},backend:n,attrs:{shape:g}})}),c=l.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=bi(l.map(m=>m.shape),1);const d=l[0].shape[0]===1,h=yU(c,a,e[0].dtype,d),f=bi(u.map(m=>m.shape),o),p=n.makeTensorInfo(f,e[0].dtype,h);return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Cke={kernelName:Dv,backendName:"cpu",kernelFunc:Cd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dataFormat:u,dilations:l,dimRoundingMode:c}=r;qe([s,o],"conv2d");const d=pa(u),h=wr(s.shape,o.shape,i,l,a,c,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,y=h.dilationWidth,g=h.padInfo.left,v=h.padInfo.top,x=h.dataFormat==="channelsLast",b=new xr(h.outShape,s.dtype),w=Qe(s.shape),k=Qe(o.shape),C=w[0],$=x?w[1]:w[2],E=x?w[2]:1,S=x?1:w[1],R=b.strides[0],T=x?b.strides[1]:b.strides[2],P=x?b.strides[2]:1,I=x?1:b.strides[1],A=n.data.get(s.dataId).values,L=n.data.get(o.dataId).values,V=b.values;for(let z=0;z<h.batchSize;++z){const M=z*C,_=z*R;for(let F=0;F<h.outHeight;++F){const O=_+F*T,D=F*h.strideHeight-v;for(let j=0;j<f;++j){const G=D+j*m;if(G<0||G>=h.inHeight)continue;const J=j*k[0],me=M+G*$;for(let fe=0;fe<h.outWidth;++fe){const he=O+fe*P,Te=fe*h.strideWidth-g;for(let Re=0;Re<p;++Re){const Me=Te+Re*y;if(Me<0||Me>=h.inWidth)continue;const Ve=J+Re*k[1],N=me+Me*E;let ue=Ve;for(let ne=0;ne<h.inChannels;++ne){const W=A[N+ne*S];for(let U=0;U<h.outChannels;++U)V[he+U*I]+=W*L[ue+U];ue+=h.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,V)}const $ke={kernelName:Ov,backendName:"cpu",kernelFunc:f6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;qe([s,o],"conv2dBackpropFilter");const d=pa(u),h=wr(s.shape,c,i,1,a,l,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:y}=h,g=h.dataFormat==="channelsLast",v=new xr(h.filterShape,"float32"),x=h.padInfo.left,b=h.padInfo.top,w=n.data.get(s.dataId).values,k=n.data.get(o.dataId).values,C=new xr(s.shape,s.dtype,w),$=new xr(o.shape,o.dtype,k);for(let E=0;E<m;++E){const S=Math.max(0,Math.ceil((b-E)/f)),R=Math.min(h.outHeight,(h.inHeight+b-E)/f);for(let T=0;T<y;++T){const P=Math.max(0,Math.ceil((x-T)/p)),I=Math.min(h.outWidth,(h.inWidth+x-T)/p);for(let A=0;A<h.inChannels;++A)for(let L=0;L<h.outChannels;++L){let V=0;for(let z=0;z<h.batchSize;++z)for(let M=S;M<R;++M){const _=E+M*f-b;for(let F=P;F<I;++F){const O=T+F*p-x;g?V+=C.get(z,_,O,A)*$.get(z,M,F,L):V+=C.get(z,A,_,O)*$.get(z,L,M,F)}}v.set(V,E,T,A,L)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Eke={kernelName:A$,backendName:"cpu",kernelFunc:Ike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{inputShape:i,strides:a,pad:u,dataFormat:l,dimRoundingMode:c}=r;qe([s,o],"conv2dBackpropInput");const d=Qe(o.shape),h=Qe(s.shape);let f=pa(l);const p=wr(i,o.shape,a,1,u,c,!1,f),m=new xr(p.inShape,"float32"),y=m.values,g=n.data.get(s.dataId).values,v=n.data.get(o.dataId).values,[x,b,w]=d,{batchSize:k,filterHeight:C,filterWidth:$,inChannels:E,inHeight:S,inWidth:R,outChannels:T,outHeight:P,outWidth:I,strideHeight:A,strideWidth:L}=p;f=p.dataFormat;const V=C-1-p.padInfo.top,z=$-1-p.padInfo.left,M=f==="channelsLast",_=m.strides[0],F=M?m.strides[1]:m.strides[2],O=M?m.strides[2]:1,D=M?1:m.strides[1],j=h[0],G=M?h[1]:h[2],J=M?h[2]:1,me=M?1:h[1];for(let fe=0;fe<k;++fe)for(let he=0;he<E;++he)for(let Te=0;Te<S;++Te){const Re=Te-V,Me=Math.max(0,Math.ceil(Re/A)),Ve=Math.min(P,(C+Re)/A);for(let N=0;N<R;++N){const ue=N-z,ne=Math.max(0,Math.ceil(ue/L)),W=Math.min(I,($+ue)/L);let U=0;for(let xe=Me;xe<Ve;++xe){const ce=xe*A-Re;for(let ie=ne;ie<W;++ie){const _e=ie*L-ue,Oe=j*fe+G*xe+J*ie,Ee=x*(C-1-ce)+b*($-1-_e)+w*he;for(let te=0;te<T;++te){const ge=g[Oe+me*te],ke=v[Ee+te];U+=ge*ke}}}const Z=_*fe+F*Te+O*N+D*he;y[Z]=U}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const _ke={kernelName:Pv,backendName:"cpu",kernelFunc:Tke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:u}=r;qe([s,o],"conv3d");const l=vl(s.shape,o.shape,i,u,a),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:y}=l,g=y.front,v=y.left,x=y.top,b=new xr(l.outShape,s.dtype),w=n.data.get(s.dataId).values,k=n.data.get(o.dataId).values,C=b.values,$=Qe(s.shape),E=Qe(o.shape);for(let S=0;S<l.batchSize;++S){const R=S*$[0],T=S*b.strides[0];for(let P=0;P<l.outDepth;++P){const I=T+P*b.strides[1],A=P*l.strideDepth-g;for(let L=0;L<c;++L){const V=A+L*f;if(V<0||V>=l.inDepth)continue;const z=L*E[0],M=R+V*$[1];for(let _=0;_<l.outHeight;++_){const F=I+_*b.strides[2],O=_*l.strideHeight-x;for(let D=0;D<d;++D){const j=O+D*p;if(j<0||j>=l.inHeight)continue;const G=z+D*E[1],J=M+j*$[2];for(let me=0;me<l.outWidth;++me){const fe=F+me*l.outChannels,he=me*l.strideWidth-v;for(let Te=0;Te<h;++Te){const Re=he+Te*m;if(Re<0||Re>=l.inWidth)continue;const Me=G+Te*E[2],Ve=J+Re*l.inChannels;let N=Me;for(let ue=0;ue<l.inChannels;++ue){const ne=w[Ve+ue];for(let W=0;W<l.outChannels;++W)C[fe+W]+=ne*k[N+W];N+=l.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Rke={kernelName:Lv,backendName:"cpu",kernelFunc:Nke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,filterShape:u}=r;qe([s,o],"conv3dBackpropFilterV2");const l=Qe(s.shape),c=Qe(o.shape),d=vl(s.shape,u,i,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,y=d.filterHeight,g=d.filterWidth,v=new xr(d.filterShape,"float32"),x=v.values,[b,w,k,C]=v.strides,$=n.data.get(o.dataId).values,[E,S,R,T]=c,P=n.data.get(s.dataId).values,[I,A,L,V]=l,z=d.padInfo.front,M=d.padInfo.left,_=d.padInfo.top;for(let F=0;F<m;++F){const O=Math.max(0,Math.ceil((z-F)/h)),D=Math.min(d.outDepth,(d.inDepth+z-F)/h),j=F*b;for(let G=0;G<y;++G){const J=Math.max(0,Math.ceil((_-G)/f)),me=Math.min(d.outHeight,(d.inHeight+_-G)/f),fe=G*w+j;for(let he=0;he<g;++he){const Te=Math.max(0,Math.ceil((M-he)/p)),Re=Math.min(d.outWidth,(d.inWidth+M-he)/p),Me=he*k+fe;for(let Ve=0;Ve<d.inChannels;++Ve){const N=Ve*C+Me;for(let ue=0;ue<d.outChannels;++ue){let ne=0;for(let W=0;W<d.batchSize;++W){const U=W*I,Z=W*E;for(let xe=O;xe<D;++xe){const ie=(F+xe*h-z)*A+U,_e=xe*S+Z;for(let Oe=J;Oe<me;++Oe){const te=(G+Oe*f-_)*L+ie,ge=Oe*R+_e;for(let ke=Te;ke<Re;++ke){const ot=(he+ke*p-M)*V+te,lt=ke*T+ge;ne+=P[ot+Ve]*$[lt+ue]}}}}x[N+ue]=ne}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Dke={kernelName:D$,backendName:"cpu",kernelFunc:Ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{pad:i,strides:a,inputShape:u}=r;qe([s],"conv3dBackpropInputV2");const l=Qe(s.shape),c=Qe(o.shape),d=vl(u,o.shape,a,1,i),h=new xr(d.inShape,"float32"),f=h.values,[p,m,y,g]=h.strides,v=n.data.get(s.dataId).values,[x,b,w,k]=l,C=n.data.get(o.dataId).values,[$,E,S,R]=c,{batchSize:T,filterDepth:P,filterHeight:I,filterWidth:A,inChannels:L,inDepth:V,inHeight:z,inWidth:M,outChannels:_,outDepth:F,outHeight:O,outWidth:D,strideDepth:j,strideHeight:G,strideWidth:J}=d,me=P-1-d.padInfo.front,fe=I-1-d.padInfo.top,he=A-1-d.padInfo.left;for(let Te=0;Te<T;++Te)for(let Re=0;Re<L;++Re)for(let Me=0;Me<V;++Me){const Ve=Me-me,N=Math.max(0,Math.ceil(Ve/j)),ue=Math.min(F,(P+Ve)/j);for(let ne=0;ne<z;++ne){const W=ne-fe,U=Math.max(0,Math.ceil(W/G)),Z=Math.min(O,(I+W)/G);for(let xe=0;xe<M;++xe){const ce=xe-he,ie=Math.max(0,Math.ceil(ce/J)),_e=Math.min(D,(A+ce)/J);let Oe=0;for(let Ee=N;Ee<ue;++Ee){const te=Ee*j-Ve;for(let ge=U;ge<Z;++ge){const ke=ge*G-W;for(let Ue=ie;Ue<_e;++Ue){const ot=Ue*J-ce,lt=x*Te+b*Ee+w*ge+k*Ue,Mt=$*(P-1-te)+E*(I-1-ke)+S*(A-1-ot)+R*Re;for(let ft=0;ft<_;++ft){const Lr=v[lt+ft],ae=C[Mt+ft];Oe+=Lr*ae}}}}f[p*Te+m*Me+y*ne+g*xe+Re]=Oe}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const Pke={kernelName:O$,backendName:"cpu",kernelFunc:Oke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke=jt(Wp,t=>Math.cos(t)),Fke={kernelName:Wp,backendName:"cpu",kernelFunc:Lke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke=jt(jp,t=>Math.cosh(t)),zke={kernelName:jp,backendName:"cpu",kernelFunc:Mke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:o,boxInd:i}=e,{cropSize:a,method:u,extrapolationValue:l}=r,[c,d,h,f]=s.shape,p=o.shape[0],[m,y]=a,g=kt([p,m,y,f],"float32"),v=n.data.get(o.dataId).values,x=n.data.get(i.dataId).values,b=n.data.get(s.dataId).values,w=Qe(s.shape),k=Qe(g.shape);for(let C=0;C<p;C++){const $=C*4,E=v[$],S=v[$+1],R=v[$+2],T=v[$+3],P=x[C];if(P>=c)continue;const I=m>1?(R-E)*(d-1)/(m-1):0,A=y>1?(T-S)*(h-1)/(y-1):0;for(let L=0;L<m;L++){const V=m>1?E*(d-1)+L*I:.5*(E+R)*(d-1);if(V<0||V>d-1){for(let z=0;z<y;z++)for(let M=0;M<f;M++){const _=M+z*k[2]+L*k[1]+C*k[0];g.values[_]=l}continue}if(u==="bilinear"){const z=Math.floor(V),M=Math.ceil(V),_=V-z;for(let F=0;F<y;F++){const O=y>1?S*(h-1)+F*A:.5*(S+T)*(h-1);if(O<0||O>h-1){for(let J=0;J<f;J++){const me=J+F*k[2]+L*k[1]+C*k[0];g.values[me]=l}continue}const D=Math.floor(O),j=Math.ceil(O),G=O-D;for(let J=0;J<f;J++){let me=J+D*w[2]+z*w[1]+P*w[0];const fe=b[me];me=J+j*w[2]+z*w[1]+P*w[0];const he=b[me];me=J+D*w[2]+M*w[1]+P*w[0];const Te=b[me];me=J+j*w[2]+M*w[1]+P*w[0];const Re=b[me],Me=fe+(he-fe)*G,Ve=Te+(Re-Te)*G;me=J+F*k[2]+L*k[1]+C*k[0],g.values[me]=Me+(Ve-Me)*_}}}else for(let z=0;z<y;++z){const M=y>1?S*(h-1)+z*A:.5*(S+T)*(h-1);if(M<0||M>h-1){for(let O=0;O<f;O++){const D=O+z*k[2]+L*k[1]+C*k[0];g.values[D]=l}continue}const _=Math.round(M),F=Math.round(V);for(let O=0;O<f;O++){const D=O+_*w[2]+F*w[1]+P*w[0],j=O+z*k[2]+L*k[1]+C*k[0];g.values[j]=b[D]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Vke={kernelName:L$,backendName:"cpu",kernelFunc:Bke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;qe(s,"cumprod");const u=In([o],s.shape.length);let l=s;u!=null&&(l=ss({inputs:{x:s},backend:n,attrs:{perm:u}}));const c=Vn(1,s.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const d=$s(l.dtype,"int32"),h=w$(ve(l.shape),d),f=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const x=m(g,v);if(v===0)h[x]=i?1:f[x];else{const b=m(g,v-1);h[x]=i?f[b]*h[b]:f[x]*h[b]}}const y=n.makeTensorInfo(l.shape,d,h);if(u!=null){const g=xl(u),v=ss({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),v}return y}const Wke={kernelName:P$,backendName:"cpu",kernelFunc:Uke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;qe(s,"cumsum");const u=In([o],s.shape.length);let l=s;u!=null&&(l=ss({inputs:{x:s},backend:n,attrs:{perm:u}}));const c=Vn(1,s.shape.length)[0];if(c!==l.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);const d=$s(l.dtype,"int32"),h=Nr(ve(l.shape),d),f=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],m=a?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const x=m(g,v);if(v===0)h[x]=i?0:f[x];else{const b=m(g,v-1);h[x]=i?f[b]+h[b]:f[x]+h[b]}}const y=n.makeTensorInfo(l.shape,d,h);if(u!=null){const g=xl(u),v=ss({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(l),v}return y}const Gke={kernelName:Fv,backendName:"cpu",kernelFunc:jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i,binaryOutput:a}=r;if(s.shape.length===1){const u=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=XE(u,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}else if(s.shape.length===2){const u=n.bufferSync(s),l=n.bufferSync(o),c=pU(u,l,i,a);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Kke={kernelName:F$,backendName:"cpu",kernelFunc:Hke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:o,dataFormat:i}=r;B(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=s.shape[0],u=s.shape[1],l=s.shape[2],c=s.shape[3],d=u*o,h=l*o,f=c/(o*o),p=n.data.get(s.dataId).values,m=new Float32Array(a*d*h*f);let y=0;for(let g=0;g<a;++g)for(let v=0;v<d;++v){const x=Math.floor(v/o),b=v%o;for(let w=0;w<h;++w){const k=Math.floor(w/o),C=w%o,$=(b*o+C)*f;for(let E=0;E<f;++E){const R=E+$+c*(k+l*(x+u*g));m[y++]=p[R]}}}return n.makeTensorInfo([a,d,h,f],s.dtype,m)}const Xke={kernelName:M$,backendName:"cpu",kernelFunc:qke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:u,dimRoundingMode:l}=r;qe([s,o],"depthwiseConv2DNative");const c=Qe(s.shape),d=Qe(o.shape);let h=u;h==null&&(h=[1,1]),B(Dr(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);const f=wr(s.shape,o.shape,i,h,a,l,!0),{filterHeight:p,filterWidth:m,dilationHeight:y,dilationWidth:g,padInfo:v}=f,x=v.left,b=v.top,w=f.outChannels/f.inChannels,k=new xr(f.outShape,s.dtype),C=n.data.get(s.dataId).values,$=n.data.get(o.dataId).values,E=k.values;for(let S=0;S<f.batchSize;++S){const R=S*c[0],T=S*k.strides[0];for(let P=0;P<f.outHeight;++P){const I=T+P*k.strides[1],A=P*f.strideHeight-b;for(let L=0;L<p;++L){const V=A+L*y;if(V<0||V>=f.inHeight)continue;const z=L*d[0],M=R+V*c[1];for(let _=0;_<f.outWidth;++_){const F=I+_*k.strides[2],O=_*f.strideWidth-x;for(let D=0;D<m;++D){const j=O+D*g;if(j<0||j>=f.inWidth)continue;const G=z+D*d[1],J=M+j*f.inChannels;let me=F,fe=G;for(let he=0;he<f.inChannels;++he){const Te=C[J+he];for(let Re=0;Re<w;++Re)E[me+Re]+=Te*$[fe+Re];me+=w,fe+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Yke={kernelName:Mv,backendName:"cpu",kernelFunc:p6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,filterShape:c}=r;qe([s,o],"depthwiseConv2dNativeBackpropFilter");const d=wr(s.shape,c,i,a,u,l,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,y=new xr(d.filterShape,"float32"),g=d.padInfo.left,v=d.padInfo.top,x=d.outChannels/d.inChannels,b=n.data.get(s.dataId).values,w=new xr(s.shape,s.dtype,b),k=n.data.get(o.dataId).values,C=new xr(o.shape,o.dtype,k);for(let $=0;$<p;++$){const E=Math.max(0,Math.ceil((v-$)/h)),S=Math.min(d.outHeight,(d.inHeight+v-$)/h);for(let R=0;R<m;++R){const T=Math.max(0,Math.ceil((g-R)/f)),P=Math.min(d.outWidth,(d.inWidth+g-R)/f);for(let I=0;I<d.outChannels;++I){const A=Math.trunc(I/x),L=I%x;let V=0;for(let z=0;z<d.batchSize;++z)for(let M=E;M<S;++M){const _=$+M*h-v;for(let F=T;F<P;++F){const O=R+F*f-g;V+=w.get(z,_,O,A)*C.get(z,M,F,I)}}y.set(V,$,R,A,L)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Qke={kernelName:z$,backendName:"cpu",kernelFunc:Zke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,inputShape:c}=r;qe([s,o],"depthwiseConv2DNativeBackpropInput");const d=Qe(s.shape),h=Qe(o.shape),f=wr(c,o.shape,i,a,u,l,!0),p=new xr(f.inShape,"float32"),m=p.values,[y,g,v]=p.strides,x=n.data.get(s.dataId).values,[b,w,k]=d,C=n.data.get(o.dataId).values,[$,E,S]=h,{batchSize:R,filterHeight:T,filterWidth:P,inChannels:I,inHeight:A,inWidth:L,outChannels:V,outHeight:z,outWidth:M,strideHeight:_,strideWidth:F}=f,O=T-1-f.padInfo.top,D=P-1-f.padInfo.left,j=V/I;for(let G=0;G<R;++G)for(let J=0;J<I;++J)for(let me=0;me<A;++me){const fe=me-O,he=Math.max(0,Math.ceil(fe/_)),Te=Math.min(z,(T+fe)/_);for(let Re=0;Re<L;++Re){const Me=Re-D,Ve=Math.max(0,Math.ceil(Me/F)),N=Math.min(M,(P+Me)/F);let ue=0;for(let ne=he;ne<Te;++ne){const W=ne*_-fe;for(let U=Ve;U<N;++U){const Z=U*F-Me,xe=b*G+w*ne+k*U,ce=$*(T-1-W)+E*(P-1-Z)+S*J;for(let ie=0;ie<j;++ie){const _e=J*j+ie,Oe=x[xe+_e],Ee=C[ce+ie];ue+=Oe*Ee}}}m[y*G+g*me+v*Re+J]=ue}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const eCe={kernelName:B$,backendName:"cpu",kernelFunc:Jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tCe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=ve(r.shape),o=n.data.get(r.dataId).values,i=kt([s,s],r.dtype),a=i.values;for(let l=0;l<o.length;l++)a[l*s+l]=o[l];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,i.dtype,i.values)}const nCe={kernelName:Pz,backendName:"cpu",kernelFunc:tCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rCe={kernelName:zv,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:o,pad:i,dilations:a}=n,u=e,l=u.data.get(r.dataId).values,c=r.shape.length,d=u.data.get(s.dataId).values,h=s.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:y,outHeight:g,outWidth:v,padInfo:x,strideHeight:b,strideWidth:w,filterHeight:k,filterWidth:C,dilationHeight:$,dilationWidth:E,outShape:S}=Nm(r.shape,s.shape,o,i,"NHWC",a),R=ve(S),T=S.length,P=Mn(r.dtype,R);for(let A=0;A<f;++A)for(let L=0;L<g;++L){const V=L*b-x.top;for(let z=0;z<v;++z){const M=z*w-x.left;for(let _=0;_<y;++_){let F=Number.MIN_SAFE_INTEGER;for(let D=0;D<k;++D){const j=V+D*$;if(j>=0&&j<p)for(let G=0;G<C;++G){const J=M+G*E;if(J>=0&&J<m){const me=vi([A,j,J,_],c,Qe(r.shape)),fe=vi([D,G,_],h,Qe(s.shape)),he=l[me]+d[fe];he>F&&(F=he)}}}const O=vi([A,L,z,_],T,Qe(S));P[O]=F}}}return{dataId:u.write(Mu(P,r.dtype),S,r.dtype),shape:S,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sCe={kernelName:Ek,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:o}=t,{strides:i,pad:a,dilations:u}=n,l=e,c=Wo(r.shape,l.data.get(r.dataId).values),d=Wo(s.shape,l.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:k,dilationHeight:C,dilationWidth:$,outShape:E}=Nm(r.shape,s.shape,i,a,"NHWC",u);B(o.rank===E.length,()=>`Error in ${Ek}, dy must have the same rank as output ${E.length}, but got ${o.rank}`);const S=Wo(E,l.data.get(o.dataId).values),R=Rz(s.shape,s.dtype);for(let P=0;P<h;++P)for(let I=0;I<y;++I){const A=I*x-v.top;for(let L=0;L<g;++L){const V=L*b-v.left;for(let z=0;z<m;++z){let M=Number.MIN_SAFE_INTEGER,_=0,F=0;for(let O=0;O<w;++O){const D=A+O*C;if(D>=0&&D<f)for(let j=0;j<k;++j){const G=V+j*$;if(G>=0&&G<p){const J=c[P][D][G][z]+d[O][j][z];J>M&&(M=J,_=O,F=j)}}}R[_][F][z]+=S[P][I][L][z]}}}return{dataId:l.write(Mu(R,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oCe={kernelName:Ik,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:o}=t,{strides:i,pad:a,dilations:u}=n,l=e,c=Wo(r.shape,l.data.get(r.dataId).values),d=Wo(s.shape,l.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:k,dilationHeight:C,dilationWidth:$,outShape:E}=Nm(r.shape,s.shape,i,a,"NHWC",u);B(o.rank===E.length,()=>`Error in ${Ik}, dy must have the same rank as output ${E.length}, but got ${o.rank}`);const S=Wo(E,l.data.get(o.dataId).values),R=Rz(r.shape,r.dtype);for(let P=0;P<h;++P)for(let I=0;I<y;++I){const A=I*x-v.top;for(let L=0;L<g;++L){const V=L*b-v.left;for(let z=0;z<m;++z){let M=Number.MIN_SAFE_INTEGER,_=A<0?0:A,F=V<0?0:V;for(let O=0;O<w;++O){const D=A+O*C;if(D>=0&&D<f)for(let j=0;j<k;++j){const G=V+j*$;if(G>=0&&G<p){const J=c[P][D][G][z]+d[O][j][z];J>M&&(M=J,_=D,F=G)}}}R[P][_][F][z]+=S[P][I][L][z]}}}return{dataId:l.write(Mu(R,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:o,options:i}=r,{contextOptions:a,imageOptions:u}=i||{},l=(u==null?void 0:u.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=o.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[h,f]=s.shape.slice(0,2),p=s.shape.length===2?1:s.shape[2],m=n.data.get(s.dataId).values,y=s.dtype==="float32"?255:1,g=new Uint8ClampedArray(f*h*4);for(let x=0;x<h*f;++x){const b=[0,0,0,255*l];for(let k=0;k<p;k++){const C=m[x*p+k];if(s.dtype==="float32"){if(C<0||C>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${C}.`)}else if(s.dtype==="int32"&&(C<0||C>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${C}.`);p===1?(b[0]=C*y,b[1]=C*y,b[2]=C*y):b[k]=C*y}const w=x*4;g[w+0]=Math.round(b[0]),g[w+1]=Math.round(b[1]),g[w+2]=Math.round(b[2]),g[w+3]=Math.round(b[3])}o.width=f,o.height=h;const v=new ImageData(g,f,h);return d.putImageData(v,0,0),s}const aCe={kernelName:xhe,backendName:"cpu",kernelFunc:iCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;qe(s,"sum");let a;s.dtype==="bool"?a=il({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=Ti({inputs:{x:s},backend:n});const u=a.shape.length,l=Ct(o,a.shape),c=In(l,u);let d=l,h=a;c!=null&&(h=ss({inputs:{x:a},backend:n,attrs:{perm:c}}),d=Vn(d.length,u)),Sr("sum",d,h.shape.length);const[f,p]=pr(h.shape,d),m=$s(h.dtype,"int32");let y=By(n,f,m);const g=ve(p),v=n.data.get(y.dataId).values,x=n.data.get(h.dataId).values;for(let b=0;b<v.length;++b){const w=b*g;let k=0;for(let C=0;C<g;++C)k+=x[w+C];v[b]=k}if(i){const b=qn(y.shape,l),w=y;y=an({inputs:{x:y},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(h),y}const lCe={kernelName:vx,backendName:"cpu",kernelFunc:Hm};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,o=e,{allDims:i,summedDims:a,idDims:u}=gE(s,o.length);vE(i.length,u,o);const{path:l,steps:c}=xE(a,u),d=c.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const y of c[m]){const{permutationIndices:g,expandDims:v}=yE(f,u[y]);let x;bE(g)?x=o[y]:(x=ss({inputs:{x:o[y]},backend:n,attrs:{perm:g}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);Ft(x.shape,b)||(x=an({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),h===null?h=x:(h=Kx({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(l[m]>=0&&(h=Hm({inputs:{x:h},backend:n,attrs:{axis:l[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const cCe={kernelName:V$,backendName:"cpu",kernelFunc:uCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;qe([r,s],"eluGrad");const o=new Float32Array(ve(s.shape)),i=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let u=0;u<i.length;++u){const l=i[u];l>=0?o[u]=a[u]:o[u]=a[u]*(l+1)}return n.makeTensorInfo(s.shape,"float32",o)}const hCe={kernelName:U$,backendName:"cpu",kernelFunc:dCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fCe=uE,pCe=cE,mCe=dE,gCe=hE,yCe=fE,vCe=pE,xCe=jt(Kp,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+fCe*n);return e*(1-((((vCe*r+yCe)*r+gCe)*r+mCe)*r+pCe)*r*Math.exp(-n*n))}),bCe={kernelName:Kp,backendName:"cpu",kernelFunc:xCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wy(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:o}=r,i=s.shape.length,a=s.shape.slice();let u=o;return o<0&&(B(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+o+1),a.splice(u,0,1),an({inputs:{x:s},backend:n,attrs:{shape:a}})}const wCe={kernelName:Vv,backendName:"cpu",kernelFunc:Wy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SCe=Wn((t,e)=>t/e),tT=ar(Gp,SCe),rC={kernelName:Gp,backendName:"cpu",kernelFunc:tT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6(t,e,n){const r=t.shape,s=r[0],o=r[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,l=[s,o],c=ve(l),d=_r("float32",c),h=_r("float32",c);for(let y=0;y<s;y++){const g=_u({inputs:{x:a},backend:n,attrs:{begin:[y,0],size:[1,o]}}),v=_u({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,o]}}),x=ps({inputs:{real:g,imag:v},backend:n}),{real:b,imag:w}=kCe(x,e,n),k=aa(b,w);for(let C=0;C<o;C++){const $=mE(k,C);d[y*o+C]=$.real,h[y*o+C]=$.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x)}const f=n.makeTensorInfo(l,"float32",d),p=n.makeTensorInfo(l,"float32",h),m=ps({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function kCe(t,e,n){const r=ve(t.shape),s=n.data.get(t.dataId),o=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(CCe(r)){const a=sC(o,i,r,e,n),u=[t.shape[0],t.shape[1]];if(e){const l=n.makeTensorInfo(u,"float32",a.real),c=n.makeTensorInfo(u,"float32",a.imag),d=n.makeTensorInfo([],"float32",gl(r,"float32")),h=Ti({inputs:{x:d},backend:n}),f=rC.kernelFunc({inputs:{a:l,b:d},backend:n}),p=rC.kernelFunc({inputs:{a:c,b:h},backend:n}),m=n.data.get(f.dataId).values,y=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:y}}return a}else{const a=aa(o,i),u=$Ce(a,r,e);return _B(u)}}function CCe(t){return(t&t-1)===0}function sC(t,e,n,r,s){if(n===1)return{real:t,imag:e};const o=aa(t,e),i=n/2,a=NB(o),u=a.real,l=a.imag,c=[u.length],d=s.makeTensorInfo(c,"float32",u),h=s.makeTensorInfo(c,"float32",l),f=ps({inputs:{real:d,imag:h},backend:s}),p=RB(o),m=p.real,y=p.imag,g=[m.length],v=s.makeTensorInfo(g,"float32",m),x=s.makeTensorInfo(g,"float32",y),b=ps({inputs:{real:v,imag:x},backend:s}),w=sC(u,l,i,r,s),k=w.real,C=w.imag,$=[k.length],E=s.makeTensorInfo($,"float32",k),S=s.makeTensorInfo($,"float32",C),R=ps({inputs:{real:E,imag:S},backend:s}),T=sC(m,y,i,r,s),P=T.real,I=T.imag,A=[P.length],L=s.makeTensorInfo(A,"float32",P),V=s.makeTensorInfo(A,"float32",I),z=ps({inputs:{real:L,imag:V},backend:s}),M=DB(n,r),_=[M.real.length],F=s.makeTensorInfo(_,"float32",M.real),O=s.makeTensorInfo(_,"float32",M.imag),D=ps({inputs:{real:F,imag:O},backend:s}),j=Kx({inputs:{a:D,b:z},backend:s}),G=Sd({inputs:{a:R,b:j},backend:s}),J=JE({inputs:{a:R,b:j},backend:s}),me=Tu({inputs:{input:G},backend:s}),fe=Tu({inputs:{input:J},backend:s}),he=kd({inputs:{input:G},backend:s}),Te=kd({inputs:{input:J},backend:s}),Re=Cd({inputs:[me,fe],backend:s,attrs:{axis:0}}),Me=Cd({inputs:[he,Te],backend:s,attrs:{axis:0}}),Ve=s.data.get(Re.dataId).values,N=s.data.get(Me.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(L),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(he),s.disposeIntermediateTensorInfo(fe),s.disposeIntermediateTensorInfo(Te),s.disposeIntermediateTensorInfo(Re),s.disposeIntermediateTensorInfo(Me),{real:Ve,imag:N}}function $Ce(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let o=0,i=0;for(let a=0;a<e;a++){const u=OB(s*a,e,n),l=mE(t,a);o+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(o/=e,i/=e),AB(r,o,i,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ICe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ve(r.shape),o=r.shape[r.shape.length-1],i=s/o,a=an({inputs:{x:r},backend:n,attrs:{shape:[i,o]}}),u=m6(a,!1,n),l=an({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),l}const ECe={kernelName:W$,backendName:"cpu",kernelFunc:ICe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nT(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:o}=n,i=o||zd(s),a=Mn(i,ve(r));return _Ce(a,s,i),e.makeTensorInfo(r,i,a)}const TCe={kernelName:j$,backendName:"cpu",kernelFunc:nT};function _Ce(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NCe={kernelName:G$,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,o=_r(r.dtype,ve(r.shape)),[i,a,u,l]=r.shape,c=s.data.get(r.dataId).values;for(let h=0;h<i;h++){const f=h*u*a*l;for(let p=0;p<a;p++){const m=p*(u*l);for(let y=0;y<u;y++){const g=y*l;for(let v=0;v<l;v++){const x=Math.round(u-y-1),b=f+m+g+v;let w=c[b];if(x>=0&&x<u){const k=x*l,C=f+m+k+v;w=c[C]}o[b]=w}}}}return{dataId:s.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=f6({inputs:{x:s,filter:o},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const y=m;if(c==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const g=an({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Sd({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=Sd({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(y)}if(f){const y=m;if(c==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=an({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=Uy(n,m,f,g,p),n.disposeIntermediateTensorInfo(g)}else m=Uy(n,m,f,a,p);n.disposeIntermediateTensorInfo(y)}return m}const ACe={kernelName:by,backendName:"cpu",kernelFunc:RCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=p6({inputs:{x:s,filter:o},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const y=m;m=Sd({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(y)}if(f){const y=m;m=Uy(n,m,f,a,p),n.disposeIntermediateTensorInfo(y)}return m}const OCe={kernelName:e4,backendName:"cpu",kernelFunc:DCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PCe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,o=ve(r.shape),i=s.shape,a=i[i.length-1],[u,l,c,d]=QI(r,s);if(l===0)return n.makeTensorInfo(u,r.dtype,[]);const h=n.data.get(s.dataId).values,f=n.bufferSync(r),p=$U(h,f,r.dtype,l,a,c,d,r.shape,o);return n.makeTensorInfo(u,r.dtype,p.values)}const LCe={kernelName:Lz,backendName:"cpu",kernelFunc:PCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:o}=e,{axis:i,batchDims:a}=r;qe([s,o],"gatherV2");const u=Ct(i,s.shape)[0],l=n.data.get(o.dataId).values,c=s.shape[u];for(let b=0;b<l.length;++b){const w=l[b];B(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const h=ve(o.shape),f=SE(s,o,u,d),p=an({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=an({inputs:{x:o},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),y=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],g=n.bufferSync(m),v=n.bufferSync(p),x=IU(v,g,y);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,x.dtype,x.values)}const MCe={kernelName:Wv,backendName:"cpu",kernelFunc:FCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zCe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ve(r.shape),o=r.shape[r.shape.length-1],i=s/o,a=an({inputs:{x:r},backend:n,attrs:{shape:[i,o]}}),u=m6(a,!0,n),l=an({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),l}const BCe={kernelName:H$,backendName:"cpu",kernelFunc:zCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VCe=jt(em,t=>Number.isFinite(t)?1:0,"bool"),UCe={kernelName:em,backendName:"cpu",kernelFunc:VCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WCe=jt(tm,t=>Math.abs(t)===1/0?1:0,"bool"),jCe={kernelName:tm,backendName:"cpu",kernelFunc:WCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GCe=jt(nm,t=>Number.isNaN(t)?1:0,"bool"),HCe={kernelName:nm,backendName:"cpu",kernelFunc:GCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KCe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:o}=n,i=RU(r,s,o);return e.makeTensorInfo([i.length],"float32",i)}const qCe={kernelName:Fz,backendName:"cpu",kernelFunc:KCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XCe=jt(sm,t=>Math.log1p(t)),YCe={kernelName:sm,backendName:"cpu",kernelFunc:XCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZCe=Wn((t,e)=>t&&e),QCe=ar(qv,ZCe,null,"bool"),JCe={kernelName:qv,backendName:"cpu",kernelFunc:QCe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e2e=jt(Xv,t=>t?0:1,"bool"),t2e={kernelName:Xv,backendName:"cpu",kernelFunc:e2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n2e=Wn((t,e)=>t||e),r2e=ar(Yv,n2e,null,"bool"),s2e={kernelName:Yv,backendName:"cpu",kernelFunc:r2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:o,bias:i,alpha:a,beta:u}=r;qe(s,"LRN");const l=s.shape[3],c=l-1,d=n.data.get(s.dataId).values,h=ve(s.shape),f=new Float32Array(h);function p(m){const y=m%l;let g=m-y+Math.max(0,y-o);const v=m-y+Math.min(y+o,c);let x=0;for(;g<=v;g++){const b=d[g];x+=b*b}return x}for(let m=0;m<h;m++){const y=p(m),g=d[m]*Math.pow(i+a*y,-u);f[m]=g}return n.makeTensorInfo(s.shape,s.dtype,f)}const i2e={kernelName:Zv,backendName:"cpu",kernelFunc:o2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:o,dy:i}=e,{depthRadius:a,bias:u,alpha:l,beta:c}=r;qe(i,"LRNGrad");const d=ve(i.shape),h=i.shape[3],f=n.data.get(i.dataId).values,p=n.data.get(s.dataId).values,m=n.data.get(o.dataId).values,y=new Float32Array(d),g=d;for(let v=0;v<g;v++){const x=v%h,b=v-x+Math.max(0,x-a),w=v-x+Math.min(h,x+a+1);let k=0;for(let C=b;C<w;C++)k+=Math.pow(p[C],2);k=l*k+u;for(let C=b;C<w;C++){let $=-2*l*c*p[C]*m[v]/k;v===C&&($+=Math.pow(k,-c)),$*=f[v],y[C]+=$}}return n.makeTensorInfo(i.shape,s.dtype,y)}const l2e={kernelName:q$,backendName:"cpu",kernelFunc:a2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g6(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:o,keepDims:i}=r,a=n;let u=s.shape;const l=u.length,c=Ct(o,u);let d=c;const h=In(d,l);let f=a.data.get(s.dataId).values;if(h!=null){const b=new Array(l);for(let w=0;w<b.length;w++)b[w]=u[h[w]];f=ZE(f,u,s.dtype,h,b),d=Vn(d.length,l),u=b}qe(s,"max"),Sr("max",d,l);const[p,m]=pr(u,d),y=ve(m),g=DU(f,y,p,s.dtype),v=a.write(g,p,s.dtype);let x=p;return i&&(x=qn(p,c)),{dataId:v,shape:x,dtype:s.dtype}}const u2e={kernelName:Qv,backendName:"cpu",kernelFunc:g6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;qe(s,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:u}=r,l=1;B(Dr(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=$o(s.shape,o,i,l,a,u);let d;if(c.filterWidth===1&&c.filterHeight===1&&Ft(c.inShape,c.outShape))d=Ti({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=Qe(s.shape),p=eT(h,s.shape,s.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return d}const d2e={kernelName:Jv,backendName:"cpu",kernelFunc:c2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:u,dataFormat:l}=r;qe(s,"maxPool3d");const c=fa(s.shape,o,i,1,a,u,l),d=n.data.get(s.dataId).values,h=h6(d,s.shape,s.dtype,Qe(s.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const f2e={kernelName:ex,backendName:"cpu",kernelFunc:h2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,{filterSize:i,strides:a,pad:u,dimRoundingMode:l}=r;qe([s,o],"maxPool3DGrad");const c=fa(o.shape,i,a,1,u,l),d=n.bufferSync(o),h=nke(d,c),f=c.strideDepth,p=c.strideHeight,m=c.strideWidth,y=c.dilationDepth,g=c.dilationHeight,v=c.dilationWidth,x=c.effectiveFilterDepth,b=c.effectiveFilterHeight,w=c.effectiveFilterWidth,k=x-1-c.padInfo.front,C=w-1-c.padInfo.left,$=b-1-c.padInfo.top,E=kt(o.shape,"float32"),S=n.bufferSync(s);for(let R=0;R<c.batchSize;++R)for(let T=0;T<c.inChannels;++T)for(let P=0;P<c.inDepth;++P)for(let I=0;I<c.inHeight;++I)for(let A=0;A<c.inWidth;++A){const L=P-k,V=I-$,z=A-C;let M=0;for(let _=0;_<x;_+=y){const F=(L+_)/f;if(!(F<0||F>=c.outDepth||Math.floor(F)!==F))for(let O=0;O<b;O+=g){const D=(V+O)/p;if(!(D<0||D>=c.outHeight||Math.floor(D)!==D))for(let j=0;j<w;j+=v){const G=(z+j)/m;if(G<0||G>=c.outWidth||Math.floor(G)!==G)continue;const J=x*b*w-1-h.get(R,F,D,G,T),me=_*b*w+O*w+j,fe=J===me?1:0;if(fe===0)continue;const he=S.get(R,F,D,G,T);M+=he*fe}}}E.set(M,R,P,I,A,T)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const m2e={kernelName:Y$,backendName:"cpu",kernelFunc:p2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g2e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o,output:i}=e,a=o;qe([o,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:d}=r,h=$o(a.shape,u,l,1,c,d),f=n.data.get(a.dataId).values,p=kt(h.outShape,a.dtype,d6(f,a.shape,a.dtype,h).values),m=h.strideHeight,y=h.strideWidth,g=h.dilationHeight,v=h.dilationWidth,x=h.effectiveFilterHeight,b=h.effectiveFilterWidth,w=b-1-h.padInfo.left,k=x-1-h.padInfo.top,C=kt(a.shape,"float32"),$=n.data.get(s.dataId).values,E=kt(s.shape,"float32",$);for(let S=0;S<h.batchSize;++S)for(let R=0;R<h.inChannels;++R)for(let T=0;T<h.inHeight;++T)for(let P=0;P<h.inWidth;++P){const I=T-k,A=P-w;let L=0;for(let V=0;V<x;V+=g){const z=(I+V)/m;if(!(z<0||z>=h.outHeight||Math.floor(z)!==z))for(let M=0;M<b;M+=v){const _=(A+M)/y;if(_<0||_>=h.outWidth||Math.floor(_)!==_)continue;const F=x*b-1-p.get(S,z,_,R),O=V*b+M,D=F===O?1:0;if(D===0)continue;const j=E.get(S,z,_,R);L+=j*D}}C.set(L,S,T,P,R)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const y2e={kernelName:X$,backendName:"cpu",kernelFunc:g2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t,e,n,r,s){const o=Qe(e),i=eT(t,e,n,o,s,"max"),a=d6(t,e,n,s,!0,r);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x2e={kernelName:Mz,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:o,pad:i,includeBatchInIndex:a}=e,u=n;qe(r,"MaxPoolWithArgmax");const l=u.data.get(r.dataId).values,c=$o(r.shape,s,o,[1,1],i),[d,h]=v2e(l,r.shape,r.dtype,a,c),f=u.write(d,c.outShape,r.dtype),p=u.write(h,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=Ct(o,s.shape),l=pr(s.shape,a)[1],c=ve(l),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(h);const f=il({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=tT({inputs:{a:f,b:h},backend:n});d.push(p);const m=Hm({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:i}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const w2e={kernelName:tx,backendName:"cpu",kernelFunc:b2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;qe(s,"min");const a=Ct(o,s.shape);let u=a;const l=In(u,s.shape.length);let c=s;l!=null&&(c=ss({inputs:{x:s},backend:n,attrs:{perm:l}}),u=Vn(u.length,s.shape.length)),Sr("min",u,c.shape.length);const[d,h]=pr(c.shape,u),f=ve(h),p=Nr(ve(d),c.dtype),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let x=m[v];for(let b=0;b<f;++b){const w=m[v+b];(Number.isNaN(w)||w<x)&&(x=w)}p[g]=x}l!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(d,c.dtype,p);if(i){const g=qn(d,a),v=an({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const k2e={kernelName:nx,backendName:"cpu",kernelFunc:S2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,mode:i}=r;qe(s,"mirrorPad");const a=o.map((x,b)=>x[0]+s.shape[b]+x[1]),u=o.map(x=>x[0]),l=o.map((x,b)=>x[0]+s.shape[b]),c=i==="reflect"?0:1,d=n.data.get(s.dataId).values,h=s.shape.length,f=Qe(s.shape),p=ve(a),m=a.length,y=Qe(a),g=_r(s.dtype,p);for(let x=0;x<p;x++){let b=Bd(x,m,y);for(let k=0;k<m;k++)b[k]<u[k]?b[k]=u[k]*2-b[k]-c:b[k]>=l[k]&&(b[k]=(l[k]-1)*2-b[k]+c);b=b.map((k,C)=>k-u[C]);const w=vi(b,h,f);g[x]=d[w]}return{dataId:n.write(g,a,s.dtype),shape:a,dtype:s.dtype}}const $2e={kernelName:rx,backendName:"cpu",kernelFunc:C2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I2e=Wn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),E2e=ar(am,I2e),T2e={kernelName:am,backendName:"cpu",kernelFunc:E2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:o}=r,i=s.shape.length;let a=o;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const u=Ct([a],s.shape),l=g6({inputs:{x:s},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=qn(l.shape,u),d=an({inputs:{x:l},backend:n,attrs:{shape:c}}),h=JE({inputs:{a:s,b:d},backend:n}),f=wU({inputs:{x:h},backend:n}),p=Hm({inputs:{x:f},backend:n,attrs:{axis:u,keepDims:!1}}),m=an({inputs:{x:p},backend:n,attrs:{shape:c}}),y=tT({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}const _2e={kernelName:wx,backendName:"cpu",kernelFunc:y6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:o,seed:i,normalized:a}=r;qe(s,"multinomial");const u=a?s:y6({inputs:{logits:s},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],d=n.data.get(u.dataId).values,h=[l,o],f=Nr(ve(h),"int32");for(let p=0;p<l;++p){const m=p*c,y=new Float32Array(c-1);y[0]=d[m];for(let x=1;x<y.length;++x)y[x]=y[x-1]+d[m+x];const g=FI.alea(i.toString()),v=p*o;for(let x=0;x<o;++x){const b=g();f[v+x]=y.length;for(let w=0;w<y.length;w++)if(b<y[w]){f[v+x]=w;break}}}return a||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(h,"int32",f)}const R2e={kernelName:zz,backendName:"cpu",kernelFunc:N2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A2e=HI;function D2e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u}=r;qe(s,"NonMaxSuppression");const l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:d}=A2e(l,c,i,a,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const O2e={kernelName:Z$,backendName:"cpu",kernelFunc:D2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2e=KI;function L2e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:l}=r;qe(s,"NonMaxSuppressionPadded");const c=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,{selectedIndices:h,validOutputs:f}=P2e(c,d,i,a,u,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const F2e={kernelName:Q$,backendName:"cpu",kernelFunc:L2e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e=qI;function z2e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,softNmsSigma:l}=r;qe(s,"NonMaxSuppressionWithScore");const c=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,h=i,f=a,p=u,m=l,{selectedIndices:y,selectedScores:g}=M2e(c,d,h,f,p,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const B2e={kernelName:J$,backendName:"cpu",kernelFunc:z2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:o,depth:i,onValue:a,offValue:u}=r;qe(s,"oneHot");const l=ve(s.shape),c=new Float32Array(l*i);c.fill(u);const d=n.data.get(s.dataId).values;for(let h=0;h<l;++h)d[h]>=0&&d[h]<i&&(c[h*i+d[h]]=a);return n.makeTensorInfo([...s.shape,i],o,c)}const U2e={kernelName:ax,backendName:"cpu",kernelFunc:V2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jy(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Tu({inputs:{input:r},backend:n}),o=jy({inputs:{x:s},backend:n}),i=kd({inputs:{input:r},backend:n}),a=jy({inputs:{x:i},backend:n}),u=ps({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return nT({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const W2e={kernelName:Cx,backendName:"cpu",kernelFunc:jy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v6(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Tu({inputs:{input:r},backend:n}),o=v6({inputs:{x:s},backend:n}),i=kd({inputs:{input:r},backend:n}),a=jy({inputs:{x:i},backend:n}),u=ps({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return nT({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const j2e={kernelName:ix,backendName:"cpu",kernelFunc:v6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x6(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Wy({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const o=e[0].shape,i=e[0].dtype;e.forEach(c=>{x$(o,c.shape,"All tensors passed to stack must have matching shapes"),B(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],u=e.map(c=>{const d=Wy({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(d),d}),l=Cd({inputs:u,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const G2e={kernelName:lx,backendName:"cpu",kernelFunc:x6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,constantValue:i}=r;qe(s,"pad");const a=o.map((v,x)=>v[0]+s.shape[x]+v[1]),u=o.map(v=>v[0]),l=n.data.get(s.dataId).values,c=ve(s.shape),d=s.shape.length,h=Qe(s.shape),f=ve(a),p=a.length,m=Qe(a),y=_r(s.dtype,f);i!==0&&y.fill(i);for(let v=0;v<c;v++){const b=Bd(v,d,h).map((k,C)=>k+u[C]),w=vi(b,p,m);y[w]=l[v]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const b6={kernelName:ux,backendName:"cpu",kernelFunc:H2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2e=Wn((t,e)=>Math.pow(t,e)),q2e=ar(um,K2e),X2e={kernelName:um,backendName:"cpu",kernelFunc:q2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:o,indices:i}=e,a=s.map(y=>n.data.get(y.dataId).values),u=s.map(y=>y.shape),l=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values,[d,h,f]=zU(a,u,l,o.shape,o.dtype,c,i.shape),p=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),m=n.makeTensorInfo(f,o.dtype,h);return p.concat([m])}const Z2e={kernelName:Bz,backendName:"cpu",kernelFunc:Y2e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:o}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[l,c]=BU(i,r.shape,r.dtype,a,s.shape,u,o.shape),d=n.makeTensorInfo([l.length],"int32",l),h=n.makeTensorInfo([c.length],r.dtype,c);return[d,h]}const J2e={kernelName:Vz,backendName:"cpu",kernelFunc:Q2e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:u}=r,l=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,d=n.data.get(i.dataId).values,h=a.map(y=>n.data.get(y.dataId).values),f=a.map(y=>y.shape),[p,m]=VU(l,s.shape,c,o.shape,o.dtype,d,i.shape,h,f,u);return n.makeTensorInfo(p,o.dtype,m)}const t$e={kernelName:Uz,backendName:"cpu",kernelFunc:e$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:o,step:i}=n,a=UU(r,s,i,o);return e.makeTensorInfo([a.length],o,a)}const r$e={kernelName:eI,backendName:"cpu",kernelFunc:n$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s$e=jt(cm,t=>1/t),o$e={kernelName:cm,backendName:"cpu",kernelFunc:s$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r;qe(s,"resizeBilinear");const u=Qe(s.shape),[l,c]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,y=new Float32Array(ve([d,l,c,p])),g=[o&&l>1?h-1:h,o&&c>1?f-1:f],v=[o&&l>1?l-1:l,o&&c>1?c-1:c];let x=0;const b=g[0]/v[0],w=g[1]/v[1];for(let k=0;k<d;k++)for(let C=0;C<l;C++){let $;i?$=b*(C+.5)-.5:$=b*C;const E=Math.max(0,Math.floor($)),S=$-E,R=Math.min(h-1,Math.ceil($)),T=k*u[0]+E*u[1],P=k*u[0]+R*u[1];for(let I=0;I<c;I++){let A;i?A=w*(I+.5)-.5:A=w*I;const L=Math.max(0,Math.floor(A)),V=A-L,z=Math.min(f-1,Math.ceil(A)),M=T+L*u[2],_=P+L*u[2],F=T+z*u[2],O=P+z*u[2];for(let D=0;D<p;D++){const j=m[M+D],G=m[_+D],J=m[F+D],me=m[O+D],fe=j+(J-j)*V,he=G+(me-G)*V,Te=fe+(he-fe)*S;y[x++]=Te}}}return n.makeTensorInfo([d,l,c,p],"float32",y)}const a$e={kernelName:px,backendName:"cpu",kernelFunc:i$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r;qe([o,s],"resizeBilinearGrad");const a=Qe(s.shape),[u,l,c,d]=s.shape,[,h,f]=o.shape,p=new Float32Array(u*l*c*d),m=[i&&h>1?l-1:l,i&&f>1?c-1:c],y=[i&&h>1?h-1:h,i&&f>1?f-1:f],g=m[0]/y[0],v=m[1]/y[1],x=n.data.get(o.dataId).values;let b=0;for(let w=0;w<u;w++){const k=w*a[0];for(let C=0;C<h;C++){const $=C*g,E=Math.floor($),S=Math.min(Math.ceil($),l-1),R=k+E*a[1],T=k+S*a[1],P=$-E,I=1-P;for(let A=0;A<f;A++){const L=A*v,V=Math.floor(L),z=Math.min(Math.ceil(L),c-1),M=L-V,_=1-M,F=R+V*a[2],O=R+z*a[2],D=T+V*a[2],j=T+z*a[2],G=I*_,J=I*M,me=P*_,fe=P*M;for(let he=0;he<d;he++){const Te=x[b++];p[F+he]+=Te*G,p[O+he]+=Te*J,p[D+he]+=Te*me,p[j+he]+=Te*fe}}}}return n.makeTensorInfo([u,c,l,d],"float32",p)}const u$e={kernelName:rI,backendName:"cpu",kernelFunc:l$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r;qe(s,"resizeNearestNeighbor");const u=Qe(s.shape),[l,c]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,y=new Float32Array(d*l*c*p),g=[o&&l>1?h-1:h,o&&c>1?f-1:f],v=[o&&l>1?l-1:l,o&&c>1?c-1:c],x=g[0]/v[0],b=g[1]/v[1];let w=0;for(let k=0;k<d;k++){const C=k*u[0];for(let $=0;$<l;$++){const E=i?x*($+.5):x*$;let S=Math.min(h-1,o?Math.round(E):Math.floor(E));i&&(S=Math.max(0,S));const R=C+S*u[1];for(let T=0;T<c;T++){const P=i?b*(T+.5):b*T;let I=Math.min(f-1,o?Math.round(P):Math.floor(P));i&&(I=Math.max(0,I));const A=R+I*u[2];for(let L=0;L<p;L++){const V=m[A+L];y[w++]=V}}}}return n.makeTensorInfo([d,l,c,p],s.dtype,y)}const d$e={kernelName:fx,backendName:"cpu",kernelFunc:c$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r;qe([o,s],"resizeNearestNeighborGrad");const a=Qe(s.shape),u=Qe(o.shape),[l,c,d,h]=s.shape,[,f,p]=o.shape,m=new Float32Array(l*c*d*h),y=n.data.get(o.dataId).values,g=[i&&f>1?c-1:c,i&&p>1?d-1:d],v=[i&&f>1?f-1:f,i&&p>1?p-1:p],x=g[0]/v[0],b=g[1]/v[1],w=1/x,k=1/b,C=Math.ceil(w)*2+2,$=Math.ceil(k)*2+2;for(let E=0;E<l;E++){const S=E*a[0];for(let R=0;R<c;R++){const T=S+R*a[1],P=Math.floor(R*w),I=Math.floor(P-C/2);for(let A=0;A<d;A++){const L=T+A*a[2],V=Math.floor(A*k),z=Math.floor(V-$/2);for(let M=0;M<h;M++){let _=0;for(let F=0;F<C;F++){const O=F+I;if(O<0||O>=f)continue;const D=S+O*u[1],j=O*x,G=Math.min(c-1,i?Math.round(j):Math.floor(j));if(R===G)for(let J=0;J<$;J++){const me=J+z;if(me<0||me>=p)continue;const fe=D+me*u[2],he=me*b,Te=Math.min(d-1,i?Math.round(he):Math.floor(he));A===Te&&(_+=y[fe+M])}}m[L+M]=_}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const f$e={kernelName:nI,backendName:"cpu",kernelFunc:h$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:o}=r;qe(s,"reverse");const i=s.shape.length,a=Ct(o,s.shape);if(i===0)return Ti({inputs:{x:s},backend:n});const u=new xr(s.shape,s.dtype),l=n.bufferSync(s);for(let c=0;c<u.size;c++){const d=u.indexToLoc(c),h=d.slice();a.forEach(f=>h[f]=s.shape[f]-1-h[f]),u.set(l.get(...h),...d)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const m$e={kernelName:mx,backendName:"cpu",kernelFunc:p$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g$e={kernelName:cI,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:o,center:i}=e,a=n,u=_r(r.dtype,ve(r.shape)),[l,c,d,h]=r.shape,[f,p]=iE(i,c,d),m=255,y=Math.sin(s),g=Math.cos(s),v=a.data.get(r.dataId).values;for(let b=0;b<l;b++){const w=b*d*c*h;for(let k=0;k<c;k++){const C=k*(d*h);for(let $=0;$<d;$++){const E=$*h;for(let S=0;S<h;S++){const R=[l,k,$,S],T=R[2],P=R[1];let I=(T-f)*g-(P-p)*y,A=(T-f)*y+(P-p)*g;I=Math.round(I+f),A=Math.round(A+p);let L=o;if(typeof o!="number"&&(S===3?L=m:L=o[S]),I>=0&&I<d&&A>=0&&A<c){const z=A*(d*h),M=I*h,_=w+z+M+S;L=v[_]}const V=w+C+E+S;u[V]=L}}}}return{dataId:a.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y$e=jt(fm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),v$e={kernelName:fm,backendName:"cpu",kernelFunc:y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:o}=e,{shape:i}=r,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Uu(o,s,i),h=!0,f=n.bufferSync(s),p=n.bufferSync(o),m=Zl(f,p,i,d,l,u,a,c,0,h);return n.makeTensorInfo(i,m.dtype,m.values)}const b$e={kernelName:Wz,backendName:"cpu",kernelFunc:x$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function S$e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function k$e(t,e,n,r,s,o){const i=Mn("int32",n*s);for(let a=0;a<n;++a){const u=t.slice(a*r,(a+1)*r),l=a*s;for(let c=0;c<s;++c)i[l+c]=o==="left"?w$e(u,e[c+l]):S$e(u,e[c+l])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C$e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:o}=e,{side:i}=r,a=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,l=k$e(a,u,s.shape[0],s.shape[1],o.shape[1],i);return n.makeTensorInfo(o.shape,"int32",l)}const $$e={kernelName:Gz,backendName:"cpu",kernelFunc:C$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:o}=e;qe([r,s,o],"select");const i=r.shape.length,a=n.data.get(r.dataId).values,u=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=$s(s.dtype,o.dtype),d=Nr(ve(s.shape),c);let h=0;const f=i===0||i>1||s.shape.length===1?1:ve(s.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=u[p]:d[h++]=l[p];return n.makeTensorInfo(s.shape,c,d)}const E$e={kernelName:gx,backendName:"cpu",kernelFunc:I$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e=Ox,_$e=Px,N$e=jt(mm,t=>t>=0?_$e*t:T$e*(Math.exp(t)-1)),R$e={kernelName:mm,backendName:"cpu",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$e=jt(vm,t=>t<0?-1:t>0?1:0),D$e={kernelName:vm,backendName:"cpu",kernelFunc:A$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O$e=jt(gm,t=>Math.sin(t)),P$e={kernelName:gm,backendName:"cpu",kernelFunc:O$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L$e=jt(ym,t=>Math.sinh(t)),F$e={kernelName:ym,backendName:"cpu",kernelFunc:L$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M$e=11920928955078125e-23,WD=Math.log(M$e)+2,z$e=jt(bm,t=>{const e=t>-WD,n=t<WD,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),B$e={kernelName:bm,backendName:"cpu",kernelFunc:z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,paddings:i}=r;qe([s],"spaceToBatchND");const a=ve(o),u=[[0,0]];u.push(...i);for(let k=1+o.length;k<s.shape.length;++k)u.push([0,0]);const l=b6.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:u,constantValue:0}}),c=Pm(l.shape,o,a,!1),d=Lm(c.length,o.length,!1),h=Fm(l.shape,o,a,!1),m=an({inputs:{x:l},backend:n,attrs:{shape:c}}),v=ss({inputs:{x:m},backend:n,attrs:{perm:d}}),w=an({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const U$e={kernelName:xx,backendName:"cpu",kernelFunc:V$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(r.dataId).values,u=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(i.dataId).values[0],[d,h,f,p,m]=HU(a,r.shape,r.dtype,u,s.dtype,l,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const j$e={kernelName:Hz,backendName:"cpu",kernelFunc:W$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,u=Array.from(n.data.get(o.dataId).values),[l,c,d]=KU(a,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}const H$e={kernelName:Kz,backendName:"cpu",kernelFunc:G$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[l,c]=QE(i,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const q$e={kernelName:qz,backendName:"cpu",kernelFunc:K$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[l,c]=QE(i,r.shape,r.dtype,a,u);return n.makeTensorInfo(c,r.dtype,l)}const Y$e={kernelName:Xz,backendName:"cpu",kernelFunc:X$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:o,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:d,outputSize:h}=Uu(o,s,a),f=!1,p=n.bufferSync(s);let m;switch(o.dtype){case"bool":{const y=n.bufferSync(o),g=!!n.data.get(i.dataId).values[0];m=Zl(p,y,a,h,c,l,u,d,g,f);break}case"float32":{const y=n.bufferSync(o),g=n.data.get(i.dataId).values[0];m=Zl(p,y,a,h,c,l,u,d,g,f);break}case"int32":{const y=n.bufferSync(o),g=n.data.get(i.dataId).values[0];m=Zl(p,y,a,h,c,l,u,d,g,f);break}case"string":{const y=n.bufferSync(o),g=tl(n.data.get(i.dataId).values[0]);m=Zl(p,y,a,h,c,l,u,d,g,f);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const Q$e={kernelName:Yz,backendName:"cpu",kernelFunc:Z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:o,axis:i}=r,a=Ct(i,s.shape)[0],u=wE(s,o,a),l=new Array(s.shape.length).fill(0),c=s.shape.slice();return u.map(d=>{const h=[...c];h[a]=d;const f=_u({inputs:{x:s},backend:n,attrs:{begin:l,size:h}});return l[a]+=d,f})}const eIe={kernelName:bx,backendName:"cpu",kernelFunc:J$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tIe={kernelName:sI,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;qe(n,"square");const s=r.data.get(n.dataId).values,o=new Float32Array(s.length);for(let a=0;a<s.length;++a){const u=s[a];o[a]=u*u}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nIe=jt(Em,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),rIe={kernelName:Em,backendName:"cpu",kernelFunc:nIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,end:i,strides:a,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r;qe(s,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:x,strides:b}=rE(s.shape,o,i,a,u,l,c,d,h);let w;if(m)w=an({inputs:{x:s},backend:n,attrs:{shape:p}});else if(y||g){B(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const k=eE(v,x,b),C=_u({inputs:{x:s},backend:n,attrs:{begin:v,size:k}});w=an({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else{const k=n.bufferSync(s),C=YU(f,k,b,v);w=n.makeTensorInfo(p,C.dtype,C.values)}return w}const oIe={kernelName:iI,backendName:"cpu",kernelFunc:sIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iIe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:o,leftPad:i,rightPad:a,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:d}=e,h=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[p,m]=ZU(h,f,s,o,i,a,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const aIe={kernelName:Zz,backendName:"cpu",kernelFunc:iIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(o.dataId).values,u=n.data.get(i.dataId).values[0],[l,c,d]=QU(a,u,s),h=c.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const uIe={kernelName:Qz,backendName:"cpu",kernelFunc:lIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(o.dataId).values,a=JU(i,s);return n.makeTensorInfo(o.shape,"int32",a)}const dIe={kernelName:Jz,backendName:"cpu",kernelFunc:cIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIe=jt(Cm,t=>Math.tan(t)),fIe={kernelName:Cm,backendName:"cpu",kernelFunc:hIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe=jt($m,t=>Math.tanh(t)),mIe={kernelName:$m,backendName:"cpu",kernelFunc:pIe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gIe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:o}=e,{sliceRank:i,numUpdates:a,sliceSize:u,strides:l,outputSize:c}=Uu(o,s,r.shape),d=!1,h=n.bufferSync(s),f=n.bufferSync(o),p=n.bufferSync(r),m=Zl(h,f,r.shape,c,u,a,i,l,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const yIe={kernelName:jz,backendName:"cpu",kernelFunc:gIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:o}=r;qe(s,"tile");const i=t6(n.bufferSync(s),o);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const xIe={kernelName:Im,backendName:"cpu",kernelFunc:vIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:o,sorted:i}=r;qe(s,"topk");const a=n.data.get(s.dataId).values,[u,l]=r6(a,s.shape,s.dtype,o,i);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}const wIe={kernelName:aI,backendName:"cpu",kernelFunc:bIe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SIe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:u,outputShape:l}=n,[c,d,h,f]=s.shape,[p,m]=l??[d,h],y=[c,p,m,f],g=Qe(s.shape),v=g[0],x=g[1],b=g[2],w=Qe(y),k=w[0],C=w[1],$=w[2],E=_r(s.dtype,ve(y));E.fill(u);const S=r.data.get(s.dataId).values,R=r.data.get(o.dataId).values;for(let P=0;P<c;++P){const I=o.shape[0]===1?R:R.subarray(P*8,P*8+8);for(let A=0;A<p;++A)for(let L=0;L<m;++L)for(let V=0;V<f;++V){let z;const M=I[6]*L+I[7]*A+1;if(M===0)continue;const _=(I[0]*L+I[1]*A+I[2])/M,F=(I[3]*L+I[4]*A+I[5])/M,O=jD(_,h,a),D=jD(F,d,a);switch(i){case"nearest":z=TIe(S,d,h,v,x,b,P,D,O,V,u);break;case"bilinear":z=_Ie(S,d,h,v,x,b,P,D,O,V,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const j=P*k+A*C+L*$+V;E[j]=z}return r.makeTensorInfo(y,s.dtype,E)}return{dataId:r.write(E,y,s.dtype),shape:s.shape,dtype:s.dtype}}const kIe={kernelName:lI,backendName:"cpu",kernelFunc:SIe};function jD(t,e,n){switch(n){case"reflect":return CIe(t,e);case"wrap":return $Ie(t,e);case"nearest":return EIe(t,e);case"constant":default:return IIe(t)}}function CIe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return gu(0,n,e-1)}function $Ie(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return gu(0,n,e-1)}function IIe(t,e){return t}function EIe(t,e){return gu(0,t,e-1)}function Xh(t,e,n,r,s,o,i,a,u,l,c){const d=i*r+a*s+u*o+l;return 0<=a&&a<e&&0<=u&&u<n?t[d]:c}function TIe(t,e,n,r,s,o,i,a,u,l,c){const d=Math.round(a),h=Math.round(u);return Xh(t,e,n,r,s,o,i,d,h,l,c)}function _Ie(t,e,n,r,s,o,i,a,u,l,c){const d=Math.floor(a),h=Math.floor(u),f=d+1,p=h+1,m=(p-u)*Xh(t,e,n,r,s,o,i,d,h,l,c)+(u-h)*Xh(t,e,n,r,s,o,i,d,p,l,c),y=(p-u)*Xh(t,e,n,r,s,o,i,f,h,l,c)+(u-h)*Xh(t,e,n,r,s,o,i,f,p,l,c);return(f-a)*m+(a-d)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:o}=e;qe(o,"unique");const i=r.data.get(o.dataId).values,{outputValues:a,outputShape:u,indices:l}=s6(i,s,o.shape,o.dtype);return[r.makeTensorInfo(u,o.dtype,a),r.makeTensorInfo([l.length],"int32",l)]}const RIe={kernelName:uI,backendName:"cpu",kernelFunc:NIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:o}=r;o<0&&(o+=s.shape.length);const i=s.shape.length,a=s.shape[o],u=new Array(i-1);let l=0;for(let f=0;f<i;f++)f!==o&&(u[l++]=s.shape[f]);const c=new Array(i).fill(0),d=s.shape.slice();d[o]=1;const h=new Array(a);for(let f=0;f<h.length;f++){c[o]=f;const p=_u({inputs:{x:s},backend:n,attrs:{begin:c,size:d}});h[f]=an({inputs:{x:p},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(p)}return h}const DIe={kernelName:Sx,backendName:"cpu",kernelFunc:AIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:o}=e,{numSegments:i}=r;qe(s,"unsortedSegmentSum");const a=s.shape.length,u=o.shape.length,l=[],c=[],d=a-u;let h=o;for(let p=0;p<d;++p){const m=Wy({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,c.push(m)}for(let p=0;p<i;++p){const m=gl(p,"int32"),y=n.makeTensorInfo([],"int32",m),g=xU({inputs:{a:y,b:h},backend:n}),v=il({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=Kx({inputs:{a:v,b:s},backend:n}),b=Hm({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});l.push(b),c.push(y),c.push(g),c.push(v),c.push(x),c.push(b)}const f=x6({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const PIe={kernelName:kx,backendName:"cpu",kernelFunc:OIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LIe=[NSe,cwe,ASe,OSe,gwe,LSe,MSe,BSe,USe,jSe,HSe,qSe,YSe,JSe,tke,ske,ike,lke,cke,TSe,hke,pke,gke,vwe,vke,pwe,bwe,bke,dwe,Ske,Cke,$ke,Eke,_ke,Rke,Dke,Pke,Fke,zke,Vke,Wke,Gke,Kke,Xke,Yke,Qke,eCe,nCe,rCe,sCe,oCe,aCe,cCe,wSe,hCe,wwe,bCe,Swe,wCe,Cwe,ECe,TCe,NCe,Iwe,Twe,ACe,OCe,LCe,MCe,Nwe,Awe,hwe,BCe,kke,UCe,jCe,HCe,SSe,Owe,Lwe,qCe,Mwe,YCe,JCe,t2e,s2e,i2e,l2e,u2e,Bwe,d2e,f2e,m2e,y2e,x2e,w2e,k2e,Uwe,$2e,T2e,R2e,jwe,Hwe,O2e,F2e,B2e,qwe,U2e,j2e,G2e,b6,X2e,CSe,Zwe,Z2e,J2e,t$e,r$e,fwe,rC,o$e,$Se,ISe,ESe,a$e,u$e,d$e,f$e,m$e,g$e,v$e,oSe,b$e,$$e,E$e,R$e,aSe,D$e,P$e,F$e,lSe,_2e,B$e,U$e,j$e,H$e,q$e,Y$e,Q$e,eIe,dSe,tIe,fSe,mSe,rIe,oIe,aIe,uIe,dIe,xSe,lCe,fIe,mIe,yIe,xIe,wIe,kIe,Xwe,RIe,DIe,PIe,W2e];for(const t of LIe)t4(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wl={},Gg={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function FIe(t,e){Wl[t]=e}function Xo(t,e){if(!(t in Wl)||e!=null){const r=zIe(t,e);if(r!==null)Wl[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Wl[t];return n==null||n.isContextLost()?(delete Wl[t],Xo(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Wl[t])}function MIe(t){if(!de().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function zIe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??MIe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Wl[t]},!1),de().getBool("SOFTWARE_WEBGL_ENABLED")&&(Gg.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Gg)||n.getContext("experimental-webgl",Gg):n.getContext("webgl2",Gg)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var sp;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(sp||(sp={}));var Bs;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Bs||(Bs={}));var yr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(yr||(yr={}));function Km(t,e){return[e,t]}function BIe(t,e){return t*e}function Hg(t){const e=ve(t),n=Math.ceil(e/4);return Sk(n)}function Kd(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function VIe(t,e){const[n,r]=Kd(t,e);return n*r*4}function rT(t,e){const n=t;let r,s,o,i,a,u,l,c,d,h;return de().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,o=n.RGBA16F,i=n.RGBA32F,a=n.RED,l=4,c=1,d=n.HALF_FLOAT,h=n.FLOAT,u=n.RGBA8):(r=t.RGBA,s=t.RGBA,o=t.RGBA,i=n.RGBA,a=t.RGBA,l=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,u=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function We(t,e){const n=e();return de().getBool("DEBUG")&&UIe(t),n}function UIe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+HIe(t,e))}const WIe=596e-10,jIe=65504;function GIe(t){return!!(de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||WIe<Math.abs(t)&&Math.abs(t)<jIe)}function HIe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Kg(t,e){return ma(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function KIe(t,e){const n=ma(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(We(t,()=>t.shaderSource(n,e)),We(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function qIe(t,e){const n=ma(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(We(t,()=>t.shaderSource(n,e)),We(t,()=>t.compileShader(n)),de().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw w6(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const XIe=/ERROR: [0-9]+:([0-9]+):/g;function w6(t,e){const n=XIe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),o=s.length.toString().length+2,i=s.map((d,h)=>qc((h+1).toString(),o)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const u=i.slice(0,r-1),l=i.slice(r-1,r),c=i.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${qc(l[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function YIe(t){return ma(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function ZIe(t,e){if(We(t,()=>t.linkProgram(e)),!de().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Iw(t,e){if(We(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function QIe(t,e){const n=ma(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return We(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),We(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function JIe(t,e){const n=ma(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return We(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),We(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function eEe(t){return ma(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function tEe(t,e){const n=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function nEe(t){return ma(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function GD(t,e,n,r,s,o,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(We(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),We(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,o,i)),We(t,()=>t.enableVertexAttribArray(a)),!0)}function rEe(t,e,n){lEe(t,n),We(t,()=>t.activeTexture(t.TEXTURE0+n)),We(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function sEe(t,e,n){return ma(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function oEe(t,e,n){return t.getUniformLocation(e,n)}function iEe(t,e,n,r){We(t,()=>rEe(t,e,r)),We(t,()=>t.uniform1i(n,r))}function Ew(t,e,n){We(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),We(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function HD(t,e){We(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),We(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function qg(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+aEe(t,e))}function aEe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ma(t,e,n){const r=We(t,()=>e());if(r==null)throw new Error(n);return r}function lEe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function $d(t,e=2){return ve(t.slice(0,t.length-e))}function Id(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Xg(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[$d(t),...Id(t)]),e}function uEe(t,e=!1){let n=de().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=de().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&de().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,u)=>u>=t.length-2?v$(t[u]):t[u]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=ml(t).newShape);let s=ve(t),o=null;t.length<=1&&s<=n?o=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?o=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?o=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?o=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?o=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(o=[t[0],t[1]*t[2]*t[3]]);const i=o!=null&&Math.max(...o)>r&&Math.min(...o)<=(e?2:1)&&Math.min(...o)>0;if(o==null||i)if(e){const a=$d(t);let u=2,l=2;t.length&&([u,l]=Id(t)),s=a*(u/2)*(l/2),o=Sk(s).map(c=>c*2)}else o=Sk(s);return o}function Yg(t){return t%2===0}function Gy(t,e){if(t=t.slice(-2),e=e.slice(-2),Ft(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Yg(n)&&Yg(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Yg(t[0])&&Yg(e[0])}let Tw,_w;function cEe(t){if(Tw==null){const e=Xo(t);Tw=e.getParameter(e.MAX_TEXTURE_SIZE)}return Tw}function dEe(t){if(_w==null){const e=Xo(t);_w=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,_w)}function hEe(t){if(t===0)return 0;let e;const n=Xo(t);return go(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:go(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function go(t,e){return t.getExtension(e)!=null}function KD(t){try{if(Xo(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function fEe(t){if(t===0)return!1;const e=Xo(t);if(t===1){if(!go(e,"OES_texture_float"))return!1}else if(!go(e,"EXT_color_buffer_float"))return!1;return oC(e)}function pEe(t){if(t===0)return!1;const e=Xo(t);if(t===1){if(!go(e,"OES_texture_float")||!go(e,"WEBGL_color_buffer_float"))return!1}else{if(go(e,"EXT_color_buffer_float"))return oC(e);const r="EXT_color_buffer_half_float";if(go(e,r)){const s=e.getExtension(r);return mEe(e,s)}return!1}return oC(e)}function oC(t){const e=rT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,s=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,s,0,e.textureFormatFloat,e.textureTypeFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(o),i}function mEe(t,e){const n=rT(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const s=1,o=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,s,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}function gEe(t){return t!==2?!1:Xo(t).fenceSync!=null}function qm(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&B(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xe=de();Xe.registerFlag("HAS_WEBGL",()=>Xe.getNumber("WEBGL_VERSION")>0);Xe.registerFlag("WEBGL_VERSION",()=>KD(2)?2:KD(1)?1:0);Xe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Xe.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Xe.get("WEBGL_VERSION")===2);Xe.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Xe.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Xe.registerFlag("WEBGL_PACK",()=>Xe.getBool("HAS_WEBGL"));Xe.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_CLIP",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_REDUCE",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_LAZILY_UNPACK",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_CONV_IM2COL",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Xe.getBool("WEBGL_PACK"));Xe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>cEe(Xe.getNumber("WEBGL_VERSION")));Xe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dEe(Xe.getNumber("WEBGL_VERSION")));Xe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Xe.getNumber("WEBGL_VERSION");return t===0?0:hEe(t)});Xe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Xe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!v4());Xe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>fEe(Xe.getNumber("WEBGL_VERSION")));Xe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Xe.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Xe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Xe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>pEe(Xe.getNumber("WEBGL_VERSION")));Xe.registerFlag("WEBGL_FENCE_API_ENABLED",()=>gEe(Xe.getNumber("WEBGL_VERSION")));Xe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Xe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Xe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Xe.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>v4()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Xe.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Xe.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Xe.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Xe.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Xe.registerFlag("WEBGL_EXP_CONV",()=>!1);Xe.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Xe.getBool("IS_TEST"));Xe.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Xe.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Xe.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Xe.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yr(){let t,e,n,r,s,o,i,a,u,l;return de().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",o="outputColor",i="out vec4 outputColor;",a=de().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",o="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:o,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gu(t,e,n="index"){const r=Qe(e);return r.map((s,o)=>{const i=`int ${t[o]} = ${n} / ${s}`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s}`:`index -= ${t[o]} * ${s}`;return`${i}; ${a};`}).join("")}function qx(t,e,n="index"){const r=Qe(e);return r.map((s,o)=>{const i=`int ${t[o]} = ${n} / outShapeStrides[${o}]`,a=o===r.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * outShapeStrides[${o}]`:`index -= ${t[o]} * outShapeStrides[${o}]`;return`${i}; ${a};`}).join("")}function yEe(t,e){const n=t.length,r=t.map(o=>`${e}[${o}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let o=n-3;o>=0;--o)s[o]=`(${s[o+1]} * ${r[o+1]})`;return s}function vEe(t,e,n="index"){const r=t.map((o,i)=>i),s=yEe(r,e);return s.map((o,i)=>{const a=`int ${t[i]} = ${n} / ${s[i]}`,u=i===s.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s[i]}`:`index -= ${t[i]} * ${s[i]}`;return`${a}; ${u};`}).join("")}function sT(t){const e=Qe(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function oT(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const S6=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:k6}=s1e;function xEe(t,e,n){const r=[];if(t.forEach(f=>{const p=ve(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=iT(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=r.join(`
`),o=t.map(f=>bEe(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=Yr(),u=kEe(a);let l,c,d=IEe(a);return e.isPacked?(l=wEe(e.logicalShape,i,n.enableShapeUniforms),c=$Ee(a)):(l=SEe(e.logicalShape,i,n.enableShapeUniforms),c=CEe(a)),n.packedInputs&&(d+=NEe),[d,u,c,s,l,o,n.userCode].join(`
`)}function qd(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return UEe(t,e);case 1:return jEe(t,e);case 2:return HEe(t,e);case 3:return qEe(t,e);case 4:return YEe(t,e);case 5:return ZEe(t);case 6:return QEe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function C6(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return VEe(t);case 1:return WEe(t,e);case 2:return GEe(t,e);case 3:return KEe(t,e);default:return XEe(t,e)}}function bEe(t,e,n=!1,r){let s="";n?s+=C6(t,r):s+=qd(t,r);const o=t.shapeInfo.logicalShape,i=e.logicalShape;return o.length<=i.length&&(n?s+=JEe(t,e):s+=eTe(t,e)),s}function wEe(t,e,n){switch(t.length){case 0:return $6();case 1:return REe(t,e,n);case 2:return zEe(t,e,n);case 3:return DEe(t,e,n);default:return PEe(t,e,n)}}function SEe(t,e,n){switch(t.length){case 0:return $6();case 1:return AEe(t,e,n);case 2:return BEe(t,e,n);case 3:return OEe(t,e,n);case 4:return LEe(t,e,n);case 5:return FEe(t,e);case 6:return MEe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function kEe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function CEe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function $Ee(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function IEe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${EEe}
    ${TEe}
    ${_Ee}
  `}const EEe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,TEe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_Ee=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,NEe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function $6(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function REe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function AEe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function DEe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),o=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function OEe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${qx(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Gu(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function PEe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),o=s*Math.ceil(t[t.length-2]/2);let i=o,a="",u="b, r, c";for(let l=2;l<t.length-1;l++)i*=t[t.length-l-1],a=`
      int b${l} = index / ${i};
      index -= b${l} * ${i};
    `+a,u=`b${l}, `+u;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${u});
    }
  `}function LEe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${qx(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Gu(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function FEe(t,e){const n=Gu(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function MEe(t,e){const n=Gu(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function zEe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Ft(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function BEe(t,e,n){return Ft(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Hu(t){return`offset${t}`}function VEe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Yr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function UEe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,o]=t.shapeInfo.texShape;if(s===1&&o===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Hu(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,u]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${u}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function WEe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,o=Yr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${o.texture2D}(${n}, uv);
    }
  `}function jEe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Xd(t)}
      }
    `;const s=t.shapeInfo.texShape,o=s[0],i=s[1];if(i===1&&o===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Hu(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${o}.0);
        return sampleTexture(${n}, uv);
      }
    `:o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${o}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function GEe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,i=o[0],a=o[1],u=Yr();if(o!=null&&Ft(n,o))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function HEe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape;if(o!=null&&Ft(n,o)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=o[0],f=o[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:a}=ml(n),u=i;if(u.length<n.length){const h=Yd(t,u),f=["row","col"];return`
      ${qd(h,e)}
      float ${s}(int row, int col) {
        return ${s}(${Zd(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Xd(t)}
      }
    `;const l=o[0],c=o[1],d=Hu(r);return c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function KEe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=t.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=Yd(t,h),m=["b","row","col"];return`
        ${C6(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Zd(m,f)});
        }
      `}const a=Yr();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const u=i[0],l=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function qEe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],i=n[2],{newShape:a,keptDims:u}=ml(n),l=a;if(l.length<n.length){const m=Yd(t,l),y=["row","col","depth"];return`
        ${qd(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Zd(y,u)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${i}, 1)));
        ${Xd(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],h=c[1],f=t.shapeInfo.flatOffset;if(h===o&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===i&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Hu(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function XEe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Yr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const o=t.shapeInfo.logicalShape,i=o.length,a=t.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=u[0],c=u[1],d=Math.ceil(o[i-1]/2);let h=d*Math.ceil(o[i-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)f=`int b${m}, `+f,h*=o[i-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${r}(${f}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${s.texture2D}(${n}, uv);
    }
  `}function YEe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],i=n[2]*o,a=n[1]*i,{newShape:u,keptDims:l}=ml(n);if(u.length<n.length){const v=Yd(t,u),x=["row","col","depth","depth2"];return`
      ${qd(v,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Zd(x,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${o}, 1)));
        ${Xd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(f===a&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===o&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=Hu(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function ZEe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],o=e[3]*s,i=e[2]*o,a=e[1]*i,{newShape:u,keptDims:l}=ml(e);if(u.length<e.length){const m=Yd(t,u),y=["row","col","depth","depth2","depth3"];return`
      ${qd(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Zd(y,l)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${o}, ${s})) +
          depth3;
        ${Xd(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Hu(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${o} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function QEe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:o}=ml(e);if(s.length<e.length){const y=Yd(t,s),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${qd(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Zd(g,o)});
      }
    `}const i=e[5],a=e[4]*i,u=e[3]*a,l=e[2]*u,c=e[1]*l;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${Xd(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Hu(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Xd(t){const e=t.name,n=ve(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function JEe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=k6(t.shapeInfo.logicalShape,e.logicalShape),u=Kt(i),l=i-o;let c;const d=["x","y","z","w","u","v"];o===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${d[v+l]} = 0;`).join(`
`);let h="";i<2&&o>0?h="coords":h=t.shapeInfo.logicalShape.map((v,x)=>`coords.${d[x+l]}`).join(", ");let f="return outputValue;";const m=ve(t.shapeInfo.logicalShape)===1,g=ve(e.logicalShape)===1;if(o===1&&!m&&!g)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)i===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=o-2,x=o-1;a.indexOf(v)>-1&&a.indexOf(x)>-1?f="return vec4(outputValue.x);":a.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${f}
    }
  `}function eTe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===u&&t.shapeInfo.flatOffset==null&&Ft(i,o))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const l=Kt(u),c=k6(t.shapeInfo.logicalShape,e.logicalShape),d=u-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":u<2&&c.length>=1?h="coords = 0;":h=c.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let p="";return u<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,y)=>`coords.${f[y+d]}`).join(", "),`
    float ${s}() {
      ${l} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function Kt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function iT(t,e,n){const{newShape:r,keptDims:s}=ml(e),o=e.length,i=t&&o===3&&e[0]===1,a=i?e.slice(1):r,u=!t&&o>1&&!Ft(e,n)&&r.length<o||i;return{useSqueezeShape:u,uniformShape:u?a:e,keptDims:s}}function Yd(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Zd(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(t,e,n,r){const s=n.map((c,d)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),o=s.map(c=>c.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=xEe(s,i,e),u=qIe(t.gl,a),l=t.createProgram(u);return de().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:o,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(l),Object.assign({program:e,fragmentShader:u,source:a,webGLProgram:l,inShapeInfos:o,outShapeInfo:i},I6(t,e,l)))}function I6(t,e,n){const r=[],s=[];let o,i,a,u=null,l=null;l=t.getUniformLocation(n,"NAN",!1),de().getNumber("WEBGL_VERSION")===1&&(u=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,c),h.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(h)}if(e.enableShapeUniforms&&(o=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),i=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:s,infLoc:u,nanLoc:l,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:i}}function qD(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,o=e[r],i=o.shape;if(!Ft(s,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${i} must match`);if(n.isUniform&&o.isUniform)return;const a=n.texShape,u=o.isUniform?null:o.texData.texShape;if(!Ft(a,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${u} must match`)})}function nTe(t,e,n,r,s){e.program.enableShapeUniforms||(qD(e.inShapeInfos,n),qD([e.outShapeInfo],[r]));const o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,i[0],i[1]):t.setOutputMatrixTexture(o.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),de().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let u=0;u<n.length;++u){const l=n[u],{uniform:c,offset:d,shape:h,texShape:f}=e.variablesLocations[u];if(h){const{uniformShape:p}=iT(e.program.packedInputs,l.shape,l.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,l.texData.texShape[0],l.texData.texShape[1]),c!=null){if(l.isUniform){if(ve(l.shape)<2)t.gl.uniform1f(c,l.uniformValues[0]);else{let p=l.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}l.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,l.texData.slice.flatOffset),t.setInputMatrixTexture(l.texData.texture.texture,c,u)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=Qe(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let u=0;u<e.program.customUniforms.length;++u){const l=e.program.customUniforms[u],c=e.customUniformLocations[u],d=s[u];if(l.type==="float")t.gl.uniform1fv(c,d);else if(l.type==="vec2")t.gl.uniform2fv(c,d);else if(l.type==="vec3")t.gl.uniform3fv(c,d);else if(l.type==="vec4")t.gl.uniform4fv(c,d);else if(l.type==="int")t.gl.uniform1iv(c,d);else if(l.type==="ivec2")t.gl.uniform2iv(c,d);else if(l.type==="ivec3")t.gl.uniform3iv(c,d);else if(l.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}t.executeProgram()}function rTe(t,e,n){let r="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const u=i.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:d}=iT(t.packedInputs,i.shape,u);let h="",f="",p="";if(c.length===1&&t.packedInputs){const w=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];h=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const w=Qe(c);p=`${w[0]===u[1]}_${w[w.length-1]===u[1]}`}const m=i.shape.length,y=c.length===2&&Ft(i.shape,u),g=ve(i.shape)===1,v=vd(i.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&Ft(u,n.texData.texShape),b=t.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${m}_${x}_${l?d:""}_${c.length}_${g}_${v}_${y}_${h}_${f}_${p}_${b}_${a}`}else{const u=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${u}_${a}`}});const s=t.userCode;let o=t.constructor.name;return o+="_"+r+"_"+s+`${de().getNumber("WEBGL_VERSION")}`,o}function Pr(t){return de().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sTe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Yr();this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?qx(["r","c","d"],e):Gu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oTe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Yr();this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?qx(["r","c","d"],e):Gu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iTe{constructor(e){this.variableNames=["A"],this.outTexUsage=Bs.DOWNLOAD;const n=Yr();this.outputShape=e,this.userCode=`
      ${S6}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aTe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Bs.DOWNLOAD;const n=Yr();this.outputShape=e,this.userCode=`
      ${S6}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lTe={R:0,G:1,B:2,A:3};class XD{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Yr();this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){const u=r[a];i+=`
          if(offset == ${a}) {
            result = values[${lTe[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?oT():sT(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${i}
        }
        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uTe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Yr();this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length);let s="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const u=i*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?oT():sT(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${o};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cTe(t){const e=Yr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return KIe(t,n)}function dTe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return QIe(t,e)}function hTe(t){const e=new Uint16Array([0,1,2,2,1,3]);return JIe(t,e)}function Xm(t,e,n,r,s,o){tEe(e,n);const i=eEe(t),a=t.TEXTURE_2D;return We(t,()=>t.bindTexture(a,i)),We(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),We(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),We(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),We(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),de().getNumber("WEBGL_VERSION")===1?We(t,()=>t.texImage2D(a,0,r,e,n,0,s,o,null)):We(t,()=>t.texStorage2D(a,1,r,e,n)),We(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function E6(t){return t.internalFormatFloat}function fTe(t,e,n,r){const[s,o]=Km(e,n);return Xm(t,s,o,E6(r),r.textureFormatFloat,t.FLOAT)}function T6(t){return t.internalFormatHalfFloat}function pTe(t,e,n,r){const[s,o]=Km(e,n);return Xm(t,s,o,T6(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function _6(t){return t.downloadTextureFormat}function mTe(t,e,n,r){const[s,o]=Km(e,n);return Xm(t,s,o,_6(r),t.RGBA,t.UNSIGNED_BYTE)}function N6(t){return t.internalFormatPackedFloat}function gTe(t,e,n,r){const[s,o]=Kd(e,n);return Xm(t,s,o,N6(r),t.RGBA,t.FLOAT)}function R6(t){return t.internalFormatPackedHalfFloat}function yTe(t,e,n,r){const[s,o]=Kd(e,n);return Xm(t,s,o,R6(r),t.RGBA,r.textureTypeHalfFloat)}function vTe(t,e,n){return We(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),GD(t,e,"clipSpacePos",n,3,20,0)&&GD(t,e,"uv",n,2,20,12)}function xTe(t,e,n,r,s,o){We(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,u;s instanceof Uint8Array?(i=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,u=t.RGBA):(i=new Float32Array(n*r*4),a=t.FLOAT,u=o.internalFormatPackedFloat),i.set(s),de().getNumber("WEBGL_VERSION")===2?We(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,i)):We(t,()=>t.texImage2D(t.TEXTURE_2D,0,u,n,r,0,t.RGBA,a,i)),We(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function bTe(t,e,n){We(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?de().getNumber("WEBGL_VERSION")===2?We(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):We(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):de().getNumber("WEBGL_VERSION")===2?We(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):We(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),We(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function wTe(t,e,n,r){const s=t.createBuffer();We(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return We(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),We(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),We(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function STe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function kTe(t,e,n,r){const[s,o]=Km(e,n),i=4,a=new Uint8Array(BIe(e*n,i));return We(t,()=>t.readPixels(0,0,s,o,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function CTe(t,e,n,r,s,o,i,a){const u=t,l=new Float32Array(VIe(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function $Te(t,e,n){const r=new Float32Array(e*n*4);return We(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nw{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=de().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,FIe(n,e)):this.gl=Xo(n),e=this.gl,de().getNumber("WEBGL_VERSION")===2){const o=e;this.createVertexArray=()=>We(o,()=>o.createVertexArray()),this.bindVertexArray=i=>We(o,()=>o.bindVertexArray(i)),this.deleteVertexArray=i=>We(o,()=>o.deleteVertexArray(i)),this.getVertexArray=()=>We(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(e!=null){const o=e.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>We(e,()=>o.createVertexArrayOES()),this.bindVertexArray=i=>We(e,()=>o.bindVertexArrayOES(i)),this.deleteVertexArray=i=>We(e,()=>o.deleteVertexArrayOES(i)),this.getVertexArray=()=>We(e,()=>e.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),de().getNumber("WEBGL_VERSION")===1){const o="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Kg(this.gl,o),go(this.gl,i))this.textureHalfFloatExtension=Kg(this.gl,i);else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),go(this.gl,s))this.colorBufferHalfFloatExtension=Kg(this.gl,s);else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",go(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(go(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=dTe(this.gl),this.indexBuffer=hTe(this.gl),this.framebuffer=nEe(this.gl),this.textureConfig=rT(this.gl,this.textureHalfFloatExtension)}get debug(){return de().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;We(e,()=>e.finish()),We(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),We(e,()=>e.deleteFramebuffer(this.framebuffer)),We(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),We(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),We(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),fTe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),pTe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),mTe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),bTe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),xTe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),yTe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),gTe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(HD(this.gl,this.framebuffer),this.outputTexture=null),We(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>kTe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,o,i){return CTe(this.gl,e,n,r,s,o,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return STe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=wTe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(de().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,o=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=s.clientWaitSync(o,0,0);return i===s.ALREADY_SIGNALED||i===s.CONDITION_SATISFIED},n=o}else de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>$Te(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=cTe(n));const r=YIe(n);We(n,()=>n.attachShader(r,this.vertexShader)),We(n,()=>n.attachShader(r,e)),ZIe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Iw(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;We(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),vTe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(We(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Iw(this.gl,this.program),We(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?sEe(this.gl,e,n):oEe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),We(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),iEe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,o]=Kd(n,r);this.setOutputMatrixTextureDriver(e,s,o)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Iw(this.gl,this.program),qg(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}We(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),We(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Kg(this.gl,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,o),o}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await OA(()=>this.disposed||this.isQueryAvailable(e,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=ITe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in de().platform&&(r=de().platform.setTimeoutCustom.bind(de().platform)),OA(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),Ew(this.gl,e,this.framebuffer),this.debug&&qg(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Ew(this.gl,this.outputTexture,this.framebuffer),this.debug&&qg(this.gl)):HD(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;Ew(s,e,this.framebuffer),this.debug&&qg(s),this.outputTexture=e,We(s,()=>s.viewport(0,0,n,r)),We(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),We(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function ITe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:ETe,bincountImpl:A6,bincountReduceImpl:TTe,bitwiseAndImpl:_Te,castImpl:NTe,ceilImpl:RTe,concatImpl:ATe,equalImpl:DTe,expImpl:OTe,expm1Impl:PTe,floorImpl:LTe,gatherNdImpl:FTe,gatherV2Impl:MTe,greaterImpl:zTe,greaterEqualImpl:BTe,lessImpl:VTe,lessEqualImpl:UTe,linSpaceImpl:WTe,logImpl:jTe,maxImpl:GTe,maximumImpl:HTe,minimumImpl:KTe,multiplyImpl:qTe,negImpl:XTe,notEqualImpl:YTe,prodImpl:ZTe,raggedGatherImpl:QTe,raggedRangeImpl:JTe,raggedTensorToTensorImpl:e_e,rangeImpl:t_e,rsqrtImpl:n_e,scatterImpl:r_e,sigmoidImpl:s_e,simpleAbsImpl:D6,sliceImpl:o_e,sparseFillEmptyRowsImpl:i_e,sparseReshapeImpl:a_e,sparseSegmentReductionImpl:O6,sqrtImpl:l_e,staticRegexReplaceImpl:u_e,stridedSliceImpl:c_e,stringNGramsImpl:d_e,stringSplitImpl:h_e,stringToHashBucketFastImpl:f_e,subImpl:p_e,tileImpl:m_e,topKImpl:g_e,transposeImpl:aT,uniqueImpl:y_e}=bSe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P6(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Gr(t,e){return e===1?[t]:P6(t,e)}function v_e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x_e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Pr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Gr("rc",this.rank),r=Kt(this.rank),s=this.getOutOfBoundsCondition(n),o=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let o=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)o=`${e[e.length-1-i]},`+o;n.push(o)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L6{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length);let r="";for(let s=0;s<4;s++){let o="thisRC = rc;";s%2===1&&(o+="thisRC.z += 1;"),s>1&&(o+="thisRC.y += 1;"),r+=`
        ${o}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${b_e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?oT():sT(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function b_e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?vEe(["r","c","d"],"inputShape"):Gu(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w_e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=ZD(n,r),o=QD(e,s,r);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const i=YD(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const u=this.freeTextures[o].pop();return this.usedTextures[o].push(u),u}let a;return s===yr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===yr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===yr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===yr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===yr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const o=ZD(r,s),i=QD(n,o,s);i in this.freeTextures||(this.freeTextures[i]=[]);const a=YD(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,s),u=de().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[i],c=l&&l.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function S_e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function YD(t,e,n,r,s){const o=k_e(e,r);let i;if(s){const[u,l]=Kd(t[0],t[1]);i=u*l}else{const[u,l]=Km(t[0],t[1]);i=u*l}const a=S_e(n,o);return i*a}function k_e(t,e){switch(t){case yr.PACKED_2X2_FLOAT32:return N6(e);case yr.PACKED_2X2_FLOAT16:return R6(e);case yr.UNPACKED_FLOAT32:return E6(e);case yr.UNPACKED_FLOAT16:return T6(e);case yr.PACKED_4X1_UNSIGNED_BYTE:return _6(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function C_e(t){return de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?yr.PACKED_2X2_FLOAT32:yr.UNPACKED_FLOAT32:t?yr.PACKED_2X2_FLOAT16:yr.UNPACKED_FLOAT16}function ZD(t,e){if(t===Bs.UPLOAD)return yr.PACKED_2X2_FLOAT32;if(t===Bs.RENDER||t==null)return C_e(e);if(t===Bs.DOWNLOAD||t===Bs.PIXELS)return yr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function QD(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pi{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Eo="if (isnan(x)) return x;",$_e="return x;",JD="return abs(x);",I_e="return (x >= 0.0) ? x : (exp(x) - 1.0);",E_e=Eo+`
  return (x < 0.0) ? 0.0 : x;
`,T_e=Eo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ta="return x;",__e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N_e="return x;",R_e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,A_e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,D_e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,O_e="return 1.0 / (1.0 + exp(-1.0 * x));";class Ma{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P_e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length);const n=e.length,r=Gr("rc",n),s=Kt(n),o=v_e(n,r),i=r.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L_e=oB,F_e=1e-7,M_e=1e-4,Zg={};function z_e(t){return t in Zg||(Zg[t]={}),Zg[t]}const B_e=de().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),V_e=600;function U_e(){return de().global.screen==null?1024:de().global.screen.height*de().global.screen.width*window.devicePixelRatio*V_e/1024/1024}class Xx extends y${nextDataId(){return Xx.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!de().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof Nw)n=e;else{const r=Xo(de().getNumber("WEBGL_VERSION"),e);n=new Nw(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Xo(de().getNumber("WEBGL_VERSION"));n=new Nw(r),this.binaryCache=z_e(de().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new w_e(this.gpgpu),this.numMBBeforeWarning=U_e(),this.texData=new Ez(this,si())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,o,i){const a=this.makeTensorInfo(n,r),u=this.texData.get(a.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[s,o]},u.texShape=[s,o];const l=Xg(n),c=new XD(l,!1,i),d=this.runWebGLProgram(c,[a],r,[[s,o]]);return d.shape=n,u.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((de().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||de().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Bs.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,o){if(de().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Bs.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:o,slice:i,shape:a,isPacked:u}=n;if(i!=null){let h;u?h=new Ma(a,Ta):h=new pi(a,Ta);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=Jr());let d;if(s==="complex64"){const h=this.readSync(o.real.dataId),f=this.readSync(o.imag.dataId);d=aa(h,f)}else d=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Jr()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:s,slice:o,dtype:i,complexTensorInfos:a,isPacked:u}=n;if(o!=null){let p;u?p=new Ma(s,Ta):p=new pi(s,Ta);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:i}],i),y=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(de().getBool("DEBUG")&&!de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&de().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(i!=="complex64"&&de().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...Hg(s))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],y=p[1];d=aa(m,y)}else if(l==null)d=this.getValuesFromTexture(e);else{const p=ve(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const p=this.gpgpu.gl;We(p,()=>p.deleteBuffer(l))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&si().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:o,slice:i,dtype:a,isPacked:u,texture:l}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let f;u?f=new Ma(o,Ta):f=new pi(o,Ta);const p=this.runWebGLProgram(f,[{dataId:e,shape:o,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(l==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=si().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>tl(s));return kt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return kt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!GIe(r))throw de().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),o=ve(n);if(de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...Hg(n)).subarray(0,o);return this.disposeIntermediateTensorInfo(h),p}const i=de().getBool("WEBGL_PACK")&&s===!0,a=i?Xg(n):n,u=i?new aTe(a):new iTe(a),l=this.runWebGLProgram(u,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(l),d}timerAvailable(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const o=yu(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),i=yu(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(o);a.kernelMs=ihe(u),a.getExtraProfileInfo=()=>u.map((l,c)=>({name:i[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Jr(),endMs:null}}endTimer(e){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Jr(),e)}async getQueryTime(e){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:o,isPacked:i,slice:a}=this.texData.get(e),u=a&&a.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,o,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=B_e){return de().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ve(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Fs("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return L_e(e.shape,n)}packedUnaryOp(e,n,r){const s=new Ma(e.shape,n),o=this.compileAndRun(s,[e],r);return si().makeTensorFromTensorInfo(o)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=D6(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,JD,e.dtype);const n=new pi(e.shape,JD),r=this.compileAndRun(n,[e]);return si().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Ap(r[0])){const o=r.map(i=>qa(i));s=this.write(o,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return si().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new P_e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new x_e(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[$d(e.shape),...Id(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},o=[$d(n),...Id(n)],i=new L6(o,r),a=!0,u=[r],l=this.runWebGLProgram(i,[s],e.dtype,u,a);return{dataId:l.dataId,shape:n,dtype:l.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:o,dtype:i}=r;if(n!=null){const h=ve(o),f=n[0]*n[1]*4;B(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Xg(o);let u;s?u=new oTe(a):u=new sTe(a);const l=!0,c=[n??Hg(a)],d=this.runWebGLProgram(u,[{shape:a,dtype:i,dataId:e}],i,c,l,n);return{dtype:i,shape:o,dataId:d.dataId}}runWebGLProgram(e,n,r,s,o=!1,i){const a=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(a.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===sp.DENSE){const g=i??Hg(e.outputShape);u.texShape=g.map(v=>v*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),ve(a.shape)===0)return u.values=_r(a.dtype,0),a;const l=[],c=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(g.dataId);if(v.texture==null){if(!e.packedInputs&&ve(g.shape)<=de().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!v.isPacked!=!!e.packedInputs)g=v.isPacked?this.unpackTensor(g):this.packTensor(g),l.push(g),v=this.texData.get(g.dataId);else if(v.isPacked&&!Gy(v.shape,g.shape)){const x=g,b=g.shape;g.shape=v.shape,g=this.packedReshape(g,b),l.push(g),v=this.texData.get(g.dataId),x.shape=b}return{shape:g.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:u,isUniform:!1},h=rTe(e,c,d),f=this.getAndSaveBinary(h,()=>tTe(this.gpgpu,e,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),de().get("ENGINE_COMPILE_ONLY")||nTe(this.gpgpu,f,c,d,s),l.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const y=de().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const g=Jr();g-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!de().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&o===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,r,s,o=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,o)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(de().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=le(()=>{if(!de().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=de().getBool("DEBUG");de().set("DEBUG",!1);const n=this.abs(Nt(1e-8)).dataSync()[0];if(de().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?F_e:M_e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:o,texture:i,usage:a,isPacked:u}=n;if(i!=null)return;const l=this.activeTimers!=null;let c;l&&(c=Jr());let d=n.texShape;if(d==null&&(d=uEe(r,u),n.texShape=d),o!=null){const h=Xg(r);let f,p=d[1],m=d[0];const y=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(u||!y)&&([p,m]=Kd(d[0],d[1])),u?f=new uTe(h,y):f=new XD(h,y);const g=y?[m,p]:d,v=this.makeTensorInfo(g,s),x=this.texData.get(v.dataId);y?x.usage=Bs.PIXELS:x.usage=Bs.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,o);const b=[[m,p]],w=!0,k=this.runWebGLProgram(f,[v],s,b,w),C=this.texData.get(k.dataId);n.texShape=C.texShape,n.isPacked=C.isPacked,n.usage=C.usage,de().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(n.texture=C.texture,n.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(v),l&&(this.uploadWaitMs+=Jr()-c)}else{const h=this.acquireTexture(d,a,s,u);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=W_e(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*vy(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(o){throw o}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await CB(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(w6(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:o,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:u}=I6(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=o,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=u}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:o,width:i,channels:a}=e,u=si().backend;if(!u.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(s,n,r,o,i,a);return si().makeTensorFromDataId(l,n,r,u)}}Xx.nextDataId=0;function W_e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */x4()&&S4("webgl",()=>new Xx,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lT=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Nu{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=ht(n,r),this.enableShapeUniforms=Pr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ku=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Qd{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ht(n,r);const o=this.outputShape.length;this.enableShapeUniforms=Pr(o);let i="";if(s)if(o===0||ve(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Kt(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=Gr("coords",o);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${u[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${u[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${u[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${u[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Es(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const j_e={kernelName:Jp,backendName:"webgl",kernelFunc:Es};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $l(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,o=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(o.dataId),a=Es({inputs:{x:r},backend:n}),u=Es({inputs:{x:s},backend:n});return i.complexTensorInfos={real:a,imag:u},o}const G_e={kernelName:R$,backendName:"webgl",kernelFunc:$l};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6="return (a < 0.) ? b * a : a;",M6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function H_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:o}=r,i=n.makeTensorInfo([],"float32",gl(o,"float32")),a=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qd(M6,s.shape,i.shape):new Nu(F6,s.shape,i.shape),u=n.runWebGLProgram(a,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),u}const K_e={kernelName:Gv,backendName:"webgl",kernelFunc:H_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z6="return (a < 0.) ? b * a : a;",B6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function q_e(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,o=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qd(B6,r.shape,s.shape):new Nu(z6,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],"float32")}const X_e={kernelName:cx,backendName:"webgl",kernelFunc:q_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jd="if (isnan(x)) return x;";function _t({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:o})=>{const{x:i}=s,a=o,u=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),h=n(d.values,u);return a.makeTensorInfo(i.shape,u,h)}const l=de().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new Ma(i.shape,e):c=new pi(i.shape,t),a.runWebGLProgram(c,[i],u)}}function kr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:o}){return({inputs:i,backend:a})=>{const{a:u,b:l}=i,c=a;if(r&&u.dtype==="complex64"){const p=c.texData.get(u.dataId),m=c.texData.get(l.dataId),[y,g]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[b,w]=x,k={dataId:b.dataId,dtype:b.dtype,shape:u.shape},C={dataId:w.dataId,dtype:w.dtype,shape:l.shape},$=new Nu(t,u.shape,l.shape);return c.runWebGLProgram($,[k,C],$s(b.dtype,w.dtype))}),v=$l({inputs:{real:y,imag:g},backend:c});return c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(g),v}const d=o||$s(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&s!=null){const p=c.texData.get(u.dataId).values,m=c.texData.get(l.dataId).values,y=u.dtype==="string"?la(p):p,g=u.dtype==="string"?la(m):m,[v,x]=s(u.shape,l.shape,y,g,d),b=c.makeTensorInfo(x,d),w=c.texData.get(b.dataId);return w.values=v,b}const h=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new Qd(e,u.shape,l.shape,n):f=new Nu(t,u.shape,l.shape),c.runWebGLProgram(f,[u,l],d)}}function op(t,e=!1){if(t==="linear")return e?N_e:$_e;if(t==="relu")return e?A_e:E_e;if(t==="elu")return e?R_e:I_e;if(t==="relu6")return e?D_e:T_e;if(t==="prelu")return e?B6:z6;if(t==="leakyrelu")return e?M6:F6;if(t==="sigmoid")return e?O_e:__e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V6{constructor(e,n,r,s=!1,o=!1,i=!1,a=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Pr(this.outputShape.length);const c=s?e[1]:e[2],d=Math.ceil(c/2),h=s?"i * 2, rc.y":"rc.y, i * 2",f=o?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",g="";a&&(u?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:l?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:y=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let x="rc.x",b="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${b};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eO={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class tO{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=ht(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nO="return a * b;";function uT(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,o=$s(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),u=n.texData.get(s.dataId),l=new tO(eO.REAL,r.shape,s.shape),c=new tO(eO.IMAG,r.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:s.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:s.shape}],h=n.runWebGLProgram(l,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),p=$l({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),u=n.texData.get(s.dataId),[l,c]=qTe(r.shape,s.shape,a.values,u.values,o),d=n.makeTensorInfo(c,o),h=n.texData.get(d.dataId);return h.values=l,d}let i;return de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Qd(nO,r.shape,s.shape):i=new Nu(nO,r.shape,s.shape),n.runWebGLProgram(i,[r,s],o)}const Y_e={kernelName:lm,backendName:"webgl",kernelFunc:uT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_e(t,e,n){const r=[$d(t.shape),...Id(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},o=[$d(e),...Id(e)],i=new L6(o,r),a=!0,u=[r],l=n.runWebGLProgram(i,[s],t.dtype,u,a);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Le(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:o}=r,i=n,a=ve(s.shape),u=Tz(o,a),l=ve(u);B(a===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(s.dataId);return c.isPacked&&!Gy(s.shape,u)&&!(c.texture!==null&&Gy(c.shape,u))?Z_e(s,u,i):(i.incRef(s.dataId),{dataId:s.dataId,shape:u,dtype:s.dtype})}const Q_e={kernelName:hx,backendName:"webgl",kernelFunc:Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rO{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:i}=e;this.outputShape=[s,i];const a=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(n!=null){const d=1/n;l=`sumValue += dot(values * ${pd(d)?d.toPrecision(2):d}, ones);`}let c="";o%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${a};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J_e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:i}=e;this.outputShape=[s,i];let a="0.0",u="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",u="min"):n==="max"&&(a="-1.0 / 1e-20",u="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?l="sumValue":n==="prod"?l="prodValue":n==="all"?l="allValue":n==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";o%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=Dx(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function qu(t,e,n,r){const s=eNe(t.shape);let o=t;for(let i=0;i<s.length;i++){const{inSize:a,windowSize:u,outSize:l}=s[i];let c,d;n==="mean"?c=i===0?new rO({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l},a):new rO({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l}):c=new J_e({windowSize:u,inSize:a,batchSize:t.shape[0],outSize:l},n),d=o,o=r.runWebGLProgram(c,[o],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tNe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const s=Kt(this.rank),o=nNe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}}function nNe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rNe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Kt(this.rank),o=P6("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=o[c];const a=`vec2(${i.slice(-2).join()})`,u=`++${o[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yx(t,e,n){const r=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rNe(t.shape,e):new tNe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t,e,n,r){const s=e,o=t.shape.length,i=Ct(s,t.shape);let a=i;const u=In(a,o),l=u!=null;let c=t;l&&(c=Yx(t,u,r),a=Vn(a.length,o)),Sr("sum",a,o);const[d,h]=pr(c.shape,a);let f=d;n&&(f=qn(d,i));const p=ve(h),y=ve(t.shape)/p,g=Le({inputs:{x:c},attrs:{shape:[y,p]},backend:r}),v=hI(t.dtype),x=qu(g,v,"sum",r),b=Le({inputs:{x},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),l&&r.disposeIntermediateTensorInfo(c),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zx(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r;return sNe(s,o,i,n)}const oNe={kernelName:vx,backendName:"webgl",kernelFunc:Zx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:o}=r,i=n,a=s.shape.length,u=new Array(a);for(let c=0;c<u.length;c++)u[c]=s.shape[o[c]];let l;if(i.shouldExecuteOnCPU([s])){const d=i.texData.get(s.dataId).values,h=aT(d,s.shape,s.dtype,o,u);l=i.makeTensorInfo(u,s.dtype);const f=i.texData.get(l.dataId);f.values=h}else l=Yx(s,o,i);return l}const iNe={kernelName:Xc,backendName:"webgl",kernelFunc:qr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U6=1e3;function Hy({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:o=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:u=null}){const l=t.shape.length,c=e.shape.length,d=n?t.shape[l-2]:t.shape[l-1],h=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[l-1]:t.shape[l-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),y=e.shape.slice(0,-2),g=ve(m),v=ve(y),b=ht(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);B(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[g,d,f]:[g,f,d],k=r?[v,p,h]:[v,h,p],C=Le({inputs:{x:t},backend:s,attrs:{shape:w}}),$=Le({inputs:{x:e},backend:s,attrs:{shape:k}}),E=[C,$],S=Math.max(g,v),R=n?C.shape[1]:C.shape[2],T=o!=null,P=i!=null,I=u==="leakyrelu",A=u!=null?op(u,!0):null,L=T||P||I||A!=null;let V;if((f===1||p===1)&&R>U6&&L===!1){let M=C,_=$;n&&(M=qr({inputs:{x:C},backend:s,attrs:{perm:[0,2,1]}}),E.push(M)),r&&(_=qr({inputs:{x:$},backend:s,attrs:{perm:[0,2,1]}}),E.push(_));const F=p!==1,O=p===1;let D=M;F&&(D=Le({inputs:{x:M},backend:s,attrs:{shape:[S,R,1]}}),E.push(D));const j=p===1?2:1;let G=_;O&&(G=Le({inputs:{x:_},backend:s,attrs:{shape:[S,1,R]}}),E.push(G));const J=uT({inputs:{a:D,b:G},backend:s});V=Zx({inputs:{x:J},backend:s,attrs:{axis:j,keepDims:!0}}),E.push(J)}else{const M=$s(t.dtype,e.dtype),_=new V6(w,k,[S,f,p],n,r,T,A,P,I),F=[C,$];if(o!=null&&F.push(o),P&&F.push(i),I){const O=s.makeTensorInfo([],"float32",gl(a,"float32"));F.push(O),E.push(O)}V=s.runWebGLProgram(_,F,M)}const z=Le({inputs:{x:V},backend:s,attrs:{shape:b}});E.push(V);for(const M of E)s.disposeIntermediateTensorInfo(M);return z}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o,bias:i,preluActivationWeights:a}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:d}=r;return Hy({a:s,b:o,transposeA:u,transposeB:l,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const lNe={kernelName:xy,backendName:"webgl",kernelFunc:aNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sO="return abs(x);";function uNe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const o=n.texData.get(r.dataId),i=D6(o.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let s;return de().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ma(r.shape,sO):s=new pi(r.shape,sO),n.runWebGLProgram(s,[r],r.dtype)}const cNe={kernelName:$v,backendName:"webgl",kernelFunc:uNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dNe=Eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,hNe=_t({opSnippet:dNe}),fNe={kernelName:Dp,backendName:"webgl",kernelFunc:hNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe=Eo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,mNe=_t({opSnippet:pNe}),gNe={kernelName:Op,backendName:"webgl",kernelFunc:mNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oO="return a + b;",yNe=kr({opSnippet:oO,packedOpSnippet:oO,supportsComplex:!0,cpuKernelImpl:ETe}),vNe={kernelName:Vd,backendName:"webgl",kernelFunc:yNe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xNe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const r=[];this.variableNames.forEach(o=>{r.push(`float v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bNe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((o,i)=>`T${i}`);const r=[];this.variableNames.forEach(o=>{r.push(`vec4 v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E0(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Es({inputs:{x:r[0]},backend:n});if(r.length>de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=E0({inputs:r.slice(0,u),backend:n}),c=E0({inputs:r.slice(u),backend:n});return E0({inputs:[l,c],backend:n})}const s=r.map(u=>u.dtype).reduce((u,l)=>$s(u,l)),o=r.map(u=>u.shape),a=de().getBool("WEBGL_PACK")?new bNe(r[0].shape,o):new xNe(r[0].shape,o);return n.runWebGLProgram(a,r,s)}const wNe={kernelName:C$,backendName:"webgl",kernelFunc:E0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,u=Ct(o,s.shape);let l=u;const c=In(l,a);let d=s;c!=null&&(d=qr({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Vn(l.length,a)),Sr("all",l,a);const[h,f]=pr(d.shape,l),p=ve(f),m=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=qu(m,m.dtype,"all",n);let g;if(i){const v=qn(h,u);g=Le({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=Le({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),g}const kNe={kernelName:$$,backendName:"webgl",kernelFunc:SNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,u=Ct(o,s.shape);let l=u;const c=In(l,a);let d=s;c!=null&&(d=qr({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Vn(l.length,a)),Sr("any",l,a);const[h,f]=pr(d.shape,l),p=ve(f),m=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=qu(m,m.dtype,"any",n);let g;if(i){const v=qn(h,u);g=Le({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=Le({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),g}const $Ne={kernelName:I$,backendName:"webgl",kernelFunc:CNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class INe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:o,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];const a=n==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ENe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,B(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const o=e[e.length-1],i=Math.ceil(o/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,u=a.length,l=Kt(u),c=Gr("coords",u);let d,h;if(i===1){h=u+1;const $=Kt(h);d=`
        ${$} sourceLocR = ${$}(${c.join()}, 0);
        ++${c[u-1]};
        ${$} sourceLocG = ${$}(${c.join()}, 0);
        ++${c[u-2]};
        ${$} sourceLocA = ${$}(${c.join()}, 0);
        --${c[u-1]};
        ${$} sourceLocB = ${$}(${c.join()}, 0);
        --${c[u-2]};`}else h=u,d=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map($=>"int "+$),y=Gr("sourceLocR",h-1).concat("inIdx.r"),g=Gr("sourceLocG",h-1).concat("inIdx.g"),v=Gr("sourceLocB",h-1).concat("inIdx.b"),x=Gr("sourceLocA",h-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",w=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()})));`,k=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,C=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${a[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${a[u-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${k};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${k};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6(t,e,n,r=null){let s=e.shape[0],o=e.shape[1];r!=null&&(s=r.shape[0],o=r.shape[1]);const i=Dx(o),a={windowSize:i,inSize:o,batchSize:s,outSize:Math.ceil(o/i)},u=new INe(a,n,r==null),l=[e];r!=null&&l.push(r);const c=t.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const d=W6(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function j6(t,e,n,r=null){const s=r!=null?r.shape:e.shape,o=s[s.length-1],i=Dx(o),a=new ENe(s,i,n,r==null),u=r==null?[e]:[e,r],l=t.runWebGLProgram(a,u,"int32");if(l.shape.length===e.shape.length){const c=j6(t,e,n,l);return t.disposeIntermediateTensorInfo(l),c}return l}function G6(t,e,n,r){const s=[n];if(Sr("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!de().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const o=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let u=e;a&&(u=t.unpackTensor(e),o.push(u));const[l,c]=pr(u.shape,s),d=ve(c),h=Le({inputs:{x:u},backend:t,attrs:{shape:[-1,d]}});o.push(h);const f=W6(t,h,r);o.push(f);const p=Le({inputs:{x:f},backend:t,attrs:{shape:l}});return o.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return j6(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;let i=Ct(o,s.shape);const a=In(i,s.shape.length);let u=s;const l=[];a!=null&&(u=qr({inputs:{x:s},backend:n,attrs:{perm:a}}),l.push(u),i=Vn(i.length,u.shape.length)),Sr("argMax",[i[0]],u.shape.length);const c=G6(n,u,i[0],"max");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const _Ne={kernelName:Iv,backendName:"webgl",kernelFunc:TNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o}=r;let i=Ct(o,s.shape);const a=In(i,s.shape.length);let u=s;const l=[];a!=null&&(u=qr({inputs:{x:s},backend:n,attrs:{perm:a}}),l.push(u),i=Vn(i.length,u.shape.length)),Sr("argMin",[i[0]],u.shape.length);const c=G6(n,u,i[0],"min");return l.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const RNe={kernelName:Ev,backendName:"webgl",kernelFunc:NNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ANe=Eo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,DNe=_t({opSnippet:ANe}),ONe={kernelName:Pp,backendName:"webgl",kernelFunc:DNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PNe=Eo+"return log(x + sqrt(x * x + 1.0));",LNe=_t({opSnippet:PNe}),FNe={kernelName:Lp,backendName:"webgl",kernelFunc:LNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MNe=Eo+`
  return atan(x);
`,zNe=_t({opSnippet:MNe}),BNe={kernelName:Fp,backendName:"webgl",kernelFunc:zNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VNe=lT+`
  return atan(a, b);
`,UNe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ku+`
  return result;
`,WNe=kr({opSnippet:VNe,packedOpSnippet:UNe}),jNe={kernelName:zp,backendName:"webgl",kernelFunc:WNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GNe=Eo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,HNe=_t({opSnippet:GNe}),KNe={kernelName:Mp,backendName:"webgl",kernelFunc:HNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ip{constructor(e,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const $=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${u});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${$} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?o?y:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,k=i%4,C=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${u});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${w};
          if (${k===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${k===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${k===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${b});
      }
    `}}class cT{constructor(e,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,y=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let b="0.0";if(x||(b="-1.0 / 1e-20"),r){const S=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${u}, ${l});
        const ivec3 pads = ivec3(${y}, ${g}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${S} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?o?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / max(count, 1.0)");const C=Math.floor(i/4)*4,$=i%4,E=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${u}, ${l});
      const ivec3 pads = ivec3(${y}, ${g}, ${v});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${E}
            }

            int xC = xCCorner + ${C};
            if (${$===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${$===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${E}
            } else if (${$===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${E}
            }
          }
        }
        setOutput(${k});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;qm(s,"avgPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:u}=r,l=1;B(Dr(i,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=$o(s.shape,o,i,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&Ft(c.inShape,c.outShape))return Es({inputs:{x:s},backend:n});const d=new ip(c,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const XNe={kernelName:Tv,backendName:"webgl",kernelFunc:qNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],d=fa(s.shape,o,i,c,a,u,l),h=new cT(d,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const ZNe={kernelName:_v,backendName:"webgl",kernelFunc:YNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QNe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,d=l-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class JNe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,y=f-1-e.padInfo.left,g=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${y});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,d=[1,1,1],h=fa(i.shape,a,u,d,l,c),f=new JNe(h);return n.runWebGLProgram(f,[s],i.dtype)}const tRe={kernelName:T$,backendName:"webgl",kernelFunc:eRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nRe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o;qm([s,o],"avgPoolGrad");const{filterSize:a,strides:u,pad:l}=r,c=$o(i.shape,a,u,1,l),d=new QNe(c);return n.runWebGLProgram(d,[s],i.dtype)}const rRe={kernelName:E$,backendName:"webgl",kernelFunc:nRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:o}=e,{transposeA:i,transposeB:a}=r;return Hy({a:s,b:o,transposeA:i,transposeB:a,backend:n})}const oRe={kernelName:Nv,backendName:"webgl",kernelFunc:sRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iRe{constructor(e,n,r,s,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],ht(e,n),ht(e,r);let a="0.0";s!=null&&(ht(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="1.0";o!=null&&(ht(e,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aRe{constructor(e,n,r,s,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],ht(e,n),ht(e,r);let a="vec4(0.0)";s!=null&&(ht(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let u="vec4(1.0)";o!=null&&(ht(e,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:o,offset:i,scale:a}=t;B(s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),B(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),B(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;u==null&&(u=.001);const l=[r,s,o];let c=null;i!=null&&(c=i.shape,l.push(i));let d=null;a!=null&&(d=a.shape,l.push(a));const h=de().getBool("WEBGL_PACK_NORMALIZATION")?new aRe(r.shape,s.shape,o.shape,c,d,u):new iRe(r.shape,s.shape,o.shape,c,d,u);return e.runWebGLProgram(h,l,l[0].dtype)},uRe={kernelName:Uv,backendName:"webgl",kernelFunc:lRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cRe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Kt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=dRe(this.rank);let s;const o=e.map((i,a)=>`sourceLoc.${iC[a]} = start[${a}] + coords.${iC[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const iC=["x","y","z","w","u","v"];function dRe(t){if(t===1)return"sourceLoc";if(t<=6)return iC.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hRe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Kt(this.rank),r=Gr("coords",this.rank),s=Gr("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,i=`getChannel(getSource(${s.join()}), ${o})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${i};
        --${s[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${i};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${a}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fRe(t,e,n,r){const s=r.texData.get(t.dataId),o=r.makeTensorInfo(n,t.dtype),i=r.texData.get(o.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=nE(e,Qe(t.shape));s.slice&&(a+=s.slice.flatOffset),i.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const u=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,u+1),o}function eh(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,size:i}=r,[a,u]=Ax(s,o,i);if(JI(s,a,u),ve(u)===0)return n.makeTensorInfo(u,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),h=o_e(d.values,a,u,s.shape,s.dtype);return n.makeTensorInfo(u,s.dtype,h)}const{isPacked:l}=n.texData.get(s.dataId),c=tE(s.shape,a,u);if(l||!c){const d=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hRe(u):new cRe(u),h=[a];return n.runWebGLProgram(d,[s],s.dtype,h)}return n.uploadToGPU(s.dataId),fRe(s,a,u,n)}const pRe={kernelName:yx,backendName:"webgl",kernelFunc:eh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mRe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,crops:i}=r;B(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((v,x)=>v*x),u=Pm(s.shape,o,a),l=Lm(u.length,o.length),c=Fm(s.shape,o,a),d=aE(i,o.length),h=lE(c,i,o.length),f=[],p=Le({inputs:{x:s},backend:n,attrs:{shape:u}}),m=qr({inputs:{x:p},backend:n,attrs:{perm:l}}),y=Le({inputs:{x:m},backend:n,attrs:{shape:c}}),g=eh({inputs:{x:y},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(y),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},gRe={kernelName:Rv,backendName:"webgl",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i}=r,a=n.readSync(s.dataId),u=n.readSync(o.dataId),l=A6(a,u,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,l)}const vRe={kernelName:_$,backendName:"webgl",kernelFunc:yRe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xRe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,bRe=`
  return float(int(a.r) & int(b.r));
`;function wRe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,o=de().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=de().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||i===1){const u=n.texData.get(r.dataId).values,l=n.texData.get(s.dataId).values,[c,d]=_Te(r.shape,s.shape,u,l,r.dtype),h=n.makeTensorInfo(d,r.dtype),f=n.texData.get(h.dataId);return f.values=c,h}let a;return o?a=new Qd(xRe,r.shape,s.shape,!1):a=new Nu(bRe,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const SRe={kernelName:N$,backendName:"webgl",kernelFunc:wRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,o=n.readSync(r.dataId),i=n.readSync(s.dataId),a=ht(Array.from(o),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const CRe={kernelName:Oz,backendName:"webgl",kernelFunc:kRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Re="return float(a != b);",H6=kr({opSnippet:$Re,cpuKernelImpl:YTe,dtype:"bool"}),IRe={kernelName:ox,backendName:"webgl",kernelFunc:H6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ym(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Es({inputs:{x:s.complexTensorInfos.real},backend:n})}const ERe={kernelName:tI,backendName:"webgl",kernelFunc:Ym};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe="return float(int(x));";function _Re(t,e){const n=new pi(t.shape,TRe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aC(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return Es({inputs:{x:s},backend:n});const i=dr(s.shape),a=aC({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),u=$l({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),u}if(s.dtype==="complex64"){const i=Ym({inputs:{input:s},backend:n}),a=aC({inputs:{x:i},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(i),a}if(!_z(s.dtype,o)){const i=Es({inputs:{x:s},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:o}}if(n.shouldExecuteOnCPU([s])){const i=n.texData.get(s.dataId).values,[a,u,l]=NTe(i,s.shape,s.dtype,o);return n.makeTensorInfo(a,u,l)}if(o==="int32")return _Re(s,n);if(o==="bool"){const i=n.makeTensorInfo([],"bool",_r("bool",1)),u=H6({inputs:{a:s,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),u}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${o}`)}const NRe={kernelName:Bp,backendName:"webgl",kernelFunc:aC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iO="return ceil(x);",RRe=_t({opSnippet:iO,packedOpSnippet:iO,cpuKernelImpl:RTe}),ARe={kernelName:Vp,backendName:"webgl",kernelFunc:RRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DRe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ORe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:o,clipValueMax:i}=r;let a;de().getBool("WEBGL_PACK_CLIP")?a=new ORe(s.shape):a=new DRe(s.shape);const u=[[o],[i]];return n.runWebGLProgram(a,[s],s.dtype,u)}const LRe={kernelName:Up,backendName:"webgl",kernelFunc:PRe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FRe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aO(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function MRe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),o=new FRe(r.shape),i=[aO(r,s.complexTensorInfos.real),aO(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(o,i,i[0].dtype)}const zRe={kernelName:Av,backendName:"webgl",kernelFunc:MRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BRe{constructor(e){this.outputShape=[],this.outputShape=bi(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const s=n.length,o=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VRe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=bi(e,n);const r=this.outputShape,s=r.length,o=Kt(s),i=Gr("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,y)=>`T${y}`);const u=new Array(e.length-1);u[0]=e[0][n];for(let m=1;m<u.length;m++)u[m]=u[m-1]+e[m][n];const l=a[n],c=a.slice(-2),d=a.join();let h=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<u.length;m++){const y=u[m-1];h+=`
        if (${l} < ${u[m]}  && ${l} >= ${u[m-1]}) {
          return getChannel(
            getT${m}(${Qg(a,l,y)}),
            vec2(${Qg(c,l,y)}));
        }`}const f=u.length,p=u[u.length-1];h+=`
        return getChannel(
          getT${f}(${Qg(a,l,p)}),
          vec2(${Qg(c,l,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[s-1]} = ${i[s-1]} + 1;
        if (${i[s-1]} < ${r[s-1]}) {
          result.g = getValue(${i});
        }

        ${i[s-2]} = ${i[s-2]} + 1;
        if (${i[s-2]} < ${r[s-2]}) {
          result.a = getValue(${i});
        }

        ${i[s-1]} = ${i[s-1]} - 1;
        if (${i[s-2]} < ${r[s-2]} &&
            ${i[s-1]} < ${r[s-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Qg(t,e,n){const r=t.indexOf(e);return t.map((o,i)=>i===r?`${o} - ${n}`:o).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qx(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Es({inputs:{x:s.complexTensorInfos.imag},backend:n})}const URe={kernelName:K$,backendName:"webgl",kernelFunc:Qx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const f=t.map(v=>Ym({inputs:{input:v},backend:n})),p=t.map(v=>Qx({inputs:{input:v},backend:n})),m=Yh(f,e,n),y=Yh(p,e,n),g=$l({inputs:{real:m,imag:y},backend:n});return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),g}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const f=t.map(b=>{const k=[-1,ve(b.shape.slice(e))];return Le({inputs:{x:b},backend:n,attrs:{shape:k}})}),p=f.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=bi(f.map(b=>b.shape),1),y=f[0].shape[0]===1,g=ATe(p,m,r,y),v=bi(t.map(b=>b.shape),e),x=n.makeTensorInfo(v,r,g);return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const o=t.filter(f=>ve(f.shape)>0),i=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){const f=i?new pi(t[0].shape,Ta):new Ma(t[0].shape,Ta);return n.runWebGLProgram(f,t,r)}const a=de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){const f=[];for(let m=0;m<o.length;m+=a){const y=o.slice(m,m+a);f.push(Yh(y,e,n))}const p=Yh(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(i){const f=new VRe(o.map(p=>p.shape),e);return n.runWebGLProgram(f,o,r)}const{tensors2D:u,outShape:l}=WRe(o,e,n),c=new BRe(u.map(f=>f.shape)),d=n.runWebGLProgram(c,u,r);u.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=Le({inputs:{x:d},attrs:{shape:l},backend:n});return n.disposeIntermediateTensorInfo(d),h}function WRe(t,e,n){const r=bi(t.map(o=>o.shape),e);return{tensors2D:t.map(o=>Le({inputs:{x:o},attrs:{shape:[-1,ve(o.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,o=Ct(s,e[0].shape)[0],i=e.map(l=>l.shape);sE(i,o);const a=bi(e.map(l=>l.shape),o);if(ve(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const u=e.filter(l=>ve(l.shape)>0);return u.length===1?Es({inputs:{x:u[0]},backend:n}):Yh(u,o,n)}const jRe={kernelName:Dv,backendName:"webgl",kernelFunc:K6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q6{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,y=e.dataFormat==="channelsLast",g=y?1:2,v=y?2:3,x=y?3:1;let b="",w="";r&&(s?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${k}
        ${w}
        setOutput(result);
      }
    `}}class GRe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X6{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Pr(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,d=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<c;y++)h+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;h+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<c;y++)h+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){const g=y*2;if(h+=`
           xC = xCCorner + ${g*u};
           `,a===1){if(g<c&&(i%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,u===1&&g>0?h+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<c)){const v=i%2===0?v$(u):u;u%2===0&&i%2===1||u%2!==0&&i%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,u>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:h+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):v===1?h+=`
                     xC${g+1} = xTexelC${g};
                     `:h+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<c&&(i%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<c&&(h+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<c&&(h+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<c&&(h+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",p="";r&&(s?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:o?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HRe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Pr(this.outputShape.length);const{dataFormat:r}=n,s=Yr(),o=r==="channelsLast",i=o?1:2,a=o?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)l+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ky(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Y6({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const u=t.shape,l=r.texData.get(t.dataId),c=n.inChannels,d=u[0]*u[1]*u[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let y;const g=[];if(o!=null){const b=Ky(o.shape,f);b!=null&&(o=Le({inputs:{x:o},backend:r,attrs:{shape:b}}),g.push(o))}if(s!=null){const b=Ky(s.shape,f);b!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:b}}),g.push(s))}if(!((d===1||h===1)&&c>U6)&&l.isPacked&&f&&l.texture!=null&&u[2]%2!==0&&Ft(l.shape.slice(-3),u.slice(-3))){const b=u[0]*u[1]*(u[2]+1),w={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},k=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,B(Gy(l.shape,w.shape),()=>`packed reshape ${l.shape} to ${w.shape} isn't free`);const C=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(C);const $=Hy({a:w,b:C,backend:r,transposeA:p,transposeB:m,bias:s,activation:a,preluActivationWeights:o,leakyreluAlpha:i}),E=r.texData.get($.dataId);B(E.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=k,E.shape=n.outShape,y=Es({inputs:{x:$},backend:r}),y.shape=n.outShape,g.push($)}else{const b=n.outHeight*n.outWidth,w=Le({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),k=Le({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=Hy({a:f?w:k,b:f?k:w,transposeA:!f,transposeB:m,backend:r,bias:s,activation:a,preluActivationWeights:o,leakyreluAlpha:i});y=Le({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),g.push(w),g.push(k),g.push(C)}for(const b of g)r.disposeIntermediateTensorInfo(b);return y}function Z6({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=u*l*c,y=h*d,g=[n.batchSize,m,y],v=!0,x=!1,b=[];if(o!=null){const z=Ky(o.shape,p);z!=null&&(o=Le({inputs:{x:o},backend:r,attrs:{shape:z}}),b.push(o))}if(s!=null){const z=Ky(s.shape,p);z!=null&&(s=Le({inputs:{x:s},backend:r,attrs:{shape:z}}),b.push(s))}const w=Le({inputs:{x:e},backend:r,attrs:{shape:[1,m,ve(e.shape)/m]}});b.push(w);const k=new HRe(g,n),C=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],$=r.runWebGLProgram(k,[t],"float32",C),E=Le({inputs:{x:$},backend:r,attrs:{shape:g}});b.push($),b.push(E);const S=s!=null,R=o!=null,T=a==="leakyrelu",P=a?op(a,!0):null,I=new V6(p?E.shape:w.shape,p?w.shape:E.shape,p?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],v,x,S,P,R,T),A=p?[E,w]:[w,E];if(s&&A.push(s),R&&A.push(o),T){const z=r.makeTensorInfo([],"float32",gl(i,"float32"));A.push(z),b.push(z)}const L=r.runWebGLProgram(I,A,"float32"),V=Le({inputs:{x:L},backend:r,attrs:{shape:n.outShape}});b.push(L);for(const z of b)r.disposeIntermediateTensorInfo(z);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dataFormat:u,dilations:l,dimRoundingMode:c}=r,d=pa(u),h=wr(s.shape,o.shape,i,l,a,c,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=Y6({x:s,filter:o,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&de().getBool("WEBGL_EXP_CONV")){const m=new X6(h),y=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[s,o],"float32",y)}else if(de().getBool("WEBGL_CONV_IM2COL"))f=Z6({x:s,filter:o,convInfo:h,backend:n});else{const m=new q6(h);f=n.runWebGLProgram(m,[s,o],"float32")}const p=Le({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const qRe={kernelName:Ov,backendName:"webgl",kernelFunc:KRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XRe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,o=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class YRe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,u=r-1-e.padInfo.left,l=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ZRe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${o};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class QRe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=n-1-e.padInfo.front,l=r-1-e.padInfo.top,c=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,d=pa(u),h=wr(s.shape,c,i,1,a,l,!1,d),f=new XRe(h);return n.runWebGLProgram(f,[s,o],"float32")}const eAe={kernelName:A$,backendName:"webgl",kernelFunc:JRe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tAe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Pr(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,o=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{inputShape:i,strides:a,pad:u,dataFormat:l,dimRoundingMode:c}=r,d=pa(l),h=wr(i,o.shape,a,1,u,c,!1,d);if(de().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new tAe(h);return n.runWebGLProgram(p,[s,o],"float32",f)}else{const f=new YRe(h);return n.runWebGLProgram(f,[s,o],"float32")}}const rAe={kernelName:Pv,backendName:"webgl",kernelFunc:nAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:u}=r,l=vl(s.shape,o.shape,i,u,a),c=new GRe(l);return n.runWebGLProgram(c,[s,o],"float32")}const oAe={kernelName:Lv,backendName:"webgl",kernelFunc:sAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,pad:a,filterShape:u}=r,l=vl(s.shape,u,i,1,a),c=new ZRe(l);return n.runWebGLProgram(c,[s,o],"float32")}const aAe={kernelName:D$,backendName:"webgl",kernelFunc:iAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{pad:i,strides:a,inputShape:u}=r,l=vl(u,o.shape,a,1,i),c=new QRe(l);return n.runWebGLProgram(c,[s,o],"float32")}const uAe={kernelName:O$,backendName:"webgl",kernelFunc:lAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe=Jd+`
  return cos(x);
`,dAe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Ku}
  return result;
`,hAe=_t({opSnippet:cAe,packedOpSnippet:dAe}),fAe={kernelName:Wp,backendName:"webgl",kernelFunc:hAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pAe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,mAe=_t({opSnippet:pAe}),gAe={kernelName:jp,backendName:"webgl",kernelFunc:mAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yAe{constructor(e,n,r,s,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,u,l]=e,[c]=n,[d,h]=r;this.outputShape=[c,d,h,l];const f=s==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${u-1}.0`],[y,g,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,b,w]=h>1?[`${(u-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${b};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:o,boxInd:i}=e,{cropSize:a,method:u,extrapolationValue:l}=r,c=new yAe(s.shape,o.shape,a,u,l);return n.runWebGLProgram(c,[s,o,i],"float32")},xAe={kernelName:L$,backendName:"webgl",kernelFunc:vAe};var ap;(function(t){t.Prod="*",t.Sum="+"})(ap||(ap={}));class lO{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,i=this.op===ap.Prod?"1.0":"0.0",a=r?i:`getX(${uO(o,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=s?`end != ${u-1}`:"end != 0",c=s?"end + 1":"end - 1"):(l=s?`end + pow2 < ${u}`:"end >= pow2",c=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Kt(o)} coords = getOutputCoords();
        int end = ${cO(o,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${cO(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${uO(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function uO(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function cO(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q6(t,e,n,r,s,o){const i=e.shape.length,a=In([r],i);let u=e;a!=null&&(u=qr({inputs:{x:e},backend:n,attrs:{perm:a}}));const l=Vn(1,i)[0];if(l!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let d=Es({inputs:{x:u},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const f=new lO(t,u.shape,!1,o),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(s){const h=new lO(t,u.shape,s,o),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=xl(a),f=qr({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;return Q6(ap.Prod,s,n,o,i,a)}const wAe={kernelName:P$,backendName:"webgl",kernelFunc:bAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,exclusive:i,reverse:a}=r;return Q6(ap.Sum,s,n,o,i,a)}const kAe={kernelName:Fv,backendName:"webgl",kernelFunc:SAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:o}=e,{size:i,binaryOutput:a}=r;if(s.shape.length===1){const u=n.readSync(s.dataId),l=n.readSync(o.dataId),c=A6(u,l,o.dtype,o.shape,i);return n.makeTensorInfo([i],o.dtype,c)}else if(s.shape.length===2){const u=n.bufferSync(s),l=n.bufferSync(o),c=TTe(u,l,i,a);return n.makeTensorInfo(c.shape,o.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const $Ae={kernelName:F$,backendName:"webgl",kernelFunc:CAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IAe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:o,dataFormat:i}=r,a=s.shape[0],u=i==="NHWC"?s.shape[1]:s.shape[2],l=i==="NHWC"?s.shape[2]:s.shape[3],c=i==="NHWC"?s.shape[3]:s.shape[1],d=u*o,h=l*o,f=c/(o*o),p=i==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new IAe(p,o,i);return n.runWebGLProgram(m,[s],s.dtype)}const TAe={kernelName:M$,backendName:"webgl",kernelFunc:EAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J6{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Pr(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(s?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eW{constructor(e,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Pr(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<d;g++)f+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let g=0;g<d;g++)f+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(h+1)/2;g++){const v=g*2;if(f+=`
          xC = xCCorner + ${v*l};
          `,u===1){if(v<d&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,l===1&&v>0?f+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const x=a%2===0?v$(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,l>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:f+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):x===1?f+=`
                    xC${v+1} = xTexelC${v};
                    `:f+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(f+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(f+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(f+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),B(Dr(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=wr(s.shape,o.shape,i,c,a,l,!0);let h;de().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new eW(d):h=new J6(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[s,o],"float32",f)}const NAe={kernelName:Mv,backendName:"webgl",kernelFunc:_Ae};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RAe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class AAe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,o=e.strideWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:o}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,filterShape:c}=r,d=wr(s.shape,c,i,a,u,l,!0),h=new RAe(d);return n.runWebGLProgram(h,[s,o],"float32")}const OAe={kernelName:z$,backendName:"webgl",kernelFunc:DAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:o}=e,{strides:i,dilations:a,pad:u,dimRoundingMode:l,inputShape:c}=r,d=wr(c,o.shape,i,a,u,l,!0),h=new AAe(d);return n.runWebGLProgram(h,[s,o],"float32")}const LAe={kernelName:B$,backendName:"webgl",kernelFunc:PAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FAe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MAe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],o=ve(r.shape),i=Le({inputs:{x:r},backend:n,attrs:{shape:[o]}}),a=new FAe(o),u=n.runWebGLProgram(a,[i],i.dtype),l=Le({inputs:{x:u},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),l}const zAe={kernelName:Pz,backendName:"webgl",kernelFunc:MAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BAe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:o,strideWidth:i,filterHeight:a,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:d,left:h}=s;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${i});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o}=e,{strides:i,pad:a,dilations:u}=r,l=Nm(s.shape,o.shape,i,a,"NHWC",u);let c;const d=new BAe(l);c=n.runWebGLProgram(d,[s,o],"float32");const h=Le({inputs:{x:c},backend:n,attrs:{shape:l.outShape}});return n.disposeIntermediateTensorInfo(c),h}const UAe={kernelName:zv,backendName:"webgl",kernelFunc:VAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,o=e,{allDims:i,summedDims:a,idDims:u}=gE(s,o.length);vE(i.length,u,o);const{path:l,steps:c}=xE(a,u),d=c.length;let h=null,f=i.length;const p=[];for(let m=0;m<d;++m){for(const y of c[m]){const{permutationIndices:g,expandDims:v}=yE(f,u[y]);let x;bE(g)?x=o[y]:(x=qr({inputs:{x:o[y]},backend:n,attrs:{perm:g}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);Ft(x.shape,b)||(x=Le({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),h===null?h=x:(h=uT({inputs:{a:x,b:h},backend:n}),p.push(h))}m<d-1&&(l[m]>=0&&(h=Zx({inputs:{x:h},backend:n,attrs:{axis:l[m]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const jAe={kernelName:V$,backendName:"webgl",kernelFunc:WAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe="return (x >= 0.0) ? x : (exp(x) - 1.0);",HAe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,KAe=_t({opSnippet:GAe,packedOpSnippet:HAe}),qAe={kernelName:Hp,backendName:"webgl",kernelFunc:KAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAe="return (b >= 0.0) ? a : a * (b + 1.0);",YAe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,ZAe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,o=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Qd(YAe,r.shape,s.shape):new Nu(XAe,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],r.dtype)},QAe={kernelName:U$,backendName:"webgl",kernelFunc:ZAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe=`
  return vec4(equal(a, b));
`,eDe="return float(a == b);",tDe=kr({opSnippet:eDe,packedOpSnippet:JAe,dtype:"bool",cpuKernelImpl:DTe}),nDe={kernelName:Bv,backendName:"webgl",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rDe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${uE};
  float a1 = ${cE};
  float a2 = ${dE};
  float a3 = ${hE};
  float a4 = ${fE};
  float a5 = ${pE};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,sDe=_t({opSnippet:rDe}),oDe={kernelName:Kp,backendName:"webgl",kernelFunc:sDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe=Jd+`
  return exp(x);
`,aDe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,tW=_t({opSnippet:iDe,packedOpSnippet:aDe,cpuKernelImpl:OTe,dtype:"float32"}),lDe={kernelName:qp,backendName:"webgl",kernelFunc:tW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lC(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:o}=e,i=o.shape.length,a=o.shape.slice();let u=s;return s<0&&(B(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),u=i+s+1),a.splice(u,0,1),Le({inputs:{x:o},backend:r,attrs:{shape:a}})}const uDe={kernelName:Vv,backendName:"webgl",kernelFunc:lC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dO="return exp(x) - 1.0;",cDe=_t({opSnippet:dO,packedOpSnippet:dO,cpuKernelImpl:PTe}),dDe={kernelName:Xp,backendName:"webgl",kernelFunc:cDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hO{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const o=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nW(t,e,n){const r=n.texData.get(t.dataId),s=ve(t.shape),o=t.shape[t.shape.length-1],i=s/o,a=Le({inputs:{x:t},backend:n,attrs:{shape:[i,o]}}),u=a.shape,l=new hO("real",u,e),c=new hO("imag",u,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],h=n.runWebGLProgram(l,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),p=$l({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=Le({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t){const{inputs:e,backend:n}=t,{input:r}=e;return nW(r,!1,n)}const fDe={kernelName:W$,backendName:"webgl",kernelFunc:hDe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pDe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zm(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:o}=n;if(o=o||zd(s),o==="string"){const i=Mn(o,ve(r));return i.fill(s),e.makeTensorInfo(r,o,i)}else{const i=new pDe(r,s),a=[[s]];return e.runWebGLProgram(i,[],o,a)}}const mDe={kernelName:j$,backendName:"webgl",kernelFunc:Zm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gDe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yDe={kernelName:G$,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new gDe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fO="return floor(x);",vDe=_t({opSnippet:fO,packedOpSnippet:fO,cpuKernelImpl:LTe}),xDe={kernelName:Yp,backendName:"webgl",kernelFunc:vDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bDe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,wDe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,SDe=kr({opSnippet:bDe,packedOpSnippet:wDe,dtype:"int32"}),kDe={kernelName:Zp,backendName:"webgl",kernelFunc:SDe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CDe{constructor(e){this.variableNames=["A"];const n=Yr(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $De{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Yr(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IDe={kernelName:Tk,backendName:"webgl",kernelFunc:EDe};let pc,Rw=de().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function EDe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:o}=r,i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[u,l]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[l,u],d=[l,u,o];if(a||i){const m=de().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(pc==null||m!==Rw)&&(Rw=m,pc=document.createElement("canvas").getContext("2d",{willReadFrequently:Rw})),pc.canvas.width=u,pc.canvas.height=l,pc.drawImage(s,0,0,u,l),s=pc.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=Bs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const f=de().getBool("WEBGL_PACK")?new $De(d):new CDe(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r,m=pa(c),y=wr(s.shape,o.shape,u,d,l,h,!1,m);let g;const v=[],x=i!=null,b=a!=null,w=f==="leakyrelu",k=()=>{const $=[s,o],E=(S,R)=>{if(R==="NCHW"&&S.shape.length===1&&S.shape[0]!==1){const T=Le({inputs:{x:S},backend:n,attrs:{shape:[S.shape[0],1,1]}});return v.push(T),T}return S};if(x&&$.push(E(i,c)),b&&$.push(E(a,c)),w){const S=n.makeTensorInfo([],"float32",gl(p,"float32"));$.push(S),v.push(S)}return $};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))g=Y6({x:s,filter:o,convInfo:y,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(y.strideWidth<=2&&m==="channelsLast"&&de().getBool("WEBGL_EXP_CONV")){const $=f?op(f,!0):null,E=new X6(y,x,$,b,w),S=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],R=k();g=n.runWebGLProgram(E,R,"float32",S)}else if(de().getBool("WEBGL_CONV_IM2COL"))g=Z6({x:s,filter:o,convInfo:y,backend:n,bias:i,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const $=f?op(f,!1):null,E=new q6(y,x,$,b,w),S=k();g=n.runWebGLProgram(E,S,"float32")}const C=Le({inputs:{x:g},backend:n,attrs:{shape:y.outShape}});return v.push(g),v.forEach($=>n.disposeIntermediateTensorInfo($)),C}const _De={kernelName:by,backendName:"webgl",kernelFunc:TDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:o,bias:i,preluActivationWeights:a}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,p=[];let m=c;m==null&&(m=[1,1]),B(Dr(u,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${m}'`);const y=wr(s.shape,o.shape,u,m,l,d,!0),g=de().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,v=h?op(h,g):null,x=[s,o],b=i!=null,w=a!=null,k=h==="leakyrelu";if(b&&x.push(i),w&&x.push(a),k){const S=n.makeTensorInfo([],"float32",gl(f,"float32"));x.push(S),p.push(S)}let C;g?C=new eW(y,b,v,w,k):C=new J6(y,b,v,w,k);const $=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],E=n.runWebGLProgram(C,x,"float32",$);return p.forEach(S=>n.disposeIntermediateTensorInfo(S)),E}const RDe={kernelName:e4,backendName:"webgl",kernelFunc:NDe};class ADe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const o=Kt(r.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,o=s.shape,i=o[o.length-1],a=ve(r.shape),[u,l,c,d]=QI(r,s),h=Le({inputs:{x:s},backend:n,attrs:{shape:[l,i]}}),f=Le({inputs:{x:r},backend:n,attrs:{shape:[ve(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const g=n.readSync(s.dataId),v=n.bufferSync(r),x=FTe(g,v,r.dtype,l,i,c,d,r.shape,a);return n.makeTensorInfo(u,r.dtype,x.values)}const p=new ADe(i,d,[l,c],r.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),y=Le({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}const ODe={kernelName:Lz,backendName:"webgl",kernelFunc:DDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PDe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Kt(this.rank),s=LDe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function LDe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:o}=e,{axis:i,batchDims:a}=r,u=Ct(i,s.shape)[0];if(de().get("DEBUG")){const v=n.readSync(o.dataId),x=s.shape[u];for(let b=0;b<v.length;++b){const w=v[b];B(w<=x-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${x-1}]`)}}const l=SE(s,o,u,a),c=ve(o.shape),d=[],h=Le({inputs:{x:s},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),f=Le({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});d.push(h),d.push(f);const p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const v=n.bufferSync(f),x=n.bufferSync(h),b=MTe(x,v,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(l.outputShape,b.dtype,b.values)}const m=new PDe(h.shape,p),y=n.runWebGLProgram(m,[h,f],h.dtype);d.push(y);const g=Le({inputs:{x:y},backend:n,attrs:{shape:l.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const FDe={kernelName:Wv,backendName:"webgl",kernelFunc:rW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MDe="return float(a > b);",zDe=`
  return vec4(greaterThan(a, b));
`,BDe=kr({opSnippet:MDe,packedOpSnippet:zDe,cpuKernelImpl:zTe,dtype:"bool"}),VDe={kernelName:jv,backendName:"webgl",kernelFunc:BDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UDe="return float(a >= b);",WDe=`
  return vec4(greaterThanEqual(a, b));
`,jDe=kr({opSnippet:UDe,packedOpSnippet:WDe,dtype:"bool",cpuKernelImpl:BTe}),GDe={kernelName:Qp,backendName:"webgl",kernelFunc:jDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(t){const{inputs:e,backend:n}=t,{input:r}=e;return nW(r,!0,n)}const KDe={kernelName:H$,backendName:"webgl",kernelFunc:HDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qDe="return float(!isnan(x) && !isinf(x));",XDe=_t({opSnippet:qDe,dtype:"bool"}),YDe={kernelName:em,backendName:"webgl",kernelFunc:XDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZDe="return float(isinf(x));",QDe=_t({opSnippet:ZDe,dtype:"bool"}),JDe={kernelName:tm,backendName:"webgl",kernelFunc:QDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe="return float(isnan(x));",tOe=_t({opSnippet:eOe,dtype:"bool"}),nOe={kernelName:nm,backendName:"webgl",kernelFunc:tOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOe="return float(a < b);",sOe=`
  return vec4(lessThan(a, b));
`,oOe=kr({opSnippet:rOe,packedOpSnippet:sOe,cpuKernelImpl:VTe,dtype:"bool"}),iOe={kernelName:Hv,backendName:"webgl",kernelFunc:oOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aOe="return float(a <= b);",lOe=`
  return vec4(lessThanEqual(a, b));
`,uOe=kr({opSnippet:aOe,packedOpSnippet:lOe,cpuKernelImpl:UTe,dtype:"bool"}),cOe={kernelName:Kv,backendName:"webgl",kernelFunc:uOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:o}=n,i=WTe(r,s,o);return e.makeTensorInfo([i.length],"float32",i)}const hOe={kernelName:Fz,backendName:"webgl",kernelFunc:dOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fOe=Jd+`
  return x < 0.0 ? 0./0. : log(x);
`,pOe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,mOe=_t({opSnippet:fOe,packedOpSnippet:pOe,cpuKernelImpl:jTe}),gOe={kernelName:rm,backendName:"webgl",kernelFunc:mOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yOe=Jd+`
  return log(1.0 + x);
`,vOe=_t({opSnippet:yOe}),xOe={kernelName:sm,backendName:"webgl",kernelFunc:vOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bOe="return float(a >= 1.0 && b >= 1.0);",wOe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,SOe=kr({opSnippet:bOe,packedOpSnippet:wOe,dtype:"bool"}),kOe={kernelName:qv,backendName:"webgl",kernelFunc:SOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe="return float(!(x >= 1.0));",$Oe=_t({opSnippet:COe}),IOe={kernelName:Xv,backendName:"webgl",kernelFunc:$Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EOe="return float(a >= 1.0 || b >= 1.0);",TOe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,_Oe=kr({opSnippet:EOe,packedOpSnippet:TOe,dtype:"bool"}),NOe={kernelName:Yv,backendName:"webgl",kernelFunc:_Oe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ROe{constructor(e,n,r,s,o){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${s}) * sum`;o===.5?u=`inversesqrt(${l})`:o===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AOe{constructor(e,n,r,s,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${s}) * sum`;o===.5?u=`inversesqrt(${l})`:o===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DOe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:o,bias:i,alpha:a,beta:u}=r,l=de().getBool("WEBGL_PACK_NORMALIZATION")?new AOe(s.shape,o,i,a,u):new ROe(s.shape,o,i,a,u);return n.runWebGLProgram(l,[s],s.dtype)},OOe={kernelName:Zv,backendName:"webgl",kernelFunc:DOe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class POe{constructor(e,n,r,s,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:o,dy:i}=e,{depthRadius:a,bias:u,alpha:l,beta:c}=r,d=new POe(s.shape,a,u,l,c);return n.runWebGLProgram(d,[s,o,i],s.dtype)},FOe={kernelName:q$,backendName:"webgl",kernelFunc:LOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(t,e,n,r){const s=ve(e),i=ve(t.shape)/s,a=Le({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),u=qu(a,t.dtype,"max",r),l=Le({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:o,keepDims:i}=r,a=s.shape.length,u=Ct(o,s.shape);let l=u;const c=In(l,a),d=c!=null,h=n.shouldExecuteOnCPU([s]);let f=s;if(d){if(h){const x=n.texData.get(f.dataId).values,b=new Array(a);for(let C=0;C<b.length;C++)b[C]=s.shape[c[C]];const w=aT(x,s.shape,s.dtype,c,b);f=n.makeTensorInfo(b,s.dtype);const k=n.texData.get(f.dataId);k.values=w}else f=Yx(s,c,n);l=Vn(l.length,a)}Sr("max",l,a);const[p,m]=pr(f.shape,l);let y=p;i&&(y=qn(p,u));let g;if(h){const x=n.texData.get(f.dataId).values,b=GTe(x,ve(m),y,s.dtype);g=n.makeTensorInfo(y,s.dtype);const w=n.texData.get(g.dataId);w.values=b}else g=MOe(f,m,y,n);return d&&n.disposeIntermediateTensorInfo(f),g}const zOe={kernelName:Qv,backendName:"webgl",kernelFunc:sW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BOe=lT+`
  return max(a, b);
`,VOe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ku+`
  return result;
`,UOe=kr({opSnippet:BOe,packedOpSnippet:VOe,cpuKernelImpl:HTe}),WOe={kernelName:om,backendName:"webgl",kernelFunc:UOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;qm(s,"maxPool");const{filterSize:o,strides:i,pad:a,dimRoundingMode:u}=r,l=1;B(Dr(i,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${l}'`);const c=$o(s.shape,o,i,l,a,u);if(c.filterWidth===1&&c.filterHeight===1&&Ft(c.inShape,c.outShape))return Es({inputs:{x:s},backend:n});const d=new ip(c,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const GOe={kernelName:Jv,backendName:"webgl",kernelFunc:jOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:o,strides:i,pad:a,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],d=fa(s.shape,o,i,c,a,l,u),h=new cT(d,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const KOe={kernelName:ex,backendName:"webgl",kernelFunc:HOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qOe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,u=i-1-e.padInfo.left,l=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class XOe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=u-1-e.padInfo.front,h=l-1-e.padInfo.top,f=c-1-e.padInfo.left,p=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o}=e,i=o,{filterSize:a,strides:u,pad:l,dimRoundingMode:c}=r,d=[1,1,1],h=fa(i.shape,a,u,d,l,c),f=new cT(h,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),m=new XOe(h),y=n.runWebGLProgram(m,[s,p],i.dtype);return n.disposeIntermediateTensorInfo(p),y}const ZOe={kernelName:Y$,backendName:"webgl",kernelFunc:YOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:o,output:i}=e,a=o;qm([o,i],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:d}=r,h=$o(a.shape,u,l,1,c,d),f=!0,p=new ip(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),y=new qOe(h),g=n.runWebGLProgram(y,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),g}const JOe={kernelName:X$,backendName:"webgl",kernelFunc:QOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(t,e,n,r){let s=new ip(n,"max",!1);const o=r.runWebGLProgram(s,[t],"float32");s=new ip(n,"max",!0,!0,e);const i=r.runWebGLProgram(s,[t],"float32");return[o,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3e={kernelName:Mz,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:o,pad:i,includeBatchInIndex:a}=e,u=n;B(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];B(Dr(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=$o(r.shape,s,o,l,i),[d,h]=e3e(r,a,c,u);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(t,e,n,r){const s=ve(e),i=ve(t.shape)/s,a=Le({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),u=qu(a,"float32","mean",r),l=Le({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3e={kernelName:tx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:o}=e,i=n,a=r.shape.length,u=Ct(o,r.shape);let l=u;const c=In(l,a),d=c!=null,h=i.shouldExecuteOnCPU([r]),f=[];let p=r;if(d){if(h){const b=i.texData.get(p.dataId).values,w=new Array(a);for(let $=0;$<w.length;$++)w[$]=r.shape[c[$]];const k=aT(b,r.shape,r.dtype,c,w);p=i.makeTensorInfo(w,r.dtype);const C=i.texData.get(p.dataId);C.values=k}else p=Yx(r,c,i);f.push(p),l=Vn(l.length,a)}Sr("sum",l,a);const[m,y]=pr(p.shape,l);let g=m;s&&(g=qn(m,u));const v=n3e(p,y,g,i);for(const x of f)i.disposeIntermediateTensorInfo(x);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,u=Ct(o,s.shape);let l=u;const c=In(l,a);let d=s;c!=null&&(d=qr({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Vn(l.length,s.shape.length)),Sr("min",l,a);const[h,f]=pr(d.shape,l),p=ve(f),m=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=qu(m,m.dtype,"min",n);let g;if(i){const v=qn(h,u);g=Le({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=Le({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),g}const o3e={kernelName:nx,backendName:"webgl",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3e=lT+`
  return min(a, b);
`,a3e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Ku+`
  return result;
`,l3e=kr({opSnippet:i3e,packedOpSnippet:a3e,cpuKernelImpl:KTe}),u3e={kernelName:im,backendName:"webgl",kernelFunc:l3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c3e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const s=e.length,o=Kt(s),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),l=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d3e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,o=Kt(s),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),u=Gr("rc",s),l=Gr("source",s),c=`${u[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${l.slice(-2).join()})`,h=r==="reflect"?0:1;let f="";if(s===1){const p=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${o} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${u[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
      `}else{const p=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${o} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${d});
        ${u[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${d});
        }
        rc = outputLoc;
        ${u[s-2]} += 1;
        if(${u[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${l.join()}), ${d});
          ${u[s-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${l.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:o}=n,i=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new d3e(r.shape,s,o):new c3e(r.shape,s,o);return e.runWebGLProgram(i,[r],r.dtype)},f3e={kernelName:rx,backendName:"webgl",kernelFunc:h3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,m3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Ku+`
  return result;
`,g3e=kr({opSnippet:p3e,packedOpSnippet:m3e}),y3e={kernelName:am,backendName:"webgl",kernelFunc:g3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v3e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x3e=`
if (a == b) {
  return 1.0;
};
return a / b;`,b3e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,oW=kr({opSnippet:x3e,packedOpSnippet:b3e,checkOutOfBounds:!0}),w3e={kernelName:Gp,backendName:"webgl",kernelFunc:oW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pO="return a - b;",iW=kr({opSnippet:pO,packedOpSnippet:pO,supportsComplex:!0,cpuKernelImpl:p_e}),S3e={kernelName:km,backendName:"webgl",kernelFunc:iW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aW(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:o}=r,i=Ct([o],s.shape),a=sW({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),u=qn(a.shape,i),l=Le({inputs:{x:a},backend:n,attrs:{shape:u}}),c=iW({inputs:{a:s,b:l},backend:n}),d=tW({inputs:{x:c},backend:n}),h=Zx({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),f=Le({inputs:{x:h},backend:n,attrs:{shape:u}}),p=oW({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const k3e={kernelName:wx,backendName:"webgl",kernelFunc:aW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:o,seed:i,normalized:a}=r,u=a?s:aW({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),l=u.shape[0],c=u.shape[1],d=new v3e(l,c,o),h=[[i]],f=n.runWebGLProgram(d,[u],"int32",h);return a||n.disposeIntermediateTensorInfo(u),f}const $3e={kernelName:zz,backendName:"webgl",kernelFunc:C3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3e=Eo+`
  return -x;
`,E3e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function T3e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const o=n.texData.get(r.dataId),[i,a]=XTe(o.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}let s;return de().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ma(r.shape,E3e):s=new pi(r.shape,I3e),n.runWebGLProgram(s,[r],r.dtype)}const _3e={kernelName:sx,backendName:"webgl",kernelFunc:T3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N3e=HI;function R3e(t){Fs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u}=r,l=n.readSync(s.dataId),c=n.readSync(o.dataId),{selectedIndices:d}=N3e(l,c,i,a,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const A3e={kernelName:Z$,backendName:"webgl",kernelFunc:R3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3e=KI;function O3e(t){Fs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(s.dataId),d=n.readSync(o.dataId),{selectedIndices:h,validOutputs:f}=D3e(c,d,i,a,u,l);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const P3e={kernelName:Q$,backendName:"webgl",kernelFunc:O3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3e=qI;function F3e(t){Fs("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:o}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(s.dataId),d=n.readSync(o.dataId),h=i,f=a,p=u,m=l,{selectedIndices:y,selectedScores:g}=L3e(c,d,h,f,p,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const M3e={kernelName:J$,backendName:"webgl",kernelFunc:F3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z3e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:o,depth:i,onValue:a,offValue:u}=r,l=ve(s.shape),c=new z3e(l,i,a,u),d=Le({inputs:{x:s},backend:n,attrs:{shape:[l]}}),h=n.runWebGLProgram(c,[d],o);n.disposeIntermediateTensorInfo(d);const f=[...s.shape,i],p=Le({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},V3e={kernelName:ax,backendName:"webgl",kernelFunc:B3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qy(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=Ym({inputs:{input:r},backend:n}),o=qy({inputs:{x:s},backend:n}),i=Qx({inputs:{input:r},backend:n}),a=qy({inputs:{x:i},backend:n}),u=$l({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return Zm({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const U3e={kernelName:Cx,backendName:"webgl",kernelFunc:qy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=Ym({inputs:{input:r},backend:n}),o=lW({inputs:{x:s},backend:n}),i=Qx({inputs:{input:r},backend:n}),a=qy({inputs:{x:i},backend:n}),u=$l({inputs:{real:o,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),u}else return Zm({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const W3e={kernelName:ix,backendName:"webgl",kernelFunc:lW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return lC({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const o=e[0].shape,i=e[0].dtype;e.forEach(c=>{x$(o,c.shape,"All tensors passed to stack must have matching shapes"),B(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],u=e.map(c=>{const d=lC({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(d),d}),l=K6({inputs:u,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),l}const G3e={kernelName:lx,backendName:"webgl",kernelFunc:j3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H3e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);const s=e.length,o=Kt(s),i=n.map(l=>l[0]).join(","),a=n.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${i});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K3e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,y)=>m[0]+e[y]+m[1]);const s=e.length,o=Kt(s),i=n.map(m=>m[0]).join(","),a=n.map((m,y)=>m[0]+e[y]).join(","),u=Gr("rc",s),l=Gr("source",s),c=`${u[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${l.slice(-2).join()})`,h=[`${o} rc = outputLoc;`,`${u[s-1]} += 1;
       if(${c}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${u[s-2]} += 1;
       if(${u[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${u[s-1]} += 1;
         if(${c}) {`],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,y=s===1?2:4;m<y;m++)p+=`
        ${h[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${m}] = getChannel(getX(${l.join()}), ${d});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${i});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uW=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:o,constantValue:i}=r;if(ve(s.shape)===0){const l=o.map((c,d)=>c[0]+s.shape[d]+c[1]);return Zm({backend:n,attrs:{shape:l,value:i,dtype:s.dtype}})}const a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new K3e(s.shape,o,i):new H3e(s.shape,o,i),u=[[i]];return n.runWebGLProgram(a,[s],s.dtype,u)},q3e={kernelName:ux,backendName:"webgl",kernelFunc:uW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X3e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Y3e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Ku+`
  return result;
`,Z3e=kr({opSnippet:X3e,packedOpSnippet:Y3e}),Q3e={kernelName:um,backendName:"webgl",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:o,keepDims:i}=r,a=s.shape.length,u=[],l=Ct(o,s.shape);let c=l;const d=In(c,a);let h=s;d!=null&&(h=qr({inputs:{x:s},backend:n,attrs:{perm:d}}),c=Vn(c.length,a),u.push(h)),Sr("prod",c,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:y,outDtype:g}=ZTe(h.shape,h.dtype,p,c);f=n.makeTensorInfo(y,g,m)}else{const[p,m]=pr(h.shape,c),y=ve(m),g=Le({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=hI(s.dtype),x=qu(g,v,"prod",n);f=Le({inputs:{x},backend:n,attrs:{shape:p}}),u.push(g),u.push(x)}if(i){u.push(f);const p=qn(f.shape,l);f=Le({inputs:{x:f},backend:n,attrs:{shape:p}})}return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const ePe={kernelName:dx,backendName:"webgl",kernelFunc:J3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:o,indices:i}=e,{outputRaggedRank:a}=r,u=s.map(g=>n.readSync(g.dataId)),l=s.map(g=>g.shape),c=n.readSync(o.dataId),d=n.readSync(i.dataId),[h,f,p]=QTe(u,l,c,o.shape,o.dtype,d,i.shape,a),m=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),y=n.makeTensorInfo(p,o.dtype,f);return m.concat([y])}const nPe={kernelName:Bz,backendName:"webgl",kernelFunc:tPe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:o}=e,i=n.readSync(r.dataId),a=n.readSync(s.dataId),u=n.readSync(o.dataId),[l,c]=JTe(i,r.shape,r.dtype,a,s.shape,u,o.shape),d=n.makeTensorInfo([l.length],"int32",l),h=n.makeTensorInfo([c.length],r.dtype,c);return[d,h]}const sPe={kernelName:Vz,backendName:"webgl",kernelFunc:rPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:o,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:u}=r,l=n.readSync(s.dataId),c=n.readSync(o.dataId),d=n.readSync(i.dataId),h=a.map(y=>n.readSync(y.dataId)),f=a.map(y=>y.shape),[p,m]=e_e(l,s.shape,c,o.shape,o.dtype,d,i.shape,h,f,u);return n.makeTensorInfo(p,o.dtype,m)}const iPe={kernelName:Uz,backendName:"webgl",kernelFunc:oPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cW=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:o,dtype:i}=n,a=t_e(r,s,o,i);return e.makeTensorInfo([a.length],i,a)},aPe={kernelName:eI,backendName:"webgl",kernelFunc:cW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lPe="return 1.0 / x;",uPe=_t({opSnippet:lPe}),cPe={kernelName:cm,backendName:"webgl",kernelFunc:uPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dPe=Eo+`
  return (x < 0.0) ? 0.0 : x;
`,hPe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fPe=_t({opSnippet:dPe,packedOpSnippet:hPe}),pPe={kernelName:dm,backendName:"webgl",kernelFunc:fPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPe=Eo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gPe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,yPe=_t({opSnippet:mPe,packedOpSnippet:gPe}),vPe={kernelName:hm,backendName:"webgl",kernelFunc:yPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xPe{constructor(e,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;o?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bPe{constructor(e,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;o?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r,[u,l]=a,c=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bPe(s.shape,u,l,o,i):new xPe(s.shape,u,l,o,i);return n.runWebGLProgram(c,[s],"float32")}const SPe={kernelName:px,backendName:"webgl",kernelFunc:wPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kPe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,i,a]=e,u=[r&&i>1?s-1:s,r&&a>1?o-1:o],l=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=u[0]/l[0],d=u[1]/l[1],h=1/c,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r,a=new kPe(o.shape,s.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const $Pe={kernelName:rI,backendName:"webgl",kernelFunc:CPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IPe{constructor(e,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;o?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EPe{constructor(e,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,u,l]=e;this.outputShape=[i,n,r,l];const c=[s&&n>1?a-1:a,s&&r>1?u-1:u],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;o?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:o,halfPixelCenters:i,size:a}=r,[u,l]=a,c=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new EPe(s.shape,u,l,o,i):new IPe(s.shape,u,l,o,i);return n.runWebGLProgram(c,[s],s.dtype)}const _Pe={kernelName:fx,backendName:"webgl",kernelFunc:TPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NPe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,i,a]=e,u=[r&&i>1?s-1:s,r&&a>1?o-1:o],l=[r&&i>1?i-1:i,r&&a>1?a-1:a],c=u[0]/l[0],d=u[1]/l[1],h=1/c,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:o}=e,{alignCorners:i}=r,a=new NPe(o.shape,s.shape,i);return n.runWebGLProgram(a,[o],o.dtype)}const APe={kernelName:nI,backendName:"webgl",kernelFunc:RPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DPe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,o=e.map((a,u)=>s(u)).join(","),i=Kt(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OPe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Gr("rc",r),o=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Kt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(s.slice())};
          if(${o}){
            result.g = ${l(s.slice())};
          }
          if(${i}) {
            result.b = ${c(s.slice())};
            if(${o}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(p){return h(p)}function l(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const m=e.map((v,x)=>f(x,p)),y=m.join(","),g=m.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${g}))`}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:o}=r,i=s.shape.length,a=Ct(o,s.shape);if(i===0)return Es({inputs:{x:s},backend:n});const u=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new OPe(s.shape,a):new DPe(s.shape,a);return n.runWebGLProgram(u,[s],s.dtype)}const LPe={kernelName:mx,backendName:"webgl",kernelFunc:PPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FPe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let o="";typeof n=="number"?o=`float outputValue = ${n.toFixed(2)};`:o=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe={kernelName:cI,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:o,center:i}=e,a=n,u=new FPe(r.shape,o),[l,c]=iE(i,r.shape[1],r.shape[2]),d=[[l,c,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(u,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,BPe=_t({opSnippet:zPe}),VPe={kernelName:fm,backendName:"webgl",kernelFunc:BPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UPe="return inversesqrt(x);",WPe=_t({opSnippet:UPe,cpuKernelImpl:n_e}),jPe={kernelName:pm,backendName:"webgl",kernelFunc:WPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dT{constructor(e,n,r,s,o,i,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=Kt(o.length),c=Kt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";u&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${o});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPe{constructor(e,n,r,s,o,i,a=!0,u=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const l=Kt(o.length),c=Kt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";u&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${o});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:o}=e,{shape:i}=r,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Uu(o,s,i),h=[d/l,l];if(d===0)return n.makeTensorInfo(i,s.dtype);const f=Le({inputs:{x:s},backend:n,attrs:{shape:[u,a]}}),p=Le({inputs:{x:o},backend:n,attrs:{shape:[u,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;de().getBool("WEBGL_PACK")?y=new GPe(u,a,f.shape.length,p.shape.length,c,h):y=new dT(u,a,f.shape.length,p.shape.length,c,h);const g=n.runWebGLProgram(y,[p,f,m],p.dtype),v=Le({inputs:{x:g},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),v}const KPe={kernelName:Wz,backendName:"webgl",kernelFunc:HPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qPe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const o="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=de().getNumber("WEBGL_VERSION")===2?o:i,u=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XPe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:o}=e,{side:i}=r,a=new qPe(s.shape[0],s.shape[1],o.shape[1],i),u=[[s.shape[1]]];return n.runWebGLProgram(a,[s,o],"int32",u)}const YPe={kernelName:Gz,backendName:"webgl",kernelFunc:XPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZPe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,o;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)o="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<n.length;c++)l.push(`${a[c]}`),c<e&&u.push(`${a[c]}`);s=u.join(),o=l.join()}const i=Kt(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QPe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:o}=e,i=new ZPe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[r,s,o],$s(s.dtype,o.dtype))}const JPe={kernelName:gx,backendName:"webgl",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eLe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Ox};
  float scale = ${Px};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,tLe=_t({opSnippet:eLe}),nLe={kernelName:mm,backendName:"webgl",kernelFunc:tLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rLe=Jd+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,sLe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,oLe=_t({opSnippet:rLe,packedOpSnippet:sLe,cpuKernelImpl:s_e}),iLe={kernelName:xm,backendName:"webgl",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aLe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,lLe=_t({opSnippet:aLe}),uLe={kernelName:vm,backendName:"webgl",kernelFunc:lLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cLe=Jd+`
  return sin(x);
`,dLe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Ku}
  return result;
`,hLe=_t({opSnippet:cLe,packedOpSnippet:dLe}),fLe={kernelName:gm,backendName:"webgl",kernelFunc:hLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pLe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,mLe=_t({opSnippet:pLe}),gLe={kernelName:ym,backendName:"webgl",kernelFunc:mLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yLe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,vLe=_t({opSnippet:yLe}),xLe={kernelName:bm,backendName:"webgl",kernelFunc:vLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bLe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:o,paddings:i}=r;B(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((g,v)=>g*v),u=[[0,0]];u.push(...i);for(let g=1+o.length;g<s.shape.length;++g)u.push([0,0]);const l=[],c=uW({inputs:{x:s},backend:n,attrs:{paddings:u,constantValue:0}}),d=Pm(c.shape,o,a,!1),h=Lm(d.length,o.length,!1),f=Fm(c.shape,o,a,!1),p=Le({inputs:{x:c},backend:n,attrs:{shape:d}}),m=qr({inputs:{x:p},backend:n,attrs:{perm:h}}),y=Le({inputs:{x:m},backend:n,attrs:{shape:f}});return l.push(c),l.push(p),l.push(m),l.forEach(g=>n.disposeIntermediateTensorInfo(g)),y},wLe={kernelName:xx,backendName:"webgl",kernelFunc:bLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:o,defaultValue:i}=e;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(r.dataId),u=n.readSync(s.dataId),l=n.readSync(o.dataId),c=n.readSync(i.dataId)[0],[d,h,f,p,m]=i_e(a,r.shape,r.dtype,u,s.dtype,l,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const kLe={kernelName:Hz,backendName:"webgl",kernelFunc:SLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:o}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const i=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),u=Array.from(n.readSync(o.dataId)),[l,c,d]=a_e(a,r.shape,r.dtype,i,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}const $Le={kernelName:Kz,backendName:"webgl",kernelFunc:CLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);const i=n.readSync(r.dataId),a=n.readSync(s.dataId),u=n.readSync(o.dataId),[l,c]=O6(i,r.shape,r.dtype,a,u,!0);return n.makeTensorInfo(c,r.dtype,l)}const ELe={kernelName:qz,backendName:"webgl",kernelFunc:ILe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:o}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);const i=n.readSync(r.dataId),a=n.readSync(s.dataId),u=n.readSync(o.dataId),[l,c]=O6(i,r.shape,r.dtype,a,u);return n.makeTensorInfo(c,r.dtype,l)}const _Le={kernelName:Xz,backendName:"webgl",kernelFunc:TLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NLe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:o,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:d,outputSize:h}=Uu(o,s,a),f=!1;if(o.dtype==="string"){const g=n.bufferSync(s),v=n.bufferSync(o),x=tl(n.readSync(i.dataId)[0]),b=r_e(g,v,a,h,c,l,u,d,x,f);return n.makeTensorInfo(a,b.dtype,b.values)}const p=new dT(l,u,s.shape.length,o.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[o,s,i],o.dtype),y=Le({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),y}const RLe={kernelName:Yz,backendName:"webgl",kernelFunc:NLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ALe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:o,axis:i}=r,a=Ct(i,s.shape)[0],u=wE(s,o,a),l=s.shape.length,c=new Array(l).fill(0),d=s.shape.slice();return u.map(h=>{const f=[...d];f[a]=h;const p=eh({inputs:{x:s},backend:n,attrs:{begin:c,size:f}});return c[a]+=h,p})}const DLe={kernelName:bx,backendName:"webgl",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mO="return sqrt(x);",OLe=_t({opSnippet:mO,packedOpSnippet:mO,cpuKernelImpl:l_e}),PLe={kernelName:wm,backendName:"webgl",kernelFunc:OLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LLe="return x * x;",FLe=_t({opSnippet:LLe}),MLe={kernelName:sI,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gO="return (a - b) * (a - b);",zLe=kr({opSnippet:gO,packedOpSnippet:gO}),BLe={kernelName:Sm,backendName:"webgl",kernelFunc:zLe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const o=n.readSync(s.dataId),i=la(o),a=u_e(i,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const ULe={kernelName:oI,backendName:"webgl",kernelFunc:VLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Eo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,o=new pi(r.shape,s);return n.runWebGLProgram(o,[r],r.dtype)}const jLe={kernelName:Em,backendName:"webgl",kernelFunc:WLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GLe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,o=Kt(r.length),i=Kt(r.length);let a="";if(s===1)a="coords * strides + begin";else{let u=0;a=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${e});
      ${o} strides = ${o}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:o,end:i,strides:a,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:x,strides:b}=rE(s.shape,o,i,a,u,l,c,d,h);let w;if(m)w=Le({inputs:{x:s},backend:n,attrs:{shape:p}});else if(y||g){B(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const C=eE(v,x,b),$=eh({inputs:{x:s},backend:n,attrs:{begin:v,size:C}});w=Le({inputs:{x:$},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo($)}else if(n.shouldExecuteOnCPU([s])){const $=n.readSync(s.dataId),E=kt(s.shape,s.dtype,$),S=c_e(f,E,b,v);w=n.makeTensorInfo(p,s.dtype,S.values)}else{const $=new GLe(v,b,f);w=n.runWebGLProgram($,[s],s.dtype)}const k=Le({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),k}const KLe={kernelName:iI,backendName:"webgl",kernelFunc:HLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:o,leftPad:i,rightPad:a,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:d}=e,h=n.readSync(c.dataId),f=n.readSync(d.dataId),[p,m]=d_e(h,f,s,o,i,a,u,l);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const XLe={kernelName:Zz,backendName:"webgl",kernelFunc:qLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YLe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:o,delimiter:i}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(o.dataId),u=n.readSync(i.dataId)[0],[l,c,d]=h_e(a,u,s),h=c.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ZLe={kernelName:Qz,backendName:"webgl",kernelFunc:YLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QLe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(o.dataId),a=f_e(i,s);return n.makeTensorInfo(o.shape,"int32",a)}const JLe={kernelName:Jz,backendName:"webgl",kernelFunc:QLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eFe="return tan(x);",tFe=_t({opSnippet:eFe}),nFe={kernelName:Cm,backendName:"webgl",kernelFunc:tFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rFe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,sFe=_t({opSnippet:rFe}),oFe={kernelName:$m,backendName:"webgl",kernelFunc:sFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:o,updates:i}=e,{sliceRank:a,numUpdates:u,sliceSize:l,strides:c,outputSize:d}=Uu(i,o,s.shape),h=[d/l,l];if(d===0)return n.makeTensorInfo(s.shape,o.dtype);const f=Le({inputs:{x:o},backend:n,attrs:{shape:[u,a]}}),p=Le({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),m=Le({inputs:{x:s},backend:n,attrs:{shape:h}}),y=new dT(u,a,f.shape.length,p.shape.length,c,h,!1,!0),g=n.runWebGLProgram(y,[p,f,m],m.dtype),v=Le({inputs:{x:g},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),v}const aFe={kernelName:jz,backendName:"webgl",kernelFunc:iFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lFe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const s=Kt(this.rank),o=uFe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}}function uFe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dW(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:o}=r;if(s.dtype==="string"||s.shape.length>5){const u=n.readSync(s.dataId),l=s.dtype==="string"?u.map(h=>tl(h)):u,c=kt(s.shape,s.dtype,l),d=m_e(c,o);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new lFe(s.shape,o);return n.runWebGLProgram(i,[s],s.dtype)}const cFe={kernelName:Im,backendName:"webgl",kernelFunc:dW};class dFe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class hFe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nl(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function yO(t){let e=1;for(;e<t;)e*=2;return e}function fFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:o,sorted:i}=r,a=de().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=de().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=s.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([s])||c<a||o>u){const S=n.readSync(s.dataId),[R,T]=g_e(S,l,s.dtype,o,i);return[n.makeTensorInfo(R.shape,R.dtype,R.values),n.makeTensorInfo(T.shape,T.dtype,T.values)]}if(o===0)return l[l.length-1]=0,[n.makeTensorInfo(l,s.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(c===1)return[s,Zm({attrs:{shape:l,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(s):s,m=ve(l)/c,y=Le({inputs:{x:f},attrs:{shape:[m,c]},backend:n});h&&Nl(n,f);const g=yO(o),v=yO(c);let x=null;const b=()=>x===null?[y,y]:[y,x],w=(S,R,T)=>{const P=b(),I=new dFe(T),L=[[c],[x===null?1:0],[Number.NEGATIVE_INFINITY],[S],[R]],V=x;x=n.runWebGLProgram(I,P,"int32",L),Nl(n,V)};for(let S=1;S<g;S*=2){const R=S*2;for(let T=S;T>=1;T/=2)w(R,T,[m,v])}for(let S=v;S>g;S/=2){const R=b(),T=new hFe([m,S/2]),I=[[c],[x===null?1:0],[g]],A=x;x=n.runWebGLProgram(T,R,"int32",I),Nl(n,A);const L=g/2,V=L*2;for(let z=L;z>=1;z/=2)w(V,z,x.shape)}let k=x;x=eh({inputs:{x},backend:n,attrs:{begin:0,size:[m,o]}}),Nl(n,k);let C=rW({inputs:{x:y,indices:x},backend:n,attrs:{axis:1,batchDims:1}});Nl(n,y);const $=l.slice(0,-1);$.push(o),k=x,x=Le({inputs:{x},attrs:{shape:$},backend:n}),Nl(n,k);const E=C;return C=Le({inputs:{x:C},attrs:{shape:$},backend:n}),Nl(n,E),[C,x]}const pFe={kernelName:aI,backendName:"webgl",kernelFunc:fFe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mFe{constructor(e,n,r,s,o,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=r==="nearest"?1:2;let u;switch(s){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:o}=e,{interpolation:i,fillMode:a,fillValue:u,outputShape:l}=r,[c,d,h,f]=s.shape,[p,m]=l??[d,h],y=[c,p,m,f],g=new mFe(d,h,i,a,u,y);return n.runWebGLProgram(g,[s,o],"float32")}const yFe={kernelName:lI,backendName:"webgl",kernelFunc:gFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:o}=e;qm(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(o.dataId),{outputValues:a,outputShape:u,indices:l}=y_e(i,s,o.shape,o.dtype);return[r.makeTensorInfo(u,o.dtype,a),r.makeTensorInfo([l.length],"int32",l)]}const xFe={kernelName:uI,backendName:"webgl",kernelFunc:vFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bFe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:o}=r;o<0&&(o+=s.shape.length);const i=s,a=i.shape.length,u=s.shape[o],l=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==o&&(l[c++]=i.shape[m]);const d=[],h=new Array(a).fill(0),f=i.shape.slice();f[o]=1;const p=new Array(u);for(let m=0;m<p.length;m++){h[o]=m;const y=eh({inputs:{x:i},backend:n,attrs:{begin:h,size:f}}),g=Le({inputs:{x:y},backend:n,attrs:{shape:l}});p[m]=g,d.push(y)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const wFe={kernelName:Sx,backendName:"webgl",kernelFunc:bFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SFe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/r);this.outputShape=[s,a];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";o%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let p="";o%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:o}=e,{numSegments:i}=r,a=s.shape.length,u=[];let l=0;const c=In([l],a);let d=s;c!=null&&(d=qr({inputs:{x:s},backend:n,attrs:{perm:c}}),u.push(d),l=Vn(1,a)[0]);const h=KB(d.shape,l,i),f=ve([d.shape[l]]),p=Le({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});u.push(p);const m=hI(s.dtype),y=(b,w,k,C,$)=>{const E=b.shape[0],S=b.shape[1],R=HB(S,$),T={windowSize:R,inSize:S,batchSize:E,numSegments:$},P=new SFe(T,w),I=n.compileAndRun(P,[b,k],C);if(u.push(I),I.shape[1]===$)return I;const A=cW({backend:n,attrs:{start:0,stop:$,step:1,dtype:"float32"}}),L=dW({inputs:{x:A},backend:n,attrs:{reps:[S/R]}});return u.push(A),u.push(L),y(I,w,L,C,$)},g=y(p,"unsortedSegmentSum",o,m,i),v=Le({inputs:{x:g},backend:n,attrs:{shape:h}});let x=v;if(c!=null){u.push(v);const b=xl(c);x=qr({inputs:{x},backend:n,attrs:{perm:b}})}return u.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const CFe={kernelName:kx,backendName:"webgl",kernelFunc:kFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Fe=[lNe,cNe,fNe,gNe,vNe,wNe,kNe,$Ne,_Ne,RNe,ONe,FNe,BNe,jNe,KNe,XNe,ZNe,tRe,rRe,oRe,uRe,gRe,vRe,SRe,CRe,NRe,ARe,LRe,G_e,zRe,jRe,qRe,eAe,rAe,oAe,aAe,uAe,fAe,gAe,xAe,wAe,kAe,$Ae,TAe,NAe,OAe,LAe,zAe,UAe,jAe,qAe,QAe,nDe,oDe,lDe,uDe,dDe,fDe,mDe,yDe,xDe,kDe,IDe,_De,RDe,ODe,FDe,VDe,GDe,j_e,KDe,URe,YDe,JDe,nOe,K_e,iOe,cOe,hOe,gOe,xOe,kOe,IOe,NOe,OOe,FOe,zOe,WOe,GOe,KOe,ZOe,JOe,t3e,r3e,o3e,u3e,f3e,y3e,$3e,Y_e,_3e,A3e,P3e,M3e,IRe,V3e,W3e,G3e,q3e,Q3e,X_e,ePe,nPe,sPe,iPe,aPe,ERe,w3e,cPe,pPe,vPe,Q_e,SPe,$Pe,_Pe,APe,LPe,MPe,VPe,jPe,KPe,YPe,JPe,nLe,iLe,uLe,fLe,gLe,pRe,k3e,xLe,wLe,kLe,$Le,ELe,_Le,RLe,DLe,PLe,MLe,BLe,ULe,jLe,KLe,XLe,ZLe,JLe,S3e,oNe,nFe,oFe,aFe,cFe,pFe,yFe,iNe,xFe,wFe,CFe,U3e];for(const t of $Fe)t4(t);var IFe=Object.defineProperty,EFe=(t,e,n)=>e in t?IFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TFe=(t,e,n)=>EFe(t,typeof e!="symbol"?e+"":e,n);const _Fe="https://tmstore.blob.core.windows.net/models/mobilenet_v2_035_224/model.json";async function NFe(t){return new Promise((e,n)=>{const r=new Image;r.crossOrigin="anonymous",t?(r.src=t,r.onload=()=>e(r),r.onerror=n,r.onabort=n):n()})}function RFe(t){return le(()=>{const e=Kye(t);return AFe(e,!1).expandDims(0).toFloat().div(Nt(127)).sub(Nt(1))})}function AFe(t,e,n){const r=Math.min(t.shape[0],t.shape[1]),s=t.shape[0]/2-r/2,o=t.shape[1]/2-r/2;if(e&&!n){let i=t.slice([s,o,0],[r,r,3]);return i=i.reshape([r*r,1,3]),i=Q(i,[.2989,.587,.114]),i=i.reshape([r,r,3]),i=tt(i,-1),i=jr(i,-1),i}return t.slice([s,o,0],[r,r,3])}function DFe(t,e,n=!1,r=document.createElement("canvas")){const s=t.width,o=t.height,i=Math.min(s,o),a=e/i,u=Math.ceil(s*a),l=Math.ceil(o*a),c=u-e,d=l-e;r.width=r.height=e;const h=r.getContext("2d");return h&&(h.drawImage(t,~~(c/2)*-1,~~(d/2)*-1,u,l),n&&(h.scale(-1,1),h.drawImage(r,e*-1,0))),r}class Jg{constructor(){TFe(this,"model")}async createMobileNet(){if(!this.model){const e=await O5(_Fe),n=e.getLayer("out_relu"),r=Ube({inputs:e.inputs,outputs:n.output}),s=nC();s.add(r),s.add(iwe({})),this.model=s}return this.model}async generateEmbedding(e){const n=await this.createMobileNet();let r;if(e instanceof HTMLCanvasElement)r=e;else{const i=await NFe(e);r=DFe(i,224)}const s=le(()=>{const i=RFe(r);return n==null?void 0:n.predict(i)}),o=s?await s.data():[];return xt(s),Array.from(o)}async generateEmbeddings(e){await this.createMobileNet();const n=e.map(r=>this.generateEmbedding(r));return Promise.all(n)}}var OFe=Object.defineProperty,PFe=(t,e,n)=>e in t?OFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rl=(t,e,n)=>PFe(t,typeof e!="symbol"?e+"":e,n);function e0(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hW={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,o){function i(l,c){if(!s[l]){if(!r[l]){var d=typeof e0=="function"&&e0;if(!c&&d)return d(l,!0);if(a)return a(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var f=s[l]={exports:{}};r[l][0].call(f.exports,function(p){var m=r[l][1][p];return i(m||p)},f,f.exports,n,r,s,o)}return s[l].exports}for(var a=typeof e0=="function"&&e0,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(n,r,s){var o=n("./utils"),i=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(u){for(var l,c,d,h,f,p,m,y=[],g=0,v=u.length,x=v,b=o.getTypeOf(u)!=="string";g<u.length;)x=v-g,d=b?(l=u[g++],c=g<v?u[g++]:0,g<v?u[g++]:0):(l=u.charCodeAt(g++),c=g<v?u.charCodeAt(g++):0,g<v?u.charCodeAt(g++):0),h=l>>2,f=(3&l)<<4|c>>4,p=1<x?(15&c)<<2|d>>6:64,m=2<x?63&d:64,y.push(a.charAt(h)+a.charAt(f)+a.charAt(p)+a.charAt(m));return y.join("")},s.decode=function(u){var l,c,d,h,f,p,m=0,y=0,g="data:";if(u.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var v,x=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&x--,u.charAt(u.length-2)===a.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=i.uint8array?new Uint8Array(0|x):new Array(0|x);m<u.length;)l=a.indexOf(u.charAt(m++))<<2|(h=a.indexOf(u.charAt(m++)))>>4,c=(15&h)<<4|(f=a.indexOf(u.charAt(m++)))>>2,d=(3&f)<<6|(p=a.indexOf(u.charAt(m++))),v[y++]=l,f!==64&&(v[y++]=c),p!==64&&(v[y++]=d);return v}},{"./support":30,"./utils":32}],2:[function(n,r,s){var o=n("./external"),i=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function l(c,d,h,f,p){this.compressedSize=c,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=p}l.prototype={getContentWorker:function(){var c=new i(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),d=this;return c.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new i(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(c,d,h){return c.pipe(new a).pipe(new u("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",d)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var o=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var o=n("./utils"),i=function(){for(var a,u=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;u[l]=a}return u}();r.exports=function(a,u){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?function(l,c,d,h){var f=i,p=h+d;l^=-1;for(var m=h;m<p;m++)l=l>>>8^f[255&(l^c[m])];return-1^l}(0|u,a,a.length,0):function(l,c,d,h){var f=i,p=h+d;l^=-1;for(var m=h;m<p;m++)l=l>>>8^f[255&(l^c.charCodeAt(m))];return-1^l}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=n("pako"),a=n("./utils"),u=n("./stream/GenericWorker"),l=o?"uint8array":"array";function c(d,h){u.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}s.magic="\b\0",a.inherits(c,u),c.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(l,d.data),!1)},c.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},s.compressWorker=function(d){return new c("Deflate",d)},s.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function o(f,p){var m,y="";for(m=0;m<p;m++)y+=String.fromCharCode(255&f),f>>>=8;return y}function i(f,p,m,y,g,v){var x,b,w=f.file,k=f.compression,C=v!==l.utf8encode,$=a.transformTo("string",v(w.name)),E=a.transformTo("string",l.utf8encode(w.name)),S=w.comment,R=a.transformTo("string",v(S)),T=a.transformTo("string",l.utf8encode(S)),P=E.length!==w.name.length,I=T.length!==S.length,A="",L="",V="",z=w.dir,M=w.date,_={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(_.crc32=f.crc32,_.compressedSize=f.compressedSize,_.uncompressedSize=f.uncompressedSize);var F=0;p&&(F|=8),C||!P&&!I||(F|=2048);var O=0,D=0;z&&(O|=16),g==="UNIX"?(D=798,O|=function(G,J){var me=G;return G||(me=J?16893:33204),(65535&me)<<16}(w.unixPermissions,z)):(D=20,O|=function(G){return 63&(G||0)}(w.dosPermissions)),x=M.getUTCHours(),x<<=6,x|=M.getUTCMinutes(),x<<=5,x|=M.getUTCSeconds()/2,b=M.getUTCFullYear()-1980,b<<=4,b|=M.getUTCMonth()+1,b<<=5,b|=M.getUTCDate(),P&&(L=o(1,1)+o(c($),4)+E,A+="up"+o(L.length,2)+L),I&&(V=o(1,1)+o(c(R),4)+T,A+="uc"+o(V.length,2)+V);var j="";return j+=`
\0`,j+=o(F,2),j+=k.magic,j+=o(x,2),j+=o(b,2),j+=o(_.crc32,4),j+=o(_.compressedSize,4),j+=o(_.uncompressedSize,4),j+=o($.length,2),j+=o(A.length,2),{fileRecord:d.LOCAL_FILE_HEADER+j+$+A,dirRecord:d.CENTRAL_FILE_HEADER+o(D,2)+j+o(R.length,2)+"\0\0\0\0"+o(O,4)+o(y,4)+$+A+R}}var a=n("../utils"),u=n("../stream/GenericWorker"),l=n("../utf8"),c=n("../crc32"),d=n("../signature");function h(f,p,m,y){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=y,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,u),h.prototype.push=function(f){var p=f.meta.percent||0,m=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,u.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-y-1))/m:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var m=i(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,m=i(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(y){return d.DATA_DESCRIPTOR+o(y.crc32,4)+o(y.compressedSize,4)+o(y.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-f,y=function(g,v,x,b,w){var k=a.transformTo("string",w(b));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(g,2)+o(g,2)+o(v,4)+o(x,4)+o(k.length,2)+k}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(m){p.processChunk(m)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(m){p.error(m)}),this},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var p=this._sources;if(!u.prototype.error.call(this,f))return!1;for(var m=0;m<p.length;m++)try{p[m].error(f)}catch{}return!0},h.prototype.lock=function(){u.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var o=n("../compressions"),i=n("./ZipFileWorker");s.generateWorker=function(a,u,l){var c=new i(u.streamFiles,l,u.platform,u.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var p=function(v,x){var b=v||x,w=o[b];if(!w)throw new Error(b+" is not a valid compression method !");return w}(f.options.compression,u.compression),m=f.options.compressionOptions||u.compressionOptions||{},y=f.dir,g=f.date;f._compressWorker(p,m).withStreamInfo("file",{name:h,dir:y,date:g,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(c)}),c.entriesCount=d}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new o;for(var a in this)typeof this[a]!="function"&&(i[a]=this[a]);return i}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(i,a){return new o().loadAsync(i,a)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var o=n("./utils"),i=n("./external"),a=n("./utf8"),u=n("./zipEntries"),l=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function d(h){return new i.Promise(function(f,p){var m=h.decompressed.getContentWorker().pipe(new l);m.on("error",function(y){p(y)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(h,f){var p=this;return f=o.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(h)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(m){var y=new u(f);return y.load(m),y}).then(function(m){var y=[i.Promise.resolve(m)],g=m.files;if(f.checkCRC32)for(var v=0;v<g.length;v++)y.push(d(g[v]));return i.Promise.all(y)}).then(function(m){for(var y=m.shift(),g=y.files,v=0;v<g.length;v++){var x=g[v],b=x.fileNameStr,w=o.resolve(x.fileNameStr);p.file(w,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:f.createFolders}),x.dir||(p.file(w).unsafeOriginalName=b)}return y.zipComment.length&&(p.comment=y.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var o=n("../utils"),i=n("../stream/GenericWorker");function a(u,l){i.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}o.inherits(a,i),a.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(c){l.push({data:c,meta:{percent:0}})}).on("error",function(c){l.isPaused?this.generatedError=c:l.error(c)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var o=n("readable-stream").Readable;function i(a,u,l){o.call(this,u),this._helper=a;var c=this;a.on("data",function(d,h){c.push(d)||c._helper.pause(),l&&l(h)}).on("error",function(d){c.emit("error",d)}).on("end",function(){c.push(null)})}n("../utils").inherits(i,o),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,i);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,i)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var i=new Buffer(o);return i.fill(0),i},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,s){function o(w,k,C){var $,E=a.getTypeOf(k),S=a.extend(C||{},c);S.date=S.date||new Date,S.compression!==null&&(S.compression=S.compression.toUpperCase()),typeof S.unixPermissions=="string"&&(S.unixPermissions=parseInt(S.unixPermissions,8)),S.unixPermissions&&16384&S.unixPermissions&&(S.dir=!0),S.dosPermissions&&16&S.dosPermissions&&(S.dir=!0),S.dir&&(w=g(w)),S.createFolders&&($=y(w))&&v.call(this,$,!0);var R=E==="string"&&S.binary===!1&&S.base64===!1;C&&C.binary!==void 0||(S.binary=!R),(k instanceof d&&k.uncompressedSize===0||S.dir||!k||k.length===0)&&(S.base64=!1,S.binary=!0,k="",S.compression="STORE",E="string");var T=null;T=k instanceof d||k instanceof u?k:p.isNode&&p.isStream(k)?new m(w,k):a.prepareContent(w,k,S.binary,S.optimizedBinaryString,S.base64);var P=new h(w,T,S);this.files[w]=P}var i=n("./utf8"),a=n("./utils"),u=n("./stream/GenericWorker"),l=n("./stream/StreamHelper"),c=n("./defaults"),d=n("./compressedObject"),h=n("./zipObject"),f=n("./generate"),p=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),y=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var k=w.lastIndexOf("/");return 0<k?w.substring(0,k):""},g=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},v=function(w,k){return k=k!==void 0?k:c.createFolders,w=g(w),this.files[w]||o.call(this,w,null,{dir:!0,createFolders:k}),this.files[w]};function x(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var k,C,$;for(k in this.files)$=this.files[k],(C=k.slice(this.root.length,k.length))&&k.slice(0,this.root.length)===this.root&&w(C,$)},filter:function(w){var k=[];return this.forEach(function(C,$){w(C,$)&&k.push($)}),k},file:function(w,k,C){if(arguments.length!==1)return w=this.root+w,o.call(this,w,k,C),this;if(x(w)){var $=w;return this.filter(function(S,R){return!R.dir&&$.test(S)})}var E=this.files[this.root+w];return E&&!E.dir?E:null},folder:function(w){if(!w)return this;if(x(w))return this.filter(function(E,S){return S.dir&&w.test(E)});var k=this.root+w,C=v.call(this,k),$=this.clone();return $.root=C.name,$},remove:function(w){w=this.root+w;var k=this.files[w];if(k||(w.slice(-1)!=="/"&&(w+="/"),k=this.files[w]),k&&!k.dir)delete this.files[w];else for(var C=this.filter(function(E,S){return S.name.slice(0,w.length)===w}),$=0;$<C.length;$++)delete this.files[C[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var k,C={};try{if((C=a.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");a.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var $=C.comment||this.comment||"";k=f.generateWorker(this,C,$)}catch(E){(k=new u("error")).error(E)}return new l(k,C.type||"string",C.mimeType)},generateAsync:function(w,k){return this.generateInternalStream(w).accumulate(k)},generateNodeStream:function(w,k){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(k)}};r.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var o=n("./DataReader");function i(a){o.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}n("../utils").inherits(i,o),i.prototype.byteAt=function(a){return this.data[this.zero+a]},i.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),l=a.charCodeAt(1),c=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===u&&this.data[h+1]===l&&this.data[h+2]===c&&this.data[h+3]===d)return h-this.zero;return-1},i.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),l=a.charCodeAt(1),c=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return u===h[0]&&l===h[1]&&c===h[2]&&d===h[3]},i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var o=n("../utils");function i(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,l=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=a,l},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=i},{"../utils":32}],19:[function(n,r,s){var o=n("./Uint8ArrayReader");function i(a){o.call(this,a)}n("../utils").inherits(i,o),i.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var o=n("./DataReader");function i(a){o.call(this,a)}n("../utils").inherits(i,o),i.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},i.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},i.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},i.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var o=n("./ArrayReader");function i(a){o.call(this,a)}n("../utils").inherits(i,o),i.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var o=n("../utils"),i=n("../support"),a=n("./ArrayReader"),u=n("./StringReader"),l=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(d){var h=o.getTypeOf(d);return o.checkSupport(h),h!=="string"||i.uint8array?h==="nodebuffer"?new l(d):i.uint8array?new c(o.transformTo("uint8array",d)):new a(o.transformTo("array",d)):new u(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var o=n("./GenericWorker"),i=n("../utils");function a(u){o.call(this,"ConvertWorker to "+u),this.destType=u}i.inherits(a,o),a.prototype.processChunk=function(u){this.push({data:i.transformTo(this.destType,u.data),meta:u.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var o=n("./GenericWorker"),i=n("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,o),a.prototype.processChunk=function(u){this.streamInfo.crc32=i(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var o=n("../utils"),i=n("./GenericWorker");function a(u){i.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}o.inherits(a,i),a.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}i.prototype.processChunk.call(this,u)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var o=n("../utils"),i=n("./GenericWorker");function a(u){i.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(c){l.dataIsReady=!0,l.data=c,l.max=c&&c.length||0,l.type=o.getTypeOf(c),l.isPaused||l._tickAndRepeat()},function(c){l.error(c)})}o.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function o(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,a){return this._listeners[i].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,a){if(this._listeners[i])for(var u=0;u<this._listeners[i].length;u++)this._listeners[i][u].call(this,a)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var a=this;return i.on("data",function(u){a.processChunk(u)}),i.on("end",function(){a.end()}),i.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,a){return this.extraStreamInfo[i]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},r.exports=o},{}],29:[function(n,r,s){var o=n("../utils"),i=n("./ConvertWorker"),a=n("./GenericWorker"),u=n("../base64"),l=n("../support"),c=n("../external"),d=null;if(l.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,m){return new c.Promise(function(y,g){var v=[],x=p._internalType,b=p._outputType,w=p._mimeType;p.on("data",function(k,C){v.push(k),m&&m(C)}).on("error",function(k){v=[],g(k)}).on("end",function(){try{var k=function(C,$,E){switch(C){case"blob":return o.newBlob(o.transformTo("arraybuffer",$),E);case"base64":return u.encode($);default:return o.transformTo(C,$)}}(b,function(C,$){var E,S=0,R=null,T=0;for(E=0;E<$.length;E++)T+=$[E].length;switch(C){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(R=new Uint8Array(T),E=0;E<$.length;E++)R.set($[E],S),S+=$[E].length;return R;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+C+"'")}}(x,v),w);y(k)}catch(C){g(C)}v=[]}).resume()})}function f(p,m,y){var g=m;switch(m){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=m,this._mimeType=y,o.checkSupport(g),this._worker=p.pipe(new i(g)),p.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}f.prototype={accumulate:function(p){return h(this,p)},on:function(p,m){var y=this;return p==="data"?this._worker.on(p,function(g){m.call(y,g.data,g.meta)}):this._worker.on(p,function(){o.delay(m,arguments,y)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),s.blob=i.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var o=n("./utils"),i=n("./support"),a=n("./nodejsUtils"),u=n("./stream/GenericWorker"),l=new Array(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;l[254]=l[254]=1;function d(){u.call(this,"utf-8 decode"),this.leftOver=null}function h(){u.call(this,"utf-8 encode")}s.utf8encode=function(f){return i.nodebuffer?a.newBufferFrom(f,"utf-8"):function(p){var m,y,g,v,x,b=p.length,w=0;for(v=0;v<b;v++)(64512&(y=p.charCodeAt(v)))==55296&&v+1<b&&(64512&(g=p.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),v++),w+=y<128?1:y<2048?2:y<65536?3:4;for(m=i.uint8array?new Uint8Array(w):new Array(w),v=x=0;x<w;v++)(64512&(y=p.charCodeAt(v)))==55296&&v+1<b&&(64512&(g=p.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),v++),y<128?m[x++]=y:(y<2048?m[x++]=192|y>>>6:(y<65536?m[x++]=224|y>>>12:(m[x++]=240|y>>>18,m[x++]=128|y>>>12&63),m[x++]=128|y>>>6&63),m[x++]=128|63&y);return m}(f)},s.utf8decode=function(f){return i.nodebuffer?o.transformTo("nodebuffer",f).toString("utf-8"):function(p){var m,y,g,v,x=p.length,b=new Array(2*x);for(m=y=0;m<x;)if((g=p[m++])<128)b[y++]=g;else if(4<(v=l[g]))b[y++]=65533,m+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&m<x;)g=g<<6|63&p[m++],v--;1<v?b[y++]=65533:g<65536?b[y++]=g:(g-=65536,b[y++]=55296|g>>10&1023,b[y++]=56320|1023&g)}return b.length!==y&&(b.subarray?b=b.subarray(0,y):b.length=y),o.applyFromCharCode(b)}(f=o.transformTo(i.uint8array?"uint8array":"array",f))},o.inherits(d,u),d.prototype.processChunk=function(f){var p=o.transformTo(i.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var y=function(v,x){var b;for((x=x||v.length)>v.length&&(x=v.length),b=x-1;0<=b&&(192&v[b])==128;)b--;return b<0||b===0?x:b+l[v[b]]>x?b:x}(p),g=p;y!==p.length&&(i.uint8array?(g=p.subarray(0,y),this.leftOver=p.subarray(y,p.length)):(g=p.slice(0,y),this.leftOver=p.slice(y,p.length))),this.push({data:s.utf8decode(g),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=d,o.inherits(h,u),h.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var o=n("./support"),i=n("./base64"),a=n("./nodejsUtils"),u=n("./external");function l(m){return m}function c(m,y){for(var g=0;g<m.length;++g)y[g]=255&m.charCodeAt(g);return y}n("setimmediate"),s.newBlob=function(m,y){s.checkSupport("blob");try{return new Blob([m],{type:y})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(m),g.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,y,g){var v=[],x=0,b=m.length;if(b<=g)return String.fromCharCode.apply(null,m);for(;x<b;)y==="array"||y==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(x,Math.min(x+g,b)))):v.push(String.fromCharCode.apply(null,m.subarray(x,Math.min(x+g,b)))),x+=g;return v.join("")},stringifyByChar:function(m){for(var y="",g=0;g<m.length;g++)y+=String.fromCharCode(m[g]);return y},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var y=65536,g=s.getTypeOf(m),v=!0;if(g==="uint8array"?v=d.applyCanBeUsed.uint8array:g==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<y;)try{return d.stringifyByChunk(m,g,y)}catch{y=Math.floor(y/2)}return d.stringifyByChar(m)}function f(m,y){for(var g=0;g<m.length;g++)y[g]=m[g];return y}s.applyFromCharCode=h;var p={};p.string={string:l,array:function(m){return c(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return c(m,new Uint8Array(m.length))},nodebuffer:function(m){return c(m,a.allocBuffer(m.length))}},p.array={string:h,array:l,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},p.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:l,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:l,nodebuffer:function(m){return a.newBufferFrom(m)}},p.nodebuffer={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:l},s.transformTo=function(m,y){if(y=y||"",!m)return y;s.checkSupport(m);var g=s.getTypeOf(y);return p[g][m](y)},s.resolve=function(m){for(var y=m.split("/"),g=[],v=0;v<y.length;v++){var x=y[v];x==="."||x===""&&v!==0&&v!==y.length-1||(x===".."?g.pop():g.push(x))}return g.join("/")},s.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(m)?"nodebuffer":o.uint8array&&m instanceof Uint8Array?"uint8array":o.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(m){if(!o[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(m){var y,g,v="";for(g=0;g<(m||"").length;g++)v+="\\x"+((y=m.charCodeAt(g))<16?"0":"")+y.toString(16).toUpperCase();return v},s.delay=function(m,y,g){setImmediate(function(){m.apply(g||null,y||[])})},s.inherits=function(m,y){function g(){}g.prototype=y.prototype,m.prototype=new g},s.extend=function(){var m,y,g={};for(m=0;m<arguments.length;m++)for(y in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],y)&&g[y]===void 0&&(g[y]=arguments[m][y]);return g},s.prepareContent=function(m,y,g,v,x){return u.Promise.resolve(y).then(function(b){return o.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new u.Promise(function(w,k){var C=new FileReader;C.onload=function($){w($.target.result)},C.onerror=function($){k($.target.error)},C.readAsArrayBuffer(b)}):b}).then(function(b){var w=s.getTypeOf(b);return w?(w==="arraybuffer"?b=s.transformTo("uint8array",b):w==="string"&&(x?b=i.decode(b):g&&v!==!0&&(b=function(k){return c(k,o.uint8array?new Uint8Array(k.length):new Array(k.length))}(b))),b):u.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var o=n("./reader/readerFor"),i=n("./utils"),a=n("./signature"),u=n("./zipEntry"),l=n("./support");function c(d){this.files=[],this.loadOptions=d}c.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(h)+", expected "+i.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var p=this.reader.readString(4)===h;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=l.uint8array?"uint8array":"array",f=i.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,p=this.zip64EndOfCentralSize-44;0<p;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=h-f;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(d){this.reader=o(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var o=n("./reader/readerFor"),i=n("./utils"),a=n("./compressedObject"),u=n("./crc32"),l=n("./utf8"),c=n("./compressions"),d=n("./support");function h(f,p){this.options=f,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(y){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===y)return c[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=o(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,m,y,g=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<g;)p=f.readInt(2),m=f.readInt(2),y=f.readData(m),this.extraFields[p]={id:p,length:m,value:y};f.setIndex(g)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=i.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var g=i.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=o(f.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:l.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=o(f.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:l.utf8decode(p.readData(f.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function o(p,m,y){this.name=p,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=m,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var i=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),u=n("./utf8"),l=n("./compressedObject"),c=n("./stream/GenericWorker");o.prototype={internalStream:function(p){var m=null,y="string";try{if(!p)throw new Error("No output type specified.");var g=(y=p.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(m=m.pipe(new u.Utf8EncodeWorker)),!v&&g&&(m=m.pipe(new u.Utf8DecodeWorker))}catch(x){(m=new c("error")).error(x)}return new i(m,y,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof l&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(y,p,m)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)o.prototype[d[f]]=h;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(o){var i,a,u=o.MutationObserver||o.WebKitMutationObserver;if(u){var l=0,c=new u(p),d=o.document.createTextNode("");c.observe(d,{characterData:!0}),i=function(){d.data=l=++l%2}}else if(o.setImmediate||o.MessageChannel===void 0)i="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var m=o.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},o.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var h=new o.MessageChannel;h.port1.onmessage=p,i=function(){h.port2.postMessage(0)}}var f=[];function p(){var m,y;a=!0;for(var g=f.length;g;){for(y=f,f=[],m=-1;++m<g;)y[m]();g=f.length}a=!1}r.exports=function(m){f.push(m)!==1||a||i()}}).call(this,typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var o=n("immediate");function i(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];function d(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,g!==i&&m(this,g)}function h(g,v,x){this.promise=g,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function f(g,v,x){o(function(){var b;try{b=v(x)}catch(w){return a.reject(g,w)}b===g?a.reject(g,new TypeError("Cannot resolve promise with itself")):a.resolve(g,b)})}function p(g){var v=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof v=="function")return function(){v.apply(g,arguments)}}function m(g,v){var x=!1;function b(C){x||(x=!0,a.reject(g,C))}function w(C){x||(x=!0,a.resolve(g,C))}var k=y(function(){v(w,b)});k.status==="error"&&b(k.value)}function y(g,v){var x={};try{x.value=g(v),x.status="success"}catch(b){x.status="error",x.value=b}return x}(r.exports=d).prototype.finally=function(g){if(typeof g!="function")return this;var v=this.constructor;return this.then(function(x){return v.resolve(g()).then(function(){return x})},function(x){return v.resolve(g()).then(function(){throw x})})},d.prototype.catch=function(g){return this.then(null,g)},d.prototype.then=function(g,v){if(typeof g!="function"&&this.state===l||typeof v!="function"&&this.state===u)return this;var x=new this.constructor(i);return this.state!==c?f(x,this.state===l?g:v,this.outcome):this.queue.push(new h(x,g,v)),x},h.prototype.callFulfilled=function(g){a.resolve(this.promise,g)},h.prototype.otherCallFulfilled=function(g){f(this.promise,this.onFulfilled,g)},h.prototype.callRejected=function(g){a.reject(this.promise,g)},h.prototype.otherCallRejected=function(g){f(this.promise,this.onRejected,g)},a.resolve=function(g,v){var x=y(p,v);if(x.status==="error")return a.reject(g,x.value);var b=x.value;if(b)m(g,b);else{g.state=l,g.outcome=v;for(var w=-1,k=g.queue.length;++w<k;)g.queue[w].callFulfilled(v)}return g},a.reject=function(g,v){g.state=u,g.outcome=v;for(var x=-1,b=g.queue.length;++x<b;)g.queue[x].callRejected(v);return g},d.resolve=function(g){return g instanceof this?g:a.resolve(new this(i),g)},d.reject=function(g){var v=new this(i);return a.reject(v,g)},d.all=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=g.length,b=!1;if(!x)return this.resolve([]);for(var w=new Array(x),k=0,C=-1,$=new this(i);++C<x;)E(g[C],C);return $;function E(S,R){v.resolve(S).then(function(T){w[R]=T,++k!==x||b||(b=!0,a.resolve($,w))},function(T){b||(b=!0,a.reject($,T))})}},d.race=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=g.length,b=!1;if(!x)return this.resolve([]);for(var w=-1,k=new this(i);++w<x;)C=g[w],v.resolve(C).then(function($){b||(b=!0,a.resolve(k,$))},function($){b||(b=!0,a.reject(k,$))});var C;return k}},{immediate:36}],38:[function(n,r,s){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var o=n("./zlib/deflate"),i=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/messages"),l=n("./zlib/zstream"),c=Object.prototype.toString,d=0,h=-1,f=0,p=8;function m(g){if(!(this instanceof m))return new m(g);this.options=i.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},g||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var x=o.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(x!==d)throw new Error(u[x]);if(v.header&&o.deflateSetHeader(this.strm,v.header),v.dictionary){var b;if(b=typeof v.dictionary=="string"?a.string2buf(v.dictionary):c.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(x=o.deflateSetDictionary(this.strm,b))!==d)throw new Error(u[x]);this._dict_set=!0}}function y(g,v){var x=new m(v);if(x.push(g,!0),x.err)throw x.msg||u[x.err];return x.result}m.prototype.push=function(g,v){var x,b,w=this.strm,k=this.options.chunkSize;if(this.ended)return!1;b=v===~~v?v:v===!0?4:0,typeof g=="string"?w.input=a.string2buf(g):c.call(g)==="[object ArrayBuffer]"?w.input=new Uint8Array(g):w.input=g,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new i.Buf8(k),w.next_out=0,w.avail_out=k),(x=o.deflate(w,b))!==1&&x!==d)return this.onEnd(x),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(i.shrinkBuf(w.output,w.next_out))):this.onData(i.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&x!==1);return b===4?(x=o.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===d):b!==2||(this.onEnd(d),!(w.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=m,s.deflate=y,s.deflateRaw=function(g,v){return(v=v||{}).raw=!0,y(g,v)},s.gzip=function(g,v){return(v=v||{}).gzip=!0,y(g,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var o=n("./zlib/inflate"),i=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/constants"),l=n("./zlib/messages"),c=n("./zlib/zstream"),d=n("./zlib/gzheader"),h=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},m||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||m&&m.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var g=o.inflateInit2(this.strm,y.windowBits);if(g!==u.Z_OK)throw new Error(l[g]);this.header=new d,o.inflateGetHeader(this.strm,this.header)}function p(m,y){var g=new f(y);if(g.push(m,!0),g.err)throw g.msg||l[g.err];return g.result}f.prototype.push=function(m,y){var g,v,x,b,w,k,C=this.strm,$=this.options.chunkSize,E=this.options.dictionary,S=!1;if(this.ended)return!1;v=y===~~y?y:y===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof m=="string"?C.input=a.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?C.input=new Uint8Array(m):C.input=m,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new i.Buf8($),C.next_out=0,C.avail_out=$),(g=o.inflate(C,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&E&&(k=typeof E=="string"?a.string2buf(E):h.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,g=o.inflateSetDictionary(this.strm,k)),g===u.Z_BUF_ERROR&&S===!0&&(g=u.Z_OK,S=!1),g!==u.Z_STREAM_END&&g!==u.Z_OK)return this.onEnd(g),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&g!==u.Z_STREAM_END&&(C.avail_in!==0||v!==u.Z_FINISH&&v!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=a.utf8border(C.output,C.next_out),b=C.next_out-x,w=a.buf2string(C.output,x),C.next_out=b,C.avail_out=$-b,b&&i.arraySet(C.output,C.output,x,b,0),this.onData(w)):this.onData(i.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(S=!0)}while((0<C.avail_in||C.avail_out===0)&&g!==u.Z_STREAM_END);return g===u.Z_STREAM_END&&(v=u.Z_FINISH),v===u.Z_FINISH?(g=o.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===u.Z_OK):v!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(C.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Inflate=f,s.inflate=p,s.inflateRaw=function(m,y){return(y=y||{}).raw=!0,p(m,y)},s.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var c=l.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(u[d]=c[d])}}return u},s.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var i={arraySet:function(u,l,c,d,h){if(l.subarray&&u.subarray)u.set(l.subarray(c,c+d),h);else for(var f=0;f<d;f++)u[h+f]=l[c+f]},flattenChunks:function(u){var l,c,d,h,f,p;for(l=d=0,c=u.length;l<c;l++)d+=u[l].length;for(p=new Uint8Array(d),l=h=0,c=u.length;l<c;l++)f=u[l],p.set(f,h),h+=f.length;return p}},a={arraySet:function(u,l,c,d,h){for(var f=0;f<d;f++)u[h+f]=l[c+f]},flattenChunks:function(u){return[].concat.apply([],u)}};s.setTyped=function(u){u?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,i)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(o)},{}],42:[function(n,r,s){var o=n("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new o.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(d,h));for(var f="",p=0;p<h;p++)f+=String.fromCharCode(d[p]);return f}u[254]=u[254]=1,s.string2buf=function(d){var h,f,p,m,y,g=d.length,v=0;for(m=0;m<g;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<g&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),v+=f<128?1:f<2048?2:f<65536?3:4;for(h=new o.Buf8(v),m=y=0;y<v;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<g&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),f<128?h[y++]=f:(f<2048?h[y++]=192|f>>>6:(f<65536?h[y++]=224|f>>>12:(h[y++]=240|f>>>18,h[y++]=128|f>>>12&63),h[y++]=128|f>>>6&63),h[y++]=128|63&f);return h},s.buf2binstring=function(d){return c(d,d.length)},s.binstring2buf=function(d){for(var h=new o.Buf8(d.length),f=0,p=h.length;f<p;f++)h[f]=d.charCodeAt(f);return h},s.buf2string=function(d,h){var f,p,m,y,g=h||d.length,v=new Array(2*g);for(f=p=0;f<g;)if((m=d[f++])<128)v[p++]=m;else if(4<(y=u[m]))v[p++]=65533,f+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&f<g;)m=m<<6|63&d[f++],y--;1<y?v[p++]=65533:m<65536?v[p++]=m:(m-=65536,v[p++]=55296|m>>10&1023,v[p++]=56320|1023&m)}return c(v,p)},s.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+u[d[f]]>h?f:h}},{"./common":41}],43:[function(n,r,s){r.exports=function(o,i,a,u){for(var l=65535&o|0,c=o>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;c=c+(l=l+i[u++]|0)|0,--d;);l%=65521,c%=65521}return l|c<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var o=function(){for(var i,a=[],u=0;u<256;u++){i=u;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;a[u]=i}return a}();r.exports=function(i,a,u,l){var c=o,d=l+u;i^=-1;for(var h=l;h<d;h++)i=i>>>8^c[255&(i^a[h])];return-1^i}},{}],46:[function(n,r,s){var o,i=n("../utils/common"),a=n("./trees"),u=n("./adler32"),l=n("./crc32"),c=n("./messages"),d=0,h=4,f=0,p=-2,m=-1,y=4,g=2,v=8,x=9,b=286,w=30,k=19,C=2*b+1,$=15,E=3,S=258,R=S+E+1,T=42,P=113,I=1,A=2,L=3,V=4;function z(N,ue){return N.msg=c[ue],ue}function M(N){return(N<<1)-(4<N?9:0)}function _(N){for(var ue=N.length;0<=--ue;)N[ue]=0}function F(N){var ue=N.state,ne=ue.pending;ne>N.avail_out&&(ne=N.avail_out),ne!==0&&(i.arraySet(N.output,ue.pending_buf,ue.pending_out,ne,N.next_out),N.next_out+=ne,ue.pending_out+=ne,N.total_out+=ne,N.avail_out-=ne,ue.pending-=ne,ue.pending===0&&(ue.pending_out=0))}function O(N,ue){a._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,ue),N.block_start=N.strstart,F(N.strm)}function D(N,ue){N.pending_buf[N.pending++]=ue}function j(N,ue){N.pending_buf[N.pending++]=ue>>>8&255,N.pending_buf[N.pending++]=255&ue}function G(N,ue){var ne,W,U=N.max_chain_length,Z=N.strstart,xe=N.prev_length,ce=N.nice_match,ie=N.strstart>N.w_size-R?N.strstart-(N.w_size-R):0,_e=N.window,Oe=N.w_mask,Ee=N.prev,te=N.strstart+S,ge=_e[Z+xe-1],ke=_e[Z+xe];N.prev_length>=N.good_match&&(U>>=2),ce>N.lookahead&&(ce=N.lookahead);do if(_e[(ne=ue)+xe]===ke&&_e[ne+xe-1]===ge&&_e[ne]===_e[Z]&&_e[++ne]===_e[Z+1]){Z+=2,ne++;do;while(_e[++Z]===_e[++ne]&&_e[++Z]===_e[++ne]&&_e[++Z]===_e[++ne]&&_e[++Z]===_e[++ne]&&_e[++Z]===_e[++ne]&&_e[++Z]===_e[++ne]&&_e[++Z]===_e[++ne]&&_e[++Z]===_e[++ne]&&Z<te);if(W=S-(te-Z),Z=te-S,xe<W){if(N.match_start=ue,ce<=(xe=W))break;ge=_e[Z+xe-1],ke=_e[Z+xe]}}while((ue=Ee[ue&Oe])>ie&&--U!=0);return xe<=N.lookahead?xe:N.lookahead}function J(N){var ue,ne,W,U,Z,xe,ce,ie,_e,Oe,Ee=N.w_size;do{if(U=N.window_size-N.lookahead-N.strstart,N.strstart>=Ee+(Ee-R)){for(i.arraySet(N.window,N.window,Ee,Ee,0),N.match_start-=Ee,N.strstart-=Ee,N.block_start-=Ee,ue=ne=N.hash_size;W=N.head[--ue],N.head[ue]=Ee<=W?W-Ee:0,--ne;);for(ue=ne=Ee;W=N.prev[--ue],N.prev[ue]=Ee<=W?W-Ee:0,--ne;);U+=Ee}if(N.strm.avail_in===0)break;if(xe=N.strm,ce=N.window,ie=N.strstart+N.lookahead,_e=U,Oe=void 0,Oe=xe.avail_in,_e<Oe&&(Oe=_e),ne=Oe===0?0:(xe.avail_in-=Oe,i.arraySet(ce,xe.input,xe.next_in,Oe,ie),xe.state.wrap===1?xe.adler=u(xe.adler,ce,Oe,ie):xe.state.wrap===2&&(xe.adler=l(xe.adler,ce,Oe,ie)),xe.next_in+=Oe,xe.total_in+=Oe,Oe),N.lookahead+=ne,N.lookahead+N.insert>=E)for(Z=N.strstart-N.insert,N.ins_h=N.window[Z],N.ins_h=(N.ins_h<<N.hash_shift^N.window[Z+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[Z+E-1])&N.hash_mask,N.prev[Z&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=Z,Z++,N.insert--,!(N.lookahead+N.insert<E)););}while(N.lookahead<R&&N.strm.avail_in!==0)}function me(N,ue){for(var ne,W;;){if(N.lookahead<R){if(J(N),N.lookahead<R&&ue===d)return I;if(N.lookahead===0)break}if(ne=0,N.lookahead>=E&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,ne=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),ne!==0&&N.strstart-ne<=N.w_size-R&&(N.match_length=G(N,ne)),N.match_length>=E)if(W=a._tr_tally(N,N.strstart-N.match_start,N.match_length-E),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=E){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,ne=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else W=a._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(W&&(O(N,!1),N.strm.avail_out===0))return I}return N.insert=N.strstart<E-1?N.strstart:E-1,ue===h?(O(N,!0),N.strm.avail_out===0?L:V):N.last_lit&&(O(N,!1),N.strm.avail_out===0)?I:A}function fe(N,ue){for(var ne,W,U;;){if(N.lookahead<R){if(J(N),N.lookahead<R&&ue===d)return I;if(N.lookahead===0)break}if(ne=0,N.lookahead>=E&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,ne=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=E-1,ne!==0&&N.prev_length<N.max_lazy_match&&N.strstart-ne<=N.w_size-R&&(N.match_length=G(N,ne),N.match_length<=5&&(N.strategy===1||N.match_length===E&&4096<N.strstart-N.match_start)&&(N.match_length=E-1)),N.prev_length>=E&&N.match_length<=N.prev_length){for(U=N.strstart+N.lookahead-E,W=a._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-E),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=U&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+E-1])&N.hash_mask,ne=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=E-1,N.strstart++,W&&(O(N,!1),N.strm.avail_out===0))return I}else if(N.match_available){if((W=a._tr_tally(N,0,N.window[N.strstart-1]))&&O(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return I}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(W=a._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<E-1?N.strstart:E-1,ue===h?(O(N,!0),N.strm.avail_out===0?L:V):N.last_lit&&(O(N,!1),N.strm.avail_out===0)?I:A}function he(N,ue,ne,W,U){this.good_length=N,this.max_lazy=ue,this.nice_length=ne,this.max_chain=W,this.func=U}function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*C),this.dyn_dtree=new i.Buf16(2*(2*w+1)),this.bl_tree=new i.Buf16(2*(2*k+1)),_(this.dyn_ltree),_(this.dyn_dtree),_(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16($+1),this.heap=new i.Buf16(2*b+1),_(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),_(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Re(N){var ue;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=g,(ue=N.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?T:P,N.adler=ue.wrap===2?0:1,ue.last_flush=d,a._tr_init(ue),f):z(N,p)}function Me(N){var ue=Re(N);return ue===f&&function(ne){ne.window_size=2*ne.w_size,_(ne.head),ne.max_lazy_match=o[ne.level].max_lazy,ne.good_match=o[ne.level].good_length,ne.nice_match=o[ne.level].nice_length,ne.max_chain_length=o[ne.level].max_chain,ne.strstart=0,ne.block_start=0,ne.lookahead=0,ne.insert=0,ne.match_length=ne.prev_length=E-1,ne.match_available=0,ne.ins_h=0}(N.state),ue}function Ve(N,ue,ne,W,U,Z){if(!N)return p;var xe=1;if(ue===m&&(ue=6),W<0?(xe=0,W=-W):15<W&&(xe=2,W-=16),U<1||x<U||ne!==v||W<8||15<W||ue<0||9<ue||Z<0||y<Z)return z(N,p);W===8&&(W=9);var ce=new Te;return(N.state=ce).strm=N,ce.wrap=xe,ce.gzhead=null,ce.w_bits=W,ce.w_size=1<<ce.w_bits,ce.w_mask=ce.w_size-1,ce.hash_bits=U+7,ce.hash_size=1<<ce.hash_bits,ce.hash_mask=ce.hash_size-1,ce.hash_shift=~~((ce.hash_bits+E-1)/E),ce.window=new i.Buf8(2*ce.w_size),ce.head=new i.Buf16(ce.hash_size),ce.prev=new i.Buf16(ce.w_size),ce.lit_bufsize=1<<U+6,ce.pending_buf_size=4*ce.lit_bufsize,ce.pending_buf=new i.Buf8(ce.pending_buf_size),ce.d_buf=1*ce.lit_bufsize,ce.l_buf=3*ce.lit_bufsize,ce.level=ue,ce.strategy=Z,ce.method=ne,Me(N)}o=[new he(0,0,0,0,function(N,ue){var ne=65535;for(ne>N.pending_buf_size-5&&(ne=N.pending_buf_size-5);;){if(N.lookahead<=1){if(J(N),N.lookahead===0&&ue===d)return I;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var W=N.block_start+ne;if((N.strstart===0||N.strstart>=W)&&(N.lookahead=N.strstart-W,N.strstart=W,O(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-R&&(O(N,!1),N.strm.avail_out===0))return I}return N.insert=0,ue===h?(O(N,!0),N.strm.avail_out===0?L:V):(N.strstart>N.block_start&&(O(N,!1),N.strm.avail_out),I)}),new he(4,4,8,4,me),new he(4,5,16,8,me),new he(4,6,32,32,me),new he(4,4,16,16,fe),new he(8,16,32,32,fe),new he(8,16,128,128,fe),new he(8,32,128,256,fe),new he(32,128,258,1024,fe),new he(32,258,258,4096,fe)],s.deflateInit=function(N,ue){return Ve(N,ue,v,15,8,0)},s.deflateInit2=Ve,s.deflateReset=Me,s.deflateResetKeep=Re,s.deflateSetHeader=function(N,ue){return N&&N.state?N.state.wrap!==2?p:(N.state.gzhead=ue,f):p},s.deflate=function(N,ue){var ne,W,U,Z;if(!N||!N.state||5<ue||ue<0)return N?z(N,p):p;if(W=N.state,!N.output||!N.input&&N.avail_in!==0||W.status===666&&ue!==h)return z(N,N.avail_out===0?-5:p);if(W.strm=N,ne=W.last_flush,W.last_flush=ue,W.status===T)if(W.wrap===2)N.adler=0,D(W,31),D(W,139),D(W,8),W.gzhead?(D(W,(W.gzhead.text?1:0)+(W.gzhead.hcrc?2:0)+(W.gzhead.extra?4:0)+(W.gzhead.name?8:0)+(W.gzhead.comment?16:0)),D(W,255&W.gzhead.time),D(W,W.gzhead.time>>8&255),D(W,W.gzhead.time>>16&255),D(W,W.gzhead.time>>24&255),D(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),D(W,255&W.gzhead.os),W.gzhead.extra&&W.gzhead.extra.length&&(D(W,255&W.gzhead.extra.length),D(W,W.gzhead.extra.length>>8&255)),W.gzhead.hcrc&&(N.adler=l(N.adler,W.pending_buf,W.pending,0)),W.gzindex=0,W.status=69):(D(W,0),D(W,0),D(W,0),D(W,0),D(W,0),D(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),D(W,3),W.status=P);else{var xe=v+(W.w_bits-8<<4)<<8;xe|=(2<=W.strategy||W.level<2?0:W.level<6?1:W.level===6?2:3)<<6,W.strstart!==0&&(xe|=32),xe+=31-xe%31,W.status=P,j(W,xe),W.strstart!==0&&(j(W,N.adler>>>16),j(W,65535&N.adler)),N.adler=1}if(W.status===69)if(W.gzhead.extra){for(U=W.pending;W.gzindex<(65535&W.gzhead.extra.length)&&(W.pending!==W.pending_buf_size||(W.gzhead.hcrc&&W.pending>U&&(N.adler=l(N.adler,W.pending_buf,W.pending-U,U)),F(N),U=W.pending,W.pending!==W.pending_buf_size));)D(W,255&W.gzhead.extra[W.gzindex]),W.gzindex++;W.gzhead.hcrc&&W.pending>U&&(N.adler=l(N.adler,W.pending_buf,W.pending-U,U)),W.gzindex===W.gzhead.extra.length&&(W.gzindex=0,W.status=73)}else W.status=73;if(W.status===73)if(W.gzhead.name){U=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>U&&(N.adler=l(N.adler,W.pending_buf,W.pending-U,U)),F(N),U=W.pending,W.pending===W.pending_buf_size)){Z=1;break}Z=W.gzindex<W.gzhead.name.length?255&W.gzhead.name.charCodeAt(W.gzindex++):0,D(W,Z)}while(Z!==0);W.gzhead.hcrc&&W.pending>U&&(N.adler=l(N.adler,W.pending_buf,W.pending-U,U)),Z===0&&(W.gzindex=0,W.status=91)}else W.status=91;if(W.status===91)if(W.gzhead.comment){U=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>U&&(N.adler=l(N.adler,W.pending_buf,W.pending-U,U)),F(N),U=W.pending,W.pending===W.pending_buf_size)){Z=1;break}Z=W.gzindex<W.gzhead.comment.length?255&W.gzhead.comment.charCodeAt(W.gzindex++):0,D(W,Z)}while(Z!==0);W.gzhead.hcrc&&W.pending>U&&(N.adler=l(N.adler,W.pending_buf,W.pending-U,U)),Z===0&&(W.status=103)}else W.status=103;if(W.status===103&&(W.gzhead.hcrc?(W.pending+2>W.pending_buf_size&&F(N),W.pending+2<=W.pending_buf_size&&(D(W,255&N.adler),D(W,N.adler>>8&255),N.adler=0,W.status=P)):W.status=P),W.pending!==0){if(F(N),N.avail_out===0)return W.last_flush=-1,f}else if(N.avail_in===0&&M(ue)<=M(ne)&&ue!==h)return z(N,-5);if(W.status===666&&N.avail_in!==0)return z(N,-5);if(N.avail_in!==0||W.lookahead!==0||ue!==d&&W.status!==666){var ce=W.strategy===2?function(ie,_e){for(var Oe;;){if(ie.lookahead===0&&(J(ie),ie.lookahead===0)){if(_e===d)return I;break}if(ie.match_length=0,Oe=a._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,Oe&&(O(ie,!1),ie.strm.avail_out===0))return I}return ie.insert=0,_e===h?(O(ie,!0),ie.strm.avail_out===0?L:V):ie.last_lit&&(O(ie,!1),ie.strm.avail_out===0)?I:A}(W,ue):W.strategy===3?function(ie,_e){for(var Oe,Ee,te,ge,ke=ie.window;;){if(ie.lookahead<=S){if(J(ie),ie.lookahead<=S&&_e===d)return I;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=E&&0<ie.strstart&&(Ee=ke[te=ie.strstart-1])===ke[++te]&&Ee===ke[++te]&&Ee===ke[++te]){ge=ie.strstart+S;do;while(Ee===ke[++te]&&Ee===ke[++te]&&Ee===ke[++te]&&Ee===ke[++te]&&Ee===ke[++te]&&Ee===ke[++te]&&Ee===ke[++te]&&Ee===ke[++te]&&te<ge);ie.match_length=S-(ge-te),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=E?(Oe=a._tr_tally(ie,1,ie.match_length-E),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(Oe=a._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),Oe&&(O(ie,!1),ie.strm.avail_out===0))return I}return ie.insert=0,_e===h?(O(ie,!0),ie.strm.avail_out===0?L:V):ie.last_lit&&(O(ie,!1),ie.strm.avail_out===0)?I:A}(W,ue):o[W.level].func(W,ue);if(ce!==L&&ce!==V||(W.status=666),ce===I||ce===L)return N.avail_out===0&&(W.last_flush=-1),f;if(ce===A&&(ue===1?a._tr_align(W):ue!==5&&(a._tr_stored_block(W,0,0,!1),ue===3&&(_(W.head),W.lookahead===0&&(W.strstart=0,W.block_start=0,W.insert=0))),F(N),N.avail_out===0))return W.last_flush=-1,f}return ue!==h?f:W.wrap<=0?1:(W.wrap===2?(D(W,255&N.adler),D(W,N.adler>>8&255),D(W,N.adler>>16&255),D(W,N.adler>>24&255),D(W,255&N.total_in),D(W,N.total_in>>8&255),D(W,N.total_in>>16&255),D(W,N.total_in>>24&255)):(j(W,N.adler>>>16),j(W,65535&N.adler)),F(N),0<W.wrap&&(W.wrap=-W.wrap),W.pending!==0?f:1)},s.deflateEnd=function(N){var ue;return N&&N.state?(ue=N.state.status)!==T&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==P&&ue!==666?z(N,p):(N.state=null,ue===P?z(N,-3):f):p},s.deflateSetDictionary=function(N,ue){var ne,W,U,Z,xe,ce,ie,_e,Oe=ue.length;if(!N||!N.state||(Z=(ne=N.state).wrap)===2||Z===1&&ne.status!==T||ne.lookahead)return p;for(Z===1&&(N.adler=u(N.adler,ue,Oe,0)),ne.wrap=0,Oe>=ne.w_size&&(Z===0&&(_(ne.head),ne.strstart=0,ne.block_start=0,ne.insert=0),_e=new i.Buf8(ne.w_size),i.arraySet(_e,ue,Oe-ne.w_size,ne.w_size,0),ue=_e,Oe=ne.w_size),xe=N.avail_in,ce=N.next_in,ie=N.input,N.avail_in=Oe,N.next_in=0,N.input=ue,J(ne);ne.lookahead>=E;){for(W=ne.strstart,U=ne.lookahead-(E-1);ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[W+E-1])&ne.hash_mask,ne.prev[W&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=W,W++,--U;);ne.strstart=W,ne.lookahead=E-1,J(ne)}return ne.strstart+=ne.lookahead,ne.block_start=ne.strstart,ne.insert=ne.lookahead,ne.lookahead=0,ne.match_length=ne.prev_length=E-1,ne.match_available=0,N.next_in=ce,N.input=ie,N.avail_in=xe,ne.wrap=Z,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(o,i){var a,u,l,c,d,h,f,p,m,y,g,v,x,b,w,k,C,$,E,S,R,T,P,I,A;a=o.state,u=o.next_in,I=o.input,l=u+(o.avail_in-5),c=o.next_out,A=o.output,d=c-(i-o.avail_out),h=c+(o.avail_out-257),f=a.dmax,p=a.wsize,m=a.whave,y=a.wnext,g=a.window,v=a.hold,x=a.bits,b=a.lencode,w=a.distcode,k=(1<<a.lenbits)-1,C=(1<<a.distbits)-1;e:do{x<15&&(v+=I[u++]<<x,x+=8,v+=I[u++]<<x,x+=8),$=b[v&k];t:for(;;){if(v>>>=E=$>>>24,x-=E,(E=$>>>16&255)===0)A[c++]=65535&$;else{if(!(16&E)){if(!(64&E)){$=b[(65535&$)+(v&(1<<E)-1)];continue t}if(32&E){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}S=65535&$,(E&=15)&&(x<E&&(v+=I[u++]<<x,x+=8),S+=v&(1<<E)-1,v>>>=E,x-=E),x<15&&(v+=I[u++]<<x,x+=8,v+=I[u++]<<x,x+=8),$=w[v&C];n:for(;;){if(v>>>=E=$>>>24,x-=E,!(16&(E=$>>>16&255))){if(!(64&E)){$=w[(65535&$)+(v&(1<<E)-1)];continue n}o.msg="invalid distance code",a.mode=30;break e}if(R=65535&$,x<(E&=15)&&(v+=I[u++]<<x,(x+=8)<E&&(v+=I[u++]<<x,x+=8)),f<(R+=v&(1<<E)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=E,x-=E,(E=c-d)<R){if(m<(E=R-E)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(P=g,(T=0)===y){if(T+=p-E,E<S){for(S-=E;A[c++]=g[T++],--E;);T=c-R,P=A}}else if(y<E){if(T+=p+y-E,(E-=y)<S){for(S-=E;A[c++]=g[T++],--E;);if(T=0,y<S){for(S-=E=y;A[c++]=g[T++],--E;);T=c-R,P=A}}}else if(T+=y-E,E<S){for(S-=E;A[c++]=g[T++],--E;);T=c-R,P=A}for(;2<S;)A[c++]=P[T++],A[c++]=P[T++],A[c++]=P[T++],S-=3;S&&(A[c++]=P[T++],1<S&&(A[c++]=P[T++]))}else{for(T=c-R;A[c++]=A[T++],A[c++]=A[T++],A[c++]=A[T++],2<(S-=3););S&&(A[c++]=A[T++],1<S&&(A[c++]=A[T++]))}break}}break}}while(u<l&&c<h);u-=S=x>>3,v&=(1<<(x-=S<<3))-1,o.next_in=u,o.next_out=c,o.avail_in=u<l?l-u+5:5-(u-l),o.avail_out=c<h?h-c+257:257-(c-h),a.hold=v,a.bits=x}},{}],49:[function(n,r,s){var o=n("../utils/common"),i=n("./adler32"),a=n("./crc32"),u=n("./inffast"),l=n("./inftrees"),c=1,d=2,h=0,f=-2,p=1,m=852,y=592;function g(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(T){var P;return T&&T.state?(P=T.state,T.total_in=T.total_out=P.total=0,T.msg="",P.wrap&&(T.adler=1&P.wrap),P.mode=p,P.last=0,P.havedict=0,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new o.Buf32(m),P.distcode=P.distdyn=new o.Buf32(y),P.sane=1,P.back=-1,h):f}function b(T){var P;return T&&T.state?((P=T.state).wsize=0,P.whave=0,P.wnext=0,x(T)):f}function w(T,P){var I,A;return T&&T.state?(A=T.state,P<0?(I=0,P=-P):(I=1+(P>>4),P<48&&(P&=15)),P&&(P<8||15<P)?f:(A.window!==null&&A.wbits!==P&&(A.window=null),A.wrap=I,A.wbits=P,b(T))):f}function k(T,P){var I,A;return T?(A=new v,(T.state=A).window=null,(I=w(T,P))!==h&&(T.state=null),I):f}var C,$,E=!0;function S(T){if(E){var P;for(C=new o.Buf32(512),$=new o.Buf32(32),P=0;P<144;)T.lens[P++]=8;for(;P<256;)T.lens[P++]=9;for(;P<280;)T.lens[P++]=7;for(;P<288;)T.lens[P++]=8;for(l(c,T.lens,0,288,C,0,T.work,{bits:9}),P=0;P<32;)T.lens[P++]=5;l(d,T.lens,0,32,$,0,T.work,{bits:5}),E=!1}T.lencode=C,T.lenbits=9,T.distcode=$,T.distbits=5}function R(T,P,I,A){var L,V=T.state;return V.window===null&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new o.Buf8(V.wsize)),A>=V.wsize?(o.arraySet(V.window,P,I-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(A<(L=V.wsize-V.wnext)&&(L=A),o.arraySet(V.window,P,I-A,L,V.wnext),(A-=L)?(o.arraySet(V.window,P,I-A,A,0),V.wnext=A,V.whave=V.wsize):(V.wnext+=L,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=L))),0}s.inflateReset=b,s.inflateReset2=w,s.inflateResetKeep=x,s.inflateInit=function(T){return k(T,15)},s.inflateInit2=k,s.inflate=function(T,P){var I,A,L,V,z,M,_,F,O,D,j,G,J,me,fe,he,Te,Re,Me,Ve,N,ue,ne,W,U=0,Z=new o.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return f;(I=T.state).mode===12&&(I.mode=13),z=T.next_out,L=T.output,_=T.avail_out,V=T.next_in,A=T.input,M=T.avail_in,F=I.hold,O=I.bits,D=M,j=_,ue=h;e:for(;;)switch(I.mode){case p:if(I.wrap===0){I.mode=13;break}for(;O<16;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(2&I.wrap&&F===35615){Z[I.check=0]=255&F,Z[1]=F>>>8&255,I.check=a(I.check,Z,2,0),O=F=0,I.mode=2;break}if(I.flags=0,I.head&&(I.head.done=!1),!(1&I.wrap)||(((255&F)<<8)+(F>>8))%31){T.msg="incorrect header check",I.mode=30;break}if((15&F)!=8){T.msg="unknown compression method",I.mode=30;break}if(O-=4,N=8+(15&(F>>>=4)),I.wbits===0)I.wbits=N;else if(N>I.wbits){T.msg="invalid window size",I.mode=30;break}I.dmax=1<<N,T.adler=I.check=1,I.mode=512&F?10:12,O=F=0;break;case 2:for(;O<16;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(I.flags=F,(255&I.flags)!=8){T.msg="unknown compression method",I.mode=30;break}if(57344&I.flags){T.msg="unknown header flags set",I.mode=30;break}I.head&&(I.head.text=F>>8&1),512&I.flags&&(Z[0]=255&F,Z[1]=F>>>8&255,I.check=a(I.check,Z,2,0)),O=F=0,I.mode=3;case 3:for(;O<32;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}I.head&&(I.head.time=F),512&I.flags&&(Z[0]=255&F,Z[1]=F>>>8&255,Z[2]=F>>>16&255,Z[3]=F>>>24&255,I.check=a(I.check,Z,4,0)),O=F=0,I.mode=4;case 4:for(;O<16;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}I.head&&(I.head.xflags=255&F,I.head.os=F>>8),512&I.flags&&(Z[0]=255&F,Z[1]=F>>>8&255,I.check=a(I.check,Z,2,0)),O=F=0,I.mode=5;case 5:if(1024&I.flags){for(;O<16;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}I.length=F,I.head&&(I.head.extra_len=F),512&I.flags&&(Z[0]=255&F,Z[1]=F>>>8&255,I.check=a(I.check,Z,2,0)),O=F=0}else I.head&&(I.head.extra=null);I.mode=6;case 6:if(1024&I.flags&&(M<(G=I.length)&&(G=M),G&&(I.head&&(N=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),o.arraySet(I.head.extra,A,V,G,N)),512&I.flags&&(I.check=a(I.check,A,G,V)),M-=G,V+=G,I.length-=G),I.length))break e;I.length=0,I.mode=7;case 7:if(2048&I.flags){if(M===0)break e;for(G=0;N=A[V+G++],I.head&&N&&I.length<65536&&(I.head.name+=String.fromCharCode(N)),N&&G<M;);if(512&I.flags&&(I.check=a(I.check,A,G,V)),M-=G,V+=G,N)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=8;case 8:if(4096&I.flags){if(M===0)break e;for(G=0;N=A[V+G++],I.head&&N&&I.length<65536&&(I.head.comment+=String.fromCharCode(N)),N&&G<M;);if(512&I.flags&&(I.check=a(I.check,A,G,V)),M-=G,V+=G,N)break e}else I.head&&(I.head.comment=null);I.mode=9;case 9:if(512&I.flags){for(;O<16;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(F!==(65535&I.check)){T.msg="header crc mismatch",I.mode=30;break}O=F=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),T.adler=I.check=0,I.mode=12;break;case 10:for(;O<32;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}T.adler=I.check=g(F),O=F=0,I.mode=11;case 11:if(I.havedict===0)return T.next_out=z,T.avail_out=_,T.next_in=V,T.avail_in=M,I.hold=F,I.bits=O,2;T.adler=I.check=1,I.mode=12;case 12:if(P===5||P===6)break e;case 13:if(I.last){F>>>=7&O,O-=7&O,I.mode=27;break}for(;O<3;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}switch(I.last=1&F,O-=1,3&(F>>>=1)){case 0:I.mode=14;break;case 1:if(S(I),I.mode=20,P!==6)break;F>>>=2,O-=2;break e;case 2:I.mode=17;break;case 3:T.msg="invalid block type",I.mode=30}F>>>=2,O-=2;break;case 14:for(F>>>=7&O,O-=7&O;O<32;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if((65535&F)!=(F>>>16^65535)){T.msg="invalid stored block lengths",I.mode=30;break}if(I.length=65535&F,O=F=0,I.mode=15,P===6)break e;case 15:I.mode=16;case 16:if(G=I.length){if(M<G&&(G=M),_<G&&(G=_),G===0)break e;o.arraySet(L,A,V,G,z),M-=G,V+=G,_-=G,z+=G,I.length-=G;break}I.mode=12;break;case 17:for(;O<14;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(I.nlen=257+(31&F),F>>>=5,O-=5,I.ndist=1+(31&F),F>>>=5,O-=5,I.ncode=4+(15&F),F>>>=4,O-=4,286<I.nlen||30<I.ndist){T.msg="too many length or distance symbols",I.mode=30;break}I.have=0,I.mode=18;case 18:for(;I.have<I.ncode;){for(;O<3;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}I.lens[xe[I.have++]]=7&F,F>>>=3,O-=3}for(;I.have<19;)I.lens[xe[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,ne={bits:I.lenbits},ue=l(0,I.lens,0,19,I.lencode,0,I.work,ne),I.lenbits=ne.bits,ue){T.msg="invalid code lengths set",I.mode=30;break}I.have=0,I.mode=19;case 19:for(;I.have<I.nlen+I.ndist;){for(;he=(U=I.lencode[F&(1<<I.lenbits)-1])>>>16&255,Te=65535&U,!((fe=U>>>24)<=O);){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(Te<16)F>>>=fe,O-=fe,I.lens[I.have++]=Te;else{if(Te===16){for(W=fe+2;O<W;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(F>>>=fe,O-=fe,I.have===0){T.msg="invalid bit length repeat",I.mode=30;break}N=I.lens[I.have-1],G=3+(3&F),F>>>=2,O-=2}else if(Te===17){for(W=fe+3;O<W;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}O-=fe,N=0,G=3+(7&(F>>>=fe)),F>>>=3,O-=3}else{for(W=fe+7;O<W;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}O-=fe,N=0,G=11+(127&(F>>>=fe)),F>>>=7,O-=7}if(I.have+G>I.nlen+I.ndist){T.msg="invalid bit length repeat",I.mode=30;break}for(;G--;)I.lens[I.have++]=N}}if(I.mode===30)break;if(I.lens[256]===0){T.msg="invalid code -- missing end-of-block",I.mode=30;break}if(I.lenbits=9,ne={bits:I.lenbits},ue=l(c,I.lens,0,I.nlen,I.lencode,0,I.work,ne),I.lenbits=ne.bits,ue){T.msg="invalid literal/lengths set",I.mode=30;break}if(I.distbits=6,I.distcode=I.distdyn,ne={bits:I.distbits},ue=l(d,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,ne),I.distbits=ne.bits,ue){T.msg="invalid distances set",I.mode=30;break}if(I.mode=20,P===6)break e;case 20:I.mode=21;case 21:if(6<=M&&258<=_){T.next_out=z,T.avail_out=_,T.next_in=V,T.avail_in=M,I.hold=F,I.bits=O,u(T,j),z=T.next_out,L=T.output,_=T.avail_out,V=T.next_in,A=T.input,M=T.avail_in,F=I.hold,O=I.bits,I.mode===12&&(I.back=-1);break}for(I.back=0;he=(U=I.lencode[F&(1<<I.lenbits)-1])>>>16&255,Te=65535&U,!((fe=U>>>24)<=O);){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(he&&!(240&he)){for(Re=fe,Me=he,Ve=Te;he=(U=I.lencode[Ve+((F&(1<<Re+Me)-1)>>Re)])>>>16&255,Te=65535&U,!(Re+(fe=U>>>24)<=O);){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}F>>>=Re,O-=Re,I.back+=Re}if(F>>>=fe,O-=fe,I.back+=fe,I.length=Te,he===0){I.mode=26;break}if(32&he){I.back=-1,I.mode=12;break}if(64&he){T.msg="invalid literal/length code",I.mode=30;break}I.extra=15&he,I.mode=22;case 22:if(I.extra){for(W=I.extra;O<W;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}I.length+=F&(1<<I.extra)-1,F>>>=I.extra,O-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=23;case 23:for(;he=(U=I.distcode[F&(1<<I.distbits)-1])>>>16&255,Te=65535&U,!((fe=U>>>24)<=O);){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(!(240&he)){for(Re=fe,Me=he,Ve=Te;he=(U=I.distcode[Ve+((F&(1<<Re+Me)-1)>>Re)])>>>16&255,Te=65535&U,!(Re+(fe=U>>>24)<=O);){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}F>>>=Re,O-=Re,I.back+=Re}if(F>>>=fe,O-=fe,I.back+=fe,64&he){T.msg="invalid distance code",I.mode=30;break}I.offset=Te,I.extra=15&he,I.mode=24;case 24:if(I.extra){for(W=I.extra;O<W;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}I.offset+=F&(1<<I.extra)-1,F>>>=I.extra,O-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){T.msg="invalid distance too far back",I.mode=30;break}I.mode=25;case 25:if(_===0)break e;if(G=j-_,I.offset>G){if((G=I.offset-G)>I.whave&&I.sane){T.msg="invalid distance too far back",I.mode=30;break}J=G>I.wnext?(G-=I.wnext,I.wsize-G):I.wnext-G,G>I.length&&(G=I.length),me=I.window}else me=L,J=z-I.offset,G=I.length;for(_<G&&(G=_),_-=G,I.length-=G;L[z++]=me[J++],--G;);I.length===0&&(I.mode=21);break;case 26:if(_===0)break e;L[z++]=I.length,_--,I.mode=21;break;case 27:if(I.wrap){for(;O<32;){if(M===0)break e;M--,F|=A[V++]<<O,O+=8}if(j-=_,T.total_out+=j,I.total+=j,j&&(T.adler=I.check=I.flags?a(I.check,L,j,z-j):i(I.check,L,j,z-j)),j=_,(I.flags?F:g(F))!==I.check){T.msg="incorrect data check",I.mode=30;break}O=F=0}I.mode=28;case 28:if(I.wrap&&I.flags){for(;O<32;){if(M===0)break e;M--,F+=A[V++]<<O,O+=8}if(F!==(4294967295&I.total)){T.msg="incorrect length check",I.mode=30;break}O=F=0}I.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return f}return T.next_out=z,T.avail_out=_,T.next_in=V,T.avail_in=M,I.hold=F,I.bits=O,(I.wsize||j!==T.avail_out&&I.mode<30&&(I.mode<27||P!==4))&&R(T,T.output,T.next_out,j-T.avail_out)?(I.mode=31,-4):(D-=T.avail_in,j-=T.avail_out,T.total_in+=D,T.total_out+=j,I.total+=j,I.wrap&&j&&(T.adler=I.check=I.flags?a(I.check,L,j,T.next_out-j):i(I.check,L,j,T.next_out-j)),T.data_type=I.bits+(I.last?64:0)+(I.mode===12?128:0)+(I.mode===20||I.mode===15?256:0),(D==0&&j===0||P===4)&&ue===h&&(ue=-5),ue)},s.inflateEnd=function(T){if(!T||!T.state)return f;var P=T.state;return P.window&&(P.window=null),T.state=null,h},s.inflateGetHeader=function(T,P){var I;return T&&T.state&&2&(I=T.state).wrap?((I.head=P).done=!1,h):f},s.inflateSetDictionary=function(T,P){var I,A=P.length;return T&&T.state?(I=T.state).wrap!==0&&I.mode!==11?f:I.mode===11&&i(1,P,A,0)!==I.check?-3:R(T,P,A,A)?(I.mode=31,-4):(I.havedict=1,h):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var o=n("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,d,h,f,p,m,y,g){var v,x,b,w,k,C,$,E,S,R=g.bits,T=0,P=0,I=0,A=0,L=0,V=0,z=0,M=0,_=0,F=0,O=null,D=0,j=new o.Buf16(16),G=new o.Buf16(16),J=null,me=0;for(T=0;T<=15;T++)j[T]=0;for(P=0;P<f;P++)j[d[h+P]]++;for(L=R,A=15;1<=A&&j[A]===0;A--);if(A<L&&(L=A),A===0)return p[m++]=20971520,p[m++]=20971520,g.bits=1,0;for(I=1;I<A&&j[I]===0;I++);for(L<I&&(L=I),T=M=1;T<=15;T++)if(M<<=1,(M-=j[T])<0)return-1;if(0<M&&(c===0||A!==1))return-1;for(G[1]=0,T=1;T<15;T++)G[T+1]=G[T]+j[T];for(P=0;P<f;P++)d[h+P]!==0&&(y[G[d[h+P]]++]=P);if(C=c===0?(O=J=y,19):c===1?(O=i,D-=257,J=a,me-=257,256):(O=u,J=l,-1),T=I,k=m,z=P=F=0,b=-1,w=(_=1<<(V=L))-1,c===1&&852<_||c===2&&592<_)return 1;for(;;){for($=T-z,S=y[P]<C?(E=0,y[P]):y[P]>C?(E=J[me+y[P]],O[D+y[P]]):(E=96,0),v=1<<T-z,I=x=1<<V;p[k+(F>>z)+(x-=v)]=$<<24|E<<16|S|0,x!==0;);for(v=1<<T-1;F&v;)v>>=1;if(v!==0?(F&=v-1,F+=v):F=0,P++,--j[T]==0){if(T===A)break;T=d[h+y[P]]}if(L<T&&(F&w)!==b){for(z===0&&(z=L),k+=I,M=1<<(V=T-z);V+z<A&&!((M-=j[V+z])<=0);)V++,M<<=1;if(_+=1<<V,c===1&&852<_||c===2&&592<_)return 1;p[b=F&w]=L<<24|V<<16|k-m|0}}return F!==0&&(p[k+F]=T-z<<24|64<<16|0),g.bits=L,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var o=n("../utils/common"),i=0,a=1;function u(U){for(var Z=U.length;0<=--Z;)U[Z]=0}var l=0,c=29,d=256,h=d+1+c,f=30,p=19,m=2*h+1,y=15,g=16,v=7,x=256,b=16,w=17,k=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=new Array(2*(h+2));u(R);var T=new Array(2*f);u(T);var P=new Array(512);u(P);var I=new Array(256);u(I);var A=new Array(c);u(A);var L,V,z,M=new Array(f);function _(U,Z,xe,ce,ie){this.static_tree=U,this.extra_bits=Z,this.extra_base=xe,this.elems=ce,this.max_length=ie,this.has_stree=U&&U.length}function F(U,Z){this.dyn_tree=U,this.max_code=0,this.stat_desc=Z}function O(U){return U<256?P[U]:P[256+(U>>>7)]}function D(U,Z){U.pending_buf[U.pending++]=255&Z,U.pending_buf[U.pending++]=Z>>>8&255}function j(U,Z,xe){U.bi_valid>g-xe?(U.bi_buf|=Z<<U.bi_valid&65535,D(U,U.bi_buf),U.bi_buf=Z>>g-U.bi_valid,U.bi_valid+=xe-g):(U.bi_buf|=Z<<U.bi_valid&65535,U.bi_valid+=xe)}function G(U,Z,xe){j(U,xe[2*Z],xe[2*Z+1])}function J(U,Z){for(var xe=0;xe|=1&U,U>>>=1,xe<<=1,0<--Z;);return xe>>>1}function me(U,Z,xe){var ce,ie,_e=new Array(y+1),Oe=0;for(ce=1;ce<=y;ce++)_e[ce]=Oe=Oe+xe[ce-1]<<1;for(ie=0;ie<=Z;ie++){var Ee=U[2*ie+1];Ee!==0&&(U[2*ie]=J(_e[Ee]++,Ee))}}function fe(U){var Z;for(Z=0;Z<h;Z++)U.dyn_ltree[2*Z]=0;for(Z=0;Z<f;Z++)U.dyn_dtree[2*Z]=0;for(Z=0;Z<p;Z++)U.bl_tree[2*Z]=0;U.dyn_ltree[2*x]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function he(U){8<U.bi_valid?D(U,U.bi_buf):0<U.bi_valid&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function Te(U,Z,xe,ce){var ie=2*Z,_e=2*xe;return U[ie]<U[_e]||U[ie]===U[_e]&&ce[Z]<=ce[xe]}function Re(U,Z,xe){for(var ce=U.heap[xe],ie=xe<<1;ie<=U.heap_len&&(ie<U.heap_len&&Te(Z,U.heap[ie+1],U.heap[ie],U.depth)&&ie++,!Te(Z,ce,U.heap[ie],U.depth));)U.heap[xe]=U.heap[ie],xe=ie,ie<<=1;U.heap[xe]=ce}function Me(U,Z,xe){var ce,ie,_e,Oe,Ee=0;if(U.last_lit!==0)for(;ce=U.pending_buf[U.d_buf+2*Ee]<<8|U.pending_buf[U.d_buf+2*Ee+1],ie=U.pending_buf[U.l_buf+Ee],Ee++,ce===0?G(U,ie,Z):(G(U,(_e=I[ie])+d+1,Z),(Oe=C[_e])!==0&&j(U,ie-=A[_e],Oe),G(U,_e=O(--ce),xe),(Oe=$[_e])!==0&&j(U,ce-=M[_e],Oe)),Ee<U.last_lit;);G(U,x,Z)}function Ve(U,Z){var xe,ce,ie,_e=Z.dyn_tree,Oe=Z.stat_desc.static_tree,Ee=Z.stat_desc.has_stree,te=Z.stat_desc.elems,ge=-1;for(U.heap_len=0,U.heap_max=m,xe=0;xe<te;xe++)_e[2*xe]!==0?(U.heap[++U.heap_len]=ge=xe,U.depth[xe]=0):_e[2*xe+1]=0;for(;U.heap_len<2;)_e[2*(ie=U.heap[++U.heap_len]=ge<2?++ge:0)]=1,U.depth[ie]=0,U.opt_len--,Ee&&(U.static_len-=Oe[2*ie+1]);for(Z.max_code=ge,xe=U.heap_len>>1;1<=xe;xe--)Re(U,_e,xe);for(ie=te;xe=U.heap[1],U.heap[1]=U.heap[U.heap_len--],Re(U,_e,1),ce=U.heap[1],U.heap[--U.heap_max]=xe,U.heap[--U.heap_max]=ce,_e[2*ie]=_e[2*xe]+_e[2*ce],U.depth[ie]=(U.depth[xe]>=U.depth[ce]?U.depth[xe]:U.depth[ce])+1,_e[2*xe+1]=_e[2*ce+1]=ie,U.heap[1]=ie++,Re(U,_e,1),2<=U.heap_len;);U.heap[--U.heap_max]=U.heap[1],function(ke,Ue){var ot,lt,Mt,ft,Lr,ae,Y=Ue.dyn_tree,Ce=Ue.max_code,Pe=Ue.stat_desc.static_tree,ze=Ue.stat_desc.has_stree,Ge=Ue.stat_desc.extra_bits,nt=Ue.stat_desc.extra_base,Je=Ue.stat_desc.max_length,et=0;for(ft=0;ft<=y;ft++)ke.bl_count[ft]=0;for(Y[2*ke.heap[ke.heap_max]+1]=0,ot=ke.heap_max+1;ot<m;ot++)Je<(ft=Y[2*Y[2*(lt=ke.heap[ot])+1]+1]+1)&&(ft=Je,et++),Y[2*lt+1]=ft,Ce<lt||(ke.bl_count[ft]++,Lr=0,nt<=lt&&(Lr=Ge[lt-nt]),ae=Y[2*lt],ke.opt_len+=ae*(ft+Lr),ze&&(ke.static_len+=ae*(Pe[2*lt+1]+Lr)));if(et!==0){do{for(ft=Je-1;ke.bl_count[ft]===0;)ft--;ke.bl_count[ft]--,ke.bl_count[ft+1]+=2,ke.bl_count[Je]--,et-=2}while(0<et);for(ft=Je;ft!==0;ft--)for(lt=ke.bl_count[ft];lt!==0;)Ce<(Mt=ke.heap[--ot])||(Y[2*Mt+1]!==ft&&(ke.opt_len+=(ft-Y[2*Mt+1])*Y[2*Mt],Y[2*Mt+1]=ft),lt--)}}(U,Z),me(_e,ge,U.bl_count)}function N(U,Z,xe){var ce,ie,_e=-1,Oe=Z[1],Ee=0,te=7,ge=4;for(Oe===0&&(te=138,ge=3),Z[2*(xe+1)+1]=65535,ce=0;ce<=xe;ce++)ie=Oe,Oe=Z[2*(ce+1)+1],++Ee<te&&ie===Oe||(Ee<ge?U.bl_tree[2*ie]+=Ee:ie!==0?(ie!==_e&&U.bl_tree[2*ie]++,U.bl_tree[2*b]++):Ee<=10?U.bl_tree[2*w]++:U.bl_tree[2*k]++,_e=ie,ge=(Ee=0)===Oe?(te=138,3):ie===Oe?(te=6,3):(te=7,4))}function ue(U,Z,xe){var ce,ie,_e=-1,Oe=Z[1],Ee=0,te=7,ge=4;for(Oe===0&&(te=138,ge=3),ce=0;ce<=xe;ce++)if(ie=Oe,Oe=Z[2*(ce+1)+1],!(++Ee<te&&ie===Oe)){if(Ee<ge)for(;G(U,ie,U.bl_tree),--Ee!=0;);else ie!==0?(ie!==_e&&(G(U,ie,U.bl_tree),Ee--),G(U,b,U.bl_tree),j(U,Ee-3,2)):Ee<=10?(G(U,w,U.bl_tree),j(U,Ee-3,3)):(G(U,k,U.bl_tree),j(U,Ee-11,7));_e=ie,ge=(Ee=0)===Oe?(te=138,3):ie===Oe?(te=6,3):(te=7,4)}}u(M);var ne=!1;function W(U,Z,xe,ce){j(U,(l<<1)+(ce?1:0),3),function(ie,_e,Oe,Ee){he(ie),D(ie,Oe),D(ie,~Oe),o.arraySet(ie.pending_buf,ie.window,_e,Oe,ie.pending),ie.pending+=Oe}(U,Z,xe)}s._tr_init=function(U){ne||(function(){var Z,xe,ce,ie,_e,Oe=new Array(y+1);for(ie=ce=0;ie<c-1;ie++)for(A[ie]=ce,Z=0;Z<1<<C[ie];Z++)I[ce++]=ie;for(I[ce-1]=ie,ie=_e=0;ie<16;ie++)for(M[ie]=_e,Z=0;Z<1<<$[ie];Z++)P[_e++]=ie;for(_e>>=7;ie<f;ie++)for(M[ie]=_e<<7,Z=0;Z<1<<$[ie]-7;Z++)P[256+_e++]=ie;for(xe=0;xe<=y;xe++)Oe[xe]=0;for(Z=0;Z<=143;)R[2*Z+1]=8,Z++,Oe[8]++;for(;Z<=255;)R[2*Z+1]=9,Z++,Oe[9]++;for(;Z<=279;)R[2*Z+1]=7,Z++,Oe[7]++;for(;Z<=287;)R[2*Z+1]=8,Z++,Oe[8]++;for(me(R,h+1,Oe),Z=0;Z<f;Z++)T[2*Z+1]=5,T[2*Z]=J(Z,5);L=new _(R,C,d+1,h,y),V=new _(T,$,0,f,y),z=new _(new Array(0),E,0,p,v)}(),ne=!0),U.l_desc=new F(U.dyn_ltree,L),U.d_desc=new F(U.dyn_dtree,V),U.bl_desc=new F(U.bl_tree,z),U.bi_buf=0,U.bi_valid=0,fe(U)},s._tr_stored_block=W,s._tr_flush_block=function(U,Z,xe,ce){var ie,_e,Oe=0;0<U.level?(U.strm.data_type===2&&(U.strm.data_type=function(Ee){var te,ge=4093624447;for(te=0;te<=31;te++,ge>>>=1)if(1&ge&&Ee.dyn_ltree[2*te]!==0)return i;if(Ee.dyn_ltree[18]!==0||Ee.dyn_ltree[20]!==0||Ee.dyn_ltree[26]!==0)return a;for(te=32;te<d;te++)if(Ee.dyn_ltree[2*te]!==0)return a;return i}(U)),Ve(U,U.l_desc),Ve(U,U.d_desc),Oe=function(Ee){var te;for(N(Ee,Ee.dyn_ltree,Ee.l_desc.max_code),N(Ee,Ee.dyn_dtree,Ee.d_desc.max_code),Ve(Ee,Ee.bl_desc),te=p-1;3<=te&&Ee.bl_tree[2*S[te]+1]===0;te--);return Ee.opt_len+=3*(te+1)+5+5+4,te}(U),ie=U.opt_len+3+7>>>3,(_e=U.static_len+3+7>>>3)<=ie&&(ie=_e)):ie=_e=xe+5,xe+4<=ie&&Z!==-1?W(U,Z,xe,ce):U.strategy===4||_e===ie?(j(U,2+(ce?1:0),3),Me(U,R,T)):(j(U,4+(ce?1:0),3),function(Ee,te,ge,ke){var Ue;for(j(Ee,te-257,5),j(Ee,ge-1,5),j(Ee,ke-4,4),Ue=0;Ue<ke;Ue++)j(Ee,Ee.bl_tree[2*S[Ue]+1],3);ue(Ee,Ee.dyn_ltree,te-1),ue(Ee,Ee.dyn_dtree,ge-1)}(U,U.l_desc.max_code+1,U.d_desc.max_code+1,Oe+1),Me(U,U.dyn_ltree,U.dyn_dtree)),fe(U),ce&&he(U)},s._tr_tally=function(U,Z,xe){return U.pending_buf[U.d_buf+2*U.last_lit]=Z>>>8&255,U.pending_buf[U.d_buf+2*U.last_lit+1]=255&Z,U.pending_buf[U.l_buf+U.last_lit]=255&xe,U.last_lit++,Z===0?U.dyn_ltree[2*xe]++:(U.matches++,Z--,U.dyn_ltree[2*(I[xe]+d+1)]++,U.dyn_dtree[2*O(Z)]++),U.last_lit===U.lit_bufsize-1},s._tr_align=function(U){j(U,2,3),G(U,x,R),function(Z){Z.bi_valid===16?(D(Z,Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0):8<=Z.bi_valid&&(Z.pending_buf[Z.pending++]=255&Z.bi_buf,Z.bi_buf>>=8,Z.bi_valid-=8)}(U)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(o){(function(i,a){if(!i.setImmediate){var u,l,c,d,h=1,f={},p=!1,m=i.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(i);y=y&&y.setTimeout?y:i,u={}.toString.call(i.process)==="[object process]"?function(b){process.nextTick(function(){v(b)})}:function(){if(i.postMessage&&!i.importScripts){var b=!0,w=i.onmessage;return i.onmessage=function(){b=!1},i.postMessage("","*"),i.onmessage=w,b}}()?(d="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",x,!1):i.attachEvent("onmessage",x),function(b){i.postMessage(d+b,"*")}):i.MessageChannel?((c=new MessageChannel).port1.onmessage=function(b){v(b.data)},function(b){c.port2.postMessage(b)}):m&&"onreadystatechange"in m.createElement("script")?(l=m.documentElement,function(b){var w=m.createElement("script");w.onreadystatechange=function(){v(b),w.onreadystatechange=null,l.removeChild(w),w=null},l.appendChild(w)}):function(b){setTimeout(v,0,b)},y.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var w=new Array(arguments.length-1),k=0;k<w.length;k++)w[k]=arguments[k+1];var C={callback:b,args:w};return f[h]=C,u(h),h++},y.clearImmediate=g}function g(b){delete f[b]}function v(b){if(p)setTimeout(v,0,b);else{var w=f[b];if(w){p=!0;try{(function(k){var C=k.callback,$=k.args;switch($.length){case 0:C();break;case 1:C($[0]);break;case 2:C($[0],$[1]);break;case 3:C($[0],$[1],$[2]);break;default:C.apply(a,$)}})(w)}finally{g(b),p=!1}}}}function x(b){b.source===i&&typeof b.data=="string"&&b.data.indexOf(d)===0&&v(+b.data.slice(d.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(hW);var LFe=hW.exports;const vO=yz(LFe);class xO{constructor(e){Rl(this,"model"),Rl(this,"metadata"),Rl(this,"encoderLayers"),Rl(this,"decoderLayers"),Rl(this,"trained",!1),Rl(this,"trainingPromise"),Rl(this,"encoder"),e&&this.load(e)}async load(e){const n=await vO.loadAsync(e),r={},s=[];n.forEach((o,i)=>{i.name==="model.json"?s.push(i.async("string").then(a=>{r.model=JSON.parse(a)})):i.name==="weights.bin"&&s.push(i.async("arraybuffer").then(a=>{r.weights=a}))}),await Promise.all(s),r.model&&r.weights&&(this.encoder=await O5({load:async()=>{var o,i;return{modelTopology:(o=r.model)==null?void 0:o.modelTopology,weightData:r.weights,weightSpecs:(i=r.model)==null?void 0:i.weightsManifest[0].weights}}}))}create(e,n=1280,r){const s=nC(),o=(r==null?void 0:r.layers)||[],i=[Rh({units:o.length>0?o[0]:e,inputShape:[n],activation:o.length>0?"relu":(r==null?void 0:r.outputActivation)||"linear",kernelInitializer:"glorotNormal",biasInitializer:"zeros",kernelRegularizer:o.length>0&&!(r!=null&&r.noRegularization)?void 0:PD({l1:(r==null?void 0:r.l1)||.01})}),...o.slice(1).map(l=>Rh({units:l,activation:"relu",kernelInitializer:"glorotNormal",biasInitializer:"zeros"}))];o.length>0&&i.push(Rh({units:e,activation:(r==null?void 0:r.outputActivation)||"linear",kernelInitializer:"glorotNormal",biasInitializer:"zeros",kernelRegularizer:r!=null&&r.noRegularization?void 0:PD({l1:(r==null?void 0:r.l1)||.01})}));const a=[...o.slice().reverse().map(l=>Rh({units:l,activation:"relu",kernelInitializer:"glorotNormal",biasInitializer:"zeros"})),Rh({units:n,activation:"linear",kernelInitializer:"glorotNormal",biasInitializer:"zeros"})];i.forEach(l=>s.add(l)),a.forEach(l=>s.add(l)),s.compile({optimizer:Fl.adam((r==null?void 0:r.learningRate)||.001),loss:(r==null?void 0:r.loss)||"meanSquaredError"}),this.model=s,this.encoderLayers=i,this.decoderLayers=a;const u=nC();this.encoderLayers.forEach(l=>u.add(l)),this.encoder=u}async save(){if(this.encoder){const e=new vO,n=JSON.stringify({});e.file("metadata.json",n);let r=new Blob;return await this.encoder.save({save:async s=>{if(s.weightData instanceof ArrayBuffer&&e.file("weights.bin",s.weightData),s.modelTopology){const o=JSON.stringify({modelTopology:s.modelTopology,weightsManifest:[{paths:["./weights.bin"],weights:s.weightSpecs}]});e.file("model.json",o)}return this.metadata&&e.file("metadata.json",JSON.stringify(this.metadata)),r=await e.generateAsync({type:"blob"}),{modelArtifactsInfo:{dateSaved:new Date,modelTopologyType:"JSON"}}}}),r}else console.warn("No model to save")}async train(e,n=1e3,r){if(this.model)return this.trainingPromise||(this.trainingPromise=new Promise((s,o)=>{if(!this.model){o("no_model");return}const i=vf(e);this.model.fit(i,i,{epochs:n,batchSize:32,shuffle:!0,validationSplit:.1,callbacks:{onEpochEnd:r}}).then(a=>{i.dispose(),this.trained=!0,this.trainingPromise=void 0,s(a)})})),await this.trainingPromise}isTrained(){return this.trained}generate(e){if(!this.encoder)return[];const n=vf(e),r=le(()=>{var s;return(s=this.encoder)==null?void 0:s.predict(n)});return n.dispose(),!Array.isArray(r)&&r?r.arraySync():[]}dispose(){this.model?this.model.dispose():this.encoder&&this.encoder.dispose()}}function FFe(t,e,n){return e.map(r=>n.map(s=>t.getEdgeWeights("coengaged",r,s)[0]||0))}var MFe=Object.defineProperty,zFe=(t,e,n)=>e in t?MFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Al=(t,e,n)=>zFe(t,typeof e!="symbol"?e+"":e,n);function Dl(){return{reactions:0,shares:0,views:0,engagement:0}}let BFe=class{constructor(e,n){Al(this,"graph"),Al(this,"broker"),Al(this,"state",new Zde),Al(this,"topEngagement",0),Al(this,"mobilenet"),Al(this,"encoder"),Al(this,"engageLog",new Map),this.graph=n,this.broker=e,this.broker.on("activity",(r,s,o,i,a)=>this.processActivity(r,s,o,i,a))}processEngagement(e,n,r,s){if(r>0){const o=this.engageLog.get(n)||[];let i=1;for(let a=o.length-1;a>=Math.max(0,o.length-6);--a){if(e!==o[a].id){const u=(o[a].weight+r)/2*i;this.graph.addOrAccumulateEdge("coengaged",e,o[a].id,u,s),this.graph.addOrAccumulateEdge("coengaged",o[a].id,e,u,s)}i*=.9}o.push({id:e,weight:r}),this.engageLog.set(n,o)}}processActivity(e,n,r,s,o){switch(e){case"like":this.addContentReaction(r);break;case"unreact":this.removeContentReaction(r);break;case"share_public":this.addContentShare(r);break;case"engagement":this.addContentEngagement(r,s),this.processEngagement(r,n,s,o);break}}reset(){for(const e of this.state.metaStore)this.graph.removeNode(e[0]);this.state.reset()}async setEncoderModel(e){let n;e instanceof Blob?n=e:n=await(await fetch(e)).blob(),this.encoder=new xO,await this.encoder.load(n)}extractAllLabels(){const e=new Set;this.state.metaStore.forEach(r=>{r.labels.forEach(s=>{s.weight>0&&e.add(s.label)})});const n=Array.from(e);return n.sort(),n}async generateFeatures(e,n){this.mobilenet||(this.mobilenet=new Jg);const r=e.map(l=>{var c;return((c=this.state.dataStore.get(l))==null?void 0:c.normal)||""}),s=e.filter(l=>{var c;return!((c=this.getContentMetadata(l))!=null&&c.authorId)}),o=n!=null&&n.noEngagementFeatures?[]:FFe(this.graph,e,s),i=n!=null&&n.noContentFeatures?[]:await this.mobilenet.generateEmbeddings(r),a=this.extractAllLabels(),u=n!=null&&n.noTagFeatures?[]:e.map(l=>{const c=this.getContentMetadata(l);return a.map(d=>((c==null?void 0:c.labels)||[]).findIndex(h=>h.label===d)>=0?1:0)});return e.map((l,c)=>[...o[c]||[],...i[c]||[],...u[c]||[]])}async generateRawFeatures(e,n,r){if(this.mobilenet||(this.mobilenet=new Jg),!(r!=null&&r.noEngagementFeatures))throw new Error("cannot_use_engagement");const s=r!=null&&r.noContentFeatures?[]:(await this.mobilenet.generateEmbeddings([e]))[0],o=this.extractAllLabels(),i=r!=null&&r.noTagFeatures?[]:o.map(a=>n.findIndex(u=>u===a)>=0?1:0);return[...s,...i]}async createEncoderModel(e){const n=(e==null?void 0:e.epochs)||200,r=Array.from(this.state.dataStore.keys()),s=await this.generateFeatures(r);e!=null&&e.onMobileNetDone&&e.onMobileNetDone();const o=s[0].length;this.encoder=new xO,this.encoder.metadata=e||{},this.encoder.create((e==null?void 0:e.dims)||20,o,e);const i=await this.encoder.train(s,n,(l,c)=>{e!=null&&e.onEpoch&&e.onEpoch(l,(c==null?void 0:c.loss)||0,(c==null?void 0:c.val_loss)||0)});console.log("History",i),e!=null&&e.onTrained&&e.onTrained();const a=this.encoder.generate(s);let u=0;return this.state.dataStore.forEach((l,c)=>{const d=this.state.metaStore.get(c);d&&(d.embedding=mf(a[u])),++u}),e!=null&&e.noSave?void 0:this.encoder.save()}hasEncoder(){return!!this.encoder}getContentData(e,n=!1){const r=this.state.dataStore.get(e);if(!r&&this.state.metaStore.has(e)&&this.broker.emit("contentmissing",e),r)return n&&r.lowRes||r.normal}getContentMetadata(e){return this.state.metaStore.get(e)}hasContent(e){return this.state.metaStore.has(e)}rebuildContent(){this.state.metaStore.forEach(e=>{try{const n=this.graph.addNode("content",`content:${e.id}`,{author:e.author,caption:e.caption});e.labels.forEach(r=>{if(r.weight>0){const s=zo(this.graph,r.label);this.graph.addEdge("topic",n,s,r.weight),this.graph.addEdge("content",s,n,r.weight)}})}catch(n){console.warn(n)}})}async createEmbedding(e){if(!this.encoder)throw new Error("no_autoencoder");if(this.mobilenet||(this.mobilenet=new Jg),!this.encoder.metadata)throw new Error("no_encoder_options");const n=this.encoder.metadata,r=await this.generateFeatures([e],n);return this.encoder.generate(r)[0]}async createIsolatedEmbedding(e,n){if(!this.encoder)throw new Error("no_autoencoder");if(this.mobilenet||(this.mobilenet=new Jg),!this.encoder.metadata)throw new Error("no_encoder_options");const r=this.encoder.metadata,s=await this.generateRawFeatures(e,n,r);return this.encoder.generate([s])[0]}addContentMeta(e){this.state.metaStore.set(`content:${e.id}`,e),e.embedding?e.embedding=mf(e.embedding):console.error("No content embedding");try{const n=this.graph.addNode("content",`content:${e.id}`,{author:e.author,caption:e.caption});e.labels.forEach(r=>{if(r.weight>0){const s=zo(this.graph,r.label);this.graph.addEdge("topic",n,s,r.weight),this.graph.addEdge("content",s,n,r.weight)}}),e.authorId&&(this.graph.addEdge("author",e.authorId,n),this.graph.addEdge("author",n,e.authorId)),this.broker.emit("contentmeta",n),this.broker.emit(`contentmeta-${n}`)}catch(n){console.warn(n)}}addContentData(e,n){const r=`content:${n.id}`;this.state.dataStore.set(r,typeof e=="string"?{normal:e}:e),n.embedding||this.createEmbedding(r).then(s=>{n.embedding=mf(s)}).catch(s=>{console.error(s)}),this.hasContent(r)||this.addContentMeta(n),this.broker.emit("contentupdate",r),this.broker.emit(`contentupdate-${r}`)}addContent(e,n){this.addContentMeta(n),this.addContentData(e,n)}getAllLabels(){const e=new Set;return this.state.metaStore.forEach(n=>{n.labels.forEach(r=>{e.add(r.label)})}),Array.from(e)}addLabel(e,n,r=1){const s=this.getContentMetadata(e);s&&(new Set(s.labels.map(o=>o.label)).has(n)||(s.labels.push({label:n,weight:r}),this.broker.emit("contentmeta",e),this.broker.emit(`contentmeta-${e}`)))}removeLabel(e,n){const r=this.getContentMetadata(e);r&&new Set(r.labels.map(s=>s.label)).has(n)&&(r.labels=r.labels.filter(s=>s.label!==n),this.broker.emit("contentmeta",e),this.broker.emit(`contentmeta-${e}`))}clearLabels(e){const n=this.getContentMetadata(e);n&&(n.labels=[],this.broker.emit("contentmeta",e),this.broker.emit(`contentmeta-${e}`))}updateMeta(e,n){const r=this.getContentMetadata(e);r&&(Object.assign(r,n),this.broker.emit("contentmeta",e),this.broker.emit(`contentmeta-${e}`))}postContent(e,n){if(this.addContent(e,n),n.authorId){const r=`content:${n.id}`;this.broker.emit("posted",r,n.authorId)}}removeContent(e){this.state.dataStore.delete(e),this.state.metaStore.delete(e),this.graph.removeNode(e)}addComment(e,n,r,s){const o=this.state.commentStore.get(e)||[];o.push({userId:n,comment:r,timestamp:s}),o.sort((i,a)=>a.timestamp-i.timestamp),this.state.commentStore.set(e,o),this.broker.emit("contentcomment",e),this.broker.emit(`contentcomment-${e}`)}removeCommentsBy(e){this.state.commentStore.forEach((n,r)=>{this.state.commentStore.set(r,n.filter(s=>s.userId!==e))})}anonComments(){this.state.commentStore.forEach(e=>{e.forEach(n=>{n.comment=xz(n.comment)})})}getComments(e){return this.state.commentStore.get(e)||[]}dumpComments(){const e=[];return this.state.commentStore.forEach((n,r)=>{e.push({content:r,comments:n})}),e}addContentReaction(e){const n=this.state.statsStore.get(e)||Dl();n.reactions+=1,this.state.statsStore.set(e,n),this.broker.emit("contentstats",e),this.broker.emit(`contentstats-${e}`)}addContentEngagement(e,n){const r=this.state.statsStore.get(e)||Dl();r.engagement+=n,this.state.statsStore.set(e,r),this.topEngagement=Math.max(this.topEngagement,r.engagement),this.broker.emit("contentstats",e),this.broker.emit(`contentstats-${e}`)}getMaxContentEngagement(){return this.topEngagement}removeContentReaction(e){const n=this.state.statsStore.get(e)||Dl();n.reactions-=1,this.state.statsStore.set(e,n)}addContentShare(e){const n=this.state.statsStore.get(e)||Dl();n.shares+=1,this.state.statsStore.set(e,n),this.broker.emit("contentstats",e),this.broker.emit(`contentstats-${e}`)}updateContentStats(e){e.forEach(n=>{const r=this.state.statsStore.get(n.id)||Dl();r.reactions=Math.max(r.reactions,n.reactions),this.state.statsStore.set(n.id,n),this.broker.emit("contentstats",n.id),this.broker.emit(`contentstats-${n.id}`)})}getContentStats(e){return Array.isArray(e)?e.map(n=>({id:n,...this.state.statsStore.get(n)||Dl()})):this.state.statsStore.get(e)||Dl()}getContentEngagement(e){var n;return((n=this.getContentStats(e))==null?void 0:n.engagement)||0}getAllContent(){return this.graph.getNodesByType("content")}getSimilarContent(e,n,r){const s=r||this.getAllContent(),o=[];return s.forEach(i=>{const a=this.getContentMetadata(i);if(a&&a.embedding){const u=the(e,a.embedding);o.push({id:i,weight:u})}}),o.sort((i,a)=>a.weight-i.weight),n?o.slice(0,n):o}getEngagedUsers(e,n){return this.graph.getRelated("engaged",e,n?{count:n,timeDecay:.1,period:60*60*1e3}:void 0)}getCoengagedContent(e,n){return this.graph.getRelated("coengaged",e,n?{count:n}:void 0)}},Aw;function Jx(){return Aw||(Aw=new BFe(Md(),kv())),Aw}const ka=60*60*1e3,Ca=.2;function VFe(t,e,n){return{topics:t.getRelated("topic",e,{count:n,period:ka,timeDecay:Ca}).map(r=>({label:Sa(r.id),weight:r.weight})),commentedTopics:t.getRelated("commented_topic",e,{count:n,period:ka,timeDecay:Ca}).map(r=>({label:Sa(r.id),weight:r.weight})),seenTopics:t.getRelated("seen_topic",e,{period:ka,timeDecay:Ca}).map(r=>({label:Sa(r.id),weight:r.weight})),sharedTopics:t.getRelated("shared_topic",e,{count:n,period:ka,timeDecay:Ca}).map(r=>({label:Sa(r.id),weight:r.weight})),followedTopics:t.getRelated("followed_topic",e,{count:n,period:ka,timeDecay:Ca}).map(r=>({label:Sa(r.id),weight:r.weight})),reactedTopics:t.getRelated("reacted_topic",e,{count:n,period:ka,timeDecay:Ca}).map(r=>({label:Sa(r.id),weight:r.weight})),viewedTopics:t.getRelated("viewed_topic",e,{count:n,period:ka,timeDecay:Ca}).map(r=>({label:Sa(r.id),weight:r.weight}))}}function UFe(t,e,n){return{contents:t.getRelated("engaged",e,{count:n,period:ka,timeDecay:Ca})}}function WFe(){return{users:[]}}const jFe=50,GFe=60*60*1e3;function HFe(t,e,n,r){const s=t.getRelated("engaged",n,{count:(r==null?void 0:r.historySize)||jFe,timeDecay:.2,period:(r==null?void 0:r.sessionDuration)||GFe}).filter(a=>a.weight>0),o=s.map(a=>{const u=e.getContentMetadata(a.id);return u?u.embedding||[]:[]}),i=s.map(a=>a.weight);return mf(Jde(o,i))}function KFe(t,e){const n=t.getNodesByType("topic"),r=new Map;return e.forEach(s=>{r.set(`topic:${s.label}`,s.weight)}),n.map(s=>r.get(s)||0)}const bO=10;function qFe(t,e,n,r,s){var o;const i=n,a={topics:VFe(t,i,(s==null?void 0:s.summarySize)||bO),contents:UFe(t,i,(s==null?void 0:s.summarySize)||bO),users:WFe()};let u;(s==null?void 0:s.embeddingType)==="labels"?u=KFe(t,a.topics.topics):u=HFe(t,e,i,s);const l=(o=e.getSimilarContent(u,1,a.contents.contents.map(c=>c.id))[0])==null?void 0:o.id;if(!r)throw console.error("No data for",i),new Error("no_profile_data");return r.affinities=a,r.embeddings.taste=u,r.embeddings.type=(s==null?void 0:s.embeddingType)||"taste",r.image=l,r.engagement=a.contents.contents.reduce((c,d)=>c+d.weight,0),r.lastUpdated=Date.now(),r}function mc(t,e){return{id:t,name:e,engagement:-1,affinities:{topics:{topics:[],seenTopics:[],viewedTopics:[],commentedTopics:[],sharedTopics:[],reactedTopics:[],followedTopics:[]},contents:{contents:[]},users:{users:[]}},featureWeights:{},embeddings:{taste:new Array(20).fill(0),type:"taste"},lastUpdated:Date.now(),followerCount:0,followsCount:0,cold:1}}var XFe=Object.defineProperty,YFe=(t,e,n)=>e in t?XFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZFe=(t,e,n)=>YFe(t,typeof e!="symbol"?e+"":e,n);let QFe=class{constructor(){ZFe(this,"embeddings",new Map)}add(e,n){this.embeddings.set(e,n)}remove(e){this.embeddings.delete(e)}search(e,n){if(e.length===0)return[];const r=[];return this.embeddings.forEach((s,o)=>{if(s===e)return;const i=Cv(s,e);r.push({id:o,weight:i})}),r.sort((s,o)=>o.weight-s.weight),n.count?r.slice(0,n.count):n.maxDistance?r.filter(s=>s.weight<=(n.maxDistance||1)):r}searchById(e,n){const r=this.embeddings.get(e);return r?this.search(r,n):[]}};var JFe=Object.defineProperty,eMe=(t,e,n)=>e in t?JFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ti=(t,e,n)=>eMe(t,typeof e!="symbol"?e+"":e,n);const t0="genai_somekone_userID";let tMe=class{constructor(e,n,r){ti(this,"broker"),ti(this,"graph"),ti(this,"content"),ti(this,"options",{}),ti(this,"userID"),ti(this,"internalProfiles",new Map),ti(this,"outOfDate",new Set),ti(this,"globalStats",{engagement:0}),ti(this,"userIndex",new QFe),ti(this,"coldStartThreshold",10),this.broker=e,this.graph=n,this.content=r;const s=window.sessionStorage.getItem(t0);s&&Kde(s)?(this.userID=s,this.graph.addNode("user",this.userID)):this.getCurrentUser(),this.broker.on("nodetype-user",o=>this.processUserNodeChange(o)),this.broker.on("edgetype-engaged",o=>{const i=o;this.internalProfiles.has(i)&&this.triggerProfileEvent(i)}),this.broker.on("edgetype-topic",o=>{const i=o;this.internalProfiles.has(i)&&this.triggerProfileEvent(i)}),this.broker.on("activity-engagement",(o,i,a,u)=>{this.topicAffinity(o,"engaged_topic",i,a,u),this.contentAffinity(o,i,a,u),this.updateEngagement(o,a)}),this.broker.on("logdata-seen",(o,i)=>this.topicAffinity(o,"seen_topic",i.id||"content:",1,i.timestamp)),this.broker.on("logdata-like",(o,i)=>this.topicAffinity(o,"reacted_topic",i.id||"content:",1,i.timestamp)),this.broker.on("logdata-share_public",(o,i)=>this.topicAffinity(o,"shared_topic",i.id||"content:",1,i.timestamp)),this.broker.on("logdata-follow",(o,i)=>{if(this.topicAffinity(o,"followed_topic",i.id||"content:",1,i.timestamp),i.id){const a=this.content.getContentMetadata(i.id),u=this.getUserData(o);if(u&&(u.followsCount+=1),a!=null&&a.authorId){const l=this.getUserData(a.authorId);l&&(l.followerCount+=1)}}}),this.broker.on("logdata-comment",(o,i)=>this.topicAffinity(o,"commented_topic",i.id||"content:",1,i.timestamp))}topicAffinity(e,n,r,s,o){this.graph.getRelated("topic",r).forEach(i=>{if(i.weight===0)return;const a=this.graph.getEdge(n,e,i.id),u=(a?a.weight:0)+i.weight*s;this.graph.addEdge(n,e,i.id,u,o),n==="engaged_topic"&&(this.graph.addEdge("topic",e,i.id,u,o),this.graph.addEdge("topic",i.id,e,u,o))})}contentAffinity(e,n,r,s){this.graph.addOrAccumulateEdge("engaged",e,n,r,s),this.graph.addOrAccumulateEdge("engaged",n,e,r,s)}updateEngagement(e,n){const r=this.internalProfiles.get(e);r&&(r.engagementTotal+=n,r.seenItems++)}processUserNodeChange(e){const n=this.getUserData(e);if(n){if(!n.embeddings){const i={...mc(e,"NoName"),...n};this.outOfDate.add(e),this.graph.updateNode(e,i);return}const r=this.internalProfiles.has(e),s=this.internalProfiles.get(e)||{id:e,positiveRecommendations:0,negativeRecommendations:0,profile:n,seenItems:0,engagementTotal:0},o=s.profile;s.profile=n,this.internalProfiles.set(e,s),this.indexUser(e),this.globalStats.engagement=Math.max(this.globalStats.engagement,n.engagement||0),(o!==n||!r)&&(this.broker.emit(`profile-${e}`),this.broker.emit("profile",e))}else{const r=mc(e,"NoName");this.outOfDate.add(e),this.graph.updateNode(e,r)}}triggerProfileEvent(e){const n=this.outOfDate.has(e);this.outOfDate.add(e),n||(this.broker.emit(`profile-${e}`),this.broker.emit("profile",e))}setOptions(e){this.options={...e},this.internalProfiles.forEach(n=>{this.outOfDate.add(n.id)})}reset(){this.internalProfiles.clear(),this.outOfDate.clear(),this.userID=void 0}removeProfile(e){this.internalProfiles.delete(e),this.outOfDate.delete(e),this.userIndex.remove(e),this.graph.removeNode(e)}getUserData(e){return this.graph.getNodeData(e)}getUserName(e){const n=this.getUserData(e);return n?n.name:""}setUserName(e,n){if(!this.graph.hasNode(e))this.graph.addNode("user",e,mc(e,n));else{const r=this.getUserData(e);r?r.name=n:this.graph.updateNode(e,mc(e,n))}}setUser(e){this.graph.addNodeIfNotExists("user",e),this.userID=e,window.sessionStorage.setItem(t0,this.userID)}newUser(){this.userID=this.graph.addNode("user"),window.sessionStorage.setItem(t0,this.userID)}getCurrentUser(){return this.userID||(this.userID=this.graph.addNode("user"),window.sessionStorage.setItem(t0,this.userID),this.userID),this.userID}touchProfile(e){this.broker.emit(`profile-${e}`),this.broker.emit("profile",e)}clearProfile(e){this.outOfDate.add(e),this.broker.emit(`profile-${e}`),this.broker.emit("profile",e)}addUserProfile(e,n){const r=this.graph.hasNode(e);if(r&&this.internalProfiles.has(e))throw new Error("user_exists");this.graph.addNodeIfNotExists("user",e,n),r||this.reverseProfile(e,n)}reverseProfile(e,n){this.outOfDate.add(e),this.graph.addNodeIfNotExists("user",e),n.affinities.contents.contents.forEach(r=>{const s=Hde(r.id)?r.id:`content:${r.id}`;this.graph.addEdge("engaged",e,s,r.weight),this.graph.addEdge("engaged",s,e,r.weight)}),n.affinities.topics.topics.forEach(r=>{this.graph.addEdge("topic",e,zo(this.graph,r.label),r.weight),this.graph.addEdge("topic",zo(this.graph,r.label),e,r.weight)}),"engagement"in n&&(this.globalStats.engagement=Math.max(this.globalStats.engagement,n.engagement)),this.outOfDate.delete(e),this.graph.updateNode(e,n)}replaceProfile(e,n){const r=this.internalProfiles.get(e)||{profile:n,id:e,positiveRecommendations:0,negativeRecommendations:0,seenItems:0,engagementTotal:0};r.profile=n,this.internalProfiles.set(e,r),this.outOfDate.delete(e),this.broker.emit(`profile-${e}`),this.broker.emit("profile",e)}createUserProfile(e,n){const r=mc(e,n);return this.addUserProfile(e,r),r}getUserProfile(e){const n=e||this.getCurrentUser(),r=this.internalProfiles.get(n);if(r&&!this.outOfDate.has(n)){const i=r.engagementTotal/this.coldStartThreshold;return r.profile.cold=Math.max(0,1-i*i),r.profile}r||this.graph.updateNode(n,mc(n,"NoName"));const s=qFe(this.graph,this.content,n,this.getUserData(n),this.options),o=r?r.engagementTotal/this.coldStartThreshold:0;return s.cold=Math.max(0,1-o*o),this.graph.touchNode(n),this.outOfDate.delete(n),this.userIndex.add(n,s.embeddings.taste),s}indexUser(e){this.userIndex.add(e,this.getUserProfile(e).embeddings.taste)}getUserContent(e,n){return this.graph.getRelated("author",e,{count:n,weightFn:r=>r.timestamp}).map(r=>r.id)}getSimilarUsers(e,n){return this.outOfDate.size>0&&(this.outOfDate.forEach(r=>{try{this.getUserProfile(r)}catch(s){console.error("Profile error",s)}}),this.outOfDate.clear()),this.userIndex.search(e,{count:n==null?void 0:n.count})}getAllUsers(){return this.graph.getNodesByType("user")}getBestEngagement(){return this.globalStats.engagement}setBestEngagement(e){this.globalStats.engagement=Math.max(this.globalStats.engagement,e)}anonProfiles(){this.internalProfiles.forEach(e=>{e.profile.name=fde()})}getEngagedContent(e,n){return this.graph.getRelated("engaged",e,n?{count:n,timeDecay:.1,period:60*60*1e3}:void 0)}},Dw;function eb(){return Dw||(Dw=new tMe(Md(),kv(),Jx())),Dw}function fW(t,e){const n=new Set,r=[];return t.forEach(s=>{const o=e(s);n.has(o)||(n.add(o),r.push(s))}),r}function pW(t,e,n){const r=fW(t,n);if(r.length<=e)return r;const s=new Set,o=[];for(;o.length<e;){const i=Math.floor(Math.random()*r.length),a=n(r[i]);s.has(a)||(s.add(a),o.push(r[i]))}return o}function hT(t,e){const n=Math.asin(Math.sqrt(t/e/2))*2/Math.PI;return(Math.asin(Math.sqrt((t+1)/e/2))*2/Math.PI-n)*2}function tb(t,e,n){const r=fW(t,n);if(r.length<=e)return r;const s=new Set,o=[];for(;o.length<e;){const i=Math.random(),a=Math.sin(i*Math.PI/2),u=a*a,l=u<.5?2*u:2*(1-u),c=Math.floor(l*r.length),d=n(r[c]);s.has(d)||(s.add(d),o.push(r[c]))}return o}function nMe(t,e,n){const r=t.getNodesByType("content");if(r.length===0)return;const s=Date.now();pW(r,n,o=>o).forEach(o=>{e.push({contentId:o,candidateOrigin:"random",timestamp:s})})}function rMe(t,e){const n=t.getNodesByType("content");return 1-Math.pow(1-1/n.length,e)}const sMe=5;function mW(t,e){const n=t.getSimilarUsers(e.embeddings.taste,{count:sMe}).filter(s=>s.id!==e.id&&s.weight>0);let r=[];return n.forEach(s=>{var o;const i=(((o=t.getUserProfile(s.id))==null?void 0:o.affinities.contents.contents)||[]).map(a=>({id:a.id,weight:a.weight*s.weight,user:s.id,similarityScore:s.weight}));r=[...r,...i]}),r.sort((s,o)=>o.weight-s.weight),r}function oMe(t,e,n,r){const s=mW(t,e);tb(s,r,o=>o.id).forEach(o=>{n.push({contentId:o.id,candidateOrigin:"similar_user",timestamp:Date.now(),similarUser:o.user,userSimilarityScore:o.similarityScore})})}function iMe(t,e,n,r){const s=mW(t,e);return s.map((o,i)=>o.id===r?1-Math.pow(1-hT(i,s.length),n):0).reduce((o,i)=>o+i-o*i,0)}function fT(t,e,n,r){const s=t-e;return s===0?r:Math.floor((n-e)/s*(r-1)+1)}function aMe(t,e,n,r){var s,o;const i=e.affinities.contents.contents,a=((s=i[0])==null?void 0:s.weight)||0,u=((o=i[i.length-1])==null?void 0:o.weight)||0;i.forEach(l=>{const c=fT(a,u,l.weight,r),d=t.getRelated("coengaged",l.id);tb(d,c,h=>h.id).forEach(h=>n.push({contentId:h.id,candidateOrigin:"coengagement",timestamp:Date.now(),engagedItem:l.id,engagedItemScore:l.weight,coengagementScore:h.weight}))})}function lMe(t,e,n,r){const s=e.affinities.contents.contents;let o=0;return s.forEach(i=>{const a=t.getRelated("coengaged",i.id),u=a.findIndex(c=>c.id===r),l=u>=0?1-Math.pow(1-hT(u,a.length),n):0;o=o+l-o*l}),o}function uMe(t,e,n,r){var s,o;const i=e.affinities.topics.topics,a=((s=i[0])==null?void 0:s.weight)||0,u=((o=i[i.length-1])==null?void 0:o.weight)||0;i.forEach(l=>{if(l.weight>0){const c=fT(a,u,l.weight,r),d=t.getRelated("content",zo(t,l.label));pW(d,c,h=>h.id).forEach(h=>n.push({contentId:h.id,candidateOrigin:"topic_affinity",timestamp:Date.now(),topicAffinity:l.weight*h.weight,topic:l.label}))}})}function cMe(t,e,n,r){var s,o;const i=e.affinities.topics.topics,a=((s=i[0])==null?void 0:s.weight)||0,u=((o=i[i.length-1])==null?void 0:o.weight)||0,l=new Set(t.getRelated("topic",r).map(d=>Sa(d.id)));let c=0;return i.forEach(d=>{const h=fT(a,u,d.weight,n),f=t.getRelated("content",zo(t,d.label)),p=l.has(d.label)?1-Math.pow(1-1/f.length,h):0;c=c+p-c*p}),c}function dMe(t,e,n,r){const s=t.getNodesByType("content");if(s.length===0)return;const o=e.getMaxContentEngagement()||1,i=s.map(u=>({id:u,weight:e.getContentStats(u).engagement/o}));i.sort((u,l)=>l.weight-u.weight);const a=Date.now();tb(i,r,u=>u.weight).forEach(u=>{n.push({contentId:u.id,candidateOrigin:"popular",popularityScore:u.weight,timestamp:a})})}function hMe(t,e,n,r){const s=t.getNodesByType("content");if(s.length===0)return 0;const o=e.getMaxContentEngagement()||1,i=s.map(a=>({id:a,weight:e.getContentStats(a).engagement/o}));return i.sort((a,u)=>u.weight-a.weight),i.map((a,u)=>a.id===n?1-Math.pow(1-hT(u,i.length),r):0).reduce((a,u)=>a+u-a*u,0)}function wO(t,e,n,r,s,o){const i=[],a=1/(o.taste+o.coengaged+o.similarUsers+o.popular+o.random);return s*o.taste*a>=1&&uMe(t,r,i,s*o.taste*a),s*o.coengaged*a>=1&&aMe(t,r,i,s*o.coengaged*a),s*o.similarUsers*a>=1&&oMe(n,r,i,s*o.similarUsers*a),s*o.popular*a>=1&&dMe(t,e,i,s*o.popular*a),s*o.random*a>=1&&nMe(t,i,s*o.random*a),i}function fMe(t,e,n,r,s,o,i){const a=1/(o.taste+o.coengaged+o.similarUsers+o.popular+o.random);return[s*o.taste*a>=1?cMe(t,r,s*o.taste*a,i):0,s*o.coengaged*a>=1?lMe(t,r,s*o.coengaged*a,i):0,s*o.random*a>=1?rMe(t,s*o.random*a):0,s*o.similarUsers*a>=1?iMe(n,r,s*o.similarUsers*a,i):0,s*o.popular*a>=1?hMe(t,e,i,s*o.popular*a):0].reduce((u,l)=>u+l-u*l,0)}function pMe(t,e,n,r,s,o){const i=new Map;let a=2;for(;i.size<s&&a-- >0;){const u=wO(t,e,n,r,s,o);for(let l=0;l<u.length;++l)i.has(u[l].contentId)||i.set(u[l].contentId,u[l])}if(i.size<s){const u=wO(t,e,n,r,s,{taste:0,coengaged:0,similarUsers:0,popular:0,random:2});for(let l=0;l<u.length;++l)i.has(u[l].contentId)||i.set(u[l].contentId,u[l])}return Array.from(i).map(u=>u[1])}function mMe(t,e){const n=new Map;return e.affinities.topics.seenTopics.forEach(r=>{n.set(r.label,r.weight)}),{viewing:e.affinities.topics.viewedTopics.map(r=>({id:zo(t,r.label),weight:r.weight/(n.get(r.label)||1)})),commenting:e.affinities.topics.commentedTopics.map(r=>({id:zo(t,r.label),weight:r.weight/(n.get(r.label)||1)})),sharing:e.affinities.topics.sharedTopics.map(r=>({id:zo(t,r.label),weight:r.weight/(n.get(r.label)||1)})),following:e.affinities.topics.followedTopics.map(r=>({id:zo(t,r.label),weight:r.weight/(n.get(r.label)||1)})),reacting:e.affinities.topics.reactedTopics.map(r=>({id:zo(t,r.label),weight:r.weight/(n.get(r.label)||1)}))}}function Ah(t,e){let n=0,r=0;for(let s=0;s<e.length;++s){const o=e[s],i=t.get(o.id);i!==void 0&&(n+=i*o.weight,r+=i)}return r>0?n/r:0}function gMe(t,e,n,r){const s=t.getRelated("topic",n,{count:10}),o=new Map;return s.forEach(i=>{o.set(i.id,i.weight)}),{viewingPreferenceScore:r!=null&&r.noViewingScore?0:Ah(o,e.viewing),commentingPreferenceScore:r!=null&&r.noCommentingScore?0:Ah(o,e.commenting),sharingPreferenceScore:r!=null&&r.noSharingScore?0:Ah(o,e.sharing),reactionPreferenceScore:r!=null&&r.noReactionScore?0:Ah(o,e.reacting),followingPreferenceScore:r!=null&&r.noFollowingScore?0:Ah(o,e.following)}}const SO=.8;function yMe(t,e,n){const r=t.getContentMetadata(n);if(r&&r.embedding&&e.embeddings.taste.length>0){const s=Cv(r.embedding,e.embeddings.taste);return Math.max(0,(s-SO)/(1-SO))}}function vMe(t,e,n){const r=t.getRelated("coengaged",n,{count:30});let s=0;return r.forEach(o=>{const i=t.getEdgeWeights("engaged",e,o.id)[0]||0;s+=i}),Math.min(1,s/4)}function xMe(t,e,n){const r=t.getEdge("seen",e,n);if(r){const s=Date.now()-r.timestamp;return 1-(1-Math.min(1,s/6e5))}return 1}function bMe(t,e,n){const r=t.getEdge("engaged",e,n);if(r){const s=Date.now()-r.timestamp;return 1-(1-Math.min(1,s/12e4))}return 1}function wMe(t,e,n,r,s,o){const i=mMe(t,s);return r.map(a=>{var u;const l=o!=null&&o.noTasteScore?void 0:yMe(e,s,a.contentId),{viewingPreferenceScore:c,commentingPreferenceScore:d,sharingPreferenceScore:h,reactionPreferenceScore:f,followingPreferenceScore:p}=gMe(t,i,a.contentId,o),m=o!=null&&o.noCoengagementScore?void 0:vMe(t,n,a.contentId),y=o!=null&&o.noLastSeenScore?void 0:xMe(t,n,a.contentId),g=bMe(t,n,a.contentId),v=o!=null&&o.noPopularity?0:(((u=e.getContentStats(a.contentId))==null?void 0:u.engagement)||0)/(e.getMaxContentEngagement()||.01);return{taste:l,sharing:h,commenting:d,following:p,reaction:f,viewing:c,random:0,coengagement:m,lastSeen:y,popularity:v,lastEngaged:g}})}var gW={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(jh,function(){var n=function(r,s){var o=Array.prototype.concat,i=Array.prototype.slice,a=Object.prototype.toString;function u(v,x){var b=v>x?v:x;return r.pow(10,17-~~(r.log(b>0?b:-b)*r.LOG10E))}var l=Array.isArray||function(v){return a.call(v)==="[object Array]"};function c(v){return a.call(v)==="[object Function]"}function d(v){return typeof v=="number"?v-v===0:!1}function h(v){return o.apply([],v)}function f(){return new f._init(arguments)}f.fn=f.prototype,f._init=function(v){if(l(v[0]))if(l(v[0][0])){c(v[1])&&(v[0]=f.map(v[0],v[1]));for(var x=0;x<v[0].length;x++)this[x]=v[0][x];this.length=v[0].length}else this[0]=c(v[1])?f.map(v[0],v[1]):v[0],this.length=1;else if(d(v[0]))this[0]=f.seq.apply(null,v),this.length=1;else{if(v[0]instanceof f)return f(v[0].toArray());this[0]=[],this.length=1}return this},f._init.prototype=f.prototype,f._init.constructor=f,f.utils={calcRdx:u,isArray:l,isFunction:c,isNumber:d,toVector:h},f._random_fn=r.random,f.setRandom=function(v){if(typeof v!="function")throw new TypeError("fn is not a function");f._random_fn=v},f.extend=function(v){var x,b;if(arguments.length===1){for(b in v)f[b]=v[b];return this}for(x=1;x<arguments.length;x++)for(b in arguments[x])v[b]=arguments[x][b];return v},f.rows=function(v){return v.length||1},f.cols=function(v){return v[0].length||1},f.dimensions=function(v){return{rows:f.rows(v),cols:f.cols(v)}},f.row=function(v,x){return l(x)?x.map(function(b){return f.row(v,b)}):v[x]},f.rowa=function(v,x){return f.row(v,x)},f.col=function(v,x){if(l(x)){var b=f.arange(v.length).map(function(){return new Array(x.length)});return x.forEach(function(C,$){f.arange(v.length).forEach(function(E){b[E][$]=v[E][C]})}),b}for(var w=new Array(v.length),k=0;k<v.length;k++)w[k]=[v[k][x]];return w},f.cola=function(v,x){return f.col(v,x).map(function(b){return b[0]})},f.diag=function(v){for(var x=f.rows(v),b=new Array(x),w=0;w<x;w++)b[w]=[v[w][w]];return b},f.antidiag=function(v){for(var x=f.rows(v)-1,b=new Array(x),w=0;x>=0;x--,w++)b[w]=[v[w][x]];return b},f.transpose=function(v){var x=[],b,w,k,C,$;for(l(v[0])||(v=[v]),w=v.length,k=v[0].length,$=0;$<k;$++){for(b=new Array(w),C=0;C<w;C++)b[C]=v[C][$];x.push(b)}return x.length===1?x[0]:x},f.map=function(v,x,b){var w,k,C,$,E;for(l(v[0])||(v=[v]),k=v.length,C=v[0].length,$=b?v:new Array(k),w=0;w<k;w++)for($[w]||($[w]=new Array(C)),E=0;E<C;E++)$[w][E]=x(v[w][E],w,E);return $.length===1?$[0]:$},f.cumreduce=function(v,x,b){var w,k,C,$,E;for(l(v[0])||(v=[v]),k=v.length,C=v[0].length,$=b?v:new Array(k),w=0;w<k;w++)for($[w]||($[w]=new Array(C)),C>0&&($[w][0]=v[w][0]),E=1;E<C;E++)$[w][E]=x($[w][E-1],v[w][E]);return $.length===1?$[0]:$},f.alter=function(v,x){return f.map(v,x,!0)},f.create=function(v,x,b){var w=new Array(v),k,C;for(c(x)&&(b=x,x=v),k=0;k<v;k++)for(w[k]=new Array(x),C=0;C<x;C++)w[k][C]=b(k,C);return w};function p(){return 0}f.zeros=function(v,x){return d(x)||(x=v),f.create(v,x,p)};function m(){return 1}f.ones=function(v,x){return d(x)||(x=v),f.create(v,x,m)},f.rand=function(v,x){return d(x)||(x=v),f.create(v,x,f._random_fn)};function y(v,x){return v===x?1:0}f.identity=function(v,x){return d(x)||(x=v),f.create(v,x,y)},f.symmetric=function(v){var x=v.length,b,w;if(v.length!==v[0].length)return!1;for(b=0;b<x;b++)for(w=0;w<x;w++)if(v[w][b]!==v[b][w])return!1;return!0},f.clear=function(v){return f.alter(v,p)},f.seq=function(v,x,b,w){c(w)||(w=!1);var k=[],C=u(v,x),$=(x*C-v*C)/((b-1)*C),E=v,S;for(S=0;E<=x&&S<b;S++,E=(v*C+$*C*S)/C)k.push(w?w(E,S):E);return k},f.arange=function(v,x,b){var w=[],k;if(b=b||1,x===s&&(x=v,v=0),v===x||b===0)return[];if(v<x&&b<0)return[];if(v>x&&b>0)return[];if(b>0)for(k=v;k<x;k+=b)w.push(k);else for(k=v;k>x;k+=b)w.push(k);return w},f.slice=function(){function v(b,w,k,C){var $,E=[],S=b.length;if(w===s&&k===s&&C===s)return f.copy(b);if(w=w||0,k=k||b.length,w=w>=0?w:S+w,k=k>=0?k:S+k,C=C||1,w===k||C===0)return[];if(w<k&&C<0)return[];if(w>k&&C>0)return[];if(C>0)for($=w;$<k;$+=C)E.push(b[$]);else for($=w;$>k;$+=C)E.push(b[$]);return E}function x(b,w){var k,C;if(w=w||{},d(w.row)){if(d(w.col))return b[w.row][w.col];var $=f.rowa(b,w.row);return k=w.col||{},v($,k.start,k.end,k.step)}if(d(w.col)){var E=f.cola(b,w.col);return C=w.row||{},v(E,C.start,C.end,C.step)}C=w.row||{},k=w.col||{};var S=v(b,C.start,C.end,C.step);return S.map(function(R){return v(R,k.start,k.end,k.step)})}return x}(),f.sliceAssign=function(v,x,b){var w,k;if(d(x.row)){if(d(x.col))return v[x.row][x.col]=b;x.col=x.col||{},x.col.start=x.col.start||0,x.col.end=x.col.end||v[0].length,x.col.step=x.col.step||1,w=f.arange(x.col.start,r.min(v.length,x.col.end),x.col.step);var C=x.row;return w.forEach(function(E,S){v[C][E]=b[S]}),v}if(d(x.col)){x.row=x.row||{},x.row.start=x.row.start||0,x.row.end=x.row.end||v.length,x.row.step=x.row.step||1,k=f.arange(x.row.start,r.min(v[0].length,x.row.end),x.row.step);var $=x.col;return k.forEach(function(E,S){v[E][$]=b[S]}),v}return b[0].length===s&&(b=[b]),x.row.start=x.row.start||0,x.row.end=x.row.end||v.length,x.row.step=x.row.step||1,x.col.start=x.col.start||0,x.col.end=x.col.end||v[0].length,x.col.step=x.col.step||1,k=f.arange(x.row.start,r.min(v.length,x.row.end),x.row.step),w=f.arange(x.col.start,r.min(v[0].length,x.col.end),x.col.step),k.forEach(function(E,S){w.forEach(function(R,T){v[E][R]=b[S][T]})}),v},f.diagonal=function(v){var x=f.zeros(v.length,v.length);return v.forEach(function(b,w){x[w][w]=b}),x},f.copy=function(v){return v.map(function(x){return d(x)?x:x.map(function(b){return b})})};var g=f.prototype;return g.length=0,g.push=Array.prototype.push,g.sort=Array.prototype.sort,g.splice=Array.prototype.splice,g.slice=Array.prototype.slice,g.toArray=function(){return this.length>1?i.call(this):i.call(this)[0]},g.map=function(v,x){return f(f.map(this,v,x))},g.cumreduce=function(v,x){return f(f.cumreduce(this,v,x))},g.alter=function(v){return f.alter(this,v),this},function(v){for(var x=0;x<v.length;x++)(function(b){g[b]=function(w){var k=this,C;return w?(setTimeout(function(){w.call(k,g[b].call(k))}),this):(C=f[b](this),l(C)?f(C):C)}})(v[x])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(v){for(var x=0;x<v.length;x++)(function(b){g[b]=function(w,k){var C=this;return k?(setTimeout(function(){k.call(C,g[b].call(C,w))}),this):f(f[b](this,w))}})(v[x])}("row col".split(" ")),function(v){for(var x=0;x<v.length;x++)(function(b){g[b]=function(){return f(f[b].apply(null,arguments))}})(v[x])}("create zeros ones rand identity".split(" ")),f}(Math);return function(r,s){var o=r.utils.isFunction;function i(l,c){return l-c}function a(l,c,d){return s.max(c,s.min(l,d))}r.sum=function(l){for(var c=0,d=l.length;--d>=0;)c+=l[d];return c},r.sumsqrd=function(l){for(var c=0,d=l.length;--d>=0;)c+=l[d]*l[d];return c},r.sumsqerr=function(l){for(var c=r.mean(l),d=0,h=l.length,f;--h>=0;)f=l[h]-c,d+=f*f;return d},r.sumrow=function(l){for(var c=0,d=l.length;--d>=0;)c+=l[d];return c},r.product=function(l){for(var c=1,d=l.length;--d>=0;)c*=l[d];return c},r.min=function(l){for(var c=l[0],d=0;++d<l.length;)l[d]<c&&(c=l[d]);return c},r.max=function(l){for(var c=l[0],d=0;++d<l.length;)l[d]>c&&(c=l[d]);return c},r.unique=function(l){for(var c={},d=[],h=0;h<l.length;h++)c[l[h]]||(c[l[h]]=!0,d.push(l[h]));return d},r.mean=function(l){return r.sum(l)/l.length},r.meansqerr=function(l){return r.sumsqerr(l)/l.length},r.geomean=function(l){var c=l.map(s.log),d=r.mean(c);return s.exp(d)},r.median=function(l){var c=l.length,d=l.slice().sort(i);return c&1?d[c/2|0]:(d[c/2-1]+d[c/2])/2},r.cumsum=function(l){return r.cumreduce(l,function(c,d){return c+d})},r.cumprod=function(l){return r.cumreduce(l,function(c,d){return c*d})},r.diff=function(l){var c=[],d=l.length,h;for(h=1;h<d;h++)c.push(l[h]-l[h-1]);return c},r.rank=function(l){var c,d=[],h={};for(c=0;c<l.length;c++){var f=l[c];h[f]?h[f]++:(h[f]=1,d.push(f))}var p=d.sort(i),m={},y=1;for(c=0;c<p.length;c++){var f=p[c],g=h[f],v=y,x=y+g-1,b=(v+x)/2;m[f]=b,y+=g}return l.map(function(w){return m[w]})},r.mode=function(l){var c=l.length,d=l.slice().sort(i),h=1,f=0,p=0,m=[],y;for(y=0;y<c;y++)d[y]===d[y+1]?h++:(h>f?(m=[d[y]],f=h,p=0):h===f&&(m.push(d[y]),p++),h=1);return p===0?m[0]:m},r.range=function(l){return r.max(l)-r.min(l)},r.variance=function(l,c){return r.sumsqerr(l)/(l.length-(c?1:0))},r.pooledvariance=function(l){var c=l.reduce(function(h,f){return h+r.sumsqerr(f)},0),d=l.reduce(function(h,f){return h+f.length},0);return c/(d-l.length)},r.deviation=function(l){for(var c=r.mean(l),d=l.length,h=new Array(d),f=0;f<d;f++)h[f]=l[f]-c;return h},r.stdev=function(l,c){return s.sqrt(r.variance(l,c))},r.pooledstdev=function(l){return s.sqrt(r.pooledvariance(l))},r.meandev=function(l){for(var c=r.mean(l),d=[],h=l.length-1;h>=0;h--)d.push(s.abs(l[h]-c));return r.mean(d)},r.meddev=function(l){for(var c=r.median(l),d=[],h=l.length-1;h>=0;h--)d.push(s.abs(l[h]-c));return r.median(d)},r.coeffvar=function(l){return r.stdev(l)/r.mean(l)},r.quartiles=function(l){var c=l.length,d=l.slice().sort(i);return[d[s.round(c/4)-1],d[s.round(c/2)-1],d[s.round(c*3/4)-1]]},r.quantiles=function(l,c,d,h){var f=l.slice().sort(i),p=[c.length],m=l.length,y,g,v,x,b,w;for(typeof d>"u"&&(d=3/8),typeof h>"u"&&(h=3/8),y=0;y<c.length;y++)g=c[y],v=d+g*(1-d-h),x=m*g+v,b=s.floor(a(x,1,m-1)),w=a(x-b,0,1),p[y]=(1-w)*f[b-1]+w*f[b];return p},r.percentile=function(l,c,d){var h=l.slice().sort(i),f=c*(h.length+(d?1:-1))+(d?0:1),p=parseInt(f),m=f-p;return p+1<h.length?h[p-1]+m*(h[p]-h[p-1]):h[p-1]},r.percentileOfScore=function(l,c,d){var h=0,f=l.length,p=!1,m,y;for(d==="strict"&&(p=!0),y=0;y<f;y++)m=l[y],(p&&m<c||!p&&m<=c)&&h++;return h/f},r.histogram=function(l,c){c=c||4;var d=r.min(l),h=(r.max(l)-d)/c,f=l.length,p=[],m;for(m=0;m<c;m++)p[m]=0;for(m=0;m<f;m++)p[s.min(s.floor((l[m]-d)/h),c-1)]+=1;return p},r.covariance=function(l,c){var d=r.mean(l),h=r.mean(c),f=l.length,p=new Array(f),m;for(m=0;m<f;m++)p[m]=(l[m]-d)*(c[m]-h);return r.sum(p)/(f-1)},r.corrcoeff=function(l,c){return r.covariance(l,c)/r.stdev(l,1)/r.stdev(c,1)},r.spearmancoeff=function(l,c){return l=r.rank(l),c=r.rank(c),r.corrcoeff(l,c)},r.stanMoment=function(l,c){for(var d=r.mean(l),h=r.stdev(l),f=l.length,p=0,m=0;m<f;m++)p+=s.pow((l[m]-d)/h,c);return p/l.length},r.skewness=function(l){return r.stanMoment(l,3)},r.kurtosis=function(l){return r.stanMoment(l,4)-3};var u=r.prototype;(function(l){for(var c=0;c<l.length;c++)(function(d){u[d]=function(h,f){var p=[],m=0,y=this;if(o(h)&&(f=h,h=!1),f)return setTimeout(function(){f.call(y,u[d].call(y,h))}),this;if(this.length>1){for(y=h===!0?this:this.transpose();m<y.length;m++)p[m]=r[d](y[m]);return p}return r[d](this[0],h)}})(l[c])})("cumsum cumprod".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(d){u[d]=function(h,f){var p=[],m=0,y=this;if(o(h)&&(f=h,h=!1),f)return setTimeout(function(){f.call(y,u[d].call(y,h))}),this;if(this.length>1){for(d!=="sumrow"&&(y=h===!0?this:this.transpose());m<y.length;m++)p[m]=r[d](y[m]);return h===!0?r[d](r.utils.toVector(p)):p}return r[d](this[0],h)}})(l[c])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(l){for(var c=0;c<l.length;c++)(function(d){u[d]=function(){var h=[],f=0,p=this,m=Array.prototype.slice.call(arguments),y;if(o(m[m.length-1])){y=m[m.length-1];var g=m.slice(0,m.length-1);return setTimeout(function(){y.call(p,u[d].apply(p,g))}),this}else{y=void 0;var v=function(x){return r[d].apply(p,[x].concat(m))}}if(this.length>1){for(p=p.transpose();f<p.length;f++)h[f]=v(p[f]);return h}return v(this[0])}})(l[c])}("quantiles percentileOfScore".split(" "))}(n,Math),function(r,s){r.gammaln=function(o){var i=0,a=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],u=1.000000000190015,l,c,d;for(d=(c=l=o)+5.5,d-=(l+.5)*s.log(d);i<6;i++)u+=a[i]/++c;return s.log(2.5066282746310007*u/l)-d},r.loggam=function(o){var i,a,u,l,c,d,h,f=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(i=o,h=0,o==1||o==2)return 0;for(o<=7&&(h=s.floor(7-o),i=o+h),a=1/(i*i),u=2*s.PI,c=f[9],d=8;d>=0;d--)c*=a,c+=f[d];if(l=c/i+.5*s.log(u)+(i-.5)*s.log(i)-i,o<=7)for(d=1;d<=h;d++)l-=s.log(i-1),i-=1;return l},r.gammafn=function(o){var i=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],a=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],u=!1,l=0,c=0,d=0,h=o,f,p,m,y;if(o>171.6243769536076)return 1/0;if(h<=0)if(y=h%1+36e-17,y)u=(h&1?-1:1)*s.PI/s.sin(s.PI*y),h=1-h;else return 1/0;for(m=h,h<1?p=h++:p=(h-=l=(h|0)-1)-1,f=0;f<8;++f)d=(d+i[f])*p,c=c*p+a[f];if(y=d/c+1,m<h)y/=m;else if(m>h)for(f=0;f<l;++f)y*=h,h++;return u&&(y=u/y),y},r.gammap=function(o,i){return r.lowRegGamma(o,i)*r.gammafn(o)},r.lowRegGamma=function(o,i){var a=r.gammaln(o),u=o,l=1/o,c=l,d=i+1-o,h=1/1e-30,f=1/d,p=f,m=1,y=-~(s.log(o>=1?o:1/o)*8.5+o*.4+17),g;if(i<0||o<=0)return NaN;if(i<o+1){for(;m<=y;m++)l+=c*=i/++u;return l*s.exp(-i+o*s.log(i)-a)}for(;m<=y;m++)g=-m*(m-o),d+=2,f=g*f+d,h=d+g/h,f=1/f,p*=f*h;return 1-p*s.exp(-i+o*s.log(i)-a)},r.factorialln=function(o){return o<0?NaN:r.gammaln(o+1)},r.factorial=function(o){return o<0?NaN:r.gammafn(o+1)},r.combination=function(o,i){return o>170||i>170?s.exp(r.combinationln(o,i)):r.factorial(o)/r.factorial(i)/r.factorial(o-i)},r.combinationln=function(o,i){return r.factorialln(o)-r.factorialln(i)-r.factorialln(o-i)},r.permutation=function(o,i){return r.factorial(o)/r.factorial(o-i)},r.betafn=function(o,i){if(!(o<=0||i<=0))return o+i>170?s.exp(r.betaln(o,i)):r.gammafn(o)*r.gammafn(i)/r.gammafn(o+i)},r.betaln=function(o,i){return r.gammaln(o)+r.gammaln(i)-r.gammaln(o+i)},r.betacf=function(o,i,a){var u=1e-30,l=1,c=i+a,d=i+1,h=i-1,f=1,p=1-c*o/d,m,y,g,v;for(s.abs(p)<u&&(p=u),p=1/p,v=p;l<=100&&(m=2*l,y=l*(a-l)*o/((h+m)*(i+m)),p=1+y*p,s.abs(p)<u&&(p=u),f=1+y/f,s.abs(f)<u&&(f=u),p=1/p,v*=p*f,y=-(i+l)*(c+l)*o/((i+m)*(d+m)),p=1+y*p,s.abs(p)<u&&(p=u),f=1+y/f,s.abs(f)<u&&(f=u),p=1/p,g=p*f,v*=g,!(s.abs(g-1)<3e-7));l++);return v},r.gammapinv=function(o,i){var a=0,u=i-1,l=1e-8,c=r.gammaln(i),d,h,f,p,m,y,g;if(o>=1)return s.max(100,i+100*s.sqrt(i));if(o<=0)return 0;for(i>1?(y=s.log(u),g=s.exp(u*(y-1)-c),m=o<.5?o:1-o,f=s.sqrt(-2*s.log(m)),d=(2.30753+f*.27061)/(1+f*(.99229+f*.04481))-f,o<.5&&(d=-d),d=s.max(.001,i*s.pow(1-1/(9*i)-d/(3*s.sqrt(i)),3))):(f=1-i*(.253+i*.12),o<f?d=s.pow(o/f,1/i):d=1-s.log(1-(o-f)/(1-f)));a<12;a++){if(d<=0)return 0;if(h=r.lowRegGamma(i,d)-o,i>1?f=g*s.exp(-(d-u)+u*(s.log(d)-y)):f=s.exp(-d+u*s.log(d)-c),p=h/f,d-=f=p/(1-.5*s.min(1,p*((i-1)/d-1))),d<=0&&(d=.5*(d+f)),s.abs(f)<l*d)break}return d},r.erf=function(o){var i=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],a=i.length-1,u=!1,l=0,c=0,d,h,f,p;for(o<0&&(o=-o,u=!0),d=2/(2+o),h=4*d-2;a>0;a--)f=l,l=h*l-c+i[a],c=f;return p=d*s.exp(-o*o+.5*(i[0]+h*l)-c),u?p-1:1-p},r.erfc=function(o){return 1-r.erf(o)},r.erfcinv=function(o){var i=0,a,u,l,c;if(o>=2)return-100;if(o<=0)return 100;for(c=o<1?o:2-o,l=s.sqrt(-2*s.log(c/2)),a=-.70711*((2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l);i<2;i++)u=r.erfc(a)-c,a+=u/(1.1283791670955126*s.exp(-a*a)-a*u);return o<1?a:-a},r.ibetainv=function(o,i,a){var u=1e-8,l=i-1,c=a-1,d=0,h,f,p,m,y,g,v,x,b,w,k;if(o<=0)return 0;if(o>=1)return 1;for(i>=1&&a>=1?(p=o<.5?o:1-o,m=s.sqrt(-2*s.log(p)),v=(2.30753+m*.27061)/(1+m*(.99229+m*.04481))-m,o<.5&&(v=-v),x=(v*v-3)/6,b=2/(1/(2*i-1)+1/(2*a-1)),w=v*s.sqrt(x+b)/b-(1/(2*a-1)-1/(2*i-1))*(x+5/6-2/(3*b)),v=i/(i+a*s.exp(2*w))):(h=s.log(i/(i+a)),f=s.log(a/(i+a)),m=s.exp(i*h)/i,y=s.exp(a*f)/a,w=m+y,o<m/w?v=s.pow(i*w*o,1/i):v=1-s.pow(a*w*(1-o),1/a)),k=-r.gammaln(i)-r.gammaln(a)+r.gammaln(i+a);d<10;d++){if(v===0||v===1)return v;if(g=r.ibeta(v,i,a)-o,m=s.exp(l*s.log(v)+c*s.log(1-v)+k),y=g/m,v-=m=y/(1-.5*s.min(1,y*(l/v-c/(1-v)))),v<=0&&(v=.5*(v+m)),v>=1&&(v=.5*(v+m+1)),s.abs(m)<u*v&&d>0)break}return v},r.ibeta=function(o,i,a){var u=o===0||o===1?0:s.exp(r.gammaln(i+a)-r.gammaln(i)-r.gammaln(a)+i*s.log(o)+a*s.log(1-o));return o<0||o>1?!1:o<(i+1)/(i+a+2)?u*r.betacf(o,i,a)/i:1-u*r.betacf(1-o,a,i)/a},r.randn=function(o,i){var a,u,l,c,d;if(i||(i=o),o)return r.create(o,i,function(){return r.randn()});do a=r._random_fn(),u=1.7156*(r._random_fn()-.5),l=a-.449871,c=s.abs(u)+.386595,d=l*l+c*(.196*c-.25472*l);while(d>.27597&&(d>.27846||u*u>-4*s.log(a)*a*a));return u/a},r.randg=function(o,i,a){var u=o,l,c,d,h,f,p;if(a||(a=i),o||(o=1),i)return p=r.zeros(i,a),p.alter(function(){return r.randg(o)}),p;o<1&&(o+=1),l=o-1/3,c=1/s.sqrt(9*l);do{do f=r.randn(),h=1+c*f;while(h<=0);h=h*h*h,d=r._random_fn()}while(d>1-.331*s.pow(f,4)&&s.log(d)>.5*f*f+l*(1-h+s.log(h)));if(o==u)return l*h;do d=r._random_fn();while(d===0);return s.pow(d,1/u)*l*h},function(o){for(var i=0;i<o.length;i++)(function(a){r.fn[a]=function(){return r(r.map(this,function(u){return r[a](u)}))}})(o[i])}("gammaln gammafn factorial factorialln".split(" ")),function(o){for(var i=0;i<o.length;i++)(function(a){r.fn[a]=function(){return r(r[a].apply(null,arguments))}})(o[i])}("randn".split(" "))}(n,Math),function(r,s){(function(l){for(var c=0;c<l.length;c++)(function(d){r[d]=function h(f,p,m){return this instanceof h?(this._a=f,this._b=p,this._c=m,this):new h(f,p,m)},r.fn[d]=function(h,f,p){var m=r[d](h,f,p);return m.data=this,m},r[d].prototype.sample=function(h){var f=this._a,p=this._b,m=this._c;return h?r.alter(h,function(){return r[d].sample(f,p,m)}):r[d].sample(f,p,m)},function(h){for(var f=0;f<h.length;f++)(function(p){r[d].prototype[p]=function(m){var y=this._a,g=this._b,v=this._c;return!m&&m!==0&&(m=this.data),typeof m!="number"?r.fn.map.call(m,function(x){return r[d][p](x,y,g,v)}):r[d][p](m,y,g,v)}})(h[f])}("pdf cdf inv".split(" ")),function(h){for(var f=0;f<h.length;f++)(function(p){r[d].prototype[p]=function(){return r[d][p](this._a,this._b,this._c)}})(h[f])}("mean median mode variance".split(" "))})(l[c])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),r.extend(r.beta,{pdf:function(l,c,d){return l>1||l<0?0:c==1&&d==1?1:c<512&&d<512?s.pow(l,c-1)*s.pow(1-l,d-1)/r.betafn(c,d):s.exp((c-1)*s.log(l)+(d-1)*s.log(1-l)-r.betaln(c,d))},cdf:function(l,c,d){return l>1||l<0?(l>1)*1:r.ibeta(l,c,d)},inv:function(l,c,d){return r.ibetainv(l,c,d)},mean:function(l,c){return l/(l+c)},median:function(l,c){return r.ibetainv(.5,l,c)},mode:function(l,c){return(l-1)/(l+c-2)},sample:function(l,c){var d=r.randg(l);return d/(d+r.randg(c))},variance:function(l,c){return l*c/(s.pow(l+c,2)*(l+c+1))}}),r.extend(r.centralF,{pdf:function(l,c,d){var h,f,p;return l<0?0:c<=2?l===0&&c<2?1/0:l===0&&c===2?1:1/r.betafn(c/2,d/2)*s.pow(c/d,c/2)*s.pow(l,c/2-1)*s.pow(1+c/d*l,-(c+d)/2):(h=c*l/(d+l*c),f=d/(d+l*c),p=c*f/2,p*r.binomial.pdf((c-2)/2,(c+d-2)/2,h))},cdf:function(l,c,d){return l<0?0:r.ibeta(c*l/(c*l+d),c/2,d/2)},inv:function(l,c,d){return d/(c*(1/r.ibetainv(l,c/2,d/2)-1))},mean:function(l,c){return c>2?c/(c-2):void 0},mode:function(l,c){return l>2?c*(l-2)/(l*(c+2)):void 0},sample:function(l,c){var d=r.randg(l/2)*2,h=r.randg(c/2)*2;return d/l/(h/c)},variance:function(l,c){if(!(c<=4))return 2*c*c*(l+c-2)/(l*(c-2)*(c-2)*(c-4))}}),r.extend(r.cauchy,{pdf:function(l,c,d){return d<0?0:d/(s.pow(l-c,2)+s.pow(d,2))/s.PI},cdf:function(l,c,d){return s.atan((l-c)/d)/s.PI+.5},inv:function(l,c,d){return c+d*s.tan(s.PI*(l-.5))},median:function(l){return l},mode:function(l){return l},sample:function(l,c){return r.randn()*s.sqrt(1/(2*r.randg(.5)))*c+l}}),r.extend(r.chisquare,{pdf:function(l,c){return l<0?0:l===0&&c===2?.5:s.exp((c/2-1)*s.log(l)-l/2-c/2*s.log(2)-r.gammaln(c/2))},cdf:function(l,c){return l<0?0:r.lowRegGamma(c/2,l/2)},inv:function(l,c){return 2*r.gammapinv(l,.5*c)},mean:function(l){return l},median:function(l){return l*s.pow(1-2/(9*l),3)},mode:function(l){return l-2>0?l-2:0},sample:function(l){return r.randg(l/2)*2},variance:function(l){return 2*l}}),r.extend(r.exponential,{pdf:function(l,c){return l<0?0:c*s.exp(-c*l)},cdf:function(l,c){return l<0?0:1-s.exp(-c*l)},inv:function(l,c){return-s.log(1-l)/c},mean:function(l){return 1/l},median:function(l){return 1/l*s.log(2)},mode:function(){return 0},sample:function(l){return-1/l*s.log(r._random_fn())},variance:function(l){return s.pow(l,-2)}}),r.extend(r.gamma,{pdf:function(l,c,d){return l<0?0:l===0&&c===1?1/d:s.exp((c-1)*s.log(l)-l/d-r.gammaln(c)-c*s.log(d))},cdf:function(l,c,d){return l<0?0:r.lowRegGamma(c,l/d)},inv:function(l,c,d){return r.gammapinv(l,c)*d},mean:function(l,c){return l*c},mode:function(l,c){if(l>1)return(l-1)*c},sample:function(l,c){return r.randg(l)*c},variance:function(l,c){return l*c*c}}),r.extend(r.invgamma,{pdf:function(l,c,d){return l<=0?0:s.exp(-(c+1)*s.log(l)-d/l-r.gammaln(c)+c*s.log(d))},cdf:function(l,c,d){return l<=0?0:1-r.lowRegGamma(c,d/l)},inv:function(l,c,d){return d/r.gammapinv(1-l,c)},mean:function(l,c){return l>1?c/(l-1):void 0},mode:function(l,c){return c/(l+1)},sample:function(l,c){return c/r.randg(l)},variance:function(l,c){if(!(l<=2))return c*c/((l-1)*(l-1)*(l-2))}}),r.extend(r.kumaraswamy,{pdf:function(l,c,d){return l===0&&c===1?d:l===1&&d===1?c:s.exp(s.log(c)+s.log(d)+(c-1)*s.log(l)+(d-1)*s.log(1-s.pow(l,c)))},cdf:function(l,c,d){return l<0?0:l>1?1:1-s.pow(1-s.pow(l,c),d)},inv:function(l,c,d){return s.pow(1-s.pow(1-l,1/d),1/c)},mean:function(l,c){return c*r.gammafn(1+1/l)*r.gammafn(c)/r.gammafn(1+1/l+c)},median:function(l,c){return s.pow(1-s.pow(2,-1/c),1/l)},mode:function(l,c){if(l>=1&&c>=1&&l!==1&&c!==1)return s.pow((l-1)/(l*c-1),1/l)},variance:function(){throw new Error("variance not yet implemented")}}),r.extend(r.lognormal,{pdf:function(l,c,d){return l<=0?0:s.exp(-s.log(l)-.5*s.log(2*s.PI)-s.log(d)-s.pow(s.log(l)-c,2)/(2*d*d))},cdf:function(l,c,d){return l<0?0:.5+.5*r.erf((s.log(l)-c)/s.sqrt(2*d*d))},inv:function(l,c,d){return s.exp(-1.4142135623730951*d*r.erfcinv(2*l)+c)},mean:function(l,c){return s.exp(l+c*c/2)},median:function(l){return s.exp(l)},mode:function(l,c){return s.exp(l-c*c)},sample:function(l,c){return s.exp(r.randn()*c+l)},variance:function(l,c){return(s.exp(c*c)-1)*s.exp(2*l+c*c)}}),r.extend(r.noncentralt,{pdf:function(l,c,d){var h=1e-14;return s.abs(d)<h?r.studentt.pdf(l,c):s.abs(l)<h?s.exp(r.gammaln((c+1)/2)-d*d/2-.5*s.log(s.PI*c)-r.gammaln(c/2)):c/l*(r.noncentralt.cdf(l*s.sqrt(1+2/c),c+2,d)-r.noncentralt.cdf(l,c,d))},cdf:function(l,c,d){var h=1e-14,f=200;if(s.abs(d)<h)return r.studentt.cdf(l,c);var p=!1;l<0&&(p=!0,d=-d);for(var m=r.normal.cdf(-d,0,1),y=h+1,g=y,v=l*l/(l*l+c),x=0,b=s.exp(-d*d/2),w=s.exp(-d*d/2-.5*s.log(2)-r.gammaln(3/2))*d;x<f||g>h||y>h;)g=y,x>0&&(b*=d*d/(2*x),w*=d*d/(2*(x+1/2))),y=b*r.beta.cdf(v,x+.5,c/2)+w*r.beta.cdf(v,x+1,c/2),m+=.5*y,x++;return p?1-m:m}}),r.extend(r.normal,{pdf:function(l,c,d){return s.exp(-.5*s.log(2*s.PI)-s.log(d)-s.pow(l-c,2)/(2*d*d))},cdf:function(l,c,d){return .5*(1+r.erf((l-c)/s.sqrt(2*d*d)))},inv:function(l,c,d){return-1.4142135623730951*d*r.erfcinv(2*l)+c},mean:function(l){return l},median:function(l){return l},mode:function(l){return l},sample:function(l,c){return r.randn()*c+l},variance:function(l,c){return c*c}}),r.extend(r.pareto,{pdf:function(l,c,d){return l<c?0:d*s.pow(c,d)/s.pow(l,d+1)},cdf:function(l,c,d){return l<c?0:1-s.pow(c/l,d)},inv:function(l,c,d){return c/s.pow(1-l,1/d)},mean:function(l,c){if(!(c<=1))return c*s.pow(l,c)/(c-1)},median:function(l,c){return l*(c*s.SQRT2)},mode:function(l){return l},variance:function(l,c){if(!(c<=2))return l*l*c/(s.pow(c-1,2)*(c-2))}}),r.extend(r.studentt,{pdf:function(l,c){return c=c>1e100?1e100:c,1/(s.sqrt(c)*r.betafn(.5,c/2))*s.pow(1+l*l/c,-((c+1)/2))},cdf:function(l,c){var d=c/2;return r.ibeta((l+s.sqrt(l*l+c))/(2*s.sqrt(l*l+c)),d,d)},inv:function(l,c){var d=r.ibetainv(2*s.min(l,1-l),.5*c,.5);return d=s.sqrt(c*(1-d)/d),l>.5?d:-d},mean:function(l){return l>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(l){return r.randn()*s.sqrt(l/(2*r.randg(l/2)))},variance:function(l){return l>2?l/(l-2):l>1?1/0:void 0}}),r.extend(r.weibull,{pdf:function(l,c,d){return l<0||c<0||d<0?0:d/c*s.pow(l/c,d-1)*s.exp(-s.pow(l/c,d))},cdf:function(l,c,d){return l<0?0:1-s.exp(-s.pow(l/c,d))},inv:function(l,c,d){return c*s.pow(-s.log(1-l),1/d)},mean:function(l,c){return l*r.gammafn(1+1/c)},median:function(l,c){return l*s.pow(s.log(2),1/c)},mode:function(l,c){return c<=1?0:l*s.pow((c-1)/c,1/c)},sample:function(l,c){return l*s.pow(-s.log(r._random_fn()),1/c)},variance:function(l,c){return l*l*r.gammafn(1+2/c)-s.pow(r.weibull.mean(l,c),2)}}),r.extend(r.uniform,{pdf:function(l,c,d){return l<c||l>d?0:1/(d-c)},cdf:function(l,c,d){return l<c?0:l<d?(l-c)/(d-c):1},inv:function(l,c,d){return c+l*(d-c)},mean:function(l,c){return .5*(l+c)},median:function(l,c){return r.mean(l,c)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(l,c){return l/2+c/2+(c/2-l/2)*(2*r._random_fn()-1)},variance:function(l,c){return s.pow(c-l,2)/12}});function o(l,c,d,h){for(var f=0,p=1,m=1,y=1,g=0,v=0,x;s.abs((m-v)/m)>h;)v=m,x=-(c+g)*(c+d+g)*l/(c+2*g)/(c+2*g+1),f=m+x*f,p=y+x*p,g=g+1,x=g*(d-g)*l/(c+2*g-1)/(c+2*g),m=f+x*m,y=p+x*y,f=f/y,p=p/y,m=m/y,y=1;return m/c}r.extend(r.binomial,{pdf:function(l,c,d){return d===0||d===1?c*d===l?1:0:r.combination(c,l)*s.pow(d,l)*s.pow(1-d,c-l)},cdf:function(l,c,d){var h,f=1e-10;if(l<0)return 0;if(l>=c)return 1;if(d<0||d>1||c<=0)return NaN;l=s.floor(l);var p=d,m=l+1,y=c-l,g=m+y,v=s.exp(r.gammaln(g)-r.gammaln(y)-r.gammaln(m)+m*s.log(p)+y*s.log(1-p));return p<(m+1)/(g+2)?h=v*o(p,m,y,f):h=1-v*o(1-p,y,m,f),s.round((1-h)*(1/f))/(1/f)}}),r.extend(r.negbin,{pdf:function(l,c,d){return l!==l>>>0?!1:l<0?0:r.combination(l+c-1,c-1)*s.pow(1-d,l)*s.pow(d,c)},cdf:function(l,c,d){var h=0,f=0;if(l<0)return 0;for(;f<=l;f++)h+=r.negbin.pdf(f,c,d);return h}}),r.extend(r.hypgeom,{pdf:function(l,c,d,h){if(l!==l|0)return!1;if(l<0||l<d-(c-h)||l>h||l>d)return 0;if(d*2>c)return h*2>c?r.hypgeom.pdf(c-d-h+l,c,c-d,c-h):r.hypgeom.pdf(h-l,c,c-d,h);if(h*2>c)return r.hypgeom.pdf(d-l,c,d,c-h);if(d<h)return r.hypgeom.pdf(l,c,h,d);for(var f=1,p=0,m=0;m<l;m++){for(;f>1&&p<h;)f*=1-d/(c-p),p++;f*=(h-m)*(d-m)/((m+1)*(c-d-h+m+1))}for(;p<h;p++)f*=1-d/(c-p);return s.min(1,s.max(0,f))},cdf:function(l,c,d,h){if(l<0||l<d-(c-h))return 0;if(l>=h||l>=d)return 1;if(d*2>c)return h*2>c?r.hypgeom.cdf(c-d-h+l,c,c-d,c-h):1-r.hypgeom.cdf(h-l-1,c,c-d,h);if(h*2>c)return 1-r.hypgeom.cdf(d-l-1,c,d,c-h);if(d<h)return r.hypgeom.cdf(l,c,h,d);for(var f=1,p=1,m=0,y=0;y<l;y++){for(;f>1&&m<h;){var g=1-d/(c-m);p*=g,f*=g,m++}p*=(h-y)*(d-y)/((y+1)*(c-d-h+y+1)),f+=p}for(;m<h;m++)f*=1-d/(c-m);return s.min(1,s.max(0,f))}}),r.extend(r.poisson,{pdf:function(l,c){return c<0||l%1!==0||l<0?0:s.pow(c,l)*s.exp(-c)/r.factorial(l)},cdf:function(l,c){var d=[],h=0;if(l<0)return 0;for(;h<=l;h++)d.push(r.poisson.pdf(h,c));return r.sum(d)},mean:function(l){return l},variance:function(l){return l},sampleSmall:function(l){var c=1,d=0,h=s.exp(-l);do d++,c*=r._random_fn();while(c>h);return d-1},sampleLarge:function(l){var c=l,d,h,f,p,m,y,g,v,x,b;for(p=s.sqrt(c),m=s.log(c),g=.931+2.53*p,y=-.059+.02483*g,v=1.1239+1.1328/(g-3.4),x=.9277-3.6224/(g-2);;)if(h=s.random()-.5,f=s.random(),b=.5-s.abs(h),d=s.floor((2*y/b+g)*h+c+.43),b>=.07&&f<=x||!(d<0||b<.013&&f>b)&&s.log(f)+s.log(v)-s.log(y/(b*b)+g)<=-c+d*m-r.loggam(d+1))return d},sample:function(l){return l<10?this.sampleSmall(l):this.sampleLarge(l)}}),r.extend(r.triangular,{pdf:function(l,c,d,h){return d<=c||h<c||h>d?NaN:l<c||l>d?0:l<h?2*(l-c)/((d-c)*(h-c)):l===h?2/(d-c):2*(d-l)/((d-c)*(d-h))},cdf:function(l,c,d,h){return d<=c||h<c||h>d?NaN:l<=c?0:l>=d?1:l<=h?s.pow(l-c,2)/((d-c)*(h-c)):1-s.pow(d-l,2)/((d-c)*(d-h))},inv:function(l,c,d,h){return d<=c||h<c||h>d?NaN:l<=(h-c)/(d-c)?c+(d-c)*s.sqrt(l*((h-c)/(d-c))):c+(d-c)*(1-s.sqrt((1-l)*(1-(h-c)/(d-c))))},mean:function(l,c,d){return(l+c+d)/3},median:function(l,c,d){if(d<=(l+c)/2)return c-s.sqrt((c-l)*(c-d))/s.sqrt(2);if(d>(l+c)/2)return l+s.sqrt((c-l)*(d-l))/s.sqrt(2)},mode:function(l,c,d){return d},sample:function(l,c,d){var h=r._random_fn();return h<(d-l)/(c-l)?l+s.sqrt(h*(c-l)*(d-l)):c-s.sqrt((1-h)*(c-l)*(c-d))},variance:function(l,c,d){return(l*l+c*c+d*d-l*c-l*d-c*d)/18}}),r.extend(r.arcsine,{pdf:function(l,c,d){return d<=c?NaN:l<=c||l>=d?0:2/s.PI*s.pow(s.pow(d-c,2)-s.pow(2*l-c-d,2),-.5)},cdf:function(l,c,d){return l<c?0:l<d?2/s.PI*s.asin(s.sqrt((l-c)/(d-c))):1},inv:function(l,c,d){return c+(.5-.5*s.cos(s.PI*l))*(d-c)},mean:function(l,c){return c<=l?NaN:(l+c)/2},median:function(l,c){return c<=l?NaN:(l+c)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(l,c){return(l+c)/2+(c-l)/2*s.sin(2*s.PI*r.uniform.sample(0,1))},variance:function(l,c){return c<=l?NaN:s.pow(c-l,2)/8}});function i(l){return l/s.abs(l)}r.extend(r.laplace,{pdf:function(l,c,d){return d<=0?0:s.exp(-s.abs(l-c)/d)/(2*d)},cdf:function(l,c,d){return d<=0?0:l<c?.5*s.exp((l-c)/d):1-.5*s.exp(-(l-c)/d)},mean:function(l){return l},median:function(l){return l},mode:function(l){return l},variance:function(l,c){return 2*c*c},sample:function(l,c){var d=r._random_fn()-.5;return l-c*i(d)*s.log(1-2*s.abs(d))}});function a(l,c,d){var h=12,f=6,p=-30,m=-50,y=60,g=8,v=3,x=2,b=3,w=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],k=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],C=l*.5;if(C>=g)return 1;var $=2*r.normal.cdf(C,0,1,1,0)-1;$>=s.exp(m/d)?$=s.pow($,d):$=0;var E;l>v?E=x:E=b;for(var S=C,R=(g-C)/E,T=S+R,P=0,I=d-1,A=1;A<=E;A++){for(var L=0,V=.5*(T+S),z=.5*(T-S),M=1;M<=h;M++){var _,F;f<M?(_=h-M+1,F=w[_-1]):(_=M,F=-w[_-1]);var O=z*F,D=V+O,j=D*D;if(j>y)break;var G=2*r.normal.cdf(D,0,1,1,0),J=2*r.normal.cdf(D,l,1,1,0),me=G*.5-J*.5;me>=s.exp(p/I)&&(me=k[_-1]*s.exp(-(.5*j))*s.pow(me,I),L+=me)}L*=2*z*d/s.sqrt(2*s.PI),P+=L,S=T,T+=R}return $+=P,$<=s.exp(p/c)?0:($=s.pow($,c),$>=1?1:$)}function u(l,c,d){var h=.322232421088,f=.099348462606,p=-1,m=.588581570495,y=-.342242088547,g=.531103462366,v=-.204231210125,x=.10353775285,b=-453642210148e-16,w=.0038560700634,k=.8832,C=.2368,$=1.214,E=1.208,S=1.4142,R=120,T=.5-.5*l,P=s.sqrt(s.log(1/(T*T))),I=P+((((P*b+v)*P+y)*P+p)*P+h)/((((P*w+x)*P+g)*P+m)*P+f);d<R&&(I+=(I*I*I+I)/d/4);var A=k-C*I;return d<R&&(A+=-$/d+E*I/d),I*(A*s.log(c-1)+S)}r.extend(r.tukey,{cdf:function(l,c,d){var h=1,f=c,p=16,m=8,y=-30,g=1e-14,v=100,x=800,b=5e3,w=25e3,k=1,C=.5,$=.25,E=.125,S=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],R=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(l<=0)return 0;if(d<2||h<1||f<2)return NaN;if(!Number.isFinite(l))return 1;if(d>w)return a(l,h,f);var T=d*.5,P=T*s.log(d)-d*s.log(2)-r.gammaln(T),I=T-1,A=d*.25,L;d<=v?L=k:d<=x?L=C:d<=b?L=$:L=E,P+=s.log(L);for(var V=0,z=1;z<=50;z++){for(var M=0,_=(2*z-1)*L,F=1;F<=p;F++){var O,D;m<F?(O=F-m-1,D=P+I*s.log(_+S[O]*L)-(S[O]*L+_)*A):(O=F-1,D=P+I*s.log(_-S[O]*L)+(S[O]*L-_)*A);var j;if(D>=y){m<F?j=l*s.sqrt((S[O]*L+_)*.5):j=l*s.sqrt((-(S[O]*L)+_)*.5);var G=a(j,h,f),J=G*R[O]*s.exp(D);M+=J}}if(z*L>=1&&M<=g)break;V+=M}if(M>g)throw new Error("tukey.cdf failed to converge");return V>1&&(V=1),V},inv:function(l,c,d){var h=1,f=c,p=1e-4,m=50;if(d<2||h<1||f<2)return NaN;if(l<0||l>1)return NaN;if(l===0)return 0;if(l===1)return 1/0;var y=u(l,f,d),g=r.tukey.cdf(y,c,d)-l,v;g>0?v=s.max(0,y-1):v=y+1;for(var x=r.tukey.cdf(v,c,d)-l,b,w=1;w<m;w++){b=v-x*(v-y)/(x-g),g=x,y=v,b<0&&(b=0,x=-l),x=r.tukey.cdf(b,c,d)-l,v=b;var k=s.abs(v-y);if(k<p)return b}throw new Error("tukey.inv failed to converge")}})}(n,Math),function(r,s){var o=Array.prototype.push,i=r.utils.isArray;function a(u){return i(u)||u instanceof r}r.extend({add:function(u,l){return a(l)?(a(l[0])||(l=[l]),r.map(u,function(c,d,h){return c+l[d][h]})):r.map(u,function(c){return c+l})},subtract:function(u,l){return a(l)?(a(l[0])||(l=[l]),r.map(u,function(c,d,h){return c-l[d][h]||0})):r.map(u,function(c){return c-l})},divide:function(u,l){return a(l)?(a(l[0])||(l=[l]),r.multiply(u,r.inv(l))):r.map(u,function(c){return c/l})},multiply:function(u,l){var c,d,h,f,p,m,y,g;if(u.length===void 0&&l.length===void 0)return u*l;if(p=u.length,m=u[0].length,y=r.zeros(p,h=a(l)?l[0].length:m),g=0,a(l)){for(;g<h;g++)for(c=0;c<p;c++){for(f=0,d=0;d<m;d++)f+=u[c][d]*l[d][g];y[c][g]=f}return p===1&&g===1?y[0][0]:y}return r.map(u,function(v){return v*l})},outer:function(u,l){return r.multiply(u.map(function(c){return[c]}),[l])},dot:function(u,l){a(u[0])||(u=[u]),a(l[0])||(l=[l]);for(var c=u[0].length===1&&u.length!==1?r.transpose(u):u,d=l[0].length===1&&l.length!==1?r.transpose(l):l,h=[],f=0,p=c.length,m=c[0].length,y,g;f<p;f++){for(h[f]=[],y=0,g=0;g<m;g++)y+=c[f][g]*d[f][g];h[f]=y}return h.length===1?h[0]:h},pow:function(u,l){return r.map(u,function(c){return s.pow(c,l)})},exp:function(u){return r.map(u,function(l){return s.exp(l)})},log:function(u){return r.map(u,function(l){return s.log(l)})},abs:function(u){return r.map(u,function(l){return s.abs(l)})},norm:function(u,l){var c=0,d=0;for(isNaN(l)&&(l=2),a(u[0])&&(u=u[0]);d<u.length;d++)c+=s.pow(s.abs(u[d]),l);return s.pow(c,1/l)},angle:function(u,l){return s.acos(r.dot(u,l)/(r.norm(u)*r.norm(l)))},aug:function(u,l){var c=[],d;for(d=0;d<u.length;d++)c.push(u[d].slice());for(d=0;d<c.length;d++)o.apply(c[d],l[d]);return c},inv:function(u){for(var l=u.length,c=u[0].length,d=r.identity(l,c),h=r.gauss_jordan(u,d),f=[],p=0,m;p<l;p++)for(f[p]=[],m=c;m<h[0].length;m++)f[p][m-c]=h[p][m];return f},det:function u(l){if(l.length===2)return l[0][0]*l[1][1]-l[0][1]*l[1][0];for(var c=0,d=0;d<l.length;d++){for(var h=[],f=1;f<l.length;f++){h[f-1]=[];for(var p=0;p<l.length;p++)p<d?h[f-1][p]=l[f][p]:p>d&&(h[f-1][p-1]=l[f][p])}var m=d%2?-1:1;c+=u(h)*l[0][d]*m}return c},gauss_elimination:function(u,l){var c=0,d=0,h=u.length,f=u[0].length,p=1,m=0,y=[],g,v,x,b;for(u=r.aug(u,l),g=u[0].length,c=0;c<h;c++){for(v=u[c][c],d=c,b=c+1;b<f;b++)v<s.abs(u[b][c])&&(v=u[b][c],d=b);if(d!=c)for(b=0;b<g;b++)x=u[c][b],u[c][b]=u[d][b],u[d][b]=x;for(d=c+1;d<h;d++)for(p=u[d][c]/u[c][c],b=c;b<g;b++)u[d][b]=u[d][b]-p*u[c][b]}for(c=h-1;c>=0;c--){for(m=0,d=c+1;d<=h-1;d++)m=m+y[d]*u[c][d];y[c]=(u[c][g-1]-m)/u[c][c]}return y},gauss_jordan:function(u,l){var c=r.aug(u,l),d=c.length,h=c[0].length,f=0,p,m,y;for(m=0;m<d;m++){var g=m;for(y=m+1;y<d;y++)s.abs(c[y][m])>s.abs(c[g][m])&&(g=y);var v=c[m];for(c[m]=c[g],c[g]=v,y=m+1;y<d;y++)for(f=c[y][m]/c[m][m],p=m;p<h;p++)c[y][p]-=c[m][p]*f}for(m=d-1;m>=0;m--){for(f=c[m][m],y=0;y<m;y++)for(p=h-1;p>m-1;p--)c[y][p]-=c[m][p]*c[y][m]/f;for(c[m][m]/=f,p=d;p<h;p++)c[m][p]/=f}return c},triaUpSolve:function(u,l){var c=u[0].length,d=r.zeros(1,c)[0],h,f=!1;return l[0].length!=null&&(l=l.map(function(p){return p[0]}),f=!0),r.arange(c-1,-1,-1).forEach(function(p){h=r.arange(p+1,c).map(function(m){return d[m]*u[p][m]}),d[p]=(l[p]-r.sum(h))/u[p][p]}),f?d.map(function(p){return[p]}):d},triaLowSolve:function(u,l){var c=u[0].length,d=r.zeros(1,c)[0],h,f=!1;return l[0].length!=null&&(l=l.map(function(p){return p[0]}),f=!0),r.arange(c).forEach(function(p){h=r.arange(p).map(function(m){return u[p][m]*d[m]}),d[p]=(l[p]-r.sum(h))/u[p][p]}),f?d.map(function(p){return[p]}):d},lu:function(u){var l=u.length,c=r.identity(l),d=r.zeros(u.length,u[0].length),h;return r.arange(l).forEach(function(f){d[0][f]=u[0][f]}),r.arange(1,l).forEach(function(f){r.arange(f).forEach(function(p){h=r.arange(p).map(function(m){return c[f][m]*d[m][p]}),c[f][p]=(u[f][p]-r.sum(h))/d[p][p]}),r.arange(f,l).forEach(function(p){h=r.arange(f).map(function(m){return c[f][m]*d[m][p]}),d[f][p]=u[h.length][p]-r.sum(h)})}),[c,d]},cholesky:function(u){var l=u.length,c=r.zeros(u.length,u[0].length),d;return r.arange(l).forEach(function(h){d=r.arange(h).map(function(f){return s.pow(c[h][f],2)}),c[h][h]=s.sqrt(u[h][h]-r.sum(d)),r.arange(h+1,l).forEach(function(f){d=r.arange(h).map(function(p){return c[h][p]*c[f][p]}),c[f][h]=(u[h][f]-r.sum(d))/c[h][h]})}),c},gauss_jacobi:function(u,l,c,d){for(var h=0,f=0,p=u.length,m=[],y=[],g=[],v,x,b,w;h<p;h++)for(m[h]=[],y[h]=[],g[h]=[],f=0;f<p;f++)h>f?(m[h][f]=u[h][f],y[h][f]=g[h][f]=0):h<f?(y[h][f]=u[h][f],m[h][f]=g[h][f]=0):(g[h][f]=u[h][f],m[h][f]=y[h][f]=0);for(b=r.multiply(r.multiply(r.inv(g),r.add(m,y)),-1),x=r.multiply(r.inv(g),l),v=c,w=r.add(r.multiply(b,c),x),h=2;s.abs(r.norm(r.subtract(w,v)))>d;)v=w,w=r.add(r.multiply(b,v),x),h++;return w},gauss_seidel:function(u,l,c,d){for(var h=0,f=u.length,p=[],m=[],y=[],g,v,x,b,w;h<f;h++)for(p[h]=[],m[h]=[],y[h]=[],g=0;g<f;g++)h>g?(p[h][g]=u[h][g],m[h][g]=y[h][g]=0):h<g?(m[h][g]=u[h][g],p[h][g]=y[h][g]=0):(y[h][g]=u[h][g],p[h][g]=m[h][g]=0);for(b=r.multiply(r.multiply(r.inv(r.add(y,p)),m),-1),x=r.multiply(r.inv(r.add(y,p)),l),v=c,w=r.add(r.multiply(b,c),x),h=2;s.abs(r.norm(r.subtract(w,v)))>d;)v=w,w=r.add(r.multiply(b,v),x),h=h+1;return w},SOR:function(u,l,c,d,h){for(var f=0,p=u.length,m=[],y=[],g=[],v,x,b,w,k;f<p;f++)for(m[f]=[],y[f]=[],g[f]=[],v=0;v<p;v++)f>v?(m[f][v]=u[f][v],y[f][v]=g[f][v]=0):f<v?(y[f][v]=u[f][v],m[f][v]=g[f][v]=0):(g[f][v]=u[f][v],m[f][v]=y[f][v]=0);for(w=r.multiply(r.inv(r.add(g,r.multiply(m,h))),r.subtract(r.multiply(g,1-h),r.multiply(y,h))),b=r.multiply(r.multiply(r.inv(r.add(g,r.multiply(m,h))),l),h),x=c,k=r.add(r.multiply(w,c),b),f=2;s.abs(r.norm(r.subtract(k,x)))>d;)x=k,k=r.add(r.multiply(w,x),b),f++;return k},householder:function(u){for(var l=u.length,c=u[0].length,d=0,h=[],f=[],p,m,y,g,v;d<l-1;d++){for(p=0,g=d+1;g<c;g++)p+=u[g][d]*u[g][d];for(v=u[d+1][d]>0?-1:1,p=v*s.sqrt(p),m=s.sqrt((p*p-u[d+1][d]*p)/2),h=r.zeros(l,1),h[d+1][0]=(u[d+1][d]-p)/(2*m),y=d+2;y<l;y++)h[y][0]=u[y][d]/(2*m);f=r.subtract(r.identity(l,c),r.multiply(r.multiply(h,r.transpose(h)),2)),u=r.multiply(f,r.multiply(u,f))}return u},QR:function(){var u=r.sum,l=r.arange;function c(d){var h=d.length,f=d[0].length,p=r.zeros(f,f);d=r.copy(d);var m,y,g;for(y=0;y<f;y++){for(p[y][y]=s.sqrt(u(l(h).map(function(v){return d[v][y]*d[v][y]}))),m=0;m<h;m++)d[m][y]=d[m][y]/p[y][y];for(g=y+1;g<f;g++)for(p[y][g]=u(l(h).map(function(v){return d[v][y]*d[v][g]})),m=0;m<h;m++)d[m][g]=d[m][g]-d[m][y]*p[y][g]}return[d,p]}return c}(),lstsq:function(){function u(c){c=r.copy(c);var d=c.length,h=r.identity(d);return r.arange(d-1,-1,-1).forEach(function(f){r.sliceAssign(h,{row:f},r.divide(r.slice(h,{row:f}),c[f][f])),r.sliceAssign(c,{row:f},r.divide(r.slice(c,{row:f}),c[f][f])),r.arange(f).forEach(function(p){var m=r.multiply(c[p][f],-1),y=r.slice(c,{row:p}),g=r.multiply(r.slice(c,{row:f}),m);r.sliceAssign(c,{row:p},r.add(y,g));var v=r.slice(h,{row:p}),x=r.multiply(r.slice(h,{row:f}),m);r.sliceAssign(h,{row:p},r.add(v,x))})}),h}function l(c,d){var h=!1;d[0].length===void 0&&(d=d.map(function(k){return[k]}),h=!0);var f=r.QR(c),p=f[0],m=f[1],y=c[0].length,g=r.slice(p,{col:{end:y}}),v=r.slice(m,{row:{end:y}}),x=u(v),b=r.transpose(g);b[0].length===void 0&&(b=[b]);var w=r.multiply(r.multiply(x,b),d);return w.length===void 0&&(w=[[w]]),h?w.map(function(k){return k[0]}):w}return l}(),jacobi:function(u){for(var l=1,c=u.length,d=r.identity(c,c),h=[],f,p,m,y,g,v,x,b;l===1;){for(v=u[0][1],y=0,g=1,p=0;p<c;p++)for(m=0;m<c;m++)p!=m&&v<s.abs(u[p][m])&&(v=s.abs(u[p][m]),y=p,g=m);for(u[y][y]===u[g][g]?x=u[y][g]>0?s.PI/4:-s.PI/4:x=s.atan(2*u[y][g]/(u[y][y]-u[g][g]))/2,b=r.identity(c,c),b[y][y]=s.cos(x),b[y][g]=-s.sin(x),b[g][y]=s.sin(x),b[g][g]=s.cos(x),d=r.multiply(d,b),f=r.multiply(r.multiply(r.inv(b),u),b),u=f,l=0,p=1;p<c;p++)for(m=1;m<c;m++)p!=m&&s.abs(u[p][m])>.001&&(l=1)}for(p=0;p<c;p++)h.push(u[p][p]);return[d,h]},rungekutta:function(u,l,c,d,h,f){var p,m,y,g,v;if(f===2)for(;d<=c;)p=l*u(d,h),m=l*u(d+l,h+p),y=h+(p+m)/2,h=y,d=d+l;if(f===4)for(;d<=c;)p=l*u(d,h),m=l*u(d+l/2,h+p/2),g=l*u(d+l/2,h+m/2),v=l*u(d+l,h+g),y=h+(p+2*m+2*g+v)/6,h=y,d=d+l;return h},romberg:function(u,l,c,d){for(var h=0,f=(c-l)/2,p=[],m=[],y=[],g,v,x,b,w;h<d/2;){for(w=u(l),x=l,b=0;x<=c;x=x+f,b++)p[b]=x;for(g=p.length,x=1;x<g-1;x++)w+=(x%2!==0?4:2)*u(p[x]);w=f/3*(w+u(c)),y[h]=w,f/=2,h++}for(v=y.length,g=1;v!==1;){for(x=0;x<v-1;x++)m[x]=(s.pow(4,g)*y[x+1]-y[x])/(s.pow(4,g)-1);v=m.length,y=m,m=[],g++}return y},richardson:function(u,l,c,d){function h(k,C){for(var $=0,E=k.length,S;$<E;$++)k[$]===C&&(S=$);return S}for(var f=s.abs(c-u[h(u,c)+1]),p=0,m=[],y=[],g,v,x,b,w;d>=f;)g=h(u,c+d),v=h(u,c),m[p]=(l[g]-2*l[v]+l[2*v-g])/(d*d),d/=2,p++;for(b=m.length,x=1;b!=1;){for(w=0;w<b-1;w++)y[w]=(s.pow(4,x)*m[w+1]-m[w])/(s.pow(4,x)-1);b=y.length,m=y,y=[],x++}return m},simpson:function(u,l,c,d){for(var h=(c-l)/d,f=u(l),p=[],m=l,y=0,g=1,v;m<=c;m=m+h,y++)p[y]=m;for(v=p.length;g<v-1;g++)f+=(g%2!==0?4:2)*u(p[g]);return h/3*(f+u(c))},hermite:function(u,l,c,d){for(var h=u.length,f=0,p=0,m=[],y=[],g=[],v=[],x;p<h;p++){for(m[p]=1,x=0;x<h;x++)p!=x&&(m[p]*=(d-u[x])/(u[p]-u[x]));for(y[p]=0,x=0;x<h;x++)p!=x&&(y[p]+=1/(u[p]-u[x]));g[p]=(1-2*(d-u[p])*y[p])*(m[p]*m[p]),v[p]=(d-u[p])*(m[p]*m[p]),f+=g[p]*l[p]+v[p]*c[p]}return f},lagrange:function(u,l,c){for(var d=0,h=0,f,p,m=u.length;h<m;h++){for(p=l[h],f=0;f<m;f++)h!=f&&(p*=(c-u[f])/(u[h]-u[f]));d+=p}return d},cubic_spline:function(u,l,c){for(var d=u.length,h=0,f,p=[],m=[],y=[],g=[],v=[],x=[],b=[];h<d-1;h++)v[h]=u[h+1]-u[h];for(y[0]=0,h=1;h<d-1;h++)y[h]=3/v[h]*(l[h+1]-l[h])-3/v[h-1]*(l[h]-l[h-1]);for(h=1;h<d-1;h++)p[h]=[],m[h]=[],p[h][h-1]=v[h-1],p[h][h]=2*(v[h-1]+v[h]),p[h][h+1]=v[h],m[h][0]=y[h];for(g=r.multiply(r.inv(p),m),f=0;f<d-1;f++)x[f]=(l[f+1]-l[f])/v[f]-v[f]*(g[f+1][0]+2*g[f][0])/3,b[f]=(g[f+1][0]-g[f][0])/(3*v[f]);for(f=0;f<d&&!(u[f]>c);f++);return f-=1,l[f]+(c-u[f])*x[f]+r.sq(c-u[f])*g[f]+(c-u[f])*r.sq(c-u[f])*b[f]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(u){var l=u.length,c=u[0].length,d=0,h,f,p=[],m=[],y=[],g=[],v=[],x=[],b=[],w=[],k=[],C=[];for(d=0;d<l;d++)p[d]=r.sum(u[d])/c;for(d=0;d<c;d++)for(b[d]=[],h=0;h<l;h++)b[d][h]=u[h][d]-p[h];for(b=r.transpose(b),d=0;d<l;d++)for(w[d]=[],h=0;h<l;h++)w[d][h]=r.dot([b[d]],[b[h]])/(c-1);for(y=r.jacobi(w),k=y[0],m=y[1],C=r.transpose(k),d=0;d<m.length;d++)for(h=d;h<m.length;h++)m[d]<m[h]&&(f=m[d],m[d]=m[h],m[h]=f,g=C[d],C[d]=C[h],C[h]=g);for(x=r.transpose(b),d=0;d<l;d++)for(v[d]=[],h=0;h<x.length;h++)v[d][h]=r.dot([C[d]],[x[h]]);return[u,m,C,v]}}),function(u){for(var l=0;l<u.length;l++)(function(c){r.fn[c]=function(d,h){var f=this;return h?(setTimeout(function(){h.call(f,r.fn[c].call(f,d))},15),this):typeof r[c](this,d)=="number"?r[c](this,d):r(r[c](this,d))}})(u[l])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(n,Math),function(r,s){var o=[].slice,i=r.utils.isNumber,a=r.utils.isArray;r.extend({zscore:function(){var l=o.call(arguments);return i(l[1])?(l[0]-l[1])/l[2]:(l[0]-r.mean(l[1]))/r.stdev(l[1],l[2])},ztest:function(){var l=o.call(arguments),c;return a(l[1])?(c=r.zscore(l[0],l[1],l[3]),l[2]===1?r.normal.cdf(-s.abs(c),0,1):r.normal.cdf(-s.abs(c),0,1)*2):l.length>2?(c=r.zscore(l[0],l[1],l[2]),l[3]===1?r.normal.cdf(-s.abs(c),0,1):r.normal.cdf(-s.abs(c),0,1)*2):(c=l[0],l[1]===1?r.normal.cdf(-s.abs(c),0,1):r.normal.cdf(-s.abs(c),0,1)*2)}}),r.extend(r.fn,{zscore:function(l,c){return(l-this.mean())/this.stdev(c)},ztest:function(l,c,d){var h=s.abs(this.zscore(l,d));return c===1?r.normal.cdf(-h,0,1):r.normal.cdf(-h,0,1)*2}}),r.extend({tscore:function(){var l=o.call(arguments);return l.length===4?(l[0]-l[1])/(l[2]/s.sqrt(l[3])):(l[0]-r.mean(l[1]))/(r.stdev(l[1],!0)/s.sqrt(l[1].length))},ttest:function(){var l=o.call(arguments),c;return l.length===5?(c=s.abs(r.tscore(l[0],l[1],l[2],l[3])),l[4]===1?r.studentt.cdf(-c,l[3]-1):r.studentt.cdf(-c,l[3]-1)*2):i(l[1])?(c=s.abs(l[0]),l[2]==1?r.studentt.cdf(-c,l[1]-1):r.studentt.cdf(-c,l[1]-1)*2):(c=s.abs(r.tscore(l[0],l[1])),l[2]==1?r.studentt.cdf(-c,l[1].length-1):r.studentt.cdf(-c,l[1].length-1)*2)}}),r.extend(r.fn,{tscore:function(l){return(l-this.mean())/(this.stdev(!0)/s.sqrt(this.cols()))},ttest:function(l,c){return c===1?1-r.studentt.cdf(s.abs(this.tscore(l)),this.cols()-1):r.studentt.cdf(-s.abs(this.tscore(l)),this.cols()-1)*2}}),r.extend({anovafscore:function(){var l=o.call(arguments),c,d,h,f,p,m,y,g;if(l.length===1){for(p=new Array(l[0].length),y=0;y<l[0].length;y++)p[y]=l[0][y];l=p}for(d=new Array,y=0;y<l.length;y++)d=d.concat(l[y]);for(h=r.mean(d),c=0,y=0;y<l.length;y++)c=c+l[y].length*s.pow(r.mean(l[y])-h,2);for(c/=l.length-1,m=0,y=0;y<l.length;y++)for(f=r.mean(l[y]),g=0;g<l[y].length;g++)m+=s.pow(l[y][g]-f,2);return m/=d.length-l.length,c/m},anovaftest:function(){var l=o.call(arguments),c,d,h,f;if(i(l[0]))return 1-r.centralF.cdf(l[0],l[1],l[2]);var p=r.anovafscore(l);for(c=l.length-1,h=0,f=0;f<l.length;f++)h=h+l[f].length;return d=h-c-1,1-r.centralF.cdf(p,c,d)},ftest:function(l,c,d){return 1-r.centralF.cdf(l,c,d)}}),r.extend(r.fn,{anovafscore:function(){return r.anovafscore(this.toArray())},anovaftes:function(){var l=0,c;for(c=0;c<this.length;c++)l=l+this[c].length;return r.ftest(this.anovafscore(),this.length-1,l-this.length)}}),r.extend({qscore:function(){var l=o.call(arguments),c,d,h,f,p;return i(l[0])?(c=l[0],d=l[1],h=l[2],f=l[3],p=l[4]):(c=r.mean(l[0]),d=r.mean(l[1]),h=l[0].length,f=l[1].length,p=l[2]),s.abs(c-d)/(p*s.sqrt((1/h+1/f)/2))},qtest:function(){var l=o.call(arguments),c;l.length===3?(c=l[0],l=l.slice(1)):l.length===7?(c=r.qscore(l[0],l[1],l[2],l[3],l[4]),l=l.slice(5)):(c=r.qscore(l[0],l[1],l[2]),l=l.slice(3));var d=l[0],h=l[1];return 1-r.tukey.cdf(c,h,d-h)},tukeyhsd:function(l){for(var c=r.pooledstdev(l),d=l.map(function(g){return r.mean(g)}),h=l.reduce(function(g,v){return g+v.length},0),f=[],p=0;p<l.length;++p)for(var m=p+1;m<l.length;++m){var y=r.qtest(d[p],d[m],l[p].length,l[m].length,c,h,l.length);f.push([[p,m],y])}return f}}),r.extend({normalci:function(){var l=o.call(arguments),c=new Array(2),d;return l.length===4?d=s.abs(r.normal.inv(l[1]/2,0,1)*l[2]/s.sqrt(l[3])):d=s.abs(r.normal.inv(l[1]/2,0,1)*r.stdev(l[2])/s.sqrt(l[2].length)),c[0]=l[0]-d,c[1]=l[0]+d,c},tci:function(){var l=o.call(arguments),c=new Array(2),d;return l.length===4?d=s.abs(r.studentt.inv(l[1]/2,l[3]-1)*l[2]/s.sqrt(l[3])):d=s.abs(r.studentt.inv(l[1]/2,l[2].length-1)*r.stdev(l[2],!0)/s.sqrt(l[2].length)),c[0]=l[0]-d,c[1]=l[0]+d,c},significant:function(l,c){return l<c}}),r.extend(r.fn,{normalci:function(l,c){return r.normalci(l,c,this.toArray())},tci:function(l,c){return r.tci(l,c,this.toArray())}});function u(l,c,d,h){if(l>1||d>1||l<=0||d<=0)throw new Error("Proportions should be greater than 0 and less than 1");var f=(l*c+d*h)/(c+h),p=s.sqrt(f*(1-f)*(1/c+1/h));return(l-d)/p}r.extend(r.fn,{oneSidedDifferenceOfProportions:function(l,c,d,h){var f=u(l,c,d,h);return r.ztest(f,1)},twoSidedDifferenceOfProportions:function(l,c,d,h){var f=u(l,c,d,h);return r.ztest(f,2)}})}(n,Math),n.models=function(){function r(u){var l=u[0].length,c=n.arange(l).map(function(d){var h=n.arange(l).filter(function(f){return f!==d});return s(n.col(u,d).map(function(f){return f[0]}),n.col(u,h))});return c}function s(u,l){var c=u.length,d=l[0].length-1,h=c-d-1,f=n.lstsq(l,u),p=n.multiply(l,f.map(function(w){return[w]})).map(function(w){return w[0]}),m=n.subtract(u,p),y=n.mean(u),g=n.sum(p.map(function(w){return Math.pow(w-y,2)})),v=n.sum(u.map(function(w,k){return Math.pow(w-p[k],2)})),x=g+v,b=g/x;return{exog:l,endog:u,nobs:c,df_model:d,df_resid:h,coef:f,predict:p,resid:m,ybar:y,SST:x,SSE:g,SSR:v,R2:b}}function o(u){var l=r(u.exog),c=Math.sqrt(u.SSR/u.df_resid),d=l.map(function(y){var g=y.SST,v=y.R2;return c/Math.sqrt(g*(1-v))}),h=u.coef.map(function(y,g){return(y-0)/d[g]}),f=h.map(function(y){var g=n.studentt.cdf(y,u.df_resid);return(g>.5?1-g:g)*2}),p=n.studentt.inv(.975,u.df_resid),m=u.coef.map(function(y,g){var v=p*d[g];return[y-v,y+v]});return{se:d,t:h,p:f,sigmaHat:c,interval95:m}}function i(u){var l=u.R2/u.df_model/((1-u.R2)/u.df_resid),c=function(h,f,p){return n.beta.cdf(h/(p/f+h),f/2,p/2)},d=1-c(l,u.df_model,u.df_resid);return{F_statistic:l,pvalue:d}}function a(u,l){var c=s(u,l),d=o(c),h=i(c),f=1-(1-c.R2)*((c.nobs-1)/c.df_resid);return c.t=d,c.f=h,c.adjust_R2=f,c}return{ols:a}}(),n.extend({buildxmatrix:function(){for(var r=new Array(arguments.length),s=0;s<arguments.length;s++){var o=[1];r[s]=o.concat(arguments[s])}return n(r)},builddxmatrix:function(){for(var r=new Array(arguments[0].length),s=0;s<arguments[0].length;s++){var o=[1];r[s]=o.concat(arguments[0][s])}return n(r)},buildjxmatrix:function(r){for(var s=new Array(r.length),o=0;o<r.length;o++)s[o]=r[o];return n.builddxmatrix(s)},buildymatrix:function(r){return n(r).transpose()},buildjymatrix:function(r){return r.transpose()},matrixmult:function(r,s){var o,i,a,u,l;if(r.cols()==s.rows()){if(s.rows()>1){for(u=[],o=0;o<r.rows();o++)for(u[o]=[],i=0;i<s.cols();i++){for(l=0,a=0;a<r.cols();a++)l+=r.toArray()[o][a]*s.toArray()[a][i];u[o][i]=l}return n(u)}for(u=[],o=0;o<r.rows();o++)for(u[o]=[],i=0;i<s.cols();i++){for(l=0,a=0;a<r.cols();a++)l+=r.toArray()[o][a]*s.toArray()[i];u[o][i]=l}return n(u)}},regress:function(r,s){var o=n.xtranspxinv(r),i=r.transpose(),a=n.matrixmult(n(o),i);return n.matrixmult(a,s)},regresst:function(r,s,o){var i=n.regress(r,s),a={};a.anova={};var u=n.jMatYBar(r,i);a.yBar=u;var l=s.mean();a.anova.residuals=n.residuals(s,u),a.anova.ssr=n.ssr(u,l),a.anova.msr=a.anova.ssr/(r[0].length-1),a.anova.sse=n.sse(s,u),a.anova.mse=a.anova.sse/(s.length-(r[0].length-1)-1),a.anova.sst=n.sst(s,l),a.anova.mst=a.anova.sst/(s.length-1),a.anova.r2=1-a.anova.sse/a.anova.sst,a.anova.r2<0&&(a.anova.r2=0),a.anova.fratio=a.anova.msr/a.anova.mse,a.anova.pvalue=n.anovaftest(a.anova.fratio,r[0].length-1,s.length-(r[0].length-1)-1),a.anova.rmse=Math.sqrt(a.anova.mse),a.anova.r2adj=1-a.anova.mse/a.anova.mst,a.anova.r2adj<0&&(a.anova.r2adj=0),a.stats=new Array(r[0].length);for(var c=n.xtranspxinv(r),d,h,f,p=0;p<i.length;p++)d=Math.sqrt(a.anova.mse*Math.abs(c[p][p])),h=Math.abs(i[p]/d),f=n.ttest(h,s.length-r[0].length-1,o),a.stats[p]=[i[p],d,h,f];return a.regress=i,a},xtranspx:function(r){return n.matrixmult(r.transpose(),r)},xtranspxinv:function(r){var s=n.matrixmult(r.transpose(),r),o=n.inv(s);return o},jMatYBar:function(r,s){var o=n.matrixmult(r,s);return new n(o)},residuals:function(r,s){return n.matrixsubtract(r,s)},ssr:function(r,s){for(var o=0,i=0;i<r.length;i++)o+=Math.pow(r[i]-s,2);return o},sse:function(r,s){for(var o=0,i=0;i<r.length;i++)o+=Math.pow(r[i]-s[i],2);return o},sst:function(r,s){for(var o=0,i=0;i<r.length;i++)o+=Math.pow(r[i]-s,2);return o},matrixsubtract:function(r,s){for(var o=new Array(r.length),i=0;i<r.length;i++){o[i]=new Array(r[i].length);for(var a=0;a<r[i].length;a++)o[i][a]=r[i][a]-s[i][a]}return n(o)}}),n.jStat=n,n})})(gW);var SMe=gW.exports;const kO=.001;function kMe(t){const e=t.reduce((n,r)=>n+r,0);return e>0?t.map(n=>n/e):t.slice()}function CMe(t){if(t.length===0)return[];const e=Object.keys(t[0].scores);t.forEach((n,r)=>{const s={};let o=-1/0;e.forEach(i=>{for(let a=r+1;a<t.length;++a){const u=(n.scores[i]||0)-(t[a].scores[i]||0),l=(s[i]||0)+u;s[i]=l,o=Math.max(o,l)}}),e.forEach(i=>{const a=s[i]||0;s[i]=o>0?Math.max(0,a)/o:0}),n.significance=s})}function $Me(t,e){var n,r,s,o,i,a,u,l,c,d;return{taste:e!=null&&e.noTasteScore?0:(((n=e==null?void 0:e.weights)==null?void 0:n.taste)||2)*t,coengagement:e!=null&&e.noCoengagementScore?0:(((r=e==null?void 0:e.weights)==null?void 0:r.coengagement)||1)*t,viewing:e!=null&&e.noViewingScore?0:(((s=e==null?void 0:e.weights)==null?void 0:s.viewing)||1.2)*t,sharing:e!=null&&e.noSharingScore?0:(((o=e==null?void 0:e.weights)==null?void 0:o.sharing)||1)*t,commenting:e!=null&&e.noCommentingScore?0:(((i=e==null?void 0:e.weights)==null?void 0:i.commenting)||1.2)*t,popularity:e!=null&&e.noPopularity?0:(((a=e==null?void 0:e.weights)==null?void 0:a.popularity)||1)*t,following:e!=null&&e.noFollowingScore?0:(((u=e==null?void 0:e.weights)==null?void 0:u.following)||1.2)*t,reaction:e!=null&&e.noReactionScore?0:(((l=e==null?void 0:e.weights)==null?void 0:l.reaction)||1)*t,lastSeen:e!=null&&e.noLastSeenScore?0:((c=e==null?void 0:e.weights)==null?void 0:c.lastSeen)||3,random:0,lastEngaged:e!=null&&e.noLastEngagedScore?0:((d=e==null?void 0:e.weights)==null?void 0:d.lastEngaged)||5}}function yW(t,e,n,r,s,o){const i=wMe(t,e,n,r,s,o),a=i.length>0?Object.keys(i[0]):[],u=i.map(f=>Object.values(f)),l=$Me(o!=null&&o.coldStart?1-(s.cold||0):1,o),c=kMe(a.map(f=>{const p=l[f];return p===void 0?1:p})),d=u.map(f=>f.map((p,m)=>(p||0)*(c[m]||0))),h=d.map(f=>f.reduce((p,m,y)=>({...p,[a[y]]:m}),{}));return r.map((f,p)=>({...f,features:i[p],scores:h[p],significance:{},score:d[p].reduce((m,y)=>m+y,0),rank:0,diversity:0}))}function IMe(t,e,n,r,s,o){const i=yW(t,e,n,r,s,o);return i.forEach(a=>{a.score=(1-kO)*a.score+kO*Math.random()}),i.sort((a,u)=>u.score-a.score),i.forEach((a,u)=>{a.rank=u}),o!=null&&o.excludeSignificance||CMe(i),i}const EMe=.5,TMe=1;function _Me(t,e,n,r,s,o,i){const a=yW(t,e,n,r,s,i);a.sort((c,d)=>d.score-c.score);const u=new Map;for(let c=0;c<a.length;++c){const d=a[c];c===0||d.score<a[c-1].score?d.rank=c:(d.rank=a[c-1].rank,u.set(d.rank,(u.get(d.rank)||1)+1))}if((i==null?void 0:i.selection)==="distribution")a.forEach(c=>{const d=u.get(c.rank)||1;c.rank=(c.rank-.5)/a.length;const h=1-SMe.beta.cdf(c.rank,EMe,TMe);c.probability=(c.candidateProbability||0)*h*(1/d)});else{const c=a.map(d=>1-(d.candidateProbability||0)*(1/o));for(let d=1;d<c.length;++d){const h=c[d],f=c[d-1];a[d].rank!==a[d-1].rank?c[d]=f*h:c[d]=f}a.forEach((d,h)=>{const f=u.get(d.rank)||1,p=h>=1?c[h-1]:1,m=(d.candidateProbability||0)*p*(1/f);d.probability=1-Math.pow(1-m,o),d.rank=d.rank/a.length})}const l=a.reduce((c,d)=>c+(d.probability||0),0);return a.forEach(c=>{c.probability=(c.probability||0)/l}),a}var NMe=Object.defineProperty,RMe=(t,e,n)=>e in t?NMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dh=(t,e,n)=>RMe(t,typeof e!="symbol"?e+"":e,n);const AMe=10;class DMe{constructor(e,n,r,s){Dh(this,"broker"),Dh(this,"graph"),Dh(this,"content"),Dh(this,"profiler"),Dh(this,"store",new Map),this.broker=e,this.graph=n,this.content=r,this.profiler=s}generateNewRecommendations(e,n,r,s=!0){const o=this.profiler.getUserProfile(e),i=pMe(this.graph,this.content,this.profiler,o,n*AMe,r),a=IMe(this.graph,this.content,e,i,o,r),u=this.store.get(e)||[];if((r==null?void 0:r.selection)==="rank"){const l=a.slice(0,n);this.store.set(e,[...l,...u]),s&&this.broker.emit(`recom-${e}`,l)}else{const l=tb(a,n,c=>c.contentId);l.sort((c,d)=>d.score-c.score),l.forEach((c,d)=>{c.diversity=Math.abs(d-c.rank)/a.length}),this.store.set(e,[...l,...u]),s&&this.broker.emit(`recom-${e}`,l)}}getRecommendations(e,n,r){const s=this.store.get(e)||[];return s.length<n?(this.generateNewRecommendations(e,n,r,!1),(this.store.get(e)||[]).slice(0,n)):s.slice(0,n)}appendRecommendations(e,n){const r=this.store.get(e)||[];this.store.set(e,[...n,...r]),this.broker.emit(`recom-${e}`,n)}removeRecommendations(e){this.store.delete(e)}getCandidateProbability(e,n,r,s){return fMe(this.graph,this.content,this.profiler,e,n,r,s)}getScoringProbabilities(e,n,r,s,o){return _Me(this.graph,this.content,e,n,r,s,o)}}let Ow;function OMe(){return Ow||(Ow=new DMe(Md(),kv(),Jx(),eb())),Ow}var PMe=Object.defineProperty,LMe=(t,e,n)=>e in t?PMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,to=(t,e,n)=>LMe(t,typeof e!="symbol"?e+"":e,n);function FMe(t,e){let n=Date.now();return e.forEach(r=>{var s;const o=t.getActionLog(r);n=Math.min(n,((s=o[0])==null?void 0:s.timestamp)||n)}),n}function MMe(t,e){let n=0;return e.forEach(r=>{var s;const o=t.getActionLog(r);n=Math.max(n,((s=o[o.length-1])==null?void 0:s.timestamp)||n)}),n}class zMe{constructor(e,n,r){to(this,"broker"),to(this,"content"),to(this,"profiler"),to(this,"actionLog"),to(this,"startTime",-1),to(this,"endTime",-1),to(this,"currentTime",-1),to(this,"indexes",new Map),to(this,"interval",-1),to(this,"speed",1),to(this,"playing",!1),to(this,"paused",!1),this.profiler=e,this.actionLog=r,this.content=n,this.broker=e.broker}restart(){const e=this.profiler.graph.getNodesByType("user"),n=new Map;e.forEach(r=>{const s=this.profiler.getUserData(r);s&&n.set(r,s)}),this.profiler.graph.reset(),this.profiler.reset(),this.content.rebuildContent(),e.forEach(r=>{var s,o;((s=this.actionLog.getActionLog(r))==null?void 0:s.length)>0&&this.profiler.graph.addNode("user",r,{name:(o=n.get(r))==null?void 0:o.name})}),this.startTime=FMe(this.actionLog,e),this.endTime=MMe(this.actionLog,e),this.indexes.clear(),this.currentTime=this.startTime}terminate(){this.interval>=0&&(clearTimeout(this.interval),this.interval=-1),this.playing=!1}step(){this.paused||!this.playing||(this.currentTime+=this.speed*200,this.profiler.graph.getNodesByType("user").forEach(e=>{const n=this.indexes.get(e)||0,r=this.replayUserEntries(e,n,this.currentTime);this.indexes.set(e,r)}),this.broker.emit("replaystep",this.currentTime),this.currentTime>this.endTime&&(this.stop(),this.broker.emit("replayfinished")))}run(){this.terminate(),this.interval=window.setInterval(()=>{this.step()},200),this.playing=!0}replayEntry(e,n){this.actionLog.processLogEntry(n,e)}replayUserEntries(e,n,r){const s=this.actionLog.getActionLog(e);let o=0;for(let i=n;i<s.length;++i)if(s[i].timestamp<=r)this.replayEntry(e,s[i]),++o;else return i;return o>0&&this.profiler.clearProfile(e),s.length}start(){this.paused=!1,this.restart(),this.run(),this.broker.emit("replaystart")}pause(){this.paused=!this.paused,this.paused?this.broker.emit("replaypaused"):this.broker.emit("replayunpaused")}stop(){this.terminate(),this.broker.emit("replaystop")}isPaused(){return this.playing&&this.paused}isPlaying(){return this.playing}getTime(){return this.currentTime}getStartTime(){return this.startTime}getPosition(){return this.playing&&this.currentTime>=0&&this.startTime>=0?(this.currentTime-this.startTime)/(this.endTime-this.startTime):0}}let Pw;function BMe(){return Pw||(Pw=new zMe(eb(),Jx(),Sz())),Pw}var VMe=Object.defineProperty,UMe=(t,e,n)=>e in t?VMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gc=(t,e,n)=>UMe(t,typeof e!="symbol"?e+"":e,n);class WMe{constructor(e){gc(this,"k"),gc(this,"maxDistance"),gc(this,"maxClusters"),gc(this,"minClusterSize"),gc(this,"clusters",[]),gc(this,"indexMap",new Map),this.k=e.k||2,this.maxClusters=e.maxClusters||1e4,this.maxDistance=e.maxDistance||1,this.minClusterSize=e.minClusterSize||1e4}createFeatureVector(e){const n=this.indexMap.get(e);if(n===void 0)throw new Error("invalid_node");return this.clusters.filter(r=>r.active).map(r=>r.members.findIndex(s=>s===n)===-1?0:1-1/r.members.length)}createFeatureVectors(){const e=this.clusters.filter(n=>n.active);return this.clusters.map((n,r)=>mf(e.map(s=>1/(s.distances[r]+1))))}calculate(e){this.clusters=e.map((o,i)=>({members:[i],active:!0,distances:e.map(a=>1-Cv(a.embedding,e[i].embedding))})),e.forEach((o,i)=>{this.indexMap.set(o.id,i)});const n={d:0,a:-1,b:-1};if(e.length>0){const o=Qde(e[0].embedding);Math.abs(o-1)>Number.EPSILON*10&&console.error("Embeddings are not normalised")}let r=this.clusters.length,s=1;for(;r>this.maxClusters||r>this.k&&n.d<=this.maxDistance&&s<this.minClusterSize;){n.d=2,s=this.clusters.length;for(let i=0;i<this.clusters.length;++i)if(this.clusters[i].active!==!1){s=Math.min(s,this.clusters[i].members.length);for(let a=i+1;a<this.clusters.length;++a){if(this.clusters[a].active===!1)continue;const u=this.clusters[i].distances[a];u<n.d&&(n.d=u,n.a=i,n.b=a)}}this.clusters[n.a].members.push(...this.clusters[n.b].members),this.clusters[n.b].active=!1;const o=this.clusters[n.a].members.map(i=>e[i].embedding);this.clusters.forEach((i,a)=>{if(i.active){const u=nhe(i.members.map(l=>e[l].embedding),o);i.distances[n.a]=u,this.clusters[n.a].distances[a]=u}}),--r}this.clusters.forEach(o=>{if(o.active){let i=0,a=0;o.members.forEach(u=>{const l=(o.distances[u]+1)/2;i+=l*l,a+=l*l*u}),o.centralMember=i>0?a/i:0}})}getClusters(){const e=this.clusters.filter(n=>n.active);return e.sort((n,r)=>(n.centralMember||0)-(r.centralMember||0)),e.map(n=>n.members)}}function jMe(t,{k:e=2,maxDistance:n=1,minClusterSize:r=1e3}){const s=new WMe({k:e,maxDistance:n,minClusterSize:r});return s.calculate(t),s.getClusters()}function GMe(t,e,n,r){const s=e.getUserProfile(n),o=e.getSimilarUsers(s.embeddings.taste,r);return o.forEach(i=>{i.weight>0&&t.addEdge("similar",n,i.id,i.weight)}),o}function HMe(t,e,n){let r=-1,s;return[(...o)=>{const i=!s;if(s=o,!(r>=0)){if(n&&o&&i){t(...s);return}r=window.setTimeout(()=>{r=-1,t(...s)},e)}},()=>{r>=0&&clearTimeout(r)}]}var vW={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new s(c,d||u,h),p=n?n+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],f]:u._events[p].push(f):(u._events[p]=f,u._eventsCount++),u}function i(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,d;if(this._eventsCount===0)return l;for(d in c=this._events)e.call(c,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=n?n+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var c=n?n+l:l,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,c,d,h,f,p){var m=n?n+l:l;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,v,x;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,d),!0;case 4:return y.fn.call(y.context,c,d,h),!0;case 5:return y.fn.call(y.context,c,d,h,f),!0;case 6:return y.fn.call(y.context,c,d,h,f,p),!0}for(x=1,v=new Array(g-1);x<g;x++)v[x-1]=arguments[x];y.fn.apply(y.context,v)}else{var b=y.length,w;for(x=0;x<b;x++)switch(y[x].once&&this.removeListener(l,y[x].fn,void 0,!0),g){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,c);break;case 3:y[x].fn.call(y[x].context,c,d);break;case 4:y[x].fn.call(y[x].context,c,d,h);break;default:if(!v)for(w=1,v=new Array(g-1);w<g;w++)v[w-1]=arguments[w];y[x].fn.apply(y[x].context,v)}}return!0},a.prototype.on=function(l,c,d){return o(this,l,c,d,!1)},a.prototype.once=function(l,c,d){return o(this,l,c,d,!0)},a.prototype.removeListener=function(l,c,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!c)return i(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!h||p.once)&&(!d||p.context===d)&&i(this,f);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==c||h&&!p[m].once||d&&p[m].context!==d)&&y.push(p[m]);y.length?this._events[f]=y.length===1?y[0]:y:i(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&i(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(vW);var KMe=vW.exports;const qMe=Ed(KMe);function XMe(t,e,n){const r=GMe(t.graph,t,e);n.set(e,r.filter(s=>s.weight>0&&s.id!==e))}function YMe(t,e){try{return t.getUserProfile(e)}catch{return null}}class ZMe extends qMe{constructor(n){super();Fi(this,"profiler");Fi(this,"debouncer");Fi(this,"users",[]);Fi(this,"similar",new Map);Fi(this,"clusters",new Map);Fi(this,"k",0);Fi(this,"availableLabels",new Set);this.profiler=n,this.debouncer=HMe(()=>{this.update()},500),this.profiler.broker.on("profile",()=>{this.debouncer[0]()}),this.update()}reset(){this.clusters.clear(),this.users=[],this.similar.clear(),this.update()}clusterUsers(){const n=new Map,r=this.users.map(u=>{var l;return{id:u,embedding:((l=YMe(this.profiler,u))==null?void 0:l.embeddings.taste)||[]}}).filter(u=>u.embedding.length>0),s=jMe(r,{k:this.k});s.sort((u,l)=>l.length-u.length);const o=new Set;this.clusters.forEach(u=>{this.availableLabels.add(u.label)});const i=s.map(u=>{const l=new Map;u.forEach(d=>{const h=r[d].id,f=this.clusters.get(h);f&&l.set(f.label,(l.get(f.label)||0)+1)});const c=Array.from(l);return c.sort((d,h)=>h[1]-d[1]),c.forEach(d=>{l.set(d[0],(l.get(d[0])||0)+1)}),{labels:c,cluster:u}});i.sort((u,l)=>{var c,d;return(((c=l.labels[0])==null?void 0:c[1])||0)-(((d=u.labels[0])==null?void 0:d[1])||0)});const a=[];return i.forEach((u,l)=>{let c=null;for(let d=0;d<u.labels.length;++d)if(!o.has(u.labels[d][0])){c=u.labels[d][0];break}if(!c){a.push(l);return}o.add(c),this.availableLabels.delete(c),u.cluster.forEach(d=>{const h=r[d].id;n.set(h,{label:c,weight:1})})}),a.forEach(u=>{const l=i[u],c=this.availableLabels.size>0?Array.from(this.availableLabels)[0]:Hoe(5);this.availableLabels.delete(c),l.cluster.forEach(d=>{const h=r[d].id;n.set(h,{label:c,weight:1})})}),n}update(){this.users=this.profiler.graph.getNodesByType("user"),this.users.forEach(n=>{XMe(this.profiler,n,this.similar)}),this.k>0?this.clusters=this.clusterUsers():this.clusters.clear(),this.emit("updated")}setK(n){this.k=Math.max(0,Math.min(n,20)),this.update()}getUsers(){return this.users}getSimilar(){return this.similar}getClusters(){return this.clusters}}let Lw;function QMe(){return Lw||(Lw=new ZMe(eb())),Lw}const xW={broker:Md(),graph:kv(),content:Jx(),profiler:eb(),recommender:OMe(),actionLog:Sz(),replay:BMe(),similarity:QMe()},bW=K.createContext(xW),JMe=bW.Provider;function Xu(){return K.useContext(bW)}function Fze(){return Xu().graph}function Mze(){return Xu().content}function zze(){return Xu().profiler}function Bze(){return Xu().recommender}function Vze(){return Xu().actionLog}function Uze(){return Xu().similarity}function eze(){return Xu().broker}function Wze(t,e,n){const[r,s]=K.useReducer(i=>i+1,0),o=eze();return K.useEffect(()=>{const i=()=>{s()};return Array.isArray(n)?(n.forEach(a=>o.on(a,i)),()=>{n.forEach(a=>o.off(a,i))}):(o.on(n,i),()=>{o.off(n,i)})},[o,n]),K.useMemo(t,[r,...e])}function tze(){const t=dL();if(t.status===404)return be.jsx("section",{className:"errorView",children:be.jsx("h1",{children:"Page not found"})});const n=JSON.stringify(t)==="{}"&&"toString"in t?t.toString():"Unknown";return be.jsxs("section",{className:"errorView",children:[be.jsx("h1",{children:"Something went wrong"}),be.jsxs("p",{children:["Please report this issue to"," ",be.jsx("a",{href:"https://github.com/knicos/genai-somekone/issues",target:"_blank",rel:"noreferrer",children:"our project on github"})," ","if you have time, including the information below. Refresh the page to try again."]}),be.jsx("p",{className:"code",children:n})]})}const nze=U7(zS(be.jsxs(wt,{path:"/",ErrorBoundary:tze,children:[be.jsx(wt,{index:!0,element:be.jsx(D7,{replace:!0,to:"/start"})}),be.jsxs(wt,{path:"app/:code",lazy:()=>Ot(()=>import("./Somegram-1571f97c.js"),["assets/Somegram-1571f97c.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css","assets/EnterUsername-087d619a.js","assets/logger-fbaa4ff5.js","assets/configState-6be3aa1d.js","assets/sessionState-6915fb12.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/v4-eb618527.js","assets/useSlot-050d423d.js","assets/Portal-a2b43acb.js","assets/Close-223ffcde.js","assets/Modal-2fc077e7.js","assets/TextField-43fc95d4.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/MenuItem-97c66a8d.js","assets/EnterUsername-3ced075a.css","assets/ErrorDialog-dea2f05b.js","assets/errorState-b147a579.js","assets/Close-50ef3ec2.js","assets/DialogContent-d100c3e0.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/ErrorDialog-07ed4027.css","assets/random-67c94df7.js","assets/Privacy-0f2b0f3e.js","assets/Privacy-271c85f5.css","assets/BlockDialog-2f32a60e.js","assets/BlockDialog-e0c60bda.css","assets/LangSelect-6fc7f25d.js","assets/LangSelect-f43deaa0.css","assets/FeedProtocol-b7352afc.js","assets/peer-d87849a6.js","assets/peer-01e06f03.css","assets/lz-string-35001fa0.js","assets/ConnectionStatus-d4cfcdbc.js","assets/ConnectionStatus-745550f6.css","assets/ContentLoader-dd766616.js","assets/settings-1d1f0ea7.js","assets/menuState-2ff024b1.js","assets/settingsState-c28045a5.js","assets/localiser-c0c9a31b.js","assets/LinearProgress-51654afb.js","assets/ContentLoader-637b0a2c.css","assets/AppNavigation-5d3e2a66.js","assets/Person-411c868c.js","assets/ImageSearch-6df1d0d1.js","assets/Tooltip-875b66b4.js","assets/Popper-912b4204.js"]),children:[be.jsx(wt,{index:!0,loader:()=>wg("feed")}),be.jsx(wt,{path:"feed",lazy:()=>Ot(()=>import("./FeedView-e3354bed.js"),["assets/FeedView-e3354bed.js","assets/Feed-95058eca.js","assets/style.module-950f526a.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/style-19bedad0.css","assets/UserListing-e60983b4.js","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/CheckCircle-b71d1d84.js","assets/colours-9cdd3933.js","assets/content-ab9124ab.js","assets/localiser-c0c9a31b.js","assets/Close-50ef3ec2.js","assets/LangSelect-6fc7f25d.js","assets/LangSelect-f43deaa0.css","assets/configState-6be3aa1d.js","assets/recommender-9b8a9795.js","assets/sessionState-6915fb12.js","assets/Feed-4a1e2741.css","assets/FeedProtocol-b7352afc.js","assets/peer-d87849a6.js","assets/peer-01e06f03.css","assets/logger-fbaa4ff5.js","assets/lz-string-35001fa0.js","assets/ConnectionStatus-d4cfcdbc.js","assets/ConnectionStatus-745550f6.css"])}),be.jsx(wt,{path:"data",lazy:()=>Ot(()=>import("./DataView-414cc4cc.js"),["assets/DataView-414cc4cc.js","assets/DataProfile-29b73b7e.js","assets/DataProfilePure-287e5c3b.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/DataProfilePure-3434b5ab.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/IconButton-02bc1303.js","assets/random-67c94df7.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/useSlot-050d423d.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/configState-6be3aa1d.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css"])}),be.jsx(wt,{path:"post",lazy:()=>Ot(()=>import("./PostView-e0b4f54d.js"),["assets/PostView-e0b4f54d.js","assets/Add-0779dc75.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/profiler-25e786d5.js","assets/Close-50ef3ec2.js","assets/Chip-3c6505fa.js","assets/v4-eb618527.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css","assets/ViewContainer-b8a8e542.js","assets/PostView-5206f0b0.css"])}),be.jsx(wt,{path:"image/:contentId",lazy:()=>Ot(()=>import("./ImageView-5edc5d44.js"),["assets/ImageView-5edc5d44.js","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/content-ab9124ab.js","assets/style.module-950f526a.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/style-19bedad0.css","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/ImageView-f9b82b36.css"])}),be.jsx(wt,{path:"profile",lazy:()=>Ot(()=>import("./ProfileView-ce1e0816.js"),["assets/ProfileView-ce1e0816.js","assets/UserProfile-c3f95e1b.js","assets/UserProfilePure-9f741110.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/localiser-c0c9a31b.js","assets/graphColours-c6ae9e73.js","assets/UserProfilePure-218bf694.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/IconButton-02bc1303.js","assets/random-67c94df7.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/useSlot-050d423d.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/configState-6be3aa1d.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css"])}),be.jsx(wt,{path:"recommendations",lazy:()=>Ot(()=>import("./RecommendationView-946ec290.js"),["assets/RecommendationView-946ec290.js","assets/RecommendationsProfile-bfc2e545.js","assets/ImageSearch-6df1d0d1.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/Graph-d1b46b16.js","assets/events-63b5f19e.js","assets/FileSaver.min-7671c644.js","assets/svgToPNG-975d57d1.js","assets/ProgressDialog-7226fde1.js","assets/DialogContent-d100c3e0.js","assets/Modal-2fc077e7.js","assets/useSlot-050d423d.js","assets/DialogTitle-3bd65ba4.js","assets/LinearProgress-51654afb.js","assets/Graph-e01d59e0.css","assets/Label-2d9d5124.js","assets/Label-5e6feb92.css","assets/profiler-25e786d5.js","assets/localiser-c0c9a31b.js","assets/graphColours-c6ae9e73.js","assets/configState-6be3aa1d.js","assets/debounce-517eeb3c.js","assets/RadioGroup-2c88d32f.js","assets/SwitchBase-b2e27e4d.js","assets/useFormControl-e419a457.js","assets/Close-50ef3ec2.js","assets/ImageGrid-ff60fbdd.js","assets/CheckCircle-b71d1d84.js","assets/content-ab9124ab.js","assets/ImageGrid-02a67af0.css","assets/Refresh-d5d9edd3.js","assets/LocalFireDepartment-2907a69f.js","assets/Spacer-de9dcc41.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/RecommendationsHeatmap-cbbc4619.js","assets/colours-9cdd3933.js","assets/RecommendationsHeatmap-3de65548.css","assets/recommender-9b8a9795.js","assets/RecommendationsProfile-587554ef.css","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css"])}),be.jsx(wt,{path:"share",lazy:()=>Ot(()=>import("./ShareView-945ebd0c.js"),["assets/ShareView-945ebd0c.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css","assets/QRCode-6b059dc5.js","assets/DialogContent-d100c3e0.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/Portal-a2b43acb.js","assets/Modal-2fc077e7.js","assets/IconButton-02bc1303.js","assets/useSlot-050d423d.js","assets/DialogActions-6d630794.js","assets/QRCode-8b453633.css","assets/ViewContainer-b8a8e542.js","assets/codePrefix-7af9e858.js"])}),be.jsx(wt,{path:"public/:userId",lazy:()=>Ot(()=>import("./PublicView-9ce43028.js"),["assets/PublicView-9ce43028.js","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ImageGrid-ff60fbdd.js","assets/CheckCircle-b71d1d84.js","assets/content-ab9124ab.js","assets/ImageGrid-02a67af0.css","assets/profiler-25e786d5.js","assets/graph-01dd06dc.js","assets/PublicView-81a96fe4.css"])})]}),be.jsxs(wt,{path:"print/:code",lazy:()=>Ot(()=>import("./Printing-be151503.js"),["assets/Printing-be151503.js","assets/printState-c2d44156.js","assets/printState-2eec2fee.css"]),children:[be.jsx(wt,{index:!0,loader:()=>wg("data")}),be.jsx(wt,{path:"data",lazy:()=>Ot(()=>import("./PrintData-99e96776.js"),["assets/PrintData-99e96776.js","assets/DataProfilePure-287e5c3b.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/DataProfilePure-3434b5ab.css","assets/printState-c2d44156.js","assets/printState-2eec2fee.css"])}),be.jsx(wt,{path:"profile",lazy:()=>Ot(()=>import("./PrintProfile-e9bda1a6.js"),["assets/PrintProfile-e9bda1a6.js","assets/printState-c2d44156.js","assets/printState-2eec2fee.css","assets/UserProfilePure-9f741110.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/localiser-c0c9a31b.js","assets/graphColours-c6ae9e73.js","assets/UserProfilePure-218bf694.css"])})]}),be.jsxs(wt,{path:"profile/:code",lazy:()=>Ot(()=>import("./ProfileViewer-051ddf67.js"),["assets/ProfileViewer-051ddf67.js","assets/ErrorDialog-dea2f05b.js","assets/errorState-b147a579.js","assets/Close-50ef3ec2.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/DialogContent-d100c3e0.js","assets/Portal-a2b43acb.js","assets/Modal-2fc077e7.js","assets/useSlot-050d423d.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/ErrorDialog-07ed4027.css","assets/random-67c94df7.js","assets/BlockDialog-2f32a60e.js","assets/configState-6be3aa1d.js","assets/BlockDialog-e0c60bda.css","assets/peer-d87849a6.js","assets/peer-01e06f03.css","assets/sessionState-6915fb12.js","assets/logger-fbaa4ff5.js","assets/ContentLoader-dd766616.js","assets/settings-1d1f0ea7.js","assets/menuState-2ff024b1.js","assets/settingsState-c28045a5.js","assets/lz-string-35001fa0.js","assets/localiser-c0c9a31b.js","assets/LinearProgress-51654afb.js","assets/ContentLoader-637b0a2c.css","assets/Person-411c868c.js","assets/ImageSearch-6df1d0d1.js","assets/ProfileViewer-ed13a6c6.css"]),children:[be.jsx(wt,{index:!0,loader:()=>wg("data")}),be.jsx(wt,{path:"data",lazy:()=>Ot(()=>import("./DataView-414cc4cc.js"),["assets/DataView-414cc4cc.js","assets/DataProfile-29b73b7e.js","assets/DataProfilePure-287e5c3b.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/DataProfilePure-3434b5ab.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/IconButton-02bc1303.js","assets/random-67c94df7.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/useSlot-050d423d.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/configState-6be3aa1d.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css"])}),be.jsx(wt,{path:"profile",lazy:()=>Ot(()=>import("./ProfileView-ce1e0816.js"),["assets/ProfileView-ce1e0816.js","assets/UserProfile-c3f95e1b.js","assets/UserProfilePure-9f741110.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/localiser-c0c9a31b.js","assets/graphColours-c6ae9e73.js","assets/UserProfilePure-218bf694.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/IconButton-02bc1303.js","assets/random-67c94df7.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/useSlot-050d423d.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/configState-6be3aa1d.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css"])}),be.jsx(wt,{path:"recommendations",lazy:()=>Ot(()=>import("./RecommendationView-946ec290.js"),["assets/RecommendationView-946ec290.js","assets/RecommendationsProfile-bfc2e545.js","assets/ImageSearch-6df1d0d1.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Portal-a2b43acb.js","assets/useSlotProps-2393cf25.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/Graph-d1b46b16.js","assets/events-63b5f19e.js","assets/FileSaver.min-7671c644.js","assets/svgToPNG-975d57d1.js","assets/ProgressDialog-7226fde1.js","assets/DialogContent-d100c3e0.js","assets/Modal-2fc077e7.js","assets/useSlot-050d423d.js","assets/DialogTitle-3bd65ba4.js","assets/LinearProgress-51654afb.js","assets/Graph-e01d59e0.css","assets/Label-2d9d5124.js","assets/Label-5e6feb92.css","assets/profiler-25e786d5.js","assets/localiser-c0c9a31b.js","assets/graphColours-c6ae9e73.js","assets/configState-6be3aa1d.js","assets/debounce-517eeb3c.js","assets/RadioGroup-2c88d32f.js","assets/SwitchBase-b2e27e4d.js","assets/useFormControl-e419a457.js","assets/Close-50ef3ec2.js","assets/ImageGrid-ff60fbdd.js","assets/CheckCircle-b71d1d84.js","assets/content-ab9124ab.js","assets/ImageGrid-02a67af0.css","assets/Refresh-d5d9edd3.js","assets/LocalFireDepartment-2907a69f.js","assets/Spacer-de9dcc41.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/RecommendationsHeatmap-cbbc4619.js","assets/colours-9cdd3933.js","assets/RecommendationsHeatmap-3de65548.css","assets/recommender-9b8a9795.js","assets/RecommendationsProfile-587554ef.css","assets/ViewContainer-b8a8e542.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css"])})]}),be.jsx(wt,{path:"start",lazy:()=>Ot(()=>import("./Start-45111200.js"),["assets/Start-45111200.js","assets/ErrorDialog-dea2f05b.js","assets/errorState-b147a579.js","assets/Close-50ef3ec2.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/DialogContent-d100c3e0.js","assets/Portal-a2b43acb.js","assets/Modal-2fc077e7.js","assets/useSlot-050d423d.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/ErrorDialog-07ed4027.css","assets/LangSelect-6fc7f25d.js","assets/TextField-43fc95d4.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/LangSelect-f43deaa0.css","assets/Privacy-0f2b0f3e.js","assets/Privacy-271c85f5.css","assets/codePrefix-7af9e858.js","assets/Button-c681e6d6.js","assets/Start-0e792a7b.css"])}),be.jsx(wt,{path:"library",lazy:()=>Ot(()=>import("./Library-07186be4.js"),["assets/Library-07186be4.js","assets/lz-string-35001fa0.js","assets/Privacy-0f2b0f3e.js","assets/Privacy-271c85f5.css","assets/Library-95f015e1.css"])}),be.jsx(wt,{path:"about",element:be.jsx(ode,{})}),be.jsx(wt,{path:"flow/:code",lazy:()=>Ot(()=>import("./Flow-71c2e70f.js"),["assets/Flow-71c2e70f.js","assets/EnterUsername-087d619a.js","assets/logger-fbaa4ff5.js","assets/configState-6be3aa1d.js","assets/sessionState-6915fb12.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/v4-eb618527.js","assets/useSlot-050d423d.js","assets/Portal-a2b43acb.js","assets/Close-223ffcde.js","assets/Modal-2fc077e7.js","assets/TextField-43fc95d4.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/MenuItem-97c66a8d.js","assets/EnterUsername-3ced075a.css","assets/ErrorDialog-dea2f05b.js","assets/errorState-b147a579.js","assets/Close-50ef3ec2.js","assets/DialogContent-d100c3e0.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/ErrorDialog-07ed4027.css","assets/random-67c94df7.js","assets/Privacy-0f2b0f3e.js","assets/Privacy-271c85f5.css","assets/BlockDialog-2f32a60e.js","assets/BlockDialog-e0c60bda.css","assets/LangSelect-6fc7f25d.js","assets/LangSelect-f43deaa0.css","assets/FeedProtocol-b7352afc.js","assets/peer-d87849a6.js","assets/peer-01e06f03.css","assets/lz-string-35001fa0.js","assets/ConnectionStatus-d4cfcdbc.js","assets/ConnectionStatus-745550f6.css","assets/ContentLoader-dd766616.js","assets/settings-1d1f0ea7.js","assets/menuState-2ff024b1.js","assets/settingsState-c28045a5.js","assets/localiser-c0c9a31b.js","assets/LinearProgress-51654afb.js","assets/ContentLoader-637b0a2c.css","assets/Workflow-17e76d21.js","assets/Widget-faef6aca.js","assets/Edit-32806028.js","assets/Widget-eb6588a3.css","assets/DataProfile-29b73b7e.js","assets/DataProfilePure-287e5c3b.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/DataProfilePure-3434b5ab.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/UserProfile-c3f95e1b.js","assets/UserProfilePure-9f741110.js","assets/graphColours-c6ae9e73.js","assets/UserProfilePure-218bf694.css","assets/RecommendationsHeatmap-cbbc4619.js","assets/colours-9cdd3933.js","assets/events-63b5f19e.js","assets/ProgressDialog-7226fde1.js","assets/RecommendationsHeatmap-3de65548.css","assets/Graph-d1b46b16.js","assets/Graph-e01d59e0.css","assets/Label-2d9d5124.js","assets/Label-5e6feb92.css","assets/UserListing-e60983b4.js","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/CheckCircle-b71d1d84.js","assets/links-8de2c7fc.js","assets/Feed-95058eca.js","assets/style.module-950f526a.js","assets/style-19bedad0.css","assets/content-ab9124ab.js","assets/recommender-9b8a9795.js","assets/Feed-4a1e2741.css","assets/Menu-ad377c0c.js","assets/UserDialog-78cd1933.js","assets/I18nextProvider-f367c211.js","assets/Workflow-63eff75d.css","assets/Flow-ac998a5b.css"])}),be.jsxs(wt,{path:"dashboard",lazy:()=>Ot(()=>import("./Dashboard-140357e9.js"),["assets/Dashboard-140357e9.js","assets/lz-string-35001fa0.js","assets/QRCode-6b059dc5.js","assets/DialogContent-d100c3e0.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/Portal-a2b43acb.js","assets/Modal-2fc077e7.js","assets/IconButton-02bc1303.js","assets/useSlot-050d423d.js","assets/DialogActions-6d630794.js","assets/QRCode-8b453633.css","assets/menuState-2ff024b1.js","assets/settingsState-c28045a5.js","assets/codePrefix-7af9e858.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/Settings-ceaef721.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/Popper-912b4204.js","assets/useSlotProps-2393cf25.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/configState-6be3aa1d.js","assets/TextField-43fc95d4.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/debounce-517eeb3c.js","assets/MenuItem-97c66a8d.js","assets/EventManager-36c7dc68.js","assets/PhoneAndroid-c91f5110.js","assets/fileSaver-abb1abfd.js","assets/settings-1d1f0ea7.js","assets/FileSaver.min-7671c644.js","assets/v4-eb618527.js","assets/RecommendationsProfile-bfc2e545.js","assets/ImageSearch-6df1d0d1.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/ScorePie-7f1ae8ea.css","assets/Graph-d1b46b16.js","assets/events-63b5f19e.js","assets/svgToPNG-975d57d1.js","assets/ProgressDialog-7226fde1.js","assets/LinearProgress-51654afb.js","assets/Graph-e01d59e0.css","assets/Label-2d9d5124.js","assets/Label-5e6feb92.css","assets/profiler-25e786d5.js","assets/localiser-c0c9a31b.js","assets/graphColours-c6ae9e73.js","assets/RadioGroup-2c88d32f.js","assets/SwitchBase-b2e27e4d.js","assets/Close-50ef3ec2.js","assets/ImageGrid-ff60fbdd.js","assets/CheckCircle-b71d1d84.js","assets/content-ab9124ab.js","assets/ImageGrid-02a67af0.css","assets/Refresh-d5d9edd3.js","assets/LocalFireDepartment-2907a69f.js","assets/Spacer-de9dcc41.js","assets/IconMenuInline-1e64afd8.js","assets/RecommendationsHeatmap-cbbc4619.js","assets/colours-9cdd3933.js","assets/RecommendationsHeatmap-3de65548.css","assets/recommender-9b8a9795.js","assets/RecommendationsProfile-587554ef.css","assets/Person-411c868c.js","assets/autoUsers-207f202c.js","assets/FormControlLabel-5a6070f0.js","assets/Menu-ad377c0c.js","assets/Button-c681e6d6.js","assets/LangSelect-6fc7f25d.js","assets/LangSelect-f43deaa0.css","assets/Slider-01724717.js","assets/ErrorDialog-dea2f05b.js","assets/errorState-b147a579.js","assets/ErrorDialog-07ed4027.css","assets/IconMenu-6e6ac8e9.js","assets/sessionState-6915fb12.js","assets/peer-d87849a6.js","assets/peer-01e06f03.css","assets/ConnectionStatus-d4cfcdbc.js","assets/ConnectionStatus-745550f6.css","assets/ContentLoader-dd766616.js","assets/ContentLoader-637b0a2c.css","assets/Feed-95058eca.js","assets/style.module-950f526a.js","assets/style-19bedad0.css","assets/UserListing-e60983b4.js","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/Feed-4a1e2741.css","assets/AppNavigation-5d3e2a66.js","assets/uiState-fd35ba7b.js","assets/uiState-aced154d.css","assets/I18nextProvider-f367c211.js","assets/Dashboard-d64cf806.css"]),children:[be.jsx(wt,{index:!0,loader:()=>wg("socialgraph")}),be.jsx(wt,{path:"socialgraph",lazy:()=>Ot(()=>import("./SocialGraph-179197a2.js"),["assets/SocialGraph-179197a2.js","assets/Spacer-de9dcc41.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/Portal-a2b43acb.js","assets/useSlot-050d423d.js","assets/IconButton-02bc1303.js","assets/Popper-912b4204.js","assets/useSlotProps-2393cf25.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenu-6e6ac8e9.js","assets/PhoneAndroid-c91f5110.js","assets/DeleteDialog-657ad9e0.js","assets/settingsState-c28045a5.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Slider-01724717.js","assets/menuState-2ff024b1.js","assets/Feed-95058eca.js","assets/style.module-950f526a.js","assets/TextField-43fc95d4.js","assets/useFormControl-e419a457.js","assets/index-720786c4.js","assets/style-19bedad0.css","assets/UserListing-e60983b4.js","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/CheckCircle-b71d1d84.js","assets/colours-9cdd3933.js","assets/content-ab9124ab.js","assets/localiser-c0c9a31b.js","assets/Close-50ef3ec2.js","assets/LangSelect-6fc7f25d.js","assets/LangSelect-f43deaa0.css","assets/configState-6be3aa1d.js","assets/recommender-9b8a9795.js","assets/sessionState-6915fb12.js","assets/Feed-4a1e2741.css","assets/DataProfile-29b73b7e.js","assets/DataProfilePure-287e5c3b.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Typography-0738e1b3.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/DataProfilePure-3434b5ab.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/random-67c94df7.js","assets/IconMenuInline-1e64afd8.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/UserProfile-c3f95e1b.js","assets/UserProfilePure-9f741110.js","assets/graphColours-c6ae9e73.js","assets/UserProfilePure-218bf694.css","assets/I18nextProvider-f367c211.js","assets/RecommendationsProfile-bfc2e545.js","assets/ImageSearch-6df1d0d1.js","assets/Graph-d1b46b16.js","assets/events-63b5f19e.js","assets/ProgressDialog-7226fde1.js","assets/DialogContent-d100c3e0.js","assets/DialogTitle-3bd65ba4.js","assets/LinearProgress-51654afb.js","assets/Graph-e01d59e0.css","assets/Label-2d9d5124.js","assets/Label-5e6feb92.css","assets/RadioGroup-2c88d32f.js","assets/SwitchBase-b2e27e4d.js","assets/ImageGrid-ff60fbdd.js","assets/ImageGrid-02a67af0.css","assets/Refresh-d5d9edd3.js","assets/LocalFireDepartment-2907a69f.js","assets/RecommendationsHeatmap-cbbc4619.js","assets/RecommendationsHeatmap-3de65548.css","assets/RecommendationsProfile-587554ef.css","assets/DialogActions-6d630794.js","assets/DeleteDialog-97053b42.css","assets/Settings-ceaef721.js","assets/MenuItem-97c66a8d.js","assets/FormControlLabel-5a6070f0.js","assets/Person-411c868c.js","assets/links-8de2c7fc.js"])}),be.jsx(wt,{path:"contentgraph",lazy:()=>Ot(()=>import("./ContentGraph-f97b5c63.js"),["assets/ContentGraph-f97b5c63.js","assets/Graph-d1b46b16.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/events-63b5f19e.js","assets/FileSaver.min-7671c644.js","assets/svgToPNG-975d57d1.js","assets/ProgressDialog-7226fde1.js","assets/DialogContent-d100c3e0.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/Portal-a2b43acb.js","assets/Modal-2fc077e7.js","assets/IconButton-02bc1303.js","assets/useSlot-050d423d.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/LinearProgress-51654afb.js","assets/Graph-e01d59e0.css","assets/content-ab9124ab.js","assets/settingsState-c28045a5.js","assets/graph-01dd06dc.js","assets/ContentGraph-b08948ad.css"])}),be.jsx(wt,{path:"heatmaps",lazy:()=>Ot(()=>import("./HeatmapCompare-151e3fb4.js"),["assets/HeatmapCompare-151e3fb4.js","assets/Spacer-de9dcc41.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/Portal-a2b43acb.js","assets/useSlot-050d423d.js","assets/IconButton-02bc1303.js","assets/Popper-912b4204.js","assets/useSlotProps-2393cf25.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenu-6e6ac8e9.js","assets/LocalFireDepartment-2907a69f.js","assets/Refresh-d5d9edd3.js","assets/Download-633f4aec.js","assets/events-63b5f19e.js","assets/ImageSearch-6df1d0d1.js","assets/autoUsers-207f202c.js","assets/settingsState-c28045a5.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Slider-01724717.js","assets/UserDialog-78cd1933.js","assets/UserListing-e60983b4.js","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/CheckCircle-b71d1d84.js","assets/colours-9cdd3933.js","assets/Close-50ef3ec2.js","assets/DialogContent-d100c3e0.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/RecommendationsHeatmap-cbbc4619.js","assets/configState-6be3aa1d.js","assets/svgToPNG-975d57d1.js","assets/FileSaver.min-7671c644.js","assets/ProgressDialog-7226fde1.js","assets/LinearProgress-51654afb.js","assets/profiler-25e786d5.js","assets/RecommendationsHeatmap-3de65548.css","assets/HeatmapCompare-da962087.css"])}),be.jsx(wt,{path:"actionlog",lazy:()=>Ot(()=>import("./LogTable-162e22d4.js"),["assets/LogTable-162e22d4.js","assets/TableToolbar-006034e4.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/DataGrid-d15b9d8f.js","assets/EventManager-36c7dc68.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/IconButton-02bc1303.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/MenuItem-97c66a8d.js","assets/Typography-0738e1b3.js","assets/Close-223ffcde.js","assets/Popper-912b4204.js","assets/Chip-3c6505fa.js","assets/FormControlLabel-5a6070f0.js","assets/SwitchBase-b2e27e4d.js","assets/Button-c681e6d6.js","assets/InputAdornment-0277bb49.js","assets/Tooltip-875b66b4.js","assets/LinearProgress-51654afb.js","assets/useThemeProps-e50455dd.js","assets/TableToolbar-f9cb846d.css","assets/events-63b5f19e.js"])}),be.jsx(wt,{path:"topicgraph",lazy:()=>Ot(()=>import("./TopicGraph-353e4fff.js"),["assets/TopicGraph-353e4fff.js","assets/Graph-d1b46b16.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/events-63b5f19e.js","assets/FileSaver.min-7671c644.js","assets/svgToPNG-975d57d1.js","assets/ProgressDialog-7226fde1.js","assets/DialogContent-d100c3e0.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/Portal-a2b43acb.js","assets/Modal-2fc077e7.js","assets/IconButton-02bc1303.js","assets/useSlot-050d423d.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/index-720786c4.js","assets/LinearProgress-51654afb.js","assets/Graph-e01d59e0.css","assets/settingsState-c28045a5.js","assets/graph-01dd06dc.js","assets/TopicGraph-e259df0a.css"])}),be.jsx(wt,{path:"userstats",lazy:()=>Ot(()=>import("./UserTable-32ac17a9.js"),["assets/UserTable-32ac17a9.js","assets/TableToolbar-006034e4.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/DataGrid-d15b9d8f.js","assets/EventManager-36c7dc68.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/IconButton-02bc1303.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/MenuItem-97c66a8d.js","assets/Typography-0738e1b3.js","assets/Close-223ffcde.js","assets/Popper-912b4204.js","assets/Chip-3c6505fa.js","assets/FormControlLabel-5a6070f0.js","assets/SwitchBase-b2e27e4d.js","assets/Button-c681e6d6.js","assets/InputAdornment-0277bb49.js","assets/Tooltip-875b66b4.js","assets/LinearProgress-51654afb.js","assets/useThemeProps-e50455dd.js","assets/TableToolbar-f9cb846d.css","assets/events-63b5f19e.js"])}),be.jsx(wt,{path:"usergrid",lazy:()=>Ot(()=>import("./UserGrid-b7e4037c.js"),["assets/UserGrid-b7e4037c.js","assets/DeleteDialog-657ad9e0.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/Portal-a2b43acb.js","assets/useSlot-050d423d.js","assets/Popper-912b4204.js","assets/useSlotProps-2393cf25.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/settingsState-c28045a5.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Slider-01724717.js","assets/menuState-2ff024b1.js","assets/Feed-95058eca.js","assets/style.module-950f526a.js","assets/TextField-43fc95d4.js","assets/useFormControl-e419a457.js","assets/index-720786c4.js","assets/style-19bedad0.css","assets/UserListing-e60983b4.js","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/CheckCircle-b71d1d84.js","assets/colours-9cdd3933.js","assets/content-ab9124ab.js","assets/localiser-c0c9a31b.js","assets/Close-50ef3ec2.js","assets/LangSelect-6fc7f25d.js","assets/LangSelect-f43deaa0.css","assets/configState-6be3aa1d.js","assets/recommender-9b8a9795.js","assets/sessionState-6915fb12.js","assets/Feed-4a1e2741.css","assets/DataProfile-29b73b7e.js","assets/DataProfilePure-287e5c3b.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Typography-0738e1b3.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/DataProfilePure-3434b5ab.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/random-67c94df7.js","assets/IconMenuInline-1e64afd8.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/UserProfile-c3f95e1b.js","assets/UserProfilePure-9f741110.js","assets/graphColours-c6ae9e73.js","assets/UserProfilePure-218bf694.css","assets/I18nextProvider-f367c211.js","assets/RecommendationsProfile-bfc2e545.js","assets/ImageSearch-6df1d0d1.js","assets/Graph-d1b46b16.js","assets/events-63b5f19e.js","assets/ProgressDialog-7226fde1.js","assets/DialogContent-d100c3e0.js","assets/DialogTitle-3bd65ba4.js","assets/LinearProgress-51654afb.js","assets/Graph-e01d59e0.css","assets/Label-2d9d5124.js","assets/Label-5e6feb92.css","assets/RadioGroup-2c88d32f.js","assets/SwitchBase-b2e27e4d.js","assets/ImageGrid-ff60fbdd.js","assets/ImageGrid-02a67af0.css","assets/Refresh-d5d9edd3.js","assets/LocalFireDepartment-2907a69f.js","assets/Spacer-de9dcc41.js","assets/RecommendationsHeatmap-cbbc4619.js","assets/RecommendationsHeatmap-3de65548.css","assets/RecommendationsProfile-587554ef.css","assets/DialogActions-6d630794.js","assets/DeleteDialog-97053b42.css","assets/IconMenu-6e6ac8e9.js","assets/PhoneAndroid-c91f5110.js","assets/Person-411c868c.js","assets/UserGrid-87fe5c4a.css"])}),be.jsx(wt,{path:"workflow",lazy:()=>Ot(()=>import("./Workflow-4e4b9539.js"),["assets/Workflow-4e4b9539.js","assets/Workflow-17e76d21.js","assets/Widget-faef6aca.js","assets/Edit-32806028.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/Widget-eb6588a3.css","assets/menuState-2ff024b1.js","assets/DataProfile-29b73b7e.js","assets/DataProfilePure-287e5c3b.js","assets/ImageCloud-fcac825d.js","assets/ScorePie-ef00e97d.js","assets/colours.module-29b309d0.js","assets/colours-e3b0c442.css","assets/ChartsOverlay-21326cdb.js","assets/useThemeProps-e50455dd.js","assets/Typography-0738e1b3.js","assets/Popper-912b4204.js","assets/ScorePie-7f1ae8ea.css","assets/ImageCloud-37ab60f9.css","assets/DataProfilePure-3434b5ab.css","assets/profiler-25e786d5.js","assets/FileSaver.min-7671c644.js","assets/PrintButton-dcdd5a18.js","assets/random-67c94df7.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/Item-86d0e189.css","assets/IconMenuInline-1e64afd8.js","assets/configState-6be3aa1d.js","assets/svgToPNG-975d57d1.js","assets/Download-633f4aec.js","assets/UserProfile-c3f95e1b.js","assets/UserProfilePure-9f741110.js","assets/localiser-c0c9a31b.js","assets/graphColours-c6ae9e73.js","assets/UserProfilePure-218bf694.css","assets/RecommendationsHeatmap-cbbc4619.js","assets/colours-9cdd3933.js","assets/events-63b5f19e.js","assets/ProgressDialog-7226fde1.js","assets/DialogContent-d100c3e0.js","assets/DialogTitle-3bd65ba4.js","assets/LinearProgress-51654afb.js","assets/RecommendationsHeatmap-3de65548.css","assets/Graph-d1b46b16.js","assets/Graph-e01d59e0.css","assets/Label-2d9d5124.js","assets/Label-5e6feb92.css","assets/UserListing-e60983b4.js","assets/style.module-fd5d79c8.js","assets/style-dff2cfe0.css","assets/CheckCircle-b71d1d84.js","assets/links-8de2c7fc.js","assets/Feed-95058eca.js","assets/style.module-950f526a.js","assets/style-19bedad0.css","assets/content-ab9124ab.js","assets/Close-50ef3ec2.js","assets/LangSelect-6fc7f25d.js","assets/LangSelect-f43deaa0.css","assets/recommender-9b8a9795.js","assets/sessionState-6915fb12.js","assets/Feed-4a1e2741.css","assets/Menu-ad377c0c.js","assets/UserDialog-78cd1933.js","assets/MenuItem-97c66a8d.js","assets/I18nextProvider-f367c211.js","assets/Workflow-63eff75d.css"])}),be.jsx(wt,{path:"contentengage",lazy:()=>Ot(()=>import("./ContentEngagements-8a28231a.js"),["assets/ContentEngagements-8a28231a.js","assets/TableToolbar-006034e4.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/DataGrid-d15b9d8f.js","assets/EventManager-36c7dc68.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/IconButton-02bc1303.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/MenuItem-97c66a8d.js","assets/Typography-0738e1b3.js","assets/Close-223ffcde.js","assets/Popper-912b4204.js","assets/Chip-3c6505fa.js","assets/FormControlLabel-5a6070f0.js","assets/SwitchBase-b2e27e4d.js","assets/Button-c681e6d6.js","assets/InputAdornment-0277bb49.js","assets/Tooltip-875b66b4.js","assets/LinearProgress-51654afb.js","assets/useThemeProps-e50455dd.js","assets/TableToolbar-f9cb846d.css","assets/events-63b5f19e.js"])}),be.jsx(wt,{path:"topictable",lazy:()=>Ot(()=>import("./TopicTable-19e806af.js"),["assets/TopicTable-19e806af.js","assets/TableToolbar-006034e4.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/DataGrid-d15b9d8f.js","assets/EventManager-36c7dc68.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/IconButton-02bc1303.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/MenuItem-97c66a8d.js","assets/Typography-0738e1b3.js","assets/Close-223ffcde.js","assets/Popper-912b4204.js","assets/Chip-3c6505fa.js","assets/FormControlLabel-5a6070f0.js","assets/SwitchBase-b2e27e4d.js","assets/Button-c681e6d6.js","assets/InputAdornment-0277bb49.js","assets/Tooltip-875b66b4.js","assets/LinearProgress-51654afb.js","assets/useThemeProps-e50455dd.js","assets/TableToolbar-f9cb846d.css","assets/events-63b5f19e.js"])}),be.jsx(wt,{path:"contentwizard",lazy:()=>Ot(()=>import("./ContentWizard-19495a88.js"),["assets/ContentWizard-19495a88.js","assets/Widget-faef6aca.js","assets/Edit-32806028.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/TextField-43fc95d4.js","assets/useSlot-050d423d.js","assets/Portal-a2b43acb.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/Grow-605dc19c.js","assets/useSlotProps-2393cf25.js","assets/index-720786c4.js","assets/Widget-eb6588a3.css","assets/Search-2d830196.js","assets/Add-0779dc75.js","assets/DialogContent-d100c3e0.js","assets/DialogTitle-3bd65ba4.js","assets/Typography-0738e1b3.js","assets/LinearProgress-51654afb.js","assets/Slider-01724717.js","assets/DialogActions-6d630794.js","assets/InputAdornment-0277bb49.js","assets/RadioGroup-2c88d32f.js","assets/SwitchBase-b2e27e4d.js","assets/FormControlLabel-5a6070f0.js","assets/fileSaver-abb1abfd.js","assets/EventManager-36c7dc68.js","assets/MenuItem-97c66a8d.js","assets/settings-1d1f0ea7.js","assets/menuState-2ff024b1.js","assets/settingsState-c28045a5.js","assets/configState-6be3aa1d.js","assets/FileSaver.min-7671c644.js","assets/v4-eb618527.js","assets/graph-01dd06dc.js","assets/Menu-ad377c0c.js","assets/DataGrid-d15b9d8f.js","assets/Close-223ffcde.js","assets/Popper-912b4204.js","assets/Chip-3c6505fa.js","assets/Button-c681e6d6.js","assets/Tooltip-875b66b4.js","assets/useThemeProps-e50455dd.js","assets/ImageGrid-ff60fbdd.js","assets/CheckCircle-b71d1d84.js","assets/content-ab9124ab.js","assets/ImageGrid-02a67af0.css","assets/events-63b5f19e.js","assets/ChartsOverlay-21326cdb.js","assets/Refresh-d5d9edd3.js","assets/Item-79c80338.js","assets/Item-86d0e189.css","assets/IconMenu-6e6ac8e9.js","assets/colours-9cdd3933.js","assets/Download-633f4aec.js","assets/errorState-b147a579.js","assets/Settings-ceaef721.js","assets/Close-50ef3ec2.js","assets/I18nextProvider-f367c211.js","assets/ContentWizard-4acabe1e.css"])}),be.jsx(wt,{path:"browser",lazy:()=>Ot(()=>import("./ContentBrowser-252e3ea8.js"),["assets/ContentBrowser-252e3ea8.js","assets/ImageGrid-ff60fbdd.js","assets/CheckCircle-b71d1d84.js","assets/IconButton-02bc1303.js","assets/createSimplePaletteValueFilter-b2e05aa4.js","assets/content-ab9124ab.js","assets/ImageGrid-02a67af0.css","assets/Search-2d830196.js","assets/Spacer-de9dcc41.js","assets/Item-79c80338.js","assets/Tooltip-875b66b4.js","assets/Portal-a2b43acb.js","assets/useSlot-050d423d.js","assets/Popper-912b4204.js","assets/useSlotProps-2393cf25.js","assets/Grow-605dc19c.js","assets/Item-86d0e189.css","assets/IconMenu-6e6ac8e9.js","assets/Edit-32806028.js","assets/TextField-43fc95d4.js","assets/useFormControl-e419a457.js","assets/Popover-f0f4a007.js","assets/Modal-2fc077e7.js","assets/debounce-517eeb3c.js","assets/index-720786c4.js","assets/InputAdornment-0277bb49.js","assets/Typography-0738e1b3.js","assets/I18nextProvider-f367c211.js","assets/ContentBrowser-6e5f2e1a.css"])})]})]})));function rze(){return be.jsx(tee,{injectFirst:!0,children:be.jsx(wne,{theme:pie,children:be.jsx(KQ,{children:be.jsx(JMe,{value:xW,children:be.jsx(Lt.Suspense,{fallback:be.jsx(Tie,{loading:!0,message:"..."}),children:be.jsx(Z7,{router:nze})})})})})})}Fw.createRoot(document.getElementById("root")).render(be.jsx(Lt.StrictMode,{children:be.jsx(rze,{})}));export{zo as $,fde as A,Tp as B,Hoe as C,Hse as D,tne as E,the as F,yze as G,ute as H,Goe as I,hs as J,Wze as K,lze as L,Ar as M,Tie as N,aze as O,Ed as P,_s as Q,fze as R,AS as S,RG as T,eu as U,SG as V,$G as W,vv as X,DG as Y,PG as Z,YS as _,pze as a,$ne as a0,eze as a1,Fze as a2,fW as a3,ehe as a4,Sa as a5,Eze as a6,Vze as a7,Cze as a8,vs as a9,Lt as aA,ree as aB,iv as aC,Ra as aD,nte as aE,ste as aF,ek as aG,Q1 as aH,av as aI,T0 as aJ,vne as aK,vze as aL,Uze as aa,pW as ab,qMe as ac,Bze as ad,HMe as ae,mc as af,Loe as ag,Eie as ah,nhe as ai,jMe as aj,xO as ak,UG as al,gze as am,ote as an,r2 as ao,dze as ap,hze as aq,nk as ar,Ja as as,lv as at,nH as au,Uc as av,pu as aw,Ws as ax,ane as ay,LP as az,mze as b,zG as c,D2 as d,xv as e,_p as f,Mze as g,wie as h,wze as i,be as j,Sp as k,v1 as l,Xu as m,uze as n,$p as o,Kde as p,cze as q,K as r,yc as s,Du as t,ize as u,zze as v,BS as w,YF as x,z2 as y,B2 as z};
