import{l as c,r as l,j as s,a5 as h}from"./index-ChHXuf40.js";import{s as p,T as u}from"./TableToolbar-iL5UqPm0.js";import{D as f}from"./DataGrid-CeymwZOP.js";import{a as x}from"./events-DLU3_18Y.js";import"./createSimplePaletteValueFilter-CLdyqM5U.js";import"./EventManager-bMdfXZ0t.js";import"./TextField-MaMPnnBO.js";import"./useSlot-BVU38s2u.js";import"./IconButton-BXLcq7Mr.js";import"./Portal-BpkAKKpt.js";import"./useFormControl-BOywDUuq.js";import"./Popover-3SaqCWbK.js";import"./Grow-B-eHZ5Kq.js";import"./debounce-Be36O1Ab.js";import"./Modal-DQ9h7Q_m.js";import"./index-BfNLg11A.js";import"./useSlotProps-BP5ya9qr.js";import"./MenuItem-C3-73DVz.js";import"./Typography-8VlALfQ4.js";import"./Close-CI_IAYQS.js";import"./Popper-JH9MxI6g.js";import"./Chip-BlC7IdM3.js";import"./Tooltip-cL7nY1NY.js";import"./InputAdornment-CUBj53no.js";import"./Button-CbhWiO3H.js";import"./FormControlLabel-BtHiVqzu.js";import"./SwitchBase-CuDlXbI3.js";import"./LinearProgress-li3lTmA_.js";import"./useThemeProps-Rdar5cgY.js";function E(){const{profiler:e}=c(),n=e.graph.getNodesByType("user"),m=e.graph.getNodesByType("topic"),g=l.useMemo(()=>{const r=[...n];return r.sort((t,o)=>{var i,a;return(((i=e.getUserData(o))==null?void 0:i.engagement)||0)-(((a=e.getUserData(t))==null?void 0:a.engagement)||0)}),[{field:"topic",headerName:"Topic",width:200,renderCell:t=>`#${t.value}`},{field:"engagement",headerName:"Engagement",width:80,renderCell:t=>t.value.toFixed(1)},...r.map(t=>({field:t,headerName:e.getUserName(t),width:80,renderCell:o=>s.jsx("span",{style:{padding:"0.3rem",backgroundColor:`hsl(240, 80%, ${20-Math.min(20,Math.floor(o.value/o.row.maxEngagement*20))+80}%)`},children:o.value.toFixed(1)})}))]},[e,n]),d=m.map(r=>{const t=e.graph.getRelated("topic",r),o={id:r,topic:h(r),engagement:t.reduce((i,a)=>i+a.weight,0),maxEngagement:0};return n.forEach(i=>{const a=e.graph.getEdgeWeights("topic",i,r)[0]||0;o[i]=a,o.maxEngagement=Math.max(o.maxEngagement,a)}),o});return s.jsx("div",{className:p.container,children:s.jsx("div",{className:p.tableContainer,"data-testid":"topic-table",children:s.jsx(f,{slots:{toolbar:u},rows:d,columns:g,initialState:{columns:{columnVisibilityModel:{contentId:!1}},sorting:{sortModel:[{field:"engagement",sort:"desc"}]}}})})})}function O(){const[e,n]=l.useReducer(m=>++m,0);return x(()=>{n()},[],"refresh_graph"),s.jsx(E,{},`k-${e}`)}export{O as Component};
