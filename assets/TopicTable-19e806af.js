import{m as c,r as l,j as s,a5 as h}from"./index-02b2945e.js";import{s as p,T as u}from"./TableToolbar-006034e4.js";import{D as f}from"./DataGrid-d15b9d8f.js";import{a as x}from"./events-63b5f19e.js";import"./createSimplePaletteValueFilter-b2e05aa4.js";import"./EventManager-36c7dc68.js";import"./TextField-43fc95d4.js";import"./useSlot-050d423d.js";import"./IconButton-02bc1303.js";import"./Portal-a2b43acb.js";import"./useFormControl-e419a457.js";import"./Popover-f0f4a007.js";import"./Modal-2fc077e7.js";import"./debounce-517eeb3c.js";import"./Grow-605dc19c.js";import"./useSlotProps-2393cf25.js";import"./index-720786c4.js";import"./MenuItem-97c66a8d.js";import"./Typography-0738e1b3.js";import"./Close-223ffcde.js";import"./Popper-912b4204.js";import"./Chip-3c6505fa.js";import"./FormControlLabel-5a6070f0.js";import"./SwitchBase-b2e27e4d.js";import"./Button-c681e6d6.js";import"./InputAdornment-0277bb49.js";import"./Tooltip-875b66b4.js";import"./LinearProgress-51654afb.js";import"./useThemeProps-e50455dd.js";function E(){const{profiler:e}=c(),n=e.graph.getNodesByType("user"),m=e.graph.getNodesByType("topic"),g=l.useMemo(()=>{const r=[...n];return r.sort((t,o)=>{var i,a;return(((i=e.getUserData(o))==null?void 0:i.engagement)||0)-(((a=e.getUserData(t))==null?void 0:a.engagement)||0)}),[{field:"topic",headerName:"Topic",width:200,renderCell:t=>`#${t.value}`},{field:"engagement",headerName:"Engagement",width:80,renderCell:t=>t.value.toFixed(1)},...r.map(t=>({field:t,headerName:e.getUserName(t),width:80,renderCell:o=>s.jsx("span",{style:{padding:"0.3rem",backgroundColor:`hsl(240, 80%, ${20-Math.min(20,Math.floor(o.value/o.row.maxEngagement*20))+80}%)`},children:o.value.toFixed(1)})}))]},[e,n]),d=m.map(r=>{const t=e.graph.getRelated("topic",r),o={id:r,topic:h(r),engagement:t.reduce((i,a)=>i+a.weight,0),maxEngagement:0};return n.forEach(i=>{const a=e.graph.getEdgeWeights("topic",i,r)[0]||0;o[i]=a,o.maxEngagement=Math.max(o.maxEngagement,a)}),o});return s.jsx("div",{className:p.container,children:s.jsx("div",{className:p.tableContainer,"data-testid":"topic-table",children:s.jsx(f,{slots:{toolbar:u},rows:d,columns:g,initialState:{columns:{columnVisibilityModel:{contentId:!1}},sorting:{sortModel:[{field:"engagement",sort:"desc"}]}}})})})}function O(){const[e,n]=l.useReducer(m=>++m,0);return x(()=>{n()},[],"refresh_graph"),s.jsx(E,{},`k-${e}`)}export{O as Component};
