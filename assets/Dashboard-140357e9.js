var cs=Object.defineProperty;var ds=(e,t,o)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var de=(e,t,o)=>(ds(e,typeof t!="symbol"?t+"":t,o),o);import{r as I,C as us,j as n,E as ms,A as ps,F as hs,q as gs,c as F,a as N,R as J,m as le,b as Ie,i as At,_ as y,G as fs,H as ye,t as dt,l as ut,n as mt,I as ot,K as tt,M as Re,h as bs,N as xs,O as Is}from"./index-02b2945e.js";import{l as rt}from"./lz-string-35001fa0.js";import{x as js,T as vs}from"./QRCode-6b059dc5.js";import{m as pt,a as ht,b as Qt,c as ws,d as Zt,e as Cs,f as en,g as Ss,h as tn,i as ys,j as Ts,k as nn,l as Es,n as ks}from"./menuState-2ff024b1.js";import{u as Ms,c as L,I as oe,a as ie}from"./IconButton-02bc1303.js";import{u as sn,g as on}from"./settingsState-c28045a5.js";import{a as _s}from"./codePrefix-7af9e858.js";import{D as Pe,a as Ae}from"./DialogContent-d100c3e0.js";import{D as De}from"./DialogTitle-3bd65ba4.js";import{S as rn}from"./Settings-ceaef721.js";import{I as Y}from"./Item-79c80338.js";import{a as X}from"./configState-6be3aa1d.js";import{M as Rs,F as $e,a as Be,b as Ps}from"./TextField-43fc95d4.js";import{M as it}from"./MenuItem-97c66a8d.js";import{L as Dt,E as As,P as Vt}from"./EventManager-36c7dc68.js";import{C as Ds,P as Vs}from"./PhoneAndroid-c91f5110.js";import{T as Nt,s as an,a as ln,b as re,c as Ns}from"./fileSaver-abb1abfd.js";import{A as cn,R as zs,a as Ls}from"./RecommendationsProfile-bfc2e545.js";import{L as dn}from"./LocalFireDepartment-2907a69f.js";import{P as zt}from"./Person-411c868c.js";import{T as Fs,d as Lt}from"./autoUsers-207f202c.js";import{I as Os}from"./ImageSearch-6df1d0d1.js";import{g as gt,a as ft,s as Z,m as $s,u as Bs,e as ke,c as bt,b as xt,_ as me,f as Ws,h as It}from"./createSimplePaletteValueFilter-b2e05aa4.js";import{u as Us}from"./useThemeProps-e50455dd.js";import{C as P,F as M}from"./FormControlLabel-5a6070f0.js";import{u as Ks,o as Hs,r as xe,e as Ft}from"./Portal-a2b43acb.js";import{T as Gs,g as Ot}from"./useSlot-050d423d.js";import{u as Te}from"./useSlotProps-2393cf25.js";import{M as qs}from"./Menu-ad377c0c.js";import{M as Js}from"./Button-c681e6d6.js";import{u as jt,J as Xs,a as un}from"./settings-1d1f0ea7.js";import{L as Ys}from"./LangSelect-6fc7f25d.js";import{R as mn,a as He}from"./RadioGroup-2c88d32f.js";import{S as ue}from"./Slider-01724717.js";import{D as pn}from"./DialogActions-6d630794.js";import{E as Qs}from"./ErrorDialog-dea2f05b.js";import{e as Zs}from"./errorState-b147a579.js";import{S as eo}from"./Spacer-de9dcc41.js";import{I as to}from"./IconMenu-6e6ac8e9.js";import{P as no}from"./Popover-f0f4a007.js";import{L as so}from"./LinearProgress-51654afb.js";import{o as hn}from"./sessionState-6915fb12.js";import{I as oo}from"./peer-d87849a6.js";import{d as ro,b as io,C as ao}from"./ConnectionStatus-d4cfcdbc.js";import{g as lo,l as co,c as $t,C as Bt}from"./ContentLoader-dd766616.js";import{C as gn}from"./Close-50ef3ec2.js";import{F as fn}from"./Feed-95058eca.js";import{A as vt}from"./AppNavigation-5d3e2a66.js";import{I as Ve}from"./I18nextProvider-f367c211.js";import{S as uo}from"./ScorePie-ef00e97d.js";import{c as mo}from"./colours.module-29b309d0.js";import"./Modal-2fc077e7.js";import"./Typography-0738e1b3.js";import"./index-720786c4.js";import"./Tooltip-875b66b4.js";import"./Popper-912b4204.js";import"./Grow-605dc19c.js";import"./useFormControl-e419a457.js";import"./debounce-517eeb3c.js";import"./FileSaver.min-7671c644.js";import"./v4-eb618527.js";import"./Graph-d1b46b16.js";import"./events-63b5f19e.js";import"./svgToPNG-975d57d1.js";import"./ProgressDialog-7226fde1.js";import"./Label-2d9d5124.js";import"./profiler-25e786d5.js";import"./localiser-c0c9a31b.js";import"./graphColours-c6ae9e73.js";import"./ImageGrid-ff60fbdd.js";import"./CheckCircle-b71d1d84.js";import"./content-ab9124ab.js";import"./Refresh-d5d9edd3.js";import"./IconMenuInline-1e64afd8.js";import"./RecommendationsHeatmap-cbbc4619.js";import"./colours-9cdd3933.js";import"./recommender-9b8a9795.js";import"./SwitchBase-b2e27e4d.js";import"./style.module-950f526a.js";import"./UserListing-e60983b4.js";import"./style.module-fd5d79c8.js";import"./uiState-fd35ba7b.js";import"./ChartsOverlay-21326cdb.js";function po(e){return I.useMemo(()=>{const t=window.sessionStorage.getItem(`genai-sm-idcode-${e}`);if(t)return t;{const o=us(e);return window.sessionStorage.setItem(`genai-sm-idcode-${e}`,o),o}},[e])}async function ho(e,t){if(typeof e=="string"){t&&t(0);const o=await fetch(e);if(o.status!==200)throw console.error(o),new Error("zip_fetch_failed");const s=[];if(o.body){const r=o.body.getReader(),i=parseInt(o.headers.get("Content-Length")||"1");let c=0;for(;c<i;){const{done:l,value:u}=await r.read();if(l)break;s.push(u),c+=u.length,t&&t(Math.floor(c/i*100))}}return new Blob(s)}else if(e instanceof File){const o=await e.arrayBuffer();return t&&t(100),new Blob([o])}else return t&&t(100),new Blob([e])}function go(e){return gt("MuiCollapse",e)}ft("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const fo=e=>{const{orientation:t,classes:o}=e,s={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return xt(s,go,o)},bo=Z("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.orientation],o.state==="entered"&&t.entered,o.state==="exited"&&!o.in&&o.collapsedSize==="0px"&&t.hidden]}})($s(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),xo=Z("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Io=Z("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),at=I.forwardRef(function(t,o){const s=Bs({props:t,name:"MuiCollapse"}),{addEndListener:r,children:i,className:c,collapsedSize:l="0px",component:u,easing:m,in:d,onEnter:p,onEntered:f,onEntering:b,onExit:j,onExited:x,onExiting:g,orientation:a="vertical",style:h,timeout:v=ms.standard,TransitionComponent:w=Gs,...C}=s,k={...s,orientation:a,collapsedSize:l},E=fo(k),S=Ks(),A=Ms(),R=I.useRef(null),D=I.useRef(),B=typeof l=="number"?`${l}px`:l,W=a==="horizontal",U=W?"width":"height",ee=I.useRef(null),ve=ke(o,ee),Q=_=>G=>{if(_){const $=ee.current;G===void 0?_($):_($,G)}},ce=()=>R.current?R.current[W?"clientWidth":"clientHeight"]:0,K=Q((_,G)=>{R.current&&W&&(R.current.style.position="absolute"),_.style[U]=B,p&&p(_,G)}),ge=Q((_,G)=>{const $=ce();R.current&&W&&(R.current.style.position="");const{duration:te,easing:O}=Ot({style:h,timeout:v,easing:m},{mode:"enter"});if(v==="auto"){const we=S.transitions.getAutoHeightDuration($);_.style.transitionDuration=`${we}ms`,D.current=we}else _.style.transitionDuration=typeof te=="string"?te:`${te}ms`;_.style[U]=`${$}px`,_.style.transitionTimingFunction=O,b&&b(_,G)}),H=Q((_,G)=>{_.style[U]="auto",f&&f(_,G)}),fe=Q(_=>{_.style[U]=`${ce()}px`,j&&j(_)}),Le=Q(x),Xe=Q(_=>{const G=ce(),{duration:$,easing:te}=Ot({style:h,timeout:v,easing:m},{mode:"exit"});if(v==="auto"){const O=S.transitions.getAutoHeightDuration(G);_.style.transitionDuration=`${O}ms`,D.current=O}else _.style.transitionDuration=typeof $=="string"?$:`${$}ms`;_.style[U]=B,_.style.transitionTimingFunction=te,g&&g(_)}),Ye=_=>{v==="auto"&&A.start(D.current||0,_),r&&r(ee.current,_)};return n.jsx(w,{in:d,onEnter:K,onEntered:H,onEntering:ge,onExit:fe,onExited:Le,onExiting:Xe,addEndListener:Ye,nodeRef:ee,timeout:v==="auto"?null:v,...C,children:(_,{ownerState:G,...$})=>n.jsx(bo,{as:u,className:bt(E.root,c,{entered:E.entered,exited:!d&&B==="0px"&&E.hidden}[_]),style:{[W?"minWidth":"minHeight"]:B,...h},ref:ve,ownerState:{...k,state:_},...$,children:n.jsx(xo,{ownerState:{...k,state:_},className:E.wrapper,ref:R,children:n.jsx(Io,{ownerState:{...k,state:_},className:E.wrapperInner,children:i})})})})});at&&(at.muiSupportAuto=!0);const jo=at;function vo(e,t,o,s,r){const i=e.getNodesSince("user",s).filter(l=>l.id!==o),c=t.getActionLogTypeSince(s,"engagement").filter(l=>(l.entry.value||0)>0);return{edges:[],nodes:i,logs:r?c:c.filter(l=>l.user!==o)}}const wo="#444",Co="_dashboard_1m996_3",So="_workspace_1m996_14",Wt={textDark:wo,dashboard:Co,workspace:So},yo="#e8f0fe",To="rgb(2, 136, 209)",Eo="#444",ko="_groupedItems_2xoqz_3",Mo="_connectMessage_2xoqz_12",_o="_userListing_2xoqz_34",Ro="_column_2xoqz_45",Po="_title_2xoqz_51",Ao="_buttonGroup_2xoqz_56",Se={bgSubdued1:yo,borderBrightBlue:To,textDark:Eo,groupedItems:ko,connectMessage:Mo,userListing:_o,column:Ro,title:Po,buttonGroup:Ao},bn=L(n.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen");class xn{constructor(t,o){de(this,"recommender");de(this,"actionLog");de(this,"agents",[]);de(this,"interval",-1);de(this,"time",Date.now());de(this,"counter",0);this.recommender=t,this.actionLog=o}createAgents(t,o){const s=this.recommender.content.getAllContent();for(let r=0;r<t;++r){const i=`user:sim-${r}`;this.recommender.graph.hasNode(i)||this.recommender.profiler.createUserProfile(i,ps());const c={ideal:s[Math.floor(Math.random()*s.length)],id:i,threshold:Math.random()*(o.thresholds.max-o.thresholds.min)+o.thresholds.min};this.agents.push(c)}}clearAgents(){this.agents=[]}simulate(t){this.stop(),this.interval=window.setInterval(()=>{this.step(t),t.onTick&&t.onTick(this.counter),t.duration!==void 0&&this.counter>t.duration&&(this.stop(),t.onEnd&&t.onEnd())},(t==null?void 0:t.tick)||1e3)}step(t){this.counter+=5;const o={...t,coldStart:!0};this.agents.forEach(s=>{this.recommender.generateNewRecommendations(s.id,5,o),this.recommender.getRecommendations(s.id,5,o).forEach(i=>{var u,m;const c=hs(((u=this.recommender.content.getContentMetadata(i.contentId))==null?void 0:u.embedding)||[],((m=this.recommender.content.getContentMetadata(s.ideal))==null?void 0:m.embedding)||[]),l=c>=s.threshold;this.actionLog.addLogEntry({activity:"seen",id:i.contentId,timestamp:this.time},s.id),l?this.actionLog.addLogEntry({activity:"dwell",id:i.contentId,value:2e3+8e3*((c-s.threshold)/(1-s.threshold)),timestamp:this.time},s.id):this.actionLog.addLogEntry({activity:"dwell",id:i.contentId,value:Math.floor(Math.random()*1999),timestamp:this.time},s.id),this.actionLog.createEngagementEntry(s.id,i.contentId),this.time+=100})})}stop(){this.interval>=0&&(clearInterval(this.interval),this.interval=-1,this.time=0)}}const In=gs({key:"simulation",default:null,dangerouslyAllowMutability:!0});function Do({users:e,code:t}){const{t:o}=F(),[s,r]=N(pt),i=J(sn),{recommender:c,actionLog:l}=le(),u=Ie(In),m=I.useCallback(()=>r(!1),[r]),d=I.useCallback(()=>{var f;(f=document.getElementById("openfile"))==null||f.click(),r(!1)},[r]),p=i==="feed"?"app":"flow";return n.jsxs(Pe,{open:s,onClose:m,maxWidth:"md",children:[n.jsx(De,{className:Se.title,children:o("dashboard.titles.connectUsers")}),n.jsxs(Ae,{children:[n.jsxs("div",{className:Se.connectMessage,children:[n.jsx(js,{url:`${window.location.origin}/${p}/${t}`,size:"large",label:o("dashboard.aria.linkForFeed")}),n.jsxs("div",{className:Se.column,children:[n.jsx("div",{style:{textAlign:"center"},children:n.jsx(vs,{values:{codeText:_s(i,t)},i18nKey:"dashboard.messages.connection",components:{Code:n.jsx("em",{})}})}),n.jsx("a",{href:`${window.location.origin}`,target:"_blank",rel:"noreferrer",children:window.location.host})]})]}),n.jsxs("div",{className:Se.userListing,children:[e.length===0&&n.jsx("div",{children:o("dashboard.messages.waitingPeople")}),e.length===1&&n.jsx("div",{children:o("dashboard.messages.onePerson",{count:e.length})}),e.length>1&&n.jsx("div",{children:o("dashboard.messages.manyPeople",{count:e.length})}),n.jsxs("div",{className:Se.buttonGroup,children:[n.jsx(oe,{onClick:d,color:"secondary",size:"large",style:{border:"1px solid rgb(174, 37, 174)"},"aria-label":o("dashboard.labels.openTip"),children:n.jsx(bn,{fontSize:"medium"})}),n.jsx(At,{variant:"outlined",color:"secondary","data-testid":"dashboard-demo-button",onClick:()=>{const f=new xn(c,l);f.createAgents(12,{thresholds:{min:.1,max:.5}}),u(f),m()},children:o("dashboard.actions.demo")}),n.jsx(At,{variant:"contained",color:"secondary","data-testid":"dashboard-start-button",onClick:m,children:o("dashboard.actions.start")})]})]})]})]})}const Vo={recommendations:{taste:2,similarUsers:2,coengaged:2,random:2,popular:2,selection:"distribution"},hideDataView:!1,hideProfileView:!1,hideActionsButton:!1,hideRecommendationsView:!1,hidePostContent:!0,hideOwnProfile:!0,collectResearchData:!1,alwaysActive:!1,experimental:!1,showRecommendationWizard:!0,showScoringWizard:!0,showCandidateWizard:!0,showCandidateRefinementWizard:!0,showDiversityWizard:!0},No=["https://store.gen-ai.fi/somekone/imageSet1c.zip"],Ut={configuration:Vo,content:No},zo="#078092",Lo="#444",Fo="#555",Oo="#E996E9",$o="_miniSettings_xfcli_4",Bo="_logo_xfcli_12",Wo="_logoRow_xfcli_16",Uo="_logoRowOpen_xfcli_28 _logoRow_xfcli_16",Ko="_backgroundLogo_xfcli_33",Ho="_sideNav_xfcli_51",Go="_sideNavClosed_xfcli_70 _sideNav_xfcli_51",qo="_treeItem_xfcli_76",Jo="_treeItemSelected_xfcli_85 _treeItem_xfcli_76",Xo="_treeContainer_xfcli_90",T={bgColourful1:zo,backgroundDark2:Lo,backgroundDark3:Fo,secondaryLight:Oo,miniSettings:$o,logo:Bo,logoRow:Wo,logoRowOpen:Uo,backgroundLogo:Ko,sideNav:Ho,sideNavClosed:Go,treeItem:qo,treeItemSelected:Jo,treeContainer:Xo},jn=L(n.jsx("path",{d:"M15 21h-2v-2h2zm-2-7h-2v5h2zm8-2h-2v4h2zm-2-2h-2v2h2zM7 12H5v2h2zm-2-2H3v2h2zm7-5h2V3h-2zm-7.5-.5v3h3v-3zM9 9H3V3h6zm-4.5 7.5v3h3v-3zM9 21H3v-6h6zm7.5-16.5v3h3v-3zM21 9h-6V3h6zm-2 10v-3h-4v2h2v3h4v-2zm-2-7h-4v2h4zm-4-2H7v2h2v2h2v-2h2zm1-1V7h-2V5h-2v4zM6.75 5.25h-1.5v1.5h1.5zm0 12h-1.5v1.5h1.5zm12-12h-1.5v1.5h1.5z"}),"QrCode2"),wt=L(n.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause"),Yo=L(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle"),vn=L([n.jsx("path",{d:"m21.67 18.17-5.3-5.3h-.99l-2.54 2.54v.99l5.3 5.3c.39.39 1.02.39 1.41 0l2.12-2.12c.39-.38.39-1.02 0-1.41"},"0"),n.jsx("path",{d:"m17.34 10.19 1.41-1.41 2.12 2.12c1.17-1.17 1.17-3.07 0-4.24l-3.54-3.54-1.41 1.41V1.71l-.7-.71-3.54 3.54.71.71h2.83l-1.41 1.41 1.06 1.06-2.89 2.89-4.13-4.13V5.06L4.83 2.04 2 4.87 5.03 7.9h1.41l4.13 4.13-.85.85H7.6l-5.3 5.3c-.39.39-.39 1.02 0 1.41l2.12 2.12c.39.39 1.02.39 1.41 0l5.3-5.3v-2.12l5.15-5.15z"},"1")],"Handyman");function Qo(){const{t:e}=F(),[t,o]=I.useState(null),s=!!t,r=m=>{o(m.currentTarget)},i=()=>{o(null)},{content:c,profiler:l,actionLog:u}=le();return n.jsxs(n.Fragment,{children:[n.jsx(Y,{tooltip:e("dashboard.labels.toolsMenu"),children:n.jsx(oe,{onClick:r,color:"inherit",id:"tools-menu-button","aria-label":e("dashboard.labels.toolsMenu"),"aria-haspopup":!0,"aria-expanded":s,children:n.jsx(vn,{})})}),n.jsxs(Rs,{role:"dialog","aria-labelledby":"tools-menu-button",id:"tools-menu",anchorEl:t,open:s,onClose:i,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},children:[n.jsx(it,{onClick:()=>{c.anonComments(),u.anonLogs(),l.anonProfiles()},children:n.jsx(Dt,{children:e("dashboard.labels.toolAnonymise")})}),n.jsx(it,{onClick:()=>{l.graph.getNodesByType("user").forEach(m=>{l.clearProfile(m)})},children:n.jsx(Dt,{children:e("dashboard.labels.clearProfiles")})})]})]})}function wn(e){return Us}function Zo(e){return gt("MuiSimpleTreeView",e)}ft("MuiSimpleTreeView",["root"]);const er=(e,t)=>{const o=I.useRef({}),[s,r]=I.useState(()=>{const c={};return e.forEach(l=>{l.models&&Object.entries(l.models).forEach(([u,m])=>{o.current[u]={isControlled:t[u]!==void 0,getDefaultValue:m.getDefaultValue},c[u]=m.getDefaultValue(t)})}),c});return Object.fromEntries(Object.entries(o.current).map(([c,l])=>{const u=t[c]??s[c];return[c,{value:u,setControlledValue:m=>{l.isControlled||r(d=>y({},d,{[c]:m}))}}]}))},tr=e=>e.isPropagationStopped!==void 0,Cn=()=>{const[e]=I.useState(()=>new As),t=I.useCallback((...s)=>{const[r,i,c={}]=s;c.defaultMuiPrevented=!1,!(tr(c)&&c.isPropagationStopped())&&e.emit(r,i,c)},[e]),o=I.useCallback((s,r)=>(e.on(s,r),()=>{e.removeListener(s,r)}),[e]);return{instance:{$$publishEvent:t,$$subscribeEvent:o}}};Cn.params={};const Sn=({plugins:e})=>{const t=new Set(e);return{instance:{getAvailablePlugins:()=>t}}};Sn.params={};let Kt=0;const nr=()=>(Kt+=1,`mui-tree-view-${Kt}`),Ge=({id:e,treeId:t="",itemId:o})=>e??`${t}-${o}`,Ct=({params:e,state:t,setState:o})=>{I.useEffect(()=>{o(r=>r.id.treeId===e.id&&r.id.treeId!==void 0?r:y({},r,{id:y({},r.id,{treeId:e.id??nr()})}))},[o,e.id]);const s=e.id??t.id.treeId;return{getRootProps:()=>({id:s}),contextValue:{treeId:s}}};Ct.params={id:!0};Ct.getInitialState=({id:e})=>({id:{treeId:e??void 0}});const sr=[Cn,Sn,Ct],or=["slots","slotProps","apiRef","experimentalFeatures"],rr=e=>{let{props:{slots:t,slotProps:o,apiRef:s,experimentalFeatures:r},plugins:i}=e,c=me(e.props,or);const l={};i.forEach(f=>{Object.assign(l,f.params)});const u={},m={};Object.keys(c).forEach(f=>{const b=c[f];l[f]?u[f]=b:m[f]=b});const d=r??{},p=i.reduce((f,b)=>b.getDefaultizedParams?b.getDefaultizedParams({params:f,experimentalFeatures:d}):f,u);return{apiRef:s,forwardedProps:m,pluginParams:p,slots:t??{},slotProps:o??{},experimentalFeatures:d}},ir=({plugins:e,instance:t,publicAPI:o,rootRef:s})=>({runItemPlugins:l=>{let u=null,m=null;const d=[],p={};e.forEach(j=>{if(!j.itemPlugin)return;const x=j.itemPlugin({props:l,rootRef:u,contentRef:m});x!=null&&x.rootRef&&(u=x.rootRef),x!=null&&x.contentRef&&(m=x.contentRef),x!=null&&x.propsEnhancers&&(d.push(x.propsEnhancers),Object.keys(x.propsEnhancers).forEach(g=>{p[g]=!0}))});const f=j=>x=>{const g={};return d.forEach(a=>{const h=a[j];h!=null&&Object.assign(g,h(x))}),g},b=Object.fromEntries(Object.keys(p).map(j=>[j,f(j)]));return{contentRef:m,rootRef:u,propsEnhancers:b}},wrapItem:({itemId:l,children:u})=>{let m=u;for(let d=e.length-1;d>=0;d-=1){const p=e[d];p.wrapItem&&(m=p.wrapItem({itemId:l,children:m,instance:t}))}return m},wrapRoot:({children:l})=>{let u=l;for(let m=e.length-1;m>=0;m-=1){const d=e[m];d.wrapRoot&&(u=d.wrapRoot({children:u,instance:t}))}return u},instance:t,rootRef:s,publicAPI:o});function ar(e){const t=I.useRef({});return e?(e.current==null&&(e.current={}),e.current):t.current}const lr=({plugins:e,rootRef:t,props:o})=>{const s=[...sr,...e],{pluginParams:r,forwardedProps:i,apiRef:c,experimentalFeatures:l,slots:u,slotProps:m}=rr({plugins:s,props:o}),d=er(s,r),f=I.useRef({}).current,b=ar(c),j=I.useRef(null),x=ke(j,t),g=ir({plugins:s,instance:f,publicAPI:b,rootRef:j}),[a,h]=I.useState(()=>{const k={};return s.forEach(E=>{E.getInitialState&&Object.assign(k,E.getInitialState(r))}),k}),v=[],w=k=>{const E=k({instance:f,params:r,slots:u,slotProps:m,experimentalFeatures:l,state:a,setState:h,rootRef:j,models:d,plugins:s});E.getRootProps&&v.push(E.getRootProps),E.publicAPI&&Object.assign(b,E.publicAPI),E.instance&&Object.assign(f,E.instance),E.contextValue&&Object.assign(g,E.contextValue)};return s.forEach(w),{getRootProps:(k={})=>{const E=y({role:"tree"},i,k,{ref:x});return v.forEach(S=>{Object.assign(E,S(k))}),E},rootRef:x,contextValue:g,instance:f}},yn=I.createContext(null);function cr(e){const{value:t,children:o}=e;return n.jsx(yn.Provider,{value:t,children:t.wrapRoot({children:o,instance:t.instance})})}const je=()=>{const e=I.useContext(yn);if(e==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return e},Tn=(e,t,o)=>{e.$$publishEvent(t,o)},pe="__TREE_VIEW_ROOT_PARENT_ID__",En=e=>{const t={};return e.forEach((o,s)=>{t[o]=s}),t},Me=I.createContext(()=>-1),dr=["children"],kn=({items:e,isItemDisabled:t,getItemLabel:o,getItemId:s})=>{const r={},i={},c={[pe]:[]},l=(m,d,p)=>{var x,g;const f=s?s(m):m.id;if(f==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(m)].join(`
`));if(r[f]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${f}"`].join(`
`));const b=o?o(m):m.label;if(b==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(m)].join(`
`));r[f]={id:f,label:b,parentId:p,idAttribute:void 0,expandable:!!((x=m.children)!=null&&x.length),disabled:t?t(m):!1,depth:d},i[f]=m;const j=p??pe;c[j]||(c[j]=[]),c[j].push(f),(g=m.children)==null||g.forEach(a=>l(a,d+1,f))};e.forEach(m=>l(m,0,null));const u={};return Object.keys(c).forEach(m=>{u[m]=En(c[m])}),{itemMetaMap:r,itemMap:i,itemOrderedChildrenIds:c,itemChildrenIndexes:u}},Ne=({instance:e,params:t,state:o,setState:s,experimentalFeatures:r})=>{const i=I.useCallback(a=>o.items.itemMetaMap[a],[o.items.itemMetaMap]),c=I.useCallback(a=>o.items.itemMap[a],[o.items.itemMap]),l=I.useCallback(()=>{const a=h=>{const v=o.items.itemMap[h],w=me(v,dr),C=o.items.itemOrderedChildrenIds[h];return C&&(w.children=C.map(a)),w};return o.items.itemOrderedChildrenIds[pe].map(a)},[o.items.itemMap,o.items.itemOrderedChildrenIds]),u=I.useCallback(a=>{if(a==null)return!1;let h=e.getItemMeta(a);if(!h)return!1;if(h.disabled)return!0;for(;h.parentId!=null;)if(h=e.getItemMeta(h.parentId),h.disabled)return!0;return!1},[e]),m=I.useCallback(a=>{const h=e.getItemMeta(a).parentId??pe;return o.items.itemChildrenIndexes[h][a]},[e,o.items.itemChildrenIndexes]),d=I.useCallback(a=>o.items.itemOrderedChildrenIds[a??pe]??[],[o.items.itemOrderedChildrenIds]),p=a=>{const h=e.getItemMeta(a);return h==null?null:document.getElementById(Ge({treeId:o.id.treeId,itemId:a,id:h.idAttribute}))},f=a=>t.disabledItemsFocusable?!0:!e.isItemDisabled(a),b=I.useRef(!1),j=I.useCallback(()=>{b.current=!0},[]),x=I.useCallback(()=>b.current,[]);return I.useEffect(()=>{e.areItemUpdatesPrevented()||s(a=>{const h=kn({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel});return Object.values(a.items.itemMetaMap).forEach(v=>{h.itemMetaMap[v.id]||Tn(e,"removeItem",{id:v.id})}),y({},a,{items:h})})},[e,s,t.items,t.isItemDisabled,t.getItemId,t.getItemLabel]),{getRootProps:()=>({style:{"--TreeView-itemChildrenIndentation":typeof t.itemChildrenIndentation=="number"?`${t.itemChildrenIndentation}px`:t.itemChildrenIndentation}}),publicAPI:{getItem:c,getItemDOMElement:p,getItemTree:l,getItemOrderedChildrenIds:d},instance:{getItemMeta:i,getItem:c,getItemTree:l,getItemsToRender:()=>{const a=h=>{var w;const v=o.items.itemMetaMap[h];return{label:v.label,itemId:v.id,id:v.idAttribute,children:(w=o.items.itemOrderedChildrenIds[h])==null?void 0:w.map(a)}};return o.items.itemOrderedChildrenIds[pe].map(a)},getItemIndex:m,getItemDOMElement:p,getItemOrderedChildrenIds:d,isItemDisabled:u,isItemNavigable:f,preventItemUpdates:j,areItemUpdatesPrevented:x},contextValue:{items:{onItemClick:t.onItemClick,disabledItemsFocusable:t.disabledItemsFocusable,indentationAtItemLevel:r.indentationAtItemLevel??!1}}}};Ne.getInitialState=e=>({items:kn({items:e.items,isItemDisabled:e.isItemDisabled,getItemId:e.getItemId,getItemLabel:e.getItemLabel})});Ne.getDefaultizedParams=({params:e})=>y({},e,{disabledItemsFocusable:e.disabledItemsFocusable??!1,itemChildrenIndentation:e.itemChildrenIndentation??"12px"});Ne.wrapRoot=({children:e,instance:t})=>n.jsx(Me.Provider,{value:o=>{var s;return((s=t.getItemMeta(o))==null?void 0:s.depth)??0},children:e});Ne.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0,onItemClick:!0,itemChildrenIndentation:!0};const qe=({instance:e,params:t,models:o})=>{const s=I.useMemo(()=>{const p=new Map;return o.expandedItems.value.forEach(f=>{p.set(f,!0)}),p},[o.expandedItems.value]),r=(p,f)=>{var b;(b=t.onExpandedItemsChange)==null||b.call(t,p,f),o.expandedItems.setControlledValue(f)},i=I.useCallback(p=>s.has(p),[s]),c=I.useCallback(p=>{var f;return!!((f=e.getItemMeta(p))!=null&&f.expandable)},[e]),l=ie((p,f)=>{const b=e.isItemExpanded(f);e.setItemExpansion(p,f,!b)}),u=ie((p,f,b)=>{if(e.isItemExpanded(f)===b)return;let x;b?x=[f].concat(o.expandedItems.value):x=o.expandedItems.value.filter(g=>g!==f),t.onItemExpansionToggle&&t.onItemExpansionToggle(p,f,b),r(p,x)}),m=(p,f)=>{const b=e.getItemMeta(f),x=e.getItemOrderedChildrenIds(b.parentId).filter(a=>e.isItemExpandable(a)&&!e.isItemExpanded(a)),g=o.expandedItems.value.concat(x);x.length>0&&(t.onItemExpansionToggle&&x.forEach(a=>{t.onItemExpansionToggle(p,a,!0)}),r(p,g))},d=I.useMemo(()=>t.expansionTrigger?t.expansionTrigger:e.isTreeViewEditable?"iconContainer":"content",[t.expansionTrigger,e.isTreeViewEditable]);return{publicAPI:{setItemExpansion:u},instance:{isItemExpanded:i,isItemExpandable:c,setItemExpansion:u,toggleItemExpansion:l,expandAllSiblings:m},contextValue:{expansion:{expansionTrigger:d}}}};qe.models={expandedItems:{getDefaultValue:e=>e.defaultExpandedItems}};const ur=[];qe.getDefaultizedParams=({params:e})=>y({},e,{defaultExpandedItems:e.defaultExpandedItems??ur});qe.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0,expansionTrigger:!0};const Mn=(e,t)=>{let o=t.length-1;for(;o>=0&&!e.isItemNavigable(t[o]);)o-=1;if(o!==-1)return t[o]},_n=(e,t)=>{const o=e.getItemMeta(t),s=e.getItemOrderedChildrenIds(o.parentId),r=e.getItemIndex(t);if(r===0)return o.parentId;let i=r-1;for(;!e.isItemNavigable(s[i])&&i>=0;)i-=1;if(i===-1)return o.parentId==null?null:_n(e,o.parentId);let c=s[i],l=Mn(e,e.getItemOrderedChildrenIds(c));for(;e.isItemExpanded(c)&&l!=null;)c=l,l=e.getItemOrderedChildrenIds(c).find(e.isItemNavigable);return c},We=(e,t)=>{if(e.isItemExpanded(t)){const s=e.getItemOrderedChildrenIds(t).find(e.isItemNavigable);if(s!=null)return s}let o=e.getItemMeta(t);for(;o!=null;){const s=e.getItemOrderedChildrenIds(o.parentId),r=e.getItemIndex(o.id);if(r<s.length-1){let i=r+1;for(;!e.isItemNavigable(s[i])&&i<s.length-1;)i+=1;if(e.isItemNavigable(s[i]))return s[i]}o=e.getItemMeta(o.parentId)}return null},Rn=e=>{let t=null;for(;t==null||e.isItemExpanded(t);){const o=e.getItemOrderedChildrenIds(t),s=Mn(e,o);if(s==null)return t;t=s}return t},_e=e=>e.getItemOrderedChildrenIds(null).find(e.isItemNavigable),Pn=(e,t,o)=>{if(t===o)return[t,o];const s=e.getItemMeta(t),r=e.getItemMeta(o);if(s.parentId===r.id||r.parentId===s.id)return r.parentId===s.id?[s.id,r.id]:[r.id,s.id];const i=[s.id],c=[r.id];let l=s.parentId,u=r.parentId,m=c.indexOf(l)!==-1,d=i.indexOf(u)!==-1,p=!0,f=!0;for(;!d&&!m;)p&&(i.push(l),m=c.indexOf(l)!==-1,p=l!==null,!m&&p&&(l=e.getItemMeta(l).parentId)),f&&!m&&(c.push(u),d=i.indexOf(u)!==-1,f=u!==null,!d&&f&&(u=e.getItemMeta(u).parentId));const b=m?l:u,j=e.getItemOrderedChildrenIds(b),x=i[i.indexOf(b)-1],g=c[c.indexOf(b)-1];return j.indexOf(x)<j.indexOf(g)?[t,o]:[o,t]},mr=(e,t,o)=>{const s=u=>{if(e.isItemExpandable(u)&&e.isItemExpanded(u))return e.getItemOrderedChildrenIds(u)[0];let m=e.getItemMeta(u);for(;m!=null;){const d=e.getItemOrderedChildrenIds(m.parentId),p=e.getItemIndex(m.id);if(p<d.length-1)return d[p+1];m=e.getItemMeta(m.parentId)}throw new Error("Invalid range")},[r,i]=Pn(e,t,o),c=[r];let l=r;for(;l!==i;)l=s(l),e.isItemDisabled(l)||c.push(l);return c},pr=e=>{let t=_e(e);const o=[];for(;t!=null;)o.push(t),t=We(e,t);return o},lt=(e,t)=>t!==e.closest('*[role="treeitem"]'),Ue=e=>Array.isArray(e)?e:e!=null?[e]:[],nt=e=>{const t={};return e.forEach(o=>{t[o]=!0}),t},Je=({instance:e,params:t,models:o})=>{const s=I.useRef(null),r=I.useRef({}),i=I.useMemo(()=>{const x=new Map;return Array.isArray(o.selectedItems.value)?o.selectedItems.value.forEach(g=>{x.set(g,!0)}):o.selectedItems.value!=null&&x.set(o.selectedItems.value,!0),x},[o.selectedItems.value]),c=(x,g)=>{if(t.onItemSelectionToggle)if(t.multiSelect){const a=g.filter(v=>!e.isItemSelected(v)),h=o.selectedItems.value.filter(v=>!g.includes(v));a.forEach(v=>{t.onItemSelectionToggle(x,v,!0)}),h.forEach(v=>{t.onItemSelectionToggle(x,v,!1)})}else g!==o.selectedItems.value&&(o.selectedItems.value!=null&&t.onItemSelectionToggle(x,o.selectedItems.value,!1),g!=null&&t.onItemSelectionToggle(x,g,!0));t.onSelectedItemsChange&&t.onSelectedItemsChange(x,g),o.selectedItems.setControlledValue(g)},l=x=>i.has(x),u=({event:x,itemId:g,keepExistingSelection:a=!1,shouldBeSelected:h})=>{if(t.disableSelection)return;let v;if(a){const w=Ue(o.selectedItems.value),C=e.isItemSelected(g);C&&(h===!1||h==null)?v=w.filter(k=>k!==g):!C&&(h===!0||h==null)?v=[g].concat(w):v=w}else h===!1||h==null&&e.isItemSelected(g)?v=t.multiSelect?[]:null:v=t.multiSelect?[g]:g;c(x,v),s.current=g,r.current={}},m=(x,[g,a])=>{if(t.disableSelection||!t.multiSelect)return;let h=Ue(o.selectedItems.value).slice();Object.keys(r.current).length>0&&(h=h.filter(k=>!r.current[k]));const v=nt(h),w=mr(e,g,a),C=w.filter(k=>!v[k]);h=h.concat(C),c(x,h),r.current=nt(w)};return{getRootProps:()=>({"aria-multiselectable":t.multiSelect}),publicAPI:{selectItem:u},instance:{isItemSelected:l,selectItem:u,selectAllNavigableItems:x=>{if(t.disableSelection||!t.multiSelect)return;const g=pr(e);c(x,g),r.current=nt(g)},expandSelectionRange:(x,g)=>{if(s.current!=null){const[a,h]=Pn(e,g,s.current);m(x,[a,h])}},selectRangeFromStartToItem:(x,g)=>{m(x,[_e(e),g])},selectRangeFromItemToEnd:(x,g)=>{m(x,[g,Rn(e)])},selectItemFromArrowNavigation:(x,g,a)=>{if(t.disableSelection||!t.multiSelect)return;let h=Ue(o.selectedItems.value).slice();Object.keys(r.current).length===0?(h.push(a),r.current={[g]:!0,[a]:!0}):(r.current[g]||(r.current={}),r.current[a]?(h=h.filter(v=>v!==g),delete r.current[g]):(h.push(a),r.current[a]=!0)),c(x,h)}},contextValue:{selection:{multiSelect:t.multiSelect,checkboxSelection:t.checkboxSelection,disableSelection:t.disableSelection}}}};Je.models={selectedItems:{getDefaultValue:e=>e.defaultSelectedItems}};const hr=[];Je.getDefaultizedParams=({params:e})=>y({},e,{disableSelection:e.disableSelection??!1,multiSelect:e.multiSelect??!1,checkboxSelection:e.checkboxSelection??!1,defaultSelectedItems:e.defaultSelectedItems??(e.multiSelect?hr:null)});Je.params={disableSelection:!0,multiSelect:!0,checkboxSelection:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const Ht=1e3;class gr{constructor(t=Ht){this.timeouts=new Map,this.cleanupTimeout=Ht,this.cleanupTimeout=t}register(t,o,s){this.timeouts||(this.timeouts=new Map);const r=setTimeout(()=>{typeof o=="function"&&o(),this.timeouts.delete(s.cleanupToken)},this.cleanupTimeout);this.timeouts.set(s.cleanupToken,r)}unregister(t){const o=this.timeouts.get(t.cleanupToken);o&&(this.timeouts.delete(t.cleanupToken),clearTimeout(o))}reset(){this.timeouts&&(this.timeouts.forEach((t,o)=>{this.unregister({cleanupToken:o})}),this.timeouts=void 0)}}class fr{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,o,s){this.registry.register(t,o,s)}unregister(t){this.registry.unregister(t)}reset(){}}class br{}function xr(e){let t=0;return function(s,r,i){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new fr:new gr);const[c]=I.useState(new br),l=I.useRef(null),u=I.useRef(void 0);u.current=i;const m=I.useRef(null);if(!l.current&&u.current){const d=(p,f)=>{var b;f.defaultMuiPrevented||(b=u.current)==null||b.call(u,p,f)};l.current=s.$$subscribeEvent(r,d),t+=1,m.current={cleanupToken:t},e.registry.register(c,()=>{var p;(p=l.current)==null||p.call(l),l.current=null,m.current=null},m.current)}else!u.current&&l.current&&(l.current(),l.current=null,m.current&&(e.registry.unregister(m.current),m.current=null));I.useEffect(()=>{if(!l.current&&u.current){const d=(p,f)=>{var b;f.defaultMuiPrevented||(b=u.current)==null||b.call(u,p,f)};l.current=s.$$subscribeEvent(r,d)}return m.current&&e.registry&&(e.registry.unregister(m.current),m.current=null),()=>{var d;(d=l.current)==null||d.call(l),l.current=null}},[s,r])}}const Ir={registry:null},jr=xr(Ir),An=(e=document)=>{const t=e.activeElement;return t?t.shadowRoot?An(t.shadowRoot):t:null};function vr(e){return e.replace(/["\\]/g,"\\$&")}const wr=(e,t)=>{let o=Ue(t).find(s=>{if(!e.isItemNavigable(s))return!1;const r=e.getItemMeta(s);return r&&(r.parentId==null||e.isItemExpanded(r.parentId))});return o==null&&(o=_e(e)),o},St=({instance:e,params:t,state:o,setState:s,models:r,rootRef:i})=>{const c=wr(e,r.selectedItems.value),l=ie(g=>{const a=typeof g=="function"?g(o.focusedItemId):g;o.focusedItemId!==a&&s(h=>y({},h,{focusedItemId:a}))}),u=I.useCallback(()=>!!i.current&&i.current.contains(An(Hs(i.current))),[i]),m=I.useCallback(g=>o.focusedItemId===g&&u(),[o.focusedItemId,u]),d=g=>{const a=e.getItemMeta(g);return a&&(a.parentId==null||e.isItemExpanded(a.parentId))},p=(g,a)=>{const h=e.getItemDOMElement(a);h&&h.focus(),l(a),t.onItemFocus&&t.onItemFocus(g,a)},f=ie((g,a)=>{d(a)&&p(g,a)}),b=ie(()=>{if(o.focusedItemId==null)return;if(e.getItemMeta(o.focusedItemId)){const a=e.getItemDOMElement(o.focusedItemId);a&&a.blur()}l(null)}),j=g=>g===c;jr(e,"removeItem",({id:g})=>{o.focusedItemId===g&&p(null,c)});const x=g=>a=>{var h;(h=g.onFocus)==null||h.call(g,a),!a.defaultMuiPrevented&&a.target===a.currentTarget&&p(a,c)};return{getRootProps:g=>({onFocus:x(g)}),publicAPI:{focusItem:f},instance:{isItemFocused:m,canItemBeTabbed:j,focusItem:f,removeFocusedItem:b}}};St.getInitialState=()=>({focusedItemId:null});St.params={onItemFocus:!0};const Ke=(e,t)=>e.getAvailablePlugins().has(t),Cr=({props:e})=>{const{instance:t}=je(),{label:o,itemId:s}=e,[r,i]=I.useState(o),c=t.isItemBeingEdited(s);return I.useEffect(()=>{c||i(o)},[c,o]),{propsEnhancers:{labelInput:({externalEventHandlers:l,interactions:u})=>t.isItemEditable(s)?{value:r??"","data-element":"labelInput",onChange:b=>{var j;(j=l.onChange)==null||j.call(l,b),i(b.target.value)},onKeyDown:b=>{var x;if((x=l.onKeyDown)==null||x.call(l,b),b.defaultMuiPrevented)return;const j=b.target;b.key==="Enter"&&j.value?u.handleSaveItemLabel(b,j.value):b.key==="Escape"&&u.handleCancelItemLabelEditing(b)},onBlur:b=>{var j;(j=l.onBlur)==null||j.call(l,b),!b.defaultMuiPrevented&&b.target.value&&u.handleSaveItemLabel(b,b.target.value)},autoFocus:!0,type:"text"}:{}}}},ae=({instance:e,state:t,setState:o,params:s})=>{const r=I.useRef(t.editedItemId),i=p=>r.current===p,c=p=>{o(f=>y({},f,{editedItemId:p})),r.current=p},l=p=>p===t.editedItemId,u=!!s.isItemEditable,m=p=>{if(p==null||!u)return!1;const f=e.getItem(p);return f?typeof s.isItemEditable=="function"?s.isItemEditable(f):!!s.isItemEditable:!1},d=(p,f)=>{if(!f)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",p].join(`
`));o(b=>{const j=b.items.itemMetaMap[p];return j.label!==f?y({},b,{items:y({},b.items,{itemMetaMap:y({},b.items.itemMetaMap,{[p]:y({},j,{label:f})})})}):b}),s.onItemLabelChange&&s.onItemLabelChange(p,f)};return{instance:{setEditedItemId:c,isItemBeingEdited:l,updateItemLabel:d,isItemEditable:m,isTreeViewEditable:u,isItemBeingEditedRef:i},publicAPI:{updateItemLabel:d}}};ae.itemPlugin=Cr;ae.getDefaultizedParams=({params:e,experimentalFeatures:t})=>{const o=t==null?void 0:t.labelEditing;return y({},e,{isItemEditable:o?e.isItemEditable??!1:!1})};ae.getInitialState=()=>({editedItemId:null});ae.params={onItemLabelChange:!0,isItemEditable:!0};function Sr(e){return!!e&&e.length===1&&!!e.match(/\S/)}const Dn=({instance:e,params:t,state:o})=>{const s=fs(),r=I.useRef({}),i=ie(d=>{r.current=d(r.current)});I.useEffect(()=>{if(e.areItemUpdatesPrevented())return;const d={},p=f=>{d[f.id]=f.label.substring(0,1).toLowerCase()};Object.values(o.items.itemMetaMap).forEach(p),r.current=d},[o.items.itemMetaMap,t.getItemId,e]);const c=(d,p)=>{const f=p.toLowerCase(),b=a=>{const h=We(e,a);return h===null?_e(e):h};let j=null,x=b(d);const g={};for(;j==null&&!g[x];)r.current[x]===f?j=x:(g[x]=!0,x=b(x));return j},l=d=>!t.disableSelection&&!e.isItemDisabled(d),u=d=>!e.isItemDisabled(d)&&e.isItemExpandable(d);return{instance:{updateFirstCharMap:i,handleItemKeyDown:(d,p)=>{if(d.defaultMuiPrevented||d.altKey||lt(d.target,d.currentTarget))return;const f=d.ctrlKey||d.metaKey,b=d.key;switch(!0){case(b===" "&&l(p)):{d.preventDefault(),t.multiSelect&&d.shiftKey?e.expandSelectionRange(d,p):e.selectItem({event:d,itemId:p,keepExistingSelection:t.multiSelect,shouldBeSelected:t.multiSelect?void 0:!0});break}case b==="Enter":{Ke(e,ae)&&e.isItemEditable(p)&&!e.isItemBeingEdited(p)?e.setEditedItemId(p):u(p)?(e.toggleItemExpansion(d,p),d.preventDefault()):l(p)&&(t.multiSelect?(d.preventDefault(),e.selectItem({event:d,itemId:p,keepExistingSelection:!0})):e.isItemSelected(p)||(e.selectItem({event:d,itemId:p}),d.preventDefault()));break}case b==="ArrowDown":{const j=We(e,p);j&&(d.preventDefault(),e.focusItem(d,j),t.multiSelect&&d.shiftKey&&l(j)&&e.selectItemFromArrowNavigation(d,p,j));break}case b==="ArrowUp":{const j=_n(e,p);j&&(d.preventDefault(),e.focusItem(d,j),t.multiSelect&&d.shiftKey&&l(j)&&e.selectItemFromArrowNavigation(d,p,j));break}case(b==="ArrowRight"&&!s||b==="ArrowLeft"&&s):{if(f)return;if(e.isItemExpanded(p)){const j=We(e,p);j&&(e.focusItem(d,j),d.preventDefault())}else u(p)&&(e.toggleItemExpansion(d,p),d.preventDefault());break}case(b==="ArrowLeft"&&!s||b==="ArrowRight"&&s):{if(f)return;if(u(p)&&e.isItemExpanded(p))e.toggleItemExpansion(d,p),d.preventDefault();else{const j=e.getItemMeta(p).parentId;j&&(e.focusItem(d,j),d.preventDefault())}break}case b==="Home":{l(p)&&t.multiSelect&&f&&d.shiftKey?e.selectRangeFromStartToItem(d,p):e.focusItem(d,_e(e)),d.preventDefault();break}case b==="End":{l(p)&&t.multiSelect&&f&&d.shiftKey?e.selectRangeFromItemToEnd(d,p):e.focusItem(d,Rn(e)),d.preventDefault();break}case b==="*":{e.expandAllSiblings(d,p),d.preventDefault();break}case(String.fromCharCode(d.keyCode)==="A"&&f&&t.multiSelect&&!t.disableSelection):{e.selectAllNavigableItems(d),d.preventDefault();break}case(!f&&!d.shiftKey&&Sr(b)):{const j=c(p,b);j!=null&&(e.focusItem(d,j),d.preventDefault());break}}}}}};Dn.params={};const Vn=({slots:e,slotProps:t})=>({contextValue:{icons:{slots:{collapseIcon:e.collapseIcon,expandIcon:e.expandIcon,endIcon:e.endIcon},slotProps:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon}}}});Vn.params={};const Nn=I.createContext(null);function zn(e){const{children:t,itemId:o=null}=e,{instance:s,treeId:r,rootRef:i}=je(),c=I.useRef(new Map);I.useEffect(()=>{if(!i.current)return;let u=null;if(o==null)u=i.current.id;else{const j=s.getItemMeta(o);j!==void 0&&(u=Ge({itemId:o,treeId:r,id:j.idAttribute}))}if(u==null)return;const m=s.getItemOrderedChildrenIds(o??null)??[],d=vr(u),p=i.current.querySelectorAll(`${o==null?"":`*[id="${d}"] `}[role="treeitem"]:not(*[id="${d}"] [role="treeitem"] [role="treeitem"])`),f=Array.from(p).map(j=>c.current.get(j.id));(f.length!==m.length||f.some((j,x)=>j!==m[x]))&&s.setJSXItemsOrderedChildrenIds(o??null,f)});const l=I.useMemo(()=>({registerChild:(u,m)=>c.current.set(u,m),unregisterChild:u=>c.current.delete(u),parentId:o}),[o]);return n.jsx(Nn.Provider,{value:l,children:t})}const ze=({instance:e,setState:t})=>{e.preventItemUpdates();const o=ie(i=>(t(c=>{if(c.items.itemMetaMap[i.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Two items were provided with the same id in the \`items\` prop: "${i.id}"`].join(`
`));return y({},c,{items:y({},c.items,{itemMetaMap:y({},c.items.itemMetaMap,{[i.id]:i}),itemMap:y({},c.items.itemMap,{[i.id]:{id:i.id,label:i.label}})})})}),()=>{t(c=>{const l=y({},c.items.itemMetaMap),u=y({},c.items.itemMap);return delete l[i.id],delete u[i.id],y({},c,{items:y({},c.items,{itemMetaMap:l,itemMap:u})})}),Tn(e,"removeItem",{id:i.id})})),s=(i,c)=>{const l=i??pe;t(u=>y({},u,{items:y({},u.items,{itemOrderedChildrenIds:y({},u.items.itemOrderedChildrenIds,{[l]:c}),itemChildrenIndexes:y({},u.items.itemChildrenIndexes,{[l]:En(c)})})}))},r=ie((i,c)=>(e.updateFirstCharMap(l=>(l[i]=c,l)),()=>{e.updateFirstCharMap(l=>{const u=y({},l);return delete u[i],u})}));return{instance:{insertJSXItem:o,setJSXItemsOrderedChildrenIds:s,mapFirstCharFromJSX:r}}},Ln=e=>Array.isArray(e)?e.length>0&&e.some(Ln):!!e,yr=({props:e,rootRef:t,contentRef:o})=>{const{instance:s,treeId:r}=je(),{children:i,disabled:c=!1,label:l,itemId:u,id:m}=e,d=I.useContext(Nn);if(d==null)throw new Error(["MUI X: Could not find the Tree View Children Item context.","It looks like you rendered your component outside of a SimpleTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));const{registerChild:p,unregisterChild:f,parentId:b}=d,j=Ln(i),x=I.useRef(null),g=ke(x,o);return Ws(()=>{const a=Ge({itemId:u,treeId:r,id:m});return p(a,u),()=>{f(a)}},[p,f,u,m,r]),I.useEffect(()=>s.insertJSXItem({id:u,idAttribute:m,parentId:b,expandable:j,disabled:c}),[s,b,u,j,c,m]),I.useEffect(()=>{var a;if(l)return s.mapFirstCharFromJSX(u,(((a=x.current)==null?void 0:a.textContent)??"").substring(0,1).toLowerCase())},[s,u,l]),{contentRef:g,rootRef:t}};ze.itemPlugin=yr;ze.wrapItem=({children:e,itemId:t})=>{const o=I.useContext(Me);return n.jsx(zn,{itemId:t,children:n.jsx(Me.Provider,{value:o+1,children:e})})};ze.wrapRoot=({children:e})=>n.jsx(zn,{children:n.jsx(Me.Provider,{value:0,children:e})});ze.params={};const Tr=[Ne,qe,Je,St,Dn,Vn,ze],Er=wn(),kr=e=>{const{classes:t}=e;return xt({root:["root"]},Zo,t)},Mr=Z("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),_r=[],Rr=I.forwardRef(function(t,o){const s=Er({props:t,name:"MuiSimpleTreeView"}),r=s,{getRootProps:i,contextValue:c}=lr({plugins:Tr,rootRef:o,props:y({},s,{items:_r})}),{slots:l,slotProps:u}=s,m=kr(s),d=(l==null?void 0:l.root)??Mr,p=Te({elementType:d,externalSlotProps:u==null?void 0:u.root,className:m.root,getSlotProps:i,ownerState:r});return n.jsx(cr,{value:c,children:n.jsx(d,y({},p))})});function Fn(e){const{instance:t,items:{onItemClick:o},selection:{multiSelect:s,checkboxSelection:r,disableSelection:i},expansion:{expansionTrigger:c}}=je(),l=t.isItemExpandable(e),u=t.isItemExpanded(e),m=t.isItemFocused(e),d=t.isItemSelected(e),p=t.isItemDisabled(e),f=t!=null&&t.isItemBeingEdited?t==null?void 0:t.isItemBeingEdited(e):!1,b=t.isItemEditable?t.isItemEditable(e):!1,j=C=>{if(!p){m||t.focusItem(C,e);const k=s&&(C.shiftKey||C.ctrlKey||C.metaKey);l&&!(k&&t.isItemExpanded(e))&&t.toggleItemExpansion(C,e)}},x=C=>{p||(m||t.focusItem(C,e),s&&(C.shiftKey||C.ctrlKey||C.metaKey)?C.shiftKey?t.expandSelectionRange(C,e):t.selectItem({event:C,itemId:e,keepExistingSelection:!0}):t.selectItem({event:C,itemId:e,shouldBeSelected:!0}))},g=C=>{if(i||p)return;const k=C.nativeEvent.shiftKey;s&&k?t.expandSelectionRange(C,e):t.selectItem({event:C,itemId:e,keepExistingSelection:s,shouldBeSelected:C.target.checked})},a=C=>{(C.shiftKey||C.ctrlKey||C.metaKey||p)&&C.preventDefault()},h=()=>{Ke(t,ae)&&t.isItemEditable(e)&&(t.isItemBeingEdited(e)?t.setEditedItemId(null):t.setEditedItemId(e))};return{disabled:p,expanded:u,selected:d,focused:m,editable:b,editing:f,disableSelection:i,checkboxSelection:r,handleExpansion:j,handleSelection:x,handleCheckboxSelection:g,handleContentClick:o,preventSelection:a,expansionTrigger:c,toggleItemEditing:h,handleSaveItemLabel:(C,k)=>{Ke(t,ae)&&t.isItemBeingEditedRef(e)&&(t.updateItemLabel(e,k),h(),t.focusItem(C,e))},handleCancelItemLabelEditing:C=>{Ke(t,ae)&&t.isItemBeingEditedRef(e)&&(h(),t.focusItem(C,e))}}}const Pr=Z("div",{name:"MuiTreeItem2DragAndDropOverlay",slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>It(e)&&e!=="action"})(({theme:e})=>({position:"absolute",left:0,display:"flex",top:0,bottom:0,right:0,pointerEvents:"none",variants:[{props:{action:"make-child"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderRadius:e.shape.borderRadius,backgroundColor:e.vars?`rgba(${e.vars.palette.primary.darkChannel} / ${e.vars.palette.action.focusOpacity})`:ye(e.palette.primary.dark,e.palette.action.focusOpacity)}},{props:{action:"reorder-above"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderTop:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"reorder-below"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * var(--TreeView-itemDepth))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}},{props:{action:"move-to-parent"},style:{marginLeft:"calc(var(--TreeView-indentMultiplier) * calc(var(--TreeView-itemDepth) - 1))",borderBottom:`1px solid ${(e.vars||e).palette.action.active}`}}]}));function Ar(e){return e.action==null?null:n.jsx(Pr,y({},e))}const Dr=Z("input",{name:"MuiTreeItem2",slot:"LabelInput",overridesResolver:(e,t)=>t.labelInput})(({theme:e})=>y({},e.typography.body1,{width:"100%",backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,border:"none",padding:"0 2px",boxSizing:"border-box","&:focus":{outline:`1px solid ${e.palette.primary.main}`}})),Vr=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown","dragAndDropOverlayProps","labelInputProps"],On=I.forwardRef(function(t,o){const{classes:s,className:r,displayIcon:i,expansionIcon:c,icon:l,label:u,itemId:m,onClick:d,onMouseDown:p,dragAndDropOverlayProps:f,labelInputProps:b}=t,j=me(t,Vr),{disabled:x,expanded:g,selected:a,focused:h,editing:v,editable:w,disableSelection:C,checkboxSelection:k,handleExpansion:E,handleSelection:S,handleCheckboxSelection:A,handleContentClick:R,preventSelection:D,expansionTrigger:B,toggleItemEditing:W}=Fn(m),U=l||c||i,ee=I.useRef(null),ve=K=>{D(K),p&&p(K)},Q=K=>{var ge;R==null||R(K,m),!((ge=ee.current)!=null&&ge.contains(K.target))&&(B==="content"&&E(K),k||S(K),d&&d(K))},ce=K=>{K.defaultMuiPrevented||W()};return n.jsxs("div",y({},j,{className:bt(s.root,r,g&&s.expanded,a&&s.selected,h&&s.focused,x&&s.disabled,v&&s.editing,w&&s.editable),onClick:Q,onMouseDown:ve,ref:o,children:[n.jsx("div",{className:s.iconContainer,children:U}),k&&n.jsx(P,{className:s.checkbox,checked:a,onChange:A,disabled:x||C,ref:ee,tabIndex:-1}),v?n.jsx(Dr,y({},b,{className:s.labelInput})):n.jsx("div",y({className:s.label},w&&{onDoubleClick:ce},{children:u})),f&&n.jsx(Ar,y({},f))]}))});function Nr(e){return gt("MuiTreeItem",e)}const ne=ft("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label","checkbox","labelInput","editable","editing","dragAndDropOverlay"]),zr=L(n.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),Lr=L(n.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function $n(e){const{children:t,itemId:o}=e,{wrapItem:s,instance:r}=je();return s({children:t,itemId:o,instance:r})}$n.propTypes={children:Vt.node,itemId:Vt.string.isRequired};const Fr=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],Or=["ownerState"],$r=["ownerState"],Br=["ownerState"],Wr=wn(),Ur=e=>{const{classes:t}=e;return xt({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],checkbox:["checkbox"],label:["label"],labelInput:["labelInput"],editing:["editing"],editable:["editable"],groupTransition:["groupTransition"]},Nr,t)},Kr=Z("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(e,t)=>t.root})({listStyle:"none",margin:0,padding:0,outline:0}),Hr=Z(On,{name:"MuiTreeItem",slot:"Content",overridesResolver:(e,t)=>[t.content,t.iconContainer&&{[`& .${ne.iconContainer}`]:t.iconContainer},t.label&&{[`& .${ne.label}`]:t.label}],shouldForwardProp:e=>It(e)&&e!=="indentationAtItemLevel"})(({theme:e})=>({padding:e.spacing(.5,1),borderRadius:e.shape.borderRadius,width:"100%",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",gap:e.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ne.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${ne.focused}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ne.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ye(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ye(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ye(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${ne.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ye(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`& .${ne.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${ne.label}`]:y({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},e.typography.body1),[`& .${ne.checkbox}`]:{padding:0},variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:`calc(${e.spacing(1)} + var(--TreeView-itemChildrenIndentation) * var(--TreeView-itemDepth))`}}]})),Gr=Z(jo,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(e,t)=>t.groupTransition,shouldForwardProp:e=>It(e)&&e!=="indentationAtItemLevel"})({margin:0,padding:0,paddingLeft:"var(--TreeView-itemChildrenIndentation)",variants:[{props:{indentationAtItemLevel:!0},style:{paddingLeft:0}}]}),z=I.forwardRef(function(t,o){var Et,kt,Mt,_t;const{icons:s,runItemPlugins:r,items:{disabledItemsFocusable:i,indentationAtItemLevel:c},selection:{disableSelection:l},expansion:{expansionTrigger:u},treeId:m,instance:d}=je(),p=I.useContext(Me),f=Wr({props:t,name:"MuiTreeItem"}),{children:b,className:j,slots:x,slotProps:g,ContentComponent:a=On,ContentProps:h,itemId:v,id:w,label:C,onClick:k,onMouseDown:E,onBlur:S,onKeyDown:A}=f,R=me(f,Fr),{expanded:D,focused:B,selected:W,disabled:U,editing:ee,handleExpansion:ve,handleCancelItemLabelEditing:Q,handleSaveItemLabel:ce}=Fn(v),{contentRef:K,rootRef:ge,propsEnhancers:H}=r(f),fe=I.useRef(null),Le=I.useRef(null),Xe=ke(o,ge,fe),Ye=ke(h==null?void 0:h.ref,K,Le),_={expandIcon:(x==null?void 0:x.expandIcon)??s.slots.expandIcon??zr,collapseIcon:(x==null?void 0:x.collapseIcon)??s.slots.collapseIcon??Lr,endIcon:(x==null?void 0:x.endIcon)??s.slots.endIcon,icon:x==null?void 0:x.icon,groupTransition:x==null?void 0:x.groupTransition},G=V=>Array.isArray(V)?V.length>0&&V.some(G):!!V,$=G(b),te=y({},f,{expanded:D,focused:B,selected:W,disabled:U,indentationAtItemLevel:c}),O=Ur(te),we=_.groupTransition??void 0,Kn=Te({elementType:we,ownerState:{},externalSlotProps:g==null?void 0:g.groupTransition,additionalProps:y({unmountOnExit:!0,in:D,component:"ul",role:"group"},c?{indentationAtItemLevel:!0}:{}),className:O.groupTransition}),Hn=V=>{u==="iconContainer"&&ve(V)},Qe=D?_.collapseIcon:_.expandIcon,Gn=Te({elementType:Qe,ownerState:{},externalSlotProps:V=>D?y({},xe(s.slotProps.collapseIcon,V),xe(g==null?void 0:g.collapseIcon,V)):y({},xe(s.slotProps.expandIcon,V),xe(g==null?void 0:g.expandIcon,V)),additionalProps:{onClick:Hn}}),qn=me(Gn,Or),Jn=$&&Qe?n.jsx(Qe,y({},qn)):null,Ze=$?void 0:_.endIcon,Xn=Te({elementType:Ze,ownerState:{},externalSlotProps:V=>$?{}:y({},xe(s.slotProps.endIcon,V),xe(g==null?void 0:g.endIcon,V))}),Yn=me(Xn,$r),Qn=Ze?n.jsx(Ze,y({},Yn)):null,et=_.icon,Zn=Te({elementType:et,ownerState:{},externalSlotProps:g==null?void 0:g.icon}),es=me(Zn,Br),ts=et?n.jsx(et,y({},es)):null;let Fe;W?Fe=!0:l||U?Fe=void 0:Fe=!1;function ns(V){!B&&(!U||i)&&V.currentTarget===V.target&&d.focusItem(V,v)}function ss(V){var be,Ce,Rt,Pt;S==null||S(V),!(ee||V.relatedTarget&&lt(V.relatedTarget,fe.current)&&(V.target&&((Ce=(be=V.target)==null?void 0:be.dataset)==null?void 0:Ce.element)==="labelInput"&&lt(V.target,fe.current)||((Pt=(Rt=V.relatedTarget)==null?void 0:Rt.dataset)==null?void 0:Pt.element)==="labelInput"))&&d.removeFocusedItem()}const os=V=>{var be,Ce;A==null||A(V),((Ce=(be=V.target)==null?void 0:be.dataset)==null?void 0:Ce.element)!=="labelInput"&&d.handleItemKeyDown(V,v)},rs=Ge({itemId:v,treeId:m,id:w}),is=d.canItemBeTabbed(v)?0:-1,Oe={rootRefObject:fe,contentRefObject:Le,interactions:{handleSaveItemLabel:ce,handleCancelItemLabelEditing:Q}},as=((Et=H.root)==null?void 0:Et.call(H,y({},Oe,{externalEventHandlers:Ft(R)})))??{},ls=((kt=H.content)==null?void 0:kt.call(H,y({},Oe,{externalEventHandlers:Ft(h)})))??{},yt=((Mt=H.dragAndDropOverlay)==null?void 0:Mt.call(H,y({},Oe,{externalEventHandlers:{}})))??{},Tt=((_t=H.labelInput)==null?void 0:_t.call(H,y({},Oe,{externalEventHandlers:{}})))??{};return n.jsx($n,{itemId:v,children:n.jsxs(Kr,y({className:bt(O.root,j),role:"treeitem","aria-expanded":$?D:void 0,"aria-selected":Fe,"aria-disabled":U||void 0,id:rs,tabIndex:is},R,{ownerState:te,onFocus:ns,onBlur:ss,onKeyDown:os,ref:Xe,style:c?y({},R.style,{"--TreeView-itemDepth":typeof p=="function"?p(v):p}):R.style},as,{children:[n.jsx(Hr,y({as:a,classes:{root:O.content,expanded:O.expanded,selected:O.selected,focused:O.focused,disabled:O.disabled,editable:O.editable,editing:O.editing,iconContainer:O.iconContainer,label:O.label,labelInput:O.labelInput,checkbox:O.checkbox},label:C,itemId:v,onClick:k,onMouseDown:E,icon:ts,expansionIcon:Jn,displayIcon:Qn,ownerState:te},h,ls,yt.action==null?{}:{dragAndDropOverlayProps:yt},Tt.value==null?{}:{labelInputProps:Tt},{ref:Ye})),b&&n.jsx(Gr,y({as:we},Kn,{children:b}))]}))})}),Bn=L([n.jsx("circle",{cx:"7.2",cy:"14.4",r:"3.2"},"0"),n.jsx("circle",{cx:"14.8",cy:"18",r:"2"},"1"),n.jsx("circle",{cx:"15.2",cy:"8.8",r:"4.8"},"2")],"BubbleChart"),qr=L(n.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),Jr=L(n.jsx("path",{d:"M19 7H9c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2m0 2v2H9V9zm-6 6v-2h2v2zm2 2v2h-2v-2zm-4-2H9v-2h2zm6-2h2v2h-2zm-8 4h2v2H9zm8 2v-2h2v2zM6 17H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v1h-2V5H5v10h1z"}),"TableView"),Xr=L(n.jsx("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM5 19l3-4 2 3 3-4 4 5z"}),"AddPhotoAlternate"),Yr=L(n.jsx("path",{d:"m19 1-5 5v11l5-4.5zM1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5V6c-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6m22 13.5V6c-.6-.45-1.25-.75-2-1v13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5v2c1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5z"}),"AutoStories"),Gt=L(n.jsx("path",{d:"M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .65.73.45.75.45C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.41.21.75-.19.75-.45V6c-1.49-1.12-3.63-1.5-5.5-1.5m3.5 14c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"}),"ImportContacts"),Qr=L(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20m6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9"}),"NotInterested"),Zr=L(n.jsx("path",{d:"m21.81 12.74-.82-.63v-.22l.8-.63c.16-.12.2-.34.1-.51l-.85-1.48c-.07-.13-.21-.2-.35-.2q-.075 0-.15.03l-.95.38c-.08-.05-.11-.07-.19-.11l-.15-1.01c-.03-.21-.2-.36-.4-.36h-1.71c-.2 0-.37.15-.4.34l-.14 1.01c-.03.02-.07.03-.1.05l-.09.06-.95-.38q-.075-.03-.15-.03c-.14 0-.27.07-.35.2l-.85 1.48c-.1.17-.06.39.1.51l.8.63v.23l-.8.63c-.16.12-.2.34-.1.51l.85 1.48c.07.13.21.2.35.2q.075 0 .15-.03l.95-.37c.08.05.12.07.2.11l.15 1.01c.03.2.2.34.4.34h1.71c.2 0 .37-.15.4-.34l.15-1.01c.03-.02.07-.03.1-.05l.09-.06.95.38q.075.03.15.03c.14 0 .27-.07.35-.2l.85-1.48c.1-.17.06-.39-.1-.51M18 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M17 17h2v4c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4h-2V6H7v12h10z"}),"AppSettingsAlt"),ei=L([n.jsx("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),n.jsx("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")],"Psychology"),ti=L(n.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");function ni({open:e}){const{t}=F(),{pathname:o,search:s}=dt(),r=ut(),[i,c]=mt(),[l,u]=N(ht),[m,d]=N(Qt),p=J(ws),f=Ie(on),b=I.useMemo(()=>new Set(p),[p]),j=o.split("/").pop(),x=a=>{f(a)},g=I.useCallback((a,h)=>{var v;switch(h){case"graphs-social":r("socialgraph"+s);break;case"graphs-heatmap":r("heatmaps"+s);break;case"graphs-grid":r("usergrid"+s);break;case"graphs-workflow":r("workflow"+s);break;case"graphs-content":r("contentgraph"+s);break;case"graphs-topic":r("topicgraph"+s);break;case"tables-actionlog":r("actionlog"+s);break;case"tables-user":r("userstats"+s);break;case"tables-content":r("contentengage"+s);break;case"tables-topics":r("topictable"+s);break;case"tools-contentwizard":r("contentwizard"+s);break;case"tools-browser":r("browser"+s);break;case"guides-default":c(w=>(w.set("guide","default"),w));break;case"guides-kiosk":c(w=>(w.set("guide","kiosk"),w));break;case"guides-custom":(v=document.getElementById("guideopen"))==null||v.click();break;case"guides-none":c(w=>(w.delete("guide"),w.delete("page"),w));break;case"settings-recom":u("recommendation");break;case"settings-app":u("app");break;case"tools-simulator":d(!0);break}},[r,c,s,u,d]);return n.jsxs("div",{className:T.treeContainer,style:e?void 0:{display:"none"},children:[n.jsx("input",{type:"file",id:"guideopen",onChange:a=>{a.currentTarget.files&&(x(a.currentTarget.files[0]),a.currentTarget.value="")},hidden:!0,accept:".zip,application/zip"}),n.jsxs(Rr,{style:{alignSelf:"flex-start"},onItemClick:g,children:[!b.has("graphs")&&n.jsxs(z,{itemId:"graphs",label:n.jsxs("div",{className:T.treeItem,children:[n.jsx(Bn,{}),t("menu.vis.title")]}),children:[!b.has("graphs-social")&&n.jsx(z,{itemId:"graphs-social",label:n.jsxs("div",{className:j==="socialgraph"?T.treeItemSelected:T.treeItem,children:[n.jsx(qr,{}),t("menu.vis.socialgraph")]})}),!b.has("graphs-heatmap")&&n.jsx(z,{itemId:"graphs-heatmap",label:n.jsxs("div",{className:j==="heatmaps"?T.treeItemSelected:T.treeItem,children:[n.jsx(dn,{}),t("menu.vis.heatmap")]})}),!b.has("graphs-grid")&&n.jsx(z,{itemId:"graphs-grid",label:n.jsxs("div",{className:j==="usergrid"?T.treeItemSelected:T.treeItem,children:[n.jsx(cn,{}),t("menu.vis.usergrid")]})}),!b.has("graphs-content")&&n.jsx(z,{itemId:"graphs-content",label:n.jsxs("div",{className:j==="contentgraph"?T.treeItemSelected:T.treeItem,children:[n.jsx(Ds,{}),t("menu.vis.coengagement")]})}),!b.has("graphs-topic")&&n.jsx(z,{itemId:"graphs-topic",label:n.jsxs("div",{className:j==="topicgraph"?T.treeItemSelected:T.treeItem,children:[n.jsx(Nt,{}),t("menu.vis.topics")]})}),!b.has("graphs-workflow")&&n.jsx(z,{disabled:!0,itemId:"graphs-workflow",label:n.jsxs("div",{className:j==="workflow"?T.treeItemSelected:T.treeItem,children:[n.jsx(ti,{}),t("menu.vis.workflow")]})})]}),!b.has("tables")&&n.jsxs(z,{itemId:"tables",label:n.jsxs("div",{className:T.treeItem,children:[n.jsx(Jr,{}),t("menu.tables.title")]}),children:[n.jsx(z,{itemId:"tables-actionlog",label:n.jsxs("div",{className:j==="actionlog"?T.treeItemSelected:T.treeItem,children:[n.jsx(Vs,{}),t("menu.tables.actionlog")]})}),n.jsx(z,{itemId:"tables-user",label:n.jsxs("div",{className:j==="userstats"?T.treeItemSelected:T.treeItem,children:[n.jsx(zt,{}),t("menu.tables.userstats")]})}),n.jsx(z,{itemId:"tables-content",label:n.jsxs("div",{className:j==="contentengage"?T.treeItemSelected:T.treeItem,children:[n.jsx(zt,{}),t("menu.tables.contentengage")]})}),n.jsx(z,{itemId:"tables-topics",label:n.jsxs("div",{className:j==="topictable"?T.treeItemSelected:T.treeItem,children:[n.jsx(Nt,{}),t("menu.tables.topicengage")]})})]}),!b.has("guides")&&n.jsxs(z,{itemId:"guides",label:n.jsxs("div",{className:T.treeItem,children:[n.jsx(Yr,{}),t("menu.guides.title")]}),children:[n.jsx(z,{itemId:"guides-none",label:n.jsxs("div",{className:i.get("guide")===null?T.treeItemSelected:T.treeItem,children:[n.jsx(Qr,{}),t("menu.guides.none")]})}),n.jsx(z,{itemId:"guides-default",label:n.jsxs("div",{className:i.get("guide")==="default"?T.treeItemSelected:T.treeItem,children:[n.jsx(Gt,{}),t("menu.guides.default")]})}),n.jsx(z,{itemId:"guides-kiosk",label:n.jsxs("div",{className:i.get("guide")==="kiosk"?T.treeItemSelected:T.treeItem,children:[n.jsx(Gt,{}),t("menu.guides.kiosk")]})}),n.jsx(z,{itemId:"guides-custom",label:n.jsxs("div",{className:T.treeItem,children:[n.jsx(bn,{}),t("menu.guides.custom")]})})]}),!b.has("tools")&&n.jsxs(z,{itemId:"tools",label:n.jsxs("div",{className:T.treeItem,children:[n.jsx(vn,{}),t("menu.tools.title")]}),children:[n.jsx(z,{itemId:"tools-contentwizard",label:n.jsxs("div",{className:j==="contentwizard"?T.treeItemSelected:T.treeItem,children:[n.jsx(Xr,{}),t("menu.tools.addcontent")]})}),n.jsx(z,{itemId:"tools-browser",label:n.jsxs("div",{className:j==="browser"?T.treeItemSelected:T.treeItem,children:[n.jsx(Os,{}),t("menu.tools.browseContent")]})}),n.jsx(z,{itemId:"tools-simulator",label:n.jsxs("div",{className:m?T.treeItemSelected:T.treeItem,children:[n.jsx(ei,{}),t("menu.tools.simulator")]})})]}),!b.has("settings")&&n.jsxs(z,{itemId:"settings",label:n.jsxs("div",{className:T.treeItem,children:[n.jsx(rn,{}),t("menu.settings.title")]}),children:[n.jsx(z,{itemId:"settings-app",label:n.jsxs("div",{className:l==="app"?T.treeItemSelected:T.treeItem,children:[n.jsx(Zr,{}),t("menu.settings.app")]})}),n.jsx(z,{itemId:"settings-recom",label:n.jsxs("div",{className:l==="recommendation"?T.treeItemSelected:T.treeItem,children:[n.jsx(Fs,{}),t("menu.settings.recommendation")]})})]})]})]})}const si=L(n.jsx("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),Wn=L(n.jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),he=Z(Js)({textTransform:"none",gap:"0.5rem",fontStyle:"italic",justifyContent:"flex-start",textWrap:"nowrap",overflow:"hidden"});function oi(){const{t:e}=F(),{search:t,pathname:o}=dt(),s=ut(),r=o.split("/").pop();return n.jsxs("div",{className:T.treeContainer,children:[n.jsx(Y,{tooltip:e("menu.vis.usergrid"),fullWidth:!0,selected:r==="usergrid",children:n.jsx(he,{color:"inherit","aria-label":e("menu.vis.usergrid"),size:"large",variant:"text",fullWidth:!0,onClick:()=>s("usergrid"+t),children:n.jsx(cn,{fontSize:"large"})})}),n.jsx(Y,{tooltip:e("menu.vis.socialgraph"),fullWidth:!0,selected:r==="socialgraph",children:n.jsx(he,{color:"inherit","aria-label":e("menu.vis.socialgraph"),size:"large",variant:"text",fullWidth:!0,onClick:()=>s("socialgraph"+t),children:n.jsx(Bn,{fontSize:"large"})})}),n.jsx(Y,{tooltip:e("menu.vis.heatmap"),fullWidth:!0,selected:r==="heatmaps",children:n.jsx(he,{color:"inherit","aria-label":e("menu.vis.heatmap"),size:"large",variant:"text",fullWidth:!0,onClick:()=>s("heatmaps"+t),children:n.jsx(dn,{fontSize:"large"})})})]})}function ri(){const{t:e}=F(),[t,o]=I.useState(!1),[s,r]=N(pt),[i,c]=N(Zt),[l,u]=N(X),m=J(Cs),d=J(en),p=J(Ss),f=jt(),{content:b,profiler:j,actionLog:x}=le(),g=I.useCallback(()=>r(v=>!v),[r]),a=I.useCallback(()=>c(v=>!v),[c]),h=I.useCallback(async()=>{an(j,b,x,{includeContent:!1,includeProfiles:!0,includeLogs:!0,includeGraph:!0,configuration:l,settings:await f()})},[l,j,b,x,f]);return d?n.jsxs("nav",{className:t?T.sideNav:T.sideNavClosed,children:[n.jsxs("div",{className:t?T.logoRowOpen:T.logoRow,children:[t&&n.jsxs("div",{className:T.backgroundLogo,children:[n.jsx("img",{src:"/logo48_bw_invert.png",width:48,height:48,alt:"Somekone logo"}),n.jsx("h1",{children:"Somekone"})]}),n.jsx(oe,{color:"inherit",onClick:()=>o(v=>!v),"aria-label":e("dashboard.aria.mainMenu"),"aria-pressed":t,children:t?n.jsx(si,{fontSize:"large"}):n.jsx(qs,{fontSize:"large"})})]}),n.jsx(Y,{tooltip:e("dashboard.labels.shareTip"),hideTip:t,selected:s,fullWidth:!0,children:n.jsxs(he,{color:"inherit",onClick:g,"aria-label":e("dashboard.labels.shareTip"),size:"large",variant:"text",fullWidth:!0,children:[n.jsx(jn,{fontSize:"large"}),t?e("dashboard.labels.shareTip"):""]})}),n.jsx(Y,{tooltip:e("dashboard.labels.disableFeedApp"),hideTip:t,selected:l==null?void 0:l.disableFeedApp,fullWidth:!0,children:n.jsxs(he,{color:"inherit",onClick:()=>u(v=>({...v,disableFeedApp:!v.disableFeedApp})),"aria-label":e("dashboard.labels.disableFeedApp"),size:"large",variant:"text",fullWidth:!0,children:[l!=null&&l.disableFeedApp?n.jsx(Yo,{fontSize:"large"}):n.jsx(wt,{fontSize:"large"}),t?e("dashboard.labels.disableFeedApp"):""]})}),n.jsx(Y,{tooltip:e("dashboard.labels.saveTip"),hideTip:t,fullWidth:!0,children:n.jsxs(he,{color:"inherit",onClick:h,"aria-label":e("dashboard.labels.saveTip"),size:"large",variant:"text",fullWidth:!0,children:[n.jsx(Wn,{fontSize:"large"}),t?e("dashboard.labels.saveTip"):""]})}),!t&&n.jsx(oi,{}),p&&n.jsx(ni,{open:t}),m&&n.jsx(Qo,{}),n.jsx("div",{style:{flexGrow:1}}),n.jsx(Y,{tooltip:e("dashboard.labels.showSettings"),hideTip:t,selected:i,fullWidth:!0,children:n.jsxs(he,{color:"inherit",onClick:a,"aria-label":e("dashboard.labels.showSettings"),size:"large",variant:"text",fullWidth:!0,children:[n.jsx(rn,{fontSize:"large"}),t?e("dashboard.labels.showSettings"):""]})})]}):null}const ii="_column_3wmix_1",ai="_label_3wmix_9",li="_spacer_3wmix_13",q={column:ii,label:ai,spacer:li};function ci(){const{t:e}=F(),[t,o]=N(X);return n.jsxs("div",{className:q.column,children:[n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.disableFeedApp)||!1,onChange:(s,r)=>o(i=>({...i,disableFeedApp:r}))}),label:e("dashboard.labels.disableFeedApp")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.alwaysActive)||!1,onChange:(s,r)=>o(i=>({...i,alwaysActive:r}))}),label:e("dashboard.labels.alwaysActive")})]})}function di(){const{t:e}=F(),[t,o]=N(X),[s,r]=N(tn),[i,c]=N(en),[l,u]=N(sn);return n.jsxs("div",{className:q.column,children:[n.jsx(Ys,{}),n.jsx("div",{className:q.spacer}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.collectResearchData)||!1,onChange:(m,d)=>o(p=>({...p,collectResearchData:d}))}),label:e("dashboard.labels.collectResearch")}),n.jsx(M,{control:n.jsx(P,{checked:i,onChange:(m,d)=>c(d)}),label:e("dashboard.labels.showMainMenu")}),n.jsx(M,{control:n.jsx(P,{checked:s,onChange:(m,d)=>r(d)}),label:e("dashboard.labels.showReplay")}),n.jsxs($e,{sx:{marginTop:"1rem"},children:[n.jsx(Be,{id:"apptype-radio-buttons-group-label",children:e("dashboard.labels.appType")}),n.jsxs(mn,{"aria-labelledby":"apptype-radio-buttons-group-label",defaultValue:"feed",name:"radio-buttons-group",value:l,onChange:(m,d)=>u(d),children:[n.jsx(M,{value:"feed",control:n.jsx(He,{}),label:e("dashboard.labels.feedApp")}),n.jsx(M,{value:"flow",control:n.jsx(He,{}),label:e("dashboard.labels.flowApp")})]})]})]})}function ui(){var c,l,u,m,d,p,f,b,j,x;const{t:e}=F(),[t,o]=N(X),[s,r]=I.useState(t),i=I.useRef(-1);return I.useEffect(()=>{i.current>=0&&clearTimeout(i.current),i.current=window.setTimeout(()=>{o(s),i.current=-1},1e3)},[s,o]),n.jsxs("div",{className:q.column,children:[n.jsxs($e,{sx:{marginTop:"1rem"},children:[n.jsx(Be,{id:"demo-radio-buttons-group-label",children:e("dashboard.labels.candidates")}),n.jsx("div",{id:"topic-candidates-label",className:q.label,children:e("dashboard.labels.useTopicCandidates")}),n.jsx(ue,{"aria-labelledby":"topic-candidates-label",value:(s==null?void 0:s.recommendations.taste)||0,onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,taste:a}})),min:0,max:5,step:.1}),n.jsx("div",{id:"random-candidates-label",className:q.label,children:e("dashboard.labels.useRandomCandidates")}),n.jsx(ue,{"aria-labelledby":"random-candidates-label",value:(s==null?void 0:s.recommendations.random)||0,onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,random:a}})),min:0,max:5,step:.1}),n.jsx("div",{id:"coengaged-candidates-label",className:q.label,children:e("dashboard.labels.useCoengagedCandidates")}),n.jsx(ue,{"aria-labelledby":"coengaged-candidates-label",value:(s==null?void 0:s.recommendations.coengaged)||0,onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,coengaged:a}})),min:0,max:5,step:.1}),n.jsx("div",{id:"similar-user-candidates-label",className:q.label,children:e("dashboard.labels.useSimilarUserCandidates")}),n.jsx(ue,{"aria-labelledby":"similar-user-candidates-label",value:(s==null?void 0:s.recommendations.similarUsers)||0,onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,similarUsers:a}})),min:0,max:5,step:.1}),n.jsx("div",{id:"popular-candidates-label",className:q.label,children:e("dashboard.labels.usePopularCandidates")}),n.jsx(ue,{"aria-labelledby":"popular-candidates-label",value:(s==null?void 0:s.recommendations.popular)||0,onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,popular:a}})),min:0,max:5,step:.1})]}),n.jsx("div",{className:q.spacer}),n.jsxs($e,{sx:{marginTop:"1rem"},children:[n.jsx(Be,{id:"demo-radio-buttons-group-label",children:e("dashboard.labels.scoring")}),n.jsx(M,{control:n.jsx(P,{checked:!((c=s==null?void 0:s.recommendations)!=null&&c.noTasteScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noTasteScore:!a}}))}),label:e("dashboard.labels.tasteScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((l=s==null?void 0:s.recommendations)!=null&&l.noSharingScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noSharingScore:!a}}))}),label:e("dashboard.labels.sharingScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((u=s==null?void 0:s.recommendations)!=null&&u.noCoengagementScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noCoengagementScore:!a}}))}),label:e("dashboard.labels.coengagementScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((m=s==null?void 0:s.recommendations)!=null&&m.noFollowingScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noFollowingScore:!a}}))}),label:e("dashboard.labels.followingScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((d=s==null?void 0:s.recommendations)!=null&&d.noCommentingScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noCommentingScore:!a}}))}),label:e("dashboard.labels.commentingScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((p=s==null?void 0:s.recommendations)!=null&&p.noLastSeenScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noLastSeenScore:!a}}))}),label:e("dashboard.labels.lastSeenScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((f=s==null?void 0:s.recommendations)!=null&&f.noReactionScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noReactionScore:!a}}))}),label:e("dashboard.labels.reactionScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((b=s==null?void 0:s.recommendations)!=null&&b.noViewingScore),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noViewingScore:!a}}))}),label:e("dashboard.labels.viewingScore")}),n.jsx(M,{control:n.jsx(P,{checked:!((j=s==null?void 0:s.recommendations)!=null&&j.noPopularity),onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,noPopularity:!a}}))}),label:e("dashboard.labels.popularityScore")})]}),n.jsx("div",{className:q.spacer}),n.jsxs($e,{sx:{marginTop:"1rem"},children:[n.jsx(Be,{id:"demo-radio-buttons-group-label",children:e("dashboard.labels.selectionMechanism")}),n.jsxs(mn,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"image",name:"radio-buttons-group",value:((x=s==null?void 0:s.recommendations)==null?void 0:x.selection)||"distribution",onChange:(g,a)=>r(h=>({...h,recommendations:{...h.recommendations,selection:a}})),children:[n.jsx(M,{value:"rank",control:n.jsx(He,{}),label:e("dashboard.labels.rankSelection")}),n.jsx(M,{value:"distribution",control:n.jsx(He,{}),label:e("dashboard.labels.distributionSelection")})]})]})]})}function mi(){const{t:e}=F(),[t,o]=N(ys),[s,r]=N(Ts);return n.jsxs("div",{className:q.column,children:[n.jsx(M,{control:n.jsx(P,{checked:t||!1,onChange:(i,c)=>o(c)}),label:e("settings.vis.socialMenu")}),n.jsx(M,{control:n.jsx(P,{checked:s||!1,onChange:(i,c)=>r(c)}),label:e("settings.vis.gridMenu")})]})}function pi(){const{t:e}=F(),[t,o]=N(X);return n.jsx("div",{className:q.column,children:n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.blackboxWorkflow)||!1,onChange:(s,r)=>o(i=>({...i,blackboxWorkflow:r}))}),label:e("dashboard.labels.blackboxFlow")})})}function hi(){const{t:e}=F(),[t,o]=N(Zt),[s,r]=I.useState(0),i=I.useCallback(()=>o(!1),[o]);return n.jsxs(Pe,{open:t,onClose:i,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[n.jsx(De,{children:e("dashboard.titles.settings")}),n.jsxs(Ae,{sx:{display:"flex",padding:0,maxHeight:"600px"},children:[n.jsxs(ln,{value:s,onChange:(c,l)=>r(l),variant:"scrollable",scrollButtons:"auto",orientation:"vertical",sx:{borderRight:"1px solid #008297"},children:[n.jsx(re,{label:e("dashboard.titles.general")}),n.jsx(re,{label:e("dashboard.titles.feedApp")}),n.jsx(re,{label:e("dashboard.titles.flowApp")}),n.jsx(re,{label:e("dashboard.titles.recommendations")}),n.jsx(re,{label:e("settings.titles.visualisation")})]}),s===0&&n.jsx(di,{}),s===1&&n.jsx(ci,{}),s===2&&n.jsx(pi,{}),s===3&&n.jsx(ui,{}),s===4&&n.jsx(mi,{})]}),n.jsx(pn,{children:n.jsx(ot,{variant:"outlined",onClick:i,children:e("dashboard.actions.close")})})]})}const ct=L(n.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),gi=L(n.jsx("path",{d:"M6 6h12v12H6z"}),"Stop"),fi="_timeContainer_p6iww_1",bi="_speedMenu_p6iww_5",xi="_speedContainer_p6iww_11",Ii="_progressContainer_p6iww_15",Ee={timeContainer:fi,speedMenu:bi,speedContainer:xi,progressContainer:Ii},ji=L(n.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed");function vi(){const{t:e}=F(),[t,o]=I.useState(null),[s,r]=N(nn),i=!!t,c=u=>{o(u.currentTarget)},l=()=>{o(null)};return n.jsxs(n.Fragment,{children:[n.jsx(Y,{tooltip:e("dashboard.labels.playbackSpeed"),children:n.jsx(oe,{onClick:c,id:"speed-menu-button",color:"inherit","aria-label":e("dashboard.labels.playbackSpeed"),children:n.jsx(ji,{})})}),n.jsx(no,{role:"dialog","aria-labelledby":"speed-menu-button",className:Ee.speedMenu,id:"speed-menu",anchorEl:t,open:i,onClose:l,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:n.jsxs("div",{className:Ee.speedContainer,children:[n.jsx("div",{id:"speed-label",className:Ee.label,children:e("dashboard.labels.playbackSpeed")}),n.jsx(ue,{"aria-labelledby":"cluster-colouring-label",value:s,onChange:(u,m)=>r(m),min:1,max:20,step:1,marks:[{value:1,label:"1x"},{value:4,label:"4x"},{value:10,label:"10x"},{value:20,label:"20x"}],style:{width:"200px"}})]})})]})}const qt=1e3*60*60,Jt=1e3*60;function st(e){return e<10?`0${e}`:`${e}`}function wi(e){const t=Math.floor(e/qt),o=e-t*qt,s=Math.floor(o/Jt),r=o-s*Jt,i=Math.floor(r/1e3);return`${st(t)}:${st(s)}:${st(i)}`}function Ci(){const{t:e}=F(),t=J(Es),o=J(nn),{replay:s}=le(),[r,i]=tt(()=>[s.getPosition(),s.getTime()-s.getStartTime()],[s],"replaystep"),c=tt(()=>s.isPlaying(),[s],["replaystart","replayfinished","replaystop"]),l=tt(()=>s.isPaused(),[s],["replaypaused","replayunpaused"]);return I.useEffect(()=>{s.speed=o},[o,s]),n.jsxs(to,{placement:"bottom",label:n.jsx("div",{style:{paddingRight:"0.5rem",fontWeight:"bold"},children:e("dashboard.titles.replay")}),children:[t&&n.jsxs(n.Fragment,{children:[n.jsx(Y,{tooltip:e("dashboard.labels.play"),selected:c&&!l,children:n.jsx(oe,{onClick:()=>{c?s.pause():(s.speed=o,s.start())},color:"inherit",children:c?l?n.jsx(ct,{}):n.jsx(wt,{}):n.jsx(ct,{})})}),n.jsx(Y,{tooltip:e("dashboard.labels.stop"),children:n.jsx(oe,{color:"inherit",disabled:!c,onClick:()=>s.stop(),children:n.jsx(gi,{})})}),n.jsx(vi,{}),n.jsx(eo,{})]}),n.jsxs("div",{className:Ee.progressContainer,children:[n.jsx(so,{variant:"determinate",value:Math.min(100,r*100),style:{width:"200px"}}),n.jsx("div",{className:Ee.timeContainer,children:wi(i)})]})]})}const Si=30*60*1e3;function yi(e,t){const o=e.graph.getNodesByType("user"),s=new Set(t);return o.filter(c=>!s.has(c)).map(c=>({id:c,name:e.getUserName(c)})).filter(c=>c.name!=="")}function Ti({onReady:e,code:t,content:o}){const s=J(X),r=I.useRef(new Map),i=I.useRef(),[c,l]=N(hn),{content:u,profiler:m,actionLog:d}=le(),p=I.useRef(new Set),f=I.useCallback((a,h)=>{if(a.event==="eter:join")h.send({event:"eter:config",configuration:s,content:o}),h.send({event:"eter:users",users:yi(m,c.map(v=>v.id))});else if(a.event==="eter:reguser"){m.setUserName(a.id,a.username),r.current.delete(a.id),l(C=>[...C,{id:a.id,username:a.username,connection:h}]);const v=m.getUserProfile(a.id);h.send({event:"eter:profile_data",profile:v,id:a.id});const w=d.getActionLogSince(Date.now()-3*60*60*1e3,a.id);h.send({event:"eter:action_log",log:w,id:a.id})}else if(a.event==="eter:close")l(v=>v.filter(w=>w.connection!==h));else if(a.event==="eter:profile_data")m.reverseProfile(a.id,a.profile);else if(a.event==="eter:request_content"){const v=u.getContentMetadata(a.id),w=u.getContentData(a.id);v&&w&&ro(w).then(C=>{h.send({event:"eter:newpost",meta:v,data:C})})}else if(a.event==="eter:newpost"){const v=`content:${a.meta.id}`;a.data?io(a.data).then(w=>{u.hasContent(v)?u.addContentData(w,a.meta):u.addContent(w,a.meta)}):u.addContentMeta(a.meta),p.current.add(v),i.current&&i.current({event:"eter:newpost",meta:a.meta},[h.connectionId])}else if(a.event==="eter:action_log")d.appendActionLog(a.log,a.id),a.log.forEach(v=>{v.activity==="comment"?(i.current&&i.current({event:"eter:comment",id:a.id,comment:v.content||"",contentId:v.id||"content:none",timestamp:v.timestamp}),u.addComment(v.id||"content:none",a.id,v.content||"",v.timestamp)):v.activity==="share_public"&&v.user&&v.id&&i.current&&i.current({event:"eter:inject",reason:"share",content:v.id,from:a.id,to:v.user},[h.connectionId])});else if(a.event==="researchlog")Ns({action:a.action,timestamp:a.timestamp,details:a.details,userId:a.userId});else if(a.event==="eter:snapshot"){const v=Date.now(),w=r.current.get(a.id),C=w||v-Si,k=vo(m.graph,d,a.id,C,!w);r.current.set(a.id,v);const E=v-C>5*60*1e3;h.send({event:"eter:snapshot",id:a.id,snapshot:E?rt.compressToUTF16(JSON.stringify(k)):k,compressed:E}),w||p.current.forEach(S=>{const A=u.getContentMetadata(S);A&&h.send({event:"eter:newpost",meta:A})})}else a.event==="eter:recommendations"&&h.send({event:"eter:stats",content:u.getContentStats(a.recommendations.map(v=>v.contentId)).map((v,w)=>({...v,id:a.recommendations[w].contentId})),bestEngagement:m.getBestEngagement()})},[s,o,c,l,m,u,d]),b=I.useCallback(a=>{a&&l(h=>h.filter(v=>v.connection.connectionId!==a.connectionId))},[l]),{ready:j,send:x,peer:g}=oo({host:{}.VITE_APP_PEER_SERVER,secure:{}.VITE_APP_PEER_SECURE==="1",key:{}.VITE_APP_PEER_KEY||"peerjs",port:{}.VITE_APP_PEER_PORT?parseInt({}.VITE_APP_PEER_PORT):443,code:`sm-${t}`,onData:f,onClose:b});return I.useEffect(()=>{x&&x({event:"eter:config",configuration:s}),i.current=x},[s,x]),I.useEffect(()=>{e(j)},[e,j]),n.jsx(ao,{peer:g,ready:j,position:"corner"})}const Xt="en",Ei={default:"https://store.gen-ai.fi/somekone/guides/guide1_update2.zip",kiosk:"https://store.gen-ai.fi/somekone/guides/kiosk1.zip",guide2:"https://store.gen-ai.fi/somekone/guides/guide2.zip"};async function ki(e,t=Xt){const o=e instanceof File||e.startsWith("http")?e:Ei[e];if(!o)throw new Error("invalid_guide");const s=await ho(o),r=await Xs.loadAsync(s),i=r.file("guide.json");if(!i)throw new Error("invalid_guide_zip");const c=JSON.parse(await i.async("string"));c.locales.includes(t)||(t=Xt);const l=r.file(`locale/${t}.json`);if(!l)throw new Error("missing_guide_locale");const u=JSON.parse(await l.async("string"));return c.steps.forEach(m=>{m.title&&(m.title=u[m.title])}),c}function Mi(e){const{i18n:t}=F(),o=t.language,[s,r]=I.useState(null);return I.useEffect(()=>{ki(e,t.language).then(r).catch(i=>{console.error("Guide error",e,i),r(null)})},[e,o,t]),s}const _i="rgb(174, 37, 174)",Ri="#078092",Pi="#444",Ai="_container_snkp7_3",Di="_advanced_snkp7_43",Vi="_actionContainer_snkp7_51",Yt={secondary:_i,bgColourful1:Ri,textDark:Pi,container:Ai,advanced:Di,actionContainer:Vi};function Ni({action:e,onAction:t}){const[o,s]=N(X),r=Ie(pt),i=jt(),{content:c,profiler:l,actionLog:u}=le(),m=I.useCallback(async()=>{an(l,c,u,{includeContent:!1,includeProfiles:!0,includeLogs:!0,includeGraph:!0,configuration:o,settings:await i()})},[o,l,c,u,i]),d=I.useCallback(()=>{t&&t(),e==="pause"?s(p=>({...p,disableFeedApp:!p.disableFeedApp})):e==="sharecode"?r(p=>!p):e==="download"&&m()},[e,s,r,t,m]);return n.jsxs(oe,{onClick:d,color:"secondary","data-testid":"action-button",children:[e==="pause"&&o.disableFeedApp&&n.jsx(ct,{"data-testid":"paused-app"}),e==="pause"&&!o.disableFeedApp&&n.jsx(wt,{}),e==="sharecode"&&n.jsx(jn,{}),e==="download"&&n.jsx(Wn,{})]})}const zi=30*1e3;function Li({guide:e}){const t=Mi(e),o=un(),s=jt(),r=ut(),{search:i}=dt(),[c,l]=mt(),u=c.get("page"),m=u!==null?parseInt(u):-1,{replay:d,profiler:p,content:f,actionLog:b}=le(),[j,x]=I.useState(-1),g=Ie(ks),a=I.useRef(l);a.current=l;const h=I.useRef(),v=I.useRef(new Set),w=I.useCallback(S=>{o(S);const A=S.url;if(A&&r(A+i),S.replay!==void 0&&(S.replay&&!d.isPlaying()&&d.start(),S.replay||d.stop()),S.autoPlay!==void 0&&x(S.autoPlay),S.autoSelect){const R=Lt(p,1)[0];g(R)}S.data&&S.data.forEach(R=>{v.current.has(R)||(v.current.add(R),lo(R).then(D=>{co(f,b,D)}))})},[r,d,o,i,g,p,f,b]);I.useEffect(()=>{s().then(A=>{h.current=A,t&&t.initActions&&t.initActions.forEach(R=>{const D=t.actions[R];if(D&&(o(D),D.replay!==void 0&&(D.replay&&!d.isPlaying()&&d.start(),D.replay||d.stop()),D.autoPlay!==void 0&&x(D.autoPlay),D.autoSelect)){const B=Lt(p,1)[0];g(B)}})});let S;return t&&t.reloadOnReplayEnd&&(S=()=>{$t(),r(0)},d.broker.on("replayfinished",S)),t&&t.firstStep!==void 0?a.current(A=>(A.has("page")||A.set("page",`${t.firstStep}`),A)):t&&a.current(A=>(A.has("page")||A.set("page","0"),A)),()=>{S&&d.broker.off("replayfinished",S),h.current&&o(h.current)}},[t,o,d,r,s,p,g]),I.useEffect(()=>{if(j>0&&t){const S={lastActive:0,autoPlayCounter:0},A=setInterval(()=>{const R=Date.now();navigator.userActivation&&navigator.userActivation.isActive&&(S.lastActive=R),S.lastActive===0?(S.autoPlayCounter++,S.autoPlayCounter===j&&(S.autoPlayCounter=0,a.current(D=>{const B=Number(D.get("page")||0),W=t==null?void 0:t.steps[B],U=(W==null?void 0:W.next)!==void 0?W.next:B<t.steps.length-1?B+1:0;return D.set("page",`${U}`),D}))):R-S.lastActive>zi&&($t(),r(0))},1e3);return()=>clearInterval(A)}},[j,t,r]),I.useEffect(()=>{t&&m>=0&&m<t.steps.length&&t.steps[m].actions.forEach(A=>{const R=t.actions[A];R&&w(R)})},[m,t,w]);const C=I.useMemo(()=>t==null?void 0:t.steps.map((S,A)=>({step:S,index:A})),[t])||[],k=t==null?void 0:t.steps[m],E=C.filter(S=>S.step.title);return n.jsxs("nav",{className:Yt.container,"data-testid":"guidance",children:[n.jsx(Ps,{children:E.map((S,A)=>{var R;return n.jsx(it,{selected:m>=S.index&&m<(((R=E[A+1])==null?void 0:R.index)||m+1),onClick:()=>l(D=>(D.set("page",`${S.index}`),D)),children:S.step.title},S.index)})}),k&&k.actionButton&&n.jsx("div",{className:Yt.actionContainer,children:n.jsx(Ni,{action:k.actionButton,onAction:()=>{if(k.actionButton){const S=t.actions[k.actionButton];S&&w(S)}}})})]})}const Fi="#008297",Oi="#e8f0fe",$i="_column_1w855_3",Bi="_feedView_1w855_17",Wi="_settingsContainer_1w855_34",Ui="_spacer_1w855_41",se={primary:Fi,bgSubdued1:Oi,column:$i,feedView:Bi,settingsContainer:Wi,spacer:Ui};function Ki(){const{t:e}=F(),[t,o]=N(X);return n.jsxs("div",{className:se.settingsContainer,children:[n.jsx(Ve,{i18n:Re,defaultNS:"common",children:n.jsxs("div",{className:se.feedView,children:[n.jsx(fn,{alwaysActive:!0}),!t.hideActionsButton&&n.jsx(vt,{code:"x"})]})}),n.jsxs("div",{className:se.column,children:[n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.disableComments)||!1,onChange:(s,r)=>o(i=>({...i,disableComments:r}))}),label:e("settings.app.disableComments")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.disableLiking)||!1,onChange:(s,r)=>o(i=>({...i,disableLiking:r}))}),label:e("settings.app.disableLiking")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.disableFollowing)||!1,onChange:(s,r)=>o(i=>({...i,disableFollowing:r}))}),label:e("settings.app.disableFollowing")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.disableSharing)||!1,onChange:(s,r)=>o(i=>({...i,disableSharing:r}))}),label:e("settings.app.disableSharing")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.showTopicLabels)||!1,onChange:(s,r)=>o(i=>({...i,showTopicLabels:r}))}),label:e("settings.app.showFeedImageLabels")})]})]})}function Hi(){const{t:e}=F(),[t,o]=N(X);return n.jsxs("div",{className:se.settingsContainer,children:[n.jsx(Ve,{i18n:Re,defaultNS:"common",children:n.jsxs("div",{className:se.feedView,children:[n.jsx(fn,{alwaysActive:!0}),!t.hideActionsButton&&n.jsx(vt,{code:"x"})]})}),n.jsxs("div",{className:se.column,children:[n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideActionsButton)||!1,onChange:(s,r)=>o(i=>({...i,hideActionsButton:r}))}),label:e("settings.app.hideFeedMenu")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideDataView)||!1,onChange:(s,r)=>o(i=>({...i,hideDataView:r}))}),label:e("settings.app.hideDataView")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideProfileView)||!1,onChange:(s,r)=>o(i=>({...i,hideProfileView:r}))}),label:e("settings.app.hideProfileView")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideRecommendationsView)||!1,onChange:(s,r)=>o(i=>({...i,hideRecommendationsView:r}))}),label:e("settings.app.hideRecommendationsView")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideShareProfile)||!1,onChange:(s,r)=>o(i=>({...i,hideShareProfile:r}))}),label:e("settings.app.hideSharing")})]})]})}function Gi(){const{t:e}=F(),[t,o]=N(X);return n.jsxs("div",{className:se.settingsContainer,children:[n.jsx(Ve,{i18n:Re,defaultNS:"common",children:n.jsxs("div",{className:se.feedView,children:[n.jsx(zs,{}),!t.hideActionsButton&&n.jsx(vt,{code:"x"})]})}),n.jsxs("div",{className:se.column,children:[n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideRecommendationMenu)||!1,onChange:(s,r)=>o(i=>({...i,hideRecommendationMenu:r}))}),label:e("settings.app.hideRecommendationMenu")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.showRecommendationWizard)||!1,onChange:(s,r)=>o(i=>({...i,showRecommendationWizard:r}))}),label:e("settings.app.showRecommendationWizard")}),n.jsx(M,{control:n.jsx(P,{disabled:(t==null?void 0:t.showRecommendationWizard)===!1,checked:(t==null?void 0:t.showCandidateWizard)||!1,onChange:(s,r)=>o(i=>({...i,showCandidateWizard:r}))}),label:e("settings.app.showCandidateWizard")}),n.jsx(M,{control:n.jsx(P,{disabled:(t==null?void 0:t.showRecommendationWizard)===!1,checked:(t==null?void 0:t.showCandidateRefinementWizard)||!1,onChange:(s,r)=>o(i=>({...i,showCandidateRefinementWizard:r}))}),label:e("settings.app.showCandidateRefinementWizard")}),n.jsx(M,{control:n.jsx(P,{disabled:(t==null?void 0:t.showRecommendationWizard)===!1,checked:(t==null?void 0:t.showScoringWizard)||!1,onChange:(s,r)=>o(i=>({...i,showScoringWizard:r}))}),label:e("settings.app.showScoringWizard")}),n.jsx(M,{control:n.jsx(P,{disabled:(t==null?void 0:t.showRecommendationWizard)===!1,checked:(t==null?void 0:t.showDiversityWizard)||!1,onChange:(s,r)=>o(i=>({...i,showDiversityWizard:r}))}),label:e("settings.app.showDiversityWizard")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideCandidateOrigin)||!1,onChange:(s,r)=>o(i=>({...i,hideCandidateOrigin:r}))}),label:e("settings.app.hideCandidateOrigin")}),n.jsx(M,{control:n.jsx(P,{checked:(t==null?void 0:t.hideExplainedScores)||!1,onChange:(s,r)=>o(i=>({...i,hideExplainedScores:r}))}),label:e("settings.app.hideExplainedScores")})]})]})}function qi(){const{t:e}=F(),[t,o]=N(ht),[s,r]=I.useState(0),i=I.useCallback(()=>o("none"),[o]);return n.jsxs(Pe,{open:t==="app",onClose:i,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[n.jsx(De,{children:e("settings.titles.app")}),n.jsx(oe,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:c=>c.palette.grey[500]},children:n.jsx(gn,{})}),n.jsxs(Ae,{sx:{padding:0,maxHeight:"600px"},children:[n.jsxs(ln,{value:s,onChange:(c,l)=>r(l),children:[n.jsx(re,{label:e("settings.titles.feed")}),n.jsx(re,{label:e("settings.titles.appmenu")}),n.jsx(re,{label:e("settings.titles.recom")})]}),s===0&&n.jsx(Ki,{}),s===1&&n.jsx(Hi,{}),s===2&&n.jsx(Gi,{})]})]})}function Ji(){const{t:e}=F(),[t,o]=N(ht),s=I.useCallback(()=>o("none"),[o]);return n.jsxs(Pe,{open:t==="recommendation",onClose:s,scroll:"paper",maxWidth:"xs",fullWidth:!0,children:[n.jsx(De,{children:e("settings.titles.app")}),n.jsx(oe,{"aria-label":"close",onClick:s,sx:{position:"absolute",right:8,top:8,color:r=>r.palette.grey[500]},children:n.jsx(gn,{})}),n.jsx(Ae,{sx:{display:"flex",padding:0,maxHeight:"600px"},children:n.jsx(Ve,{i18n:Re,defaultNS:"common",children:n.jsx(Ls,{active:!0,onClose:s,hideClose:!0,variant:"plain"})})})]})}const Xi="_progress_oi60j_1",Un={progress:Xi};function Yi({onSimulation:e,open:t,onClose:o}){const{recommender:s,actionLog:r}=le(),{t:i}=F(),[c,l]=I.useState(20),u=()=>{const m=new xn(s,r);m.createAgents(c,{thresholds:{min:.1,max:.7}}),e(m)};return n.jsxs(Pe,{open:t,maxWidth:"xs",fullWidth:!0,onClose:o,children:[n.jsx(De,{children:i("dashboard.titles.simulator")}),n.jsxs(Ae,{children:[n.jsx("div",{id:"sim-count-label",className:Un.label,style:{marginTop:"1rem"},children:i("dashboard.labels.agentCount")}),n.jsx(ue,{"aria-labelledby":"sim-count-label",value:c,onChange:(m,d)=>l(d),min:1,max:100,step:1,valueLabelDisplay:"auto"})]}),n.jsxs(pn,{children:[n.jsx(ot,{variant:"contained",onClick:u,children:i("dashboard.actions.simulate")}),n.jsx(ot,{onClick:o,children:i("dashboard.actions.close")})]})]})}function Qi({progress:e}){return n.jsxs("div",{className:Un.progress,children:[e!==void 0&&n.jsx(uo,{value:e,maxValue:1,showValue:!0,color:mo.secondary}),e===void 0&&n.jsx(bs,{})]})}function Zi(){const[e,t]=N(In),[o,s]=N(Qt),r=J(X),[i,c]=I.useState(0),[l,u]=I.useState(!1);return I.useEffect(()=>{if(e)return c(0),u(!0),e.simulate({duration:100,tick:1e3,...r.recommendations,onTick:m=>{c(m)},onEnd:()=>{u(!1)}}),()=>{e.stop()}},[e,r]),n.jsxs(n.Fragment,{children:[n.jsx(Yi,{open:o,onClose:()=>s(!1),onSimulation:t}),l&&n.jsx(Qi,{progress:i/100})]})}function ea({contentUrls:e,cfg:t,guide:o,experimental:s,noSession:r}){const i=Ie(X),[c,l]=I.useState(),u=J(hn),[m,d]=I.useState(!1),p=Ie(Zs),f=po(5),b=un(),j=J(on),[x,g]=I.useState(!1),a=J(tn),[h,v]=I.useState();I.useEffect(()=>{if(!x)return;i({...Ut.configuration,experimental:s});let E=Ut.content;const S=t;if(S){const R=rt.decompressFromEncodedURIComponent(S),D={...JSON.parse(R)};b(D)}const A=e;if(A){const R=rt.decompressFromEncodedURIComponent(A);E=JSON.parse(R)}else A===""&&(E=[]);l(E)},[e,t,x,i,p,s,b]);const w=I.useCallback(E=>{E.arrayBuffer().then(S=>{v([S])})},[]),C=I.useCallback(()=>{d(!0)},[]),k=I.useCallback(E=>{E&&g(!0)},[]);return n.jsxs(n.Fragment,{children:[n.jsx(xs,{loading:!m,children:n.jsx(Ve,{i18n:Re,defaultNS:"dashboard",children:n.jsxs("main",{className:Wt.dashboard,children:[n.jsx(ri,{}),(j||o)&&n.jsx(Li,{guide:j||o||""}),n.jsxs("section",{className:Wt.workspace,children:[n.jsx(Is,{}),n.jsx(Do,{users:u,code:f}),n.jsx(hi,{}),n.jsx(qi,{}),n.jsx(Ji,{}),a&&n.jsx(Ci,{}),n.jsx(Zi,{})]})]})})}),n.jsx(Ti,{onReady:k,content:c,code:f}),n.jsx(Bt,{content:c,onLoaded:C,noSession:r}),n.jsx(Bt,{content:h}),n.jsx(Qs,{}),n.jsx("input",{type:"file",id:"openfile",onChange:E=>{E.currentTarget.files&&(w(E.currentTarget.files[0]),E.currentTarget.value="")},hidden:!0,accept:".zip,application/zip"})]})}function Rl(){const[e]=mt(),t=e.get("content"),o=e.get("guide"),s=e.get("noSession")==="true";return n.jsx(ea,{contentUrls:t===null?void 0:t,cfg:e.get("cfg")||void 0,experimental:!!e.get("experimental"),guide:o||void 0,noSession:s})}export{Rl as Component};
