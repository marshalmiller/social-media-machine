import{l as d,j as a,r as c}from"./index-ChHXuf40.js";import{s,T as p}from"./TableToolbar-iL5UqPm0.js";import{D as u}from"./DataGrid-CeymwZOP.js";import{a as h}from"./events-DLU3_18Y.js";import"./createSimplePaletteValueFilter-CLdyqM5U.js";import"./EventManager-bMdfXZ0t.js";import"./TextField-MaMPnnBO.js";import"./useSlot-BVU38s2u.js";import"./IconButton-BXLcq7Mr.js";import"./Portal-BpkAKKpt.js";import"./useFormControl-BOywDUuq.js";import"./Popover-3SaqCWbK.js";import"./Grow-B-eHZ5Kq.js";import"./debounce-Be36O1Ab.js";import"./Modal-DQ9h7Q_m.js";import"./index-BfNLg11A.js";import"./useSlotProps-BP5ya9qr.js";import"./MenuItem-C3-73DVz.js";import"./Typography-8VlALfQ4.js";import"./Close-CI_IAYQS.js";import"./Popper-JH9MxI6g.js";import"./Chip-BlC7IdM3.js";import"./Tooltip-cL7nY1NY.js";import"./InputAdornment-CUBj53no.js";import"./Button-CbhWiO3H.js";import"./FormControlLabel-BtHiVqzu.js";import"./SwitchBase-CuDlXbI3.js";import"./LinearProgress-li3lTmA_.js";import"./useThemeProps-Rdar5cgY.js";function f(e){const t=e/1e3;return t>60*60?`${(t/3600).toFixed(1)}h`:t>60?`${(t/60).toFixed(1)}m`:`${t.toFixed(1)}s`}const v=[{field:"timestamp",headerName:"Timestamp",width:200,renderCell:e=>new Date(e.value).toLocaleString()},{field:"activity",headerName:"Action",width:130},{field:"image",headerName:"Image",width:80,renderCell:e=>e.value?a.jsx("img",{src:e.value,width:48,height:48}):null},{field:"name",headerName:"Owner",width:200},{field:"owner",headerName:"Owner ID",width:200},{field:"value",headerName:"Value",width:100,renderCell:e=>e.value===void 0?null:e.row.activity==="dwell"||e.row.activity==="end"||e.row.activity==="inactive"?f(e.value):`${e.value.toFixed(1)}`},{field:"text",headerName:"Text",width:200}];function g(){const{actionLog:e,graph:t,profiler:o}=d(),l=t.getNodesByType("user").map(r=>e.getActionLog(r).map(i=>({id:`${r}:${i.activity}:${i.timestamp}`,timestamp:i.timestamp,activity:i.activity,image:i.id?o.content.getContentData(i.id):void 0,value:i.value,user:i.user,owner:r,name:o.getUserName(r),text:i.content}))),n=[];return l.forEach(r=>{n.push(...r)}),n.sort((r,m)=>m.timestamp-r.timestamp),a.jsx("div",{className:s.container,children:a.jsx("div",{className:s.tableContainer,"data-testid":"log-table",children:a.jsx(u,{localeText:{},slots:{toolbar:p},rows:n,columns:v,initialState:{columns:{columnVisibilityModel:{owner:!1,text:!1}}}})})})}function P(){const[e,t]=c.useReducer(o=>++o,0);return h(()=>{t()},[],"refresh_graph"),a.jsx(g,{},`k-${e}`)}export{P as Component};
