import{j as c,c as z,r as h}from"./index-02b2945e.js";import{E as D}from"./Edit-32806028.js";import{s as A}from"./createSimplePaletteValueFilter-b2e05aa4.js";import{T as I}from"./TextField-43fc95d4.js";import{I as N}from"./IconButton-02bc1303.js";function R(l,n){var t;const i=n||new Map;for(let d=0;d<l.children.length;++d){const r=l.children[d],e=r.getAttribute("data-widget");if(e==="container")R(r,i);else if(e){i.has(e)||i.set(e,[]);const s=r.offsetWidth,u=r.offsetHeight;s>0&&u>0&&((t=i.get(e))==null||t.push({x:r.offsetLeft,y:r.offsetTop,width:s,height:u,id:r.id||"noid"}))}}return i}function st(l,n){const i=[];for(const t of n){const d=l.get(t.start)||[],r=l.get(t.end)||[];for(const e of d)for(const s of r)i.push({id1:e.id,id2:s.id,x1:t.startPoint==="left"?e.x:t.startPoint==="right"?e.x+e.width:e.x+e.width/2,x2:t.endPoint==="left"?s.x:t.endPoint==="right"?s.x+s.width:s.x+s.width/2,y1:t.startPoint==="top"?e.y:t.startPoint==="bottom"?e.y+e.height:e.y+e.height/2,y2:t.endPoint==="top"?s.y:t.endPoint==="bottom"?s.y+s.height:s.y+s.height/2,direction:t.startPoint==="top"||t.startPoint==="bottom"?"vertical":"horizontal"})}return i}const S="#dfe5e8",B="_svglayer_z3jmn_3",L="_workspace_z3jmn_10",W="_container_z3jmn_19",F={workspaceBg:S,svglayer:B,workspace:L,container:W},p=20;function ot({lines:l}){return c.jsx("svg",{className:F.svglayer,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%","aria-hidden":!0,children:l.map((n,i)=>{const t=n.direction==="horizontal"?p:0,d=n.direction==="vertical"?p:0;return c.jsx("path",{d:`M ${n.x1} ${n.y1} C ${n.x1+t} ${n.y1+d}, ${n.x2-t} ${n.y2-d}, ${n.x2} ${n.y2}`,fill:"none",stroke:"rgb(174, 37, 174)",strokeWidth:"2",strokeDasharray:void 0},i)})})}const H="#008297",M="#444",T="rgba(0, 130, 151, 0.04)",V="_widget_1yvgb_3",K="_fadein_1yvgb_1",U="_widgetDisabled_1yvgb_32 _widget_1yvgb_3",q="_widgetActive_1yvgb_38 _widget_1yvgb_3",G="_widget_title_1yvgb_43",J="_widget_header_1yvgb_49",O="_widget_menu_1yvgb_76",Q="_widget_content_1yvgb_81",f={primary:H,textDark:M,primaryHover:T,widget:V,fadein:K,widgetDisabled:U,widgetActive:q,widget_title:G,widget_header:J,widget_menu:O,widget_content:Q},X=A(I)({"& input":{fontSize:"14pt",fontWeight:"bold"}});function rt({disabled:l,focus:n,title:i,setTitle:t,children:d,menu:r,className:e,hidden:s,dataWidget:u,id:b,noPadding:v,active:x,contentStyle:E,...w}){const{t:_}=z(),y=h.useRef(!0),m=h.useRef(null),a=h.useRef(null),k=l?f.widgetDisabled:x?f.widgetActive:f.widget,C=h.useCallback(()=>{var o;a.current&&((o=a.current.firstElementChild)==null?void 0:o.firstElementChild).blur()},[a]),j=h.useCallback(()=>{var o;a.current&&((o=a.current.firstElementChild)==null?void 0:o.firstElementChild).select()},[a]),$=h.useCallback(o=>{t&&t(o.target.value)},[t]),P=h.useCallback(o=>{var g;o.key==="Enter"&&(o.preventDefault(),a.current&&((g=a.current.firstElementChild)==null?void 0:g.firstElementChild).blur())},[a]);return h.useEffect(()=>{var o;n&&((o=m.current)!=null&&o.scrollIntoView)&&m.current.scrollIntoView({block:"center",inline:"center",behavior:y.current?"auto":"smooth"}),y.current=!1},[n]),h.useEffect(()=>{var o;if(t&&a.current){const g=(o=a.current.firstElementChild)==null?void 0:o.firstElementChild;g==null||g.setAttribute("size",`${Math.max(5,g.value.length)}`)}},[i,t]),c.jsxs("section",{...w,"data-testid":`widget-${i}`,ref:m,"data-widget":u,id:`widget-${b||u||"none"}`,style:{display:s?"none":"initial",...w.style},"aria-hidden":!!s,className:k+(e?` ${e}`:""),"aria-label":w["aria-label"]||i,children:[i!==void 0&&c.jsxs("header",{className:f.widget_header,children:[c.jsxs("h1",{className:f.widget_title,children:[!t&&i,t&&c.jsx(X,{ref:a,hiddenLabel:!0,name:_("widget.aria.editTitleInput",{value:i}),placeholder:_("widget.labels.titlePlaceholder"),size:"small",variant:"outlined",onBlur:C,value:i,onKeyDown:P,onChange:$})]}),t&&c.jsx(N,{"aria-label":_("widget.aria.editTitle"),size:"small",onClick:j,children:c.jsx(D,{fontSize:"small"})}),r&&c.jsx("div",{className:f.widget_menu,children:r})]}),c.jsx("div",{className:f.widget_content,style:{...E,padding:v?0:void 0},children:d})]})}export{ot as S,rt as W,R as e,st as g,F as s};
