import{j,_ as T,r as re,G as ve}from"./index-ChHXuf40.js";import{c as Ie}from"./colours.module-BoWwueDy.js";import{_ as G,s as me,b as xe,a as Re,g as Ae}from"./createSimplePaletteValueFilter-CLdyqM5U.js";import{w as je,h as le,e as H,t as _e,c as E,s as $,m as te,a as ce,b as U,p as ue,d as W,f as F,g as ge,i as ke,j as Me,u as we,k as Q,l as be,n as ye,o as Pe,q as he,r as Te,D as Fe,v as He,R as $e,x as Ne,C as Se,y as Be,z as De,A as Ue,B as Ee}from"./ChartsOverlay-B3YhnLdp.js";import{u as Oe}from"./useThemeProps-Rdar5cgY.js";function Ve(e){return e.innerRadius}function We(e){return e.outerRadius}function Ge(e){return e.startAngle}function Xe(e){return e.endAngle}function qe(e){return e&&e.padAngle}function Ke(e,i,n,a,r,d,g,t){var R=n-e,u=a-i,s=g-r,b=t-d,l=b*R-s*u;if(!(l*l<H))return l=(s*(i-d)-b*(e-r))/l,[e+l*R,i+l*u]}function J(e,i,n,a,r,d,g){var t=e-n,R=i-a,u=(g?d:-d)/W(t*t+R*R),s=u*R,b=-u*t,l=e+s,o=i+b,m=n+s,f=a+b,v=(l+m)/2,h=(o+f)/2,p=m-l,A=f-o,y=p*p+A*A,P=r-d,L=l*f-m*o,_=(A<0?-1:1)*W(Me(0,P*P*y-L*L)),k=(L*A-p*_)/y,M=(-L*p-A*_)/y,C=(L*A+p*_)/y,I=(-L*p+A*_)/y,w=k-v,c=M-h,x=C-v,N=I-h;return w*w+c*c>x*x+N*N&&(k=C,M=I),{cx:k,cy:M,x01:-s,y01:-b,x11:k*(r/P-1),y11:M*(r/P-1)}}function Le(){var e=Ve,i=We,n=U(0),a=null,r=Ge,d=Xe,g=qe,t=null,R=je(u);function u(){var s,b,l=+e.apply(this,arguments),o=+i.apply(this,arguments),m=r.apply(this,arguments)-le,f=d.apply(this,arguments)-le,v=ce(f-m),h=f>m;if(t||(t=s=R()),o<l&&(b=o,o=l,l=b),!(o>H))t.moveTo(0,0);else if(v>_e-H)t.moveTo(o*E(m),o*$(m)),t.arc(0,0,o,m,f,!h),l>H&&(t.moveTo(l*E(f),l*$(f)),t.arc(0,0,l,f,m,h));else{var p=m,A=f,y=m,P=f,L=v,_=v,k=g.apply(this,arguments)/2,M=k>H&&(a?+a.apply(this,arguments):W(l*l+o*o)),C=te(ce(o-l)/2,+n.apply(this,arguments)),I=C,w=C,c,x;if(M>H){var N=ge(M/l*$(k)),S=ge(M/o*$(k));(L-=N*2)>H?(N*=h?1:-1,y+=N,P-=N):(L=0,y=P=(m+f)/2),(_-=S*2)>H?(S*=h?1:-1,p+=S,A-=S):(_=0,p=A=(m+f)/2)}var D=o*E(p),V=o*$(p),X=l*E(P),q=l*$(P);if(C>H){var K=o*E(A),Y=o*$(A),Z=l*E(y),z=l*$(y),B;if(v<ue)if(B=Ke(D,V,Z,z,K,Y,X,q)){var ee=D-B[0],ne=V-B[1],ie=K-B[0],se=Y-B[1],oe=1/$(ke((ee*ie+ne*se)/(W(ee*ee+ne*ne)*W(ie*ie+se*se)))/2),de=W(B[0]*B[0]+B[1]*B[1]);I=te(C,(l-de)/(oe-1)),w=te(C,(o-de)/(oe+1))}else I=w=0}_>H?w>H?(c=J(Z,z,D,V,o,w,h),x=J(K,Y,X,q,o,w,h),t.moveTo(c.cx+c.x01,c.cy+c.y01),w<C?t.arc(c.cx,c.cy,w,F(c.y01,c.x01),F(x.y01,x.x01),!h):(t.arc(c.cx,c.cy,w,F(c.y01,c.x01),F(c.y11,c.x11),!h),t.arc(0,0,o,F(c.cy+c.y11,c.cx+c.x11),F(x.cy+x.y11,x.cx+x.x11),!h),t.arc(x.cx,x.cy,w,F(x.y11,x.x11),F(x.y01,x.x01),!h))):(t.moveTo(D,V),t.arc(0,0,o,p,A,!h)):t.moveTo(D,V),!(l>H)||!(L>H)?t.lineTo(X,q):I>H?(c=J(X,q,K,Y,l,-I,h),x=J(D,V,Z,z,l,-I,h),t.lineTo(c.cx+c.x01,c.cy+c.y01),I<C?t.arc(c.cx,c.cy,I,F(c.y01,c.x01),F(x.y01,x.x01),!h):(t.arc(c.cx,c.cy,I,F(c.y01,c.x01),F(c.y11,c.x11),!h),t.arc(0,0,l,F(c.cy+c.y11,c.cx+c.x11),F(x.cy+x.y11,x.cx+x.x11),h),t.arc(x.cx,x.cy,I,F(x.y11,x.x11),F(x.y01,x.x01),!h))):t.arc(0,0,l,P,y,h)}if(t.closePath(),s)return t=null,s+""||null}return u.centroid=function(){var s=(+e.apply(this,arguments)+ +i.apply(this,arguments))/2,b=(+r.apply(this,arguments)+ +d.apply(this,arguments))/2-ue/2;return[E(b)*s,$(b)*s]},u.innerRadius=function(s){return arguments.length?(e=typeof s=="function"?s:U(+s),u):e},u.outerRadius=function(s){return arguments.length?(i=typeof s=="function"?s:U(+s),u):i},u.cornerRadius=function(s){return arguments.length?(n=typeof s=="function"?s:U(+s),u):n},u.padRadius=function(s){return arguments.length?(a=s==null?null:typeof s=="function"?s:U(+s),u):a},u.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:U(+s),u):r},u.endAngle=function(s){return arguments.length?(d=typeof s=="function"?s:U(+s),u):d},u.padAngle=function(s){return arguments.length?(g=typeof s=="function"?s:U(+s),u):g},u.context=function(s){return arguments.length?(t=s??null,u):t},u}function O(e,i){if(typeof e=="number")return e;if(e==="100%")return i;if(e.endsWith("%")){const n=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(n))return n*i/100}if(e.endsWith("px")){const n=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}const Ye=["classes","color","cornerRadius","dataIndex","endAngle","id","innerRadius","isFaded","isHighlighted","onClick","outerRadius","paddingAngle","startAngle","highlightScope"];function Je(e){return Re("MuiPieArc",e)}Ae("MuiPieArc",["root","highlighted","faded"]);const Qe=e=>{const{classes:i,id:n,isFaded:a,isHighlighted:r,dataIndex:d}=e,g={root:["root",`series-${n}`,`data-index-${d}`,r&&"highlighted",a&&"faded"]};return xe(g,Je,i)},Ze=me(be.path,{name:"MuiPieArc",slot:"Root",overridesResolver:(e,i)=>i.arc})(({theme:e})=>({stroke:(e.vars||e).palette.background.paper,transition:"opacity 0.2s ease-in, fill 0.2s ease-in, filter 0.2s ease-in"}));function ze(e){const{classes:i,color:n,cornerRadius:a,dataIndex:r,endAngle:d,id:g,innerRadius:t,isFaded:R,isHighlighted:u,onClick:s,outerRadius:b,paddingAngle:l,startAngle:o}=e,m=G(e,Ye),f={id:g,dataIndex:r,classes:i,color:n,isFaded:R,isHighlighted:u},v=Qe(f),h=we();return j.jsx(Ze,T({d:Q([o,d,l,t,b,a],(p,A,y,P,L,_)=>Le().cornerRadius(_)({padAngle:y,startAngle:p,endAngle:A,innerRadius:P,outerRadius:L})),visibility:Q([o,d],(p,A)=>p===A?"hidden":"visible"),onClick:s,cursor:s?"pointer":"unset",ownerState:f,className:v.root,fill:f.color,opacity:f.isFaded?.3:1,filter:f.isHighlighted?"brightness(120%)":"none",strokeWidth:1,strokeLinejoin:"round"},m,h({type:"pie",seriesId:g,dataIndex:r})))}const en={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,color:g,isFaded:t})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:n,startAngle:(a+r)/2,endAngle:(a+r)/2,paddingAngle:d,fill:g,opacity:t?.3:1}),leave:({innerRadius:e,startAngle:i,endAngle:n})=>({innerRadius:e,outerRadius:e,startAngle:(i+n)/2,endAngle:(i+n)/2}),enter:({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a})=>({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a}),update:({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,color:g,isFaded:t})=>({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,fill:g,opacity:t?.3:1}),config:{tension:120,friction:14,clamp:!0}},nn={keys:e=>e.id,from:({innerRadius:e,outerRadius:i,arcLabelRadius:n,cornerRadius:a,startAngle:r,endAngle:d,paddingAngle:g})=>({innerRadius:e,outerRadius:(e+i)/2,cornerRadius:a,arcLabelRadius:n,startAngle:(r+d)/2,endAngle:(r+d)/2,paddingAngle:g,opacity:0}),leave:({innerRadius:e,startAngle:i,endAngle:n})=>({innerRadius:e,outerRadius:e,arcLabelRadius:e,startAngle:(i+n)/2,endAngle:(i+n)/2,opacity:0}),enter:({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a,arcLabelRadius:r})=>({innerRadius:e,outerRadius:i,startAngle:n,endAngle:a,arcLabelRadius:r,opacity:1}),update:({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,arcLabelRadius:g})=>({innerRadius:e,outerRadius:i,cornerRadius:n,startAngle:a,endAngle:r,paddingAngle:d,arcLabelRadius:g,opacity:1}),config:{tension:120,friction:14,clamp:!0}};function Ce(e){const{id:i,data:n,faded:a,highlighted:r,paddingAngle:d=0,innerRadius:g=0,arcLabelRadius:t,outerRadius:R,cornerRadius:u=0}=e,{isFaded:s,isHighlighted:b}=ye();return re.useMemo(()=>n.map((o,m)=>{const f={seriesId:i,dataIndex:m},v=b(f),h=!v&&s(f),p=T({additionalRadius:0},h&&a||v&&r||{}),A=Math.max(0,Math.PI*(p.paddingAngle??d)/180),y=Math.max(0,p.innerRadius??g),P=Math.max(0,p.outerRadius??R+p.additionalRadius),L=p.cornerRadius??u,_=p.arcLabelRadius??t??(y+P)/2;return T({},o,p,{isFaded:h,isHighlighted:v,paddingAngle:A,innerRadius:y,outerRadius:P,cornerRadius:L,arcLabelRadius:_})}),[u,g,R,d,t,n,a,r,s,b,i])}const sn=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"];function tn(e){const{slots:i,slotProps:n,innerRadius:a=0,outerRadius:r,cornerRadius:d=0,paddingAngle:g=0,id:t,highlighted:R,faded:u={additionalRadius:-5},data:s,onItemClick:b,skipAnimation:l}=e,o=G(e,sn),m=Ce({innerRadius:a,outerRadius:r,cornerRadius:d,paddingAngle:g,id:t,highlighted:R,faded:u,data:s}),f=Pe(m,T({},en,{immediate:l})),{highlightScope:v}=ye();if(s.length===0)return null;const h=(i==null?void 0:i.pieArc)??ze;return j.jsx("g",T({},o,{children:f(({startAngle:p,endAngle:A,paddingAngle:y,innerRadius:P,outerRadius:L,cornerRadius:_},k,M,C)=>j.jsx(h,T({startAngle:p,endAngle:A,paddingAngle:y,innerRadius:P,outerRadius:L,cornerRadius:_,id:t,color:k.color,dataIndex:C,highlightScope:v,isFaded:k.isFaded,isHighlighted:k.isHighlighted,onClick:b&&(I=>{b(I,{type:"pie",seriesId:t,dataIndex:C},k)})},n==null?void 0:n.pieArc)))}))}const an=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style"];function rn(e){return Re("MuiPieArcLabel",e)}Ae("MuiPieArcLabel",["root","highlighted","faded"]);const on=e=>{const{classes:i,id:n,isFaded:a,isHighlighted:r}=e,d={root:["root",`series-${n}`,r&&"highlighted",a&&"faded"]};return xe(d,rn,i)},dn=me(be.text,{name:"MuiPieArcLabel",slot:"Root",overridesResolver:(e,i)=>i.root})(({theme:e})=>({fill:(e.vars||e).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none"})),fe=(e,i)=>(n,a,r,d,g)=>{if(!e)return 0;const[t,R]=Le().cornerRadius(g).centroid({padAngle:r,startAngle:n,endAngle:a,innerRadius:d,outerRadius:d});return i==="x"?t:R};function ln(e){const{id:i,classes:n,color:a,startAngle:r,endAngle:d,paddingAngle:g,arcLabelRadius:t,cornerRadius:R,formattedArcLabel:u,isHighlighted:s,isFaded:b,style:l}=e,o=G(e,an),f=on({id:i,classes:n,isFaded:b,isHighlighted:s});return j.jsx(dn,T({className:f.root},o,{style:T({x:Q([r,d,g,t,R],fe(u,"x")),y:Q([r,d,g,t,R],fe(u,"y"))},l),children:u}))}const cn=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],un=["startAngle","endAngle","paddingAngle","innerRadius","outerRadius","arcLabelRadius","cornerRadius"],gn=180/Math.PI;function hn(e,i,n){var r;if(!e||(n.endAngle-n.startAngle)*gn<i)return null;switch(e){case"label":return he(n.label,"arc");case"value":return(r=n.value)==null?void 0:r.toString();case"formattedValue":return n.formattedValue;default:return e(T({},n,{label:he(n.label,"arc")}))}}function fn(e){const{arcLabel:i,arcLabelMinAngle:n=0,arcLabelRadius:a,cornerRadius:r=0,data:d,faded:g={additionalRadius:-5},highlighted:t,id:R,innerRadius:u,outerRadius:s,paddingAngle:b=0,skipAnimation:l,slotProps:o,slots:m}=e,f=G(e,cn),v=Ce({innerRadius:u,outerRadius:s,arcLabelRadius:a,cornerRadius:r,paddingAngle:b,id:R,highlighted:t,faded:g,data:d}),h=Pe(v,T({},nn,{immediate:l}));if(d.length===0)return null;const p=(m==null?void 0:m.pieArcLabel)??ln;return j.jsx("g",T({},f,{children:h((A,y)=>{let{startAngle:P,endAngle:L,paddingAngle:_,innerRadius:k,outerRadius:M,arcLabelRadius:C,cornerRadius:I}=A,w=G(A,un);return j.jsx(p,T({startAngle:P,endAngle:L,paddingAngle:_,innerRadius:k,outerRadius:M,arcLabelRadius:C,cornerRadius:I,style:w,id:R,color:y.color,isFaded:y.isFaded,isHighlighted:y.isHighlighted,formattedArcLabel:hn(i,n,y)},o==null?void 0:o.pieArcLabel))})}))}function pe(e,i){const{height:n,width:a}=i,{cx:r,cy:d}=e,g=Math.min(a,n)/2,t=O(r??"50%",a),R=O(d??"50%",n);return{cx:t,cy:R,availableRadius:g}}function pn(e){const{skipAnimation:i,slots:n,slotProps:a,onItemClick:r}=e,d=Te(),{left:g,top:t,width:R,height:u}=re.useContext(Fe),s=He(i);if(d===void 0)return null;const{series:b,seriesOrder:l}=d;return j.jsxs("g",{children:[l.map(o=>{const{innerRadius:m,outerRadius:f,cornerRadius:v,paddingAngle:h,data:p,cx:A,cy:y,highlighted:P,faded:L}=b[o],{cx:_,cy:k,availableRadius:M}=pe({cx:A,cy:y},{width:R,height:u}),C=O(f??M,M),I=O(m??0,M);return j.jsx("g",{transform:`translate(${g+_}, ${t+k})`,children:j.jsx(tn,{innerRadius:I,outerRadius:C,cornerRadius:v,paddingAngle:h,id:o,data:p,skipAnimation:s,highlighted:P,faded:L,onItemClick:r,slots:n,slotProps:a})},o)}),l.map(o=>{const{innerRadius:m,outerRadius:f,arcLabelRadius:v,cornerRadius:h,paddingAngle:p,arcLabel:A,arcLabelMinAngle:y,data:P,cx:L,cy:_}=b[o],{cx:k,cy:M,availableRadius:C}=pe({cx:L,cy:_},{width:R,height:u}),I=O(f??C,C),w=O(m??0,C),c=v===void 0?(I+w)/2:O(v,C);return j.jsx("g",{transform:`translate(${g+k}, ${t+M})`,children:j.jsx(fn,{innerRadius:w,outerRadius:I??C,arcLabelRadius:c,cornerRadius:h,paddingAngle:p,id:o,data:P,skipAnimation:s,arcLabel:A,arcLabelMinAngle:y,slots:n,slotProps:a})},o)})]})}const mn=["xAxis","yAxis","series","width","height","margin","colors","sx","tooltip","axisHighlight","skipAnimation","legend","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className"],xn={top:5,bottom:5,left:5,right:100},Rn={top:5,bottom:5,left:100,right:5},An=re.forwardRef(function(i,n){const a=Oe({props:i,name:"MuiPieChart"}),{xAxis:r,yAxis:d,series:g,width:t,height:R,margin:u,colors:s,sx:b,tooltip:l={trigger:"item"},axisHighlight:o={x:"none",y:"none"},skipAnimation:m,legend:f,topAxis:v=null,leftAxis:h=null,rightAxis:p=null,bottomAxis:A=null,children:y,slots:P,slotProps:L,onItemClick:_,loading:k,highlightedItem:M,onHighlightChange:C,className:I}=a,w=G(a,mn),c=ve(),x=T({},c?Rn:xn,u),N=T({direction:"column",position:{vertical:"middle",horizontal:c?"left":"right"}},f);return j.jsxs($e,T({},w,{ref:n,series:g.map(S=>T({type:"pie"},S)),width:t,height:R,margin:x,xAxis:r??[{id:Ne,scaleType:"point",data:[...new Array(Math.max(...g.map(S=>S.data.length)))].map((S,D)=>D)}],yAxis:d,colors:s,sx:b,disableAxisListener:(l==null?void 0:l.trigger)!=="axis"&&(o==null?void 0:o.x)==="none"&&(o==null?void 0:o.y)==="none",highlightedItem:M,onHighlightChange:C,className:I,skipAnimation:m,children:[j.jsx(Se,{topAxis:v,leftAxis:h,rightAxis:p,bottomAxis:A,slots:P,slotProps:L}),j.jsx(pn,{slots:P,slotProps:L,onItemClick:_}),j.jsx(Be,{loading:k,slots:P,slotProps:L}),j.jsx(De,T({},N,{slots:P,slotProps:L})),j.jsx(Ue,T({},o)),!k&&j.jsx(Ee,T({},l,{slots:P,slotProps:L})),y]}))}),bn="_tableList_1bbdb_41",yn="_scoreBox_1bbdb_60",Pn="_scoreValue_1bbdb_76",Ln="_scoreList_1bbdb_88",Cn="_scoreRow_1bbdb_97",vn="_listIcon_1bbdb_104",In="_listColumn_1bbdb_121",jn="_units_1bbdb_131",_n="_miniGraphBox_1bbdb_136",ae={tableList:bn,scoreBox:yn,scoreValue:Pn,scoreList:Ln,scoreRow:Cn,listIcon:vn,listColumn:In,units:jn,miniGraphBox:_n};function Hn({label:e,value:i,maxValue:n,size:a=80,showValue:r,color:d="#444444",bgColor:g=Ie.bgSubdued1,valueFormat:t="percent"}){return j.jsxs("div",{className:ae.scoreBox,children:[j.jsx(An,{width:a,height:a,series:[{outerRadius:a/2-5,innerRadius:Math.floor((a/2-5)*.8),paddingAngle:4,startAngle:-180,endAngle:180,cx:a/2-5,cy:a/2-5,data:[{value:i,color:d},{value:n-i,color:g}]}]}),r&&j.jsxs("div",{className:ae.scoreValue,style:{height:`${a}px`,fontSize:`${Math.floor(a*.25)}px`},children:[t==="percent"?`${(i*100).toFixed(0)}`:i.toFixed(1),t==="percent"&&j.jsx("span",{className:ae.units,children:"%"})]}),e&&j.jsx("label",{children:e})]})}export{An as P,Hn as S,ae as s};
